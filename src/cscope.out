cscope 15 /home/hoover/scratch/258-stockfish/development-stockfish/src               0000428284
	@benchmark.cpp

21 
	~<f¡»am
>

22 
	~<io¡»am
>

23 
	~<i¡»am
>

24 
	~<veùÜ
>

26 
	~"misc.h
"

27 
	~"pos™iÚ.h
"

28 
	~"£¬ch.h
"

29 
	~"th»ad.h
"

30 
	~"uci.h
"

32 
usšg
 
Çme¥aû
 
	g¡d
;

34 
	gÇme¥aû
 {

36 cÚ¡ 
	gveùÜ
<
	g¡ršg
> 
	gDeçuÉs
 = {

99 
	$b’chm¬k
(cÚ¡ 
Pos™iÚ
& 
cu¼’t
, 
i¡»am
& 
is
) {

101 
¡ršg
 
tok’
;

102 
veùÜ
<
¡ršg
> 
ãns
;

103 
S—rch
::
Lim™sTy³
 
lim™s
;

106 
¡ršg
 
‰Size
 = (
is
 >> 
tok’
) ?oken : "16";

107 
¡ršg
 
th»ads
 = (
is
 >> 
tok’
) ?oken : "1";

108 
¡ršg
 
lim™
 = (
is
 >> 
tok’
) ?oken : "13";

109 
¡ršg
 
ãnFe
 = (
is
 >> 
tok’
) ?oken : "default";

110 
¡ršg
 
lim™Ty³
 = (
is
 >> 
tok’
) ?oken : "depth";

112 
O±iÚs
["Hash"] = 
‰Size
;

113 
O±iÚs
["Th»ads"] = 
th»ads
;

114 
S—rch
::
	`ş—r
();

116 ià(
lim™Ty³
 == "time")

117 
lim™s
.
mov‘ime
 = 
	`¡oi
(
lim™
);

119 ià(
lim™Ty³
 == "nodes")

120 
lim™s
.
nodes
 = 
	`¡Şl
(
lim™
);

122 ià(
lim™Ty³
 == "mate")

123 
lim™s
.
m©e
 = 
	`¡oi
(
lim™
);

126 
lim™s
.
d•th
 = 
	`¡oi
(
lim™
);

128 ià(
ãnFe
 == "default")

129 
ãns
 = 
DeçuÉs
;

131 ià(
ãnFe
 == "current")

132 
ãns
.
	`push_back
(
cu¼’t
.
	`ãn
());

136 
¡ršg
 
ãn
;

137 
if¡»am
 
	`fe
(
ãnFe
);

139 ià(!
fe
.
	`is_İ’
())

141 
û¼
 << "UÇbËØİ’ f" << 
ãnFe
 << 
’dl
;

145 
	`g‘lše
(
fe
, 
ãn
))

146 ià(!
ãn
.
	`em±y
())

147 
ãns
.
	`push_back
(
ãn
);

149 
fe
.
	`şo£
();

152 
ušt64_t
 
nodes
 = 0;

153 
TimePošt
 
–­£d
 = 
	`now
();

154 
Pos™iÚ
 
pos
;

156 
size_t
 
i
 = 0; i < 
ãns
.
	`size
(); ++i)

158 
S‹Li¡PŒ
 
	`¡©es
(
Ãw
 
¡d
::
deque
<
S‹Info
>(1));

159 
pos
.
	`£t
(
ãns
[
i
], 
O±iÚs
["UCI_Chess960"], &
¡©es
->
	`back
(), 
Th»ads
.
	`maš
());

161 
û¼
 << "\nPos™iÚ: " << 
i
 + 1 << '/' << 
ãns
.
	`size
(è<< 
’dl
;

163 ià(
lim™Ty³
 == "perft")

164 
nodes
 +ğ
S—rch
::
	`³rá
(
pos
, 
lim™s
.
d•th
 * 
ONE_PLY
);

168 
lim™s
.
¡¬tTime
 = 
	`now
();

169 
Th»ads
.
	`¡¬t_thškšg
(
pos
, 
¡©es
, 
lim™s
);

170 
Th»ads
.
	`maš
()->
	`wa™_fÜ_£¬ch_fšished
();

171 
nodes
 +ğ
Th»ads
.
	`nodes_£¬ched
();

175 
–­£d
 = 
	`now
() -ƒlapsed + 1;

177 
	`dbg_´št
();

179 
û¼
 << "\n==========================="

180 << "\nTÙ®im(msè: " << 
–­£d


181 << "\nNode £¬ched : " << 
nodes


182 << "\nNodes/£cÚd : " << 1000 * 
nodes
 / 
–­£d
 << 
’dl
;

183 
	}
}

	@bitbase.cpp

21 
	~<®gÜ™hm
>

22 
	~<ÿs£¹
>

23 
	~<num”ic
>

24 
	~<veùÜ
>

26 
	~"b™bßrd.h
"

27 
	~"ty³s.h
"

29 
	gÇme¥aû
 {

32 cÚ¡ 
	gMAX_INDEX
 = 2*24*64*64;

35 
ušt32_t
 
	gKPKB™ba£
[
MAX_INDEX
 / 32];

46 
šdex
(
CŞÜ
 
us
, 
Squ¬e
 
bksq
, Squ¬
wksq
, Squ¬
psq
) {

47  
	gwksq
 | (
	gbksq
 << 6è| (
	gus
 << 12è| (
fe_of
(
psq
è<< 13è| ((
	gRANK_7
 - 
¿nk_of
(psq)) << 15);

50 
	eResuÉ
 {

51 
	gINVALID
 = 0,

52 
	gUNKNOWN
 = 1,

53 
	gDRAW
 = 2,

54 
	gWIN
 = 4

57 
	gResuÉ
& 
	gİ”©Ü
|=(
ResuÉ
& 
r
, ResuÉ 
	gv
è{  
	gr
 = ResuÉÔ | 
v
); }

59 
	sKPKPos™iÚ
 {

60 
KPKPos™iÚ
() = ;

61 
ex¶ic™
 
KPKPos™iÚ
(
idx
);

62 
İ”©Ü
 
ResuÉ
(ècÚ¡ {  
	g»suÉ
; }

63 
ResuÉ
 
şassify
(cÚ¡ 
¡d
::
veùÜ
<
KPKPos™iÚ
>& 
db
)

64 {  
us
 =ğ
WHITE
 ? 
şassify
<WHITE>(
db
è: cÏssify<
BLACK
>(db); }

66 
	g‹m¶©e
<
CŞÜ
 
	gUs
> 
ResuÉ
 
şassify
(cÚ¡ 
¡d
::
veùÜ
<
KPKPos™iÚ
>& 
db
);

68 
CŞÜ
 
	gus
;

69 
Squ¬e
 
	gksq
[
COLOR_NB
], 
	gpsq
;

70 
ResuÉ
 
	g»suÉ
;

76 
boŞ
 
	gB™ba£s
::
	$´obe
(
Squ¬e
 
wksq
, Squ¬
wpsq
, Squ¬
bksq
, 
CŞÜ
 
us
) {

78 
	`as£¹
(
	`fe_of
(
wpsq
è<ğ
FILE_D
);

80 
idx
 = 
	`šdex
(
us
, 
bksq
, 
wksq
, 
wpsq
);

81  
KPKB™ba£
[
idx
 / 32] & (1 << (idx & 0x1F));

82 
	}
}

85 
	gB™ba£s
::
	$š™
() {

87 
¡d
::
veùÜ
<
KPKPos™iÚ
> 
	`db
(
MAX_INDEX
);

88 
idx
, 
»³©
 = 1;

91 
idx
 = 0; idx < 
MAX_INDEX
; ++idx)

92 
db
[
idx
] = 
	`KPKPos™iÚ
(idx);

96 
»³©
)

97 
»³©
 = 
idx
 = 0; idx < 
MAX_INDEX
; ++idx)

98 
»³©
 |ğ(
db
[
idx
] =ğ
UNKNOWN
 && db[idx].
	`şassify
(db) != UNKNOWN);

101 
idx
 = 0; idx < 
MAX_INDEX
; ++idx)

102 ià(
db
[
idx
] =ğ
WIN
)

103 
KPKB™ba£
[
idx
 / 32] |= 1 << (idx & 0x1F);

104 
	}
}

107 
	gÇme¥aû
 {

109 
	gKPKPos™iÚ
::
KPKPos™iÚ
(
idx
) {

111 
ksq
[
WHITE
] = 
Squ¬e
((
idx
 >> 0) & 0x3F);

112 
	gksq
[
BLACK
] = 
Squ¬e
((
idx
 >> 6) & 0x3F);

113 
	gus
 = 
CŞÜ
 ((
idx
 >> 12) & 0x01);

114 
	gpsq
 = 
make_squ¬e
(
Fe
((
idx
 >> 13è& 0x3), 
RANK_7
 - 
Rªk
((idx >> 15) & 0x7));

117 iàĞ
di¡ªû
(
ksq
[
WHITE
], ksq[
BLACK
]) <= 1

118 || 
ksq
[
WHITE
] =ğ
psq


119 || 
ksq
[
BLACK
] =ğ
psq


120 || (
us
 =ğ
WHITE
 && (
PawnA‰acks
[WHITE][
psq
] & 
ksq
[
BLACK
])))

121 
»suÉ
 = 
INVALID
;

124 iàĞ
	gus
 =ğ
WHITE


125 && 
¿nk_of
(
psq
è=ğ
RANK_7


126 && 
ksq
[
us
] !ğ
psq
 + 
NORTH


127 && ( 
di¡ªû
(
ksq
[~
us
], 
psq
 + 
NORTH
) > 1

128 || (
	gP£udoA‰acks
[
KING
][
ksq
[
us
]] & (
	gpsq
 + 
	gNORTH
))))

129 
	g»suÉ
 = 
WIN
;

132 iàĞ
	gus
 =ğ
BLACK


133 && ( !(
P£udoA‰acks
[
KING
][
ksq
[
us
]] & ~(P£udoA‰acks[KING][ksq[~us]] | 
PawnA‰acks
[~us][
psq
]))

134 || (
P£udoA‰acks
[
KING
][
ksq
[
us
]] & 
psq
 & ~PseudoAttacks[KING][ksq[~us]])))

135 
»suÉ
 = 
DRAW
;

139 
	g»suÉ
 = 
UNKNOWN
;

142 
	g‹m¶©e
<
CŞÜ
 
	gUs
>

143 
ResuÉ
 
	gKPKPos™iÚ
::
şassify
(cÚ¡ 
¡d
::
veùÜ
<
KPKPos™iÚ
>& 
db
) {

155 cÚ¡ 
CŞÜ
 
Them
 = (
Us
 =ğ
WHITE
 ? 
BLACK
 : WHITE);

156 cÚ¡ 
ResuÉ
 
	gGood
 = (
Us
 =ğ
WHITE
 ? 
WIN
 : 
DRAW
);

157 cÚ¡ 
ResuÉ
 
	gBad
 = (
Us
 =ğ
WHITE
 ? 
DRAW
 : 
WIN
);

159 
ResuÉ
 
	gr
 = 
INVALID
;

160 
B™bßrd
 
	gb
 = 
P£udoA‰acks
[
KING
][
ksq
[
Us
]];

162 
	gb
)

163 
	gr
 |ğ
Us
 =ğ
WHITE
 ? 
db
[
šdex
(
Them
, 
ksq
[Them] , 
pİ_lsb
(&
b
), 
psq
)]

164 : 
db
[
šdex
(
Them
, 
pİ_lsb
(&
b
), 
ksq
[Them] , 
psq
)];

166 ià(
	gUs
 =ğ
WHITE
)

168 ià(
¿nk_of
(
psq
è< 
RANK_7
)

169 
r
 |ğ
db
[
šdex
(
Them
, 
ksq
[Them], ksq[
Us
], 
psq
 + 
NORTH
)];

171 iàĞ
¿nk_of
(
psq
è=ğ
RANK_2


172 && 
psq
 + 
NORTH
 !ğ
ksq
[
Us
]

173 && 
psq
 + 
NORTH
 !ğ
ksq
[
Them
])

174 
r
 |ğ
db
[
šdex
(
Them
, 
ksq
[Them], ksq[
Us
], 
psq
 + 
NORTH
 + NORTH)];

177  
	g»suÉ
 = 
r
 & 
Good
 ? Good :„ & 
UNKNOWN
 ? UNKNOWN : 
Bad
;

	@bitboard.cpp

21 
	~<®gÜ™hm
>

23 
	~"b™bßrd.h
"

24 
	~"misc.h
"

26 
ušt8_t
 
	gPİCÁ16
[1 << 16];

27 
	gSqu¬eDi¡ªû
[
SQUARE_NB
][SQUARE_NB];

29 
B™bßrd
 
	gRookMasks
 [
SQUARE_NB
];

30 
B™bßrd
 
	gRookMagics
 [
SQUARE_NB
];

31 
B™bßrd
* 
	gRookA‰acks
[
SQUARE_NB
];

32 
	gRookShiás
 [
SQUARE_NB
];

34 
B™bßrd
 
	gBishİMasks
 [
SQUARE_NB
];

35 
B™bßrd
 
	gBishİMagics
 [
SQUARE_NB
];

36 
B™bßrd
* 
	gBishİA‰acks
[
SQUARE_NB
];

37 
	gBishİShiás
 [
SQUARE_NB
];

39 
B™bßrd
 
	gSqu¬eBB
[
SQUARE_NB
];

40 
B™bßrd
 
	gFeBB
[
FILE_NB
];

41 
B™bßrd
 
	gRªkBB
[
RANK_NB
];

42 
B™bßrd
 
	gAdjaûÁFesBB
[
FILE_NB
];

43 
B™bßrd
 
	gInFrÚtBB
[
COLOR_NB
][
RANK_NB
];

44 
B™bßrd
 
	gB‘w“nBB
[
SQUARE_NB
][SQUARE_NB];

45 
B™bßrd
 
	gLšeBB
[
SQUARE_NB
][SQUARE_NB];

46 
B™bßrd
 
	gDi¡ªûRšgBB
[
SQUARE_NB
][8];

47 
B™bßrd
 
	gFÜw¬dBB
[
COLOR_NB
][
SQUARE_NB
];

48 
B™bßrd
 
	gPas£dPawnMask
[
COLOR_NB
][
SQUARE_NB
];

49 
B™bßrd
 
	gPawnA‰ackS·n
[
COLOR_NB
][
SQUARE_NB
];

50 
B™bßrd
 
	gP£udoA‰acks
[
PIECE_TYPE_NB
][
SQUARE_NB
];

51 
B™bßrd
 
	gPawnA‰acks
[
COLOR_NB
][
SQUARE_NB
];

53 
	gÇme¥aû
 {

56 cÚ¡ 
ušt64_t
 
	gDeBruijn64
 = 0x3F79D71B4CB0A89ULL;

57 cÚ¡ 
ušt32_t
 
	gDeBruijn32
 = 0x783A9B23;

59 
	gMSBTabË
[256];

60 
Squ¬e
 
	gBSFTabË
[
SQUARE_NB
];

61 
B™bßrd
 
	gRookTabË
[0x19000];

62 
B™bßrd
 
	gBishİTabË
[0x1480];

64 (
	gFn
)(
	tSqu¬e
, 
	tB™bßrd
);

66 
š™_magics
(
B™bßrd
 
bË
[], B™bßrd* 
©cks
[], B™bßrd 
magics
[],

67 
B™bßrd
 
masks
[], 
shiás
[], 
Squ¬e
 
d–s
[], 
Fn
 
šdex
);

72 
bsf_šdex
(
B™bßrd
 
b
) {

73 
	gb
 ^ğ
b
 - 1;

74  
	gIs64B™
 ? (
b
 * 
	gDeBruijn64
) >> 58

75 : (((
b
è^ (b >> 32)è* 
DeBruijn32
) >> 26;

81 
pİcouÁ16
(
u
) {

82 
	gu
 -ğ(
u
 >> 1) & 0x5555U;

83 
	gu
 = ((
u
 >> 2) & 0x3333U) + (u & 0x3333U);

84 
	gu
 = ((
u
 >> 4) + u) & 0x0F0FU;

85  (
	gu
 * 0x0101U) >> 8;

89 #ifdeà
NO_BSF


93 
Squ¬e
 
	$lsb
(
B™bßrd
 
b
) {

94 
	`as£¹
(
b
);

95  
BSFTabË
[
	`bsf_šdex
(
b
)];

96 
	}
}

98 
Squ¬e
 
	$msb
(
B™bßrd
 
b
) {

100 
	`as£¹
(
b
);

101 
b32
;

102 
»suÉ
 = 0;

104 ià(
b
 > 0xFFFFFFFF)

106 
b
 >>= 32;

107 
»suÉ
 = 32;

110 
b32
 = (
b
);

112 ià(
b32
 > 0xFFFF)

114 
b32
 >>= 16;

115 
»suÉ
 += 16;

118 ià(
b32
 > 0xFF)

120 
b32
 >>= 8;

121 
»suÉ
 += 8;

124  
	`Squ¬e
(
»suÉ
 + 
MSBTabË
[
b32
]);

125 
	}
}

133 cÚ¡ 
	g¡d
::
¡ršg
 
B™bßrds
::
	$´‘ty
(
B™bßrd
 
b
) {

135 
¡d
::
¡ršg
 
s
 = "+---+---+---+---+---+---+---+---+\n";

137 
Rªk
 
r
 = 
RANK_8
;„ >ğ
RANK_1
; --r)

139 
Fe
 
f
 = 
FILE_A
; f <ğ
FILE_H
; ++f)

140 
s
 +ğ
b
 & 
	`make_squ¬e
(
f
, 
r
) ? "| X " : "| ";

142 
s
 += "|\n+---+---+---+---+---+---+---+---+\n";

145  
s
;

146 
	}
}

152 
	gB™bßrds
::
	$š™
() {

154 
i
 = 0; i < (1 << 16); ++i)

155 
PİCÁ16
[
i
] = (
ušt8_t
è
	`pİcouÁ16
(i);

157 
Squ¬e
 
s
 = 
SQ_A1
; s <ğ
SQ_H8
; ++s)

159 
Squ¬eBB
[
s
] = 1ULL << s;

160 
BSFTabË
[
	`bsf_šdex
(
Squ¬eBB
[
s
])] = s;

163 
B™bßrd
 
b
 = 2; b < 256; ++b)

164 
MSBTabË
[
b
] = MSBTabË[b - 1] + !
	`mÜe_thª_Úe
(b);

166 
Fe
 
f
 = 
FILE_A
; f <ğ
FILE_H
; ++f)

167 
FeBB
[
f
] = f > 
FILE_A
 ? FeBB[à- 1] << 1 : 
FeABB
;

169 
Rªk
 
r
 = 
RANK_1
;„ <ğ
RANK_8
; ++r)

170 
RªkBB
[
r
] =„ > 
RANK_1
 ? RªkBB[¸- 1] << 8 : 
Rªk1BB
;

172 
Fe
 
f
 = 
FILE_A
; f <ğ
FILE_H
; ++f)

173 
AdjaûÁFesBB
[
f
] = (à> 
FILE_A
 ? 
FeBB
[à- 1] : 0è| (à< 
FILE_H
 ? FileBB[f + 1] : 0);

175 
Rªk
 
r
 = 
RANK_1
;„ < 
RANK_8
; ++r)

176 
InFrÚtBB
[
WHITE
][
r
] = ~(InFrÚtBB[
BLACK
][¸+ 1] = InFrÚtBB[BLACK][r] | 
RªkBB
[r]);

178 
CŞÜ
 
c
 = 
WHITE
; c <ğ
BLACK
; ++c)

179 
Squ¬e
 
s
 = 
SQ_A1
; s <ğ
SQ_H8
; ++s)

181 
FÜw¬dBB
[
c
][
s
] = 
InFrÚtBB
[c][
	`¿nk_of
(s)] & 
FeBB
[
	`fe_of
(s)];

182 
PawnA‰ackS·n
[
c
][
s
] = 
InFrÚtBB
[c][
	`¿nk_of
(s)] & 
AdjaûÁFesBB
[
	`fe_of
(s)];

183 
Pas£dPawnMask
[
c
][
s
] = 
FÜw¬dBB
[c][s] | 
PawnA‰ackS·n
[c][s];

186 
Squ¬e
 
s1
 = 
SQ_A1
; s1 <ğ
SQ_H8
; ++s1)

187 
Squ¬e
 
s2
 = 
SQ_A1
; s2 <ğ
SQ_H8
; ++s2)

188 ià(
s1
 !ğ
s2
)

190 
Squ¬eDi¡ªû
[
s1
][
s2
] = 
¡d
::
	`max
(
di¡ªû
<
Fe
>(s1, s2), di¡ªû<
Rªk
>(s1, s2));

191 
Di¡ªûRšgBB
[
s1
][
Squ¬eDi¡ªû
[s1][
s2
] - 1] |= s2;

194 
¡•s
[][5] = { {}, { 7, 9 }, { 6, 10, 15, 17 }, {}, {}, {}, { 1, 7, 8, 9 } };

196 
CŞÜ
 
c
 = 
WHITE
; c <ğ
BLACK
; ++c)

197 
P›ûTy³
 
±
 : { 
PAWN
, 
KNIGHT
, 
KING
 })

198 
Squ¬e
 
s
 = 
SQ_A1
; s <ğ
SQ_H8
; ++s)

199 
i
 = 0; 
¡•s
[
±
][i]; ++i)

201 
Squ¬e
 
to
 = 
s
 + 
	`Squ¬e
(
c
 =ğ
WHITE
 ? 
¡•s
[
±
][
i
] : -steps[pt][i]);

203 ià(
	`is_ok
(
to
è&& 
	`di¡ªû
(
s
,o) < 3)

205 ià(
±
 =ğ
PAWN
)

206 
PawnA‰acks
[
c
][
s
] |ğ
to
;

208 
P£udoA‰acks
[
±
][
s
] |ğ
to
;

212 
Squ¬e
 
RookD–s
[] = { 
NORTH
, 
EAST
, 
SOUTH
, 
WEST
 };

213 
Squ¬e
 
BishİD–s
[] = { 
NORTH_EAST
, 
SOUTH_EAST
, 
SOUTH_WEST
, 
NORTH_WEST
 };

215 
	`š™_magics
(
RookTabË
, 
RookA‰acks
, 
RookMagics
, 
RookMasks
, 
RookShiás
, 
RookD–s
, 
magic_šdex
<
ROOK
>);

216 
	`š™_magics
(
BishİTabË
, 
BishİA‰acks
, 
BishİMagics
, 
BishİMasks
, 
BishİShiás
, 
BishİD–s
, 
magic_šdex
<
BISHOP
>);

218 
Squ¬e
 
s1
 = 
SQ_A1
; s1 <ğ
SQ_H8
; ++s1)

220 
P£udoA‰acks
[
QUEEN
][
s1
] = P£udoA‰acks[
BISHOP
][s1] = 
©cks_bb
<BISHOP>(s1, 0);

221 
P£udoA‰acks
[
QUEEN
][
s1
] |ğP£udoA‰acks[ 
ROOK
][s1] = 
©cks_bb
< ROOK>(s1, 0);

223 
P›ûTy³
 
±
 : { 
BISHOP
, 
ROOK
 })

224 
Squ¬e
 
s2
 = 
SQ_A1
; s2 <ğ
SQ_H8
; ++s2)

226 ià(!(
P£udoA‰acks
[
±
][
s1
] & 
s2
))

229 
LšeBB
[
s1
][
s2
] = (
	`©cks_bb
(
±
, s1, 0) &‡ttacks_bb(pt, s2, 0)) | s1 | s2;

230 
B‘w“nBB
[
s1
][
s2
] = 
	`©cks_bb
(
±
, s1, 
Squ¬eBB
[s2]) &‡ttacks_bb(pt, s2, SquareBB[s1]);

233 
	}
}

236 
	gÇme¥aû
 {

238 
B™bßrd
 
¦idšg_©ck
(
Squ¬e
 
d–s
[], Squ¬
sq
, B™bßrd 
occup›d
) {

240 
B™bßrd
 
	g©ck
 = 0;

242 
	gi
 = 0; i < 4; ++i)

243 
Squ¬e
 
	gs
 = 
sq
 + 
d–s
[
i
];

244 
is_ok
(
s
è&& 
di¡ªû
(s, s - 
d–s
[
i
]) == 1;

245 
	gs
 +ğ
d–s
[
i
])

247 
©ck
 |ğ
s
;

249 ià(
	goccup›d
 & 
	gs
)

253  
	g©ck
;

262 
š™_magics
(
B™bßrd
 
bË
[], B™bßrd* 
©cks
[], B™bßrd 
magics
[],

263 
B™bßrd
 
masks
[], 
shiás
[], 
Squ¬e
 
d–s
[], 
Fn
 
šdex
) {

265 
	g£eds
[][
RANK_NB
] = { { 8977, 44560, 54343, 38998, 5731, 95205, 104912, 17020 },

268 
B™bßrd
 
	goccu·ncy
[4096], 
	g»ã»nû
[4096], 
	gedges
, 
	gb
;

269 
	gage
[4096] = {0}, 
	gcu¼’t
 = 0, 
	gi
, 
	gsize
;

272 
	g©cks
[
SQ_A1
] = 
bË
;

274 
Squ¬e
 
	gs
 = 
SQ_A1
; s <ğ
SQ_H8
; ++s)

277 
	gedges
 = ((
Rªk1BB
 | 
Rªk8BB
è& ~
¿nk_bb
(
s
)è| ((
FeABB
 | 
FeHBB
è& ~
fe_bb
(s));

284 
	gmasks
[
s
] = 
¦idšg_©ck
(
d–s
, s, 0è& ~
	gedges
;

285 
	gshiás
[
s
] = (
Is64B™
 ? 64 : 32è- 
pİcouÁ
(
masks
[s]);

289 
	gb
 = 
size
 = 0;

291 
	goccu·ncy
[
size
] = 
b
;

292 
	g»ã»nû
[
size
] = 
¦idšg_©ck
(
d–s
, 
s
, 
b
);

294 ià(
	gHasPext
)

295 
	g©cks
[
s
][
³xt
(
b
, 
masks
[s])] = 
»ã»nû
[
size
];

297 
	gsize
++;

298 
	gb
 = (
b
 - 
masks
[
s
]) & masks[s];

299 } 
	gb
);

303 ià(
	gs
 < 
	gSQ_H8
)

304 
	g©cks
[
s
 + 1] = 
©cks
[s] + 
size
;

306 ià(
	gHasPext
)

309 
PRNG
 
ºg
(
£eds
[
Is64B™
][
¿nk_of
(
s
)]);

315 
	gmagics
[
s
] = 
ºg
.
¥¬£_¿nd
<
B™bßrd
>();

316 
pİcouÁ
((
magics
[
s
] * 
masks
[s]) >> 56) < 6);

322 ++
	gcu¼’t
, 
	gi
 = 0; i < 
	gsize
; ++i)

324 
	gidx
 = 
šdex
(
s
, 
occu·ncy
[
i
]);

326 ià(
	gage
[
idx
] < 
	gcu¼’t
)

328 
	gage
[
idx
] = 
cu¼’t
;

329 
	g©cks
[
s
][
idx
] = 
»ã»nû
[
i
];

331 ià(
	g©cks
[
s
][
idx
] !ğ
»ã»nû
[
i
])

334 } 
	gi
 < 
	gsize
);

	@bitboard.h

21 #iâdeà
BITBOARD_H_INCLUDED


22 
	#BITBOARD_H_INCLUDED


	)

24 
	~<¡ršg
>

26 
	~"ty³s.h
"

28 
Çme¥aû
 
	gB™ba£s
 {

30 
š™
();

31 
boŞ
 
´obe
(
Squ¬e
 
wksq
, Squ¬
wpsq
, Squ¬
bksq
, 
CŞÜ
 
us
);

35 
Çme¥aû
 
	gB™bßrds
 {

37 
š™
();

38 cÚ¡ 
	g¡d
::
¡ršg
 
´‘ty
(
B™bßrd
 
b
);

42 cÚ¡ 
B™bßrd
 
	gD¬kSqu¬es
 = 0xAA55AA55AA55AA55ULL;

44 cÚ¡ 
B™bßrd
 
	gFeABB
 = 0x0101010101010101ULL;

45 cÚ¡ 
B™bßrd
 
	gFeBBB
 = 
FeABB
 << 1;

46 cÚ¡ 
B™bßrd
 
	gFeCBB
 = 
FeABB
 << 2;

47 cÚ¡ 
B™bßrd
 
	gFeDBB
 = 
FeABB
 << 3;

48 cÚ¡ 
B™bßrd
 
	gFeEBB
 = 
FeABB
 << 4;

49 cÚ¡ 
B™bßrd
 
	gFeFBB
 = 
FeABB
 << 5;

50 cÚ¡ 
B™bßrd
 
	gFeGBB
 = 
FeABB
 << 6;

51 cÚ¡ 
B™bßrd
 
	gFeHBB
 = 
FeABB
 << 7;

53 cÚ¡ 
B™bßrd
 
	gRªk1BB
 = 0xFF;

54 cÚ¡ 
B™bßrd
 
	gRªk2BB
 = 
Rªk1BB
 << (8 * 1);

55 cÚ¡ 
B™bßrd
 
	gRªk3BB
 = 
Rªk1BB
 << (8 * 2);

56 cÚ¡ 
B™bßrd
 
	gRªk4BB
 = 
Rªk1BB
 << (8 * 3);

57 cÚ¡ 
B™bßrd
 
	gRªk5BB
 = 
Rªk1BB
 << (8 * 4);

58 cÚ¡ 
B™bßrd
 
	gRªk6BB
 = 
Rªk1BB
 << (8 * 5);

59 cÚ¡ 
B™bßrd
 
	gRªk7BB
 = 
Rªk1BB
 << (8 * 6);

60 cÚ¡ 
B™bßrd
 
	gRªk8BB
 = 
Rªk1BB
 << (8 * 7);

62 
Squ¬eDi¡ªû
[
SQUARE_NB
][SQUARE_NB];

64 
B™bßrd
 
Squ¬eBB
[
SQUARE_NB
];

65 
B™bßrd
 
FeBB
[
FILE_NB
];

66 
B™bßrd
 
RªkBB
[
RANK_NB
];

67 
B™bßrd
 
AdjaûÁFesBB
[
FILE_NB
];

68 
B™bßrd
 
InFrÚtBB
[
COLOR_NB
][
RANK_NB
];

69 
B™bßrd
 
B‘w“nBB
[
SQUARE_NB
][SQUARE_NB];

70 
B™bßrd
 
LšeBB
[
SQUARE_NB
][SQUARE_NB];

71 
B™bßrd
 
Di¡ªûRšgBB
[
SQUARE_NB
][8];

72 
B™bßrd
 
FÜw¬dBB
[
COLOR_NB
][
SQUARE_NB
];

73 
B™bßrd
 
Pas£dPawnMask
[
COLOR_NB
][
SQUARE_NB
];

74 
B™bßrd
 
PawnA‰ackS·n
[
COLOR_NB
][
SQUARE_NB
];

75 
B™bßrd
 
P£udoA‰acks
[
PIECE_TYPE_NB
][
SQUARE_NB
];

76 
B™bßrd
 
PawnA‰acks
[
COLOR_NB
][
SQUARE_NB
];

82 
šlše
 
B™bßrd
 
	gİ”©Ü
&(B™bßrd 
	gb
, 
Squ¬e
 
	gs
) {

83  
	gb
 & 
	gSqu¬eBB
[
s
];

86 
šlše
 
B™bßrd
 
	gİ”©Ü
|(B™bßrd 
	gb
, 
Squ¬e
 
	gs
) {

87  
	gb
 | 
	gSqu¬eBB
[
s
];

90 
šlše
 
B™bßrd
 
	gİ”©Ü
^(B™bßrd 
	gb
, 
Squ¬e
 
	gs
) {

91  
	gb
 ^ 
	gSqu¬eBB
[
s
];

94 
šlše
 
	gB™bßrd
& 
	gİ”©Ü
|=(
B™bßrd
& 
b
, 
Squ¬e
 
	gs
) {

95  
	gb
 |ğ
Squ¬eBB
[
s
];

98 
šlše
 
	gB™bßrd
& 
	gİ”©Ü
^=(
B™bßrd
& 
b
, 
Squ¬e
 
	gs
) {

99  
	gb
 ^ğ
Squ¬eBB
[
s
];

102 
šlše
 
boŞ
 
	$mÜe_thª_Úe
(
B™bßrd
 
b
) {

103  
b
 & (b - 1);

104 
	}
}

110 
šlše
 
B™bßrd
 
	$¿nk_bb
(
Rªk
 
r
) {

111  
RªkBB
[
r
];

112 
	}
}

114 
šlše
 
B™bßrd
 
	$¿nk_bb
(
Squ¬e
 
s
) {

115  
RªkBB
[
	`¿nk_of
(
s
)];

116 
	}
}

118 
šlše
 
B™bßrd
 
	$fe_bb
(
Fe
 
f
) {

119  
FeBB
[
f
];

120 
	}
}

122 
šlše
 
B™bßrd
 
	$fe_bb
(
Squ¬e
 
s
) {

123  
FeBB
[
	`fe_of
(
s
)];

124 
	}
}

129 
	g‹m¶©e
<
Squ¬e
 
	gD
>

130 
šlše
 
B™bßrd
 
	$shiá
(
B™bßrd
 
b
) {

131  
D
 =ğ
NORTH
 ? 
b
 << 8 : D =ğ
SOUTH
 ? b >> 8

132 : 
D
 =ğ
NORTH_EAST
 ? (
b
 & ~
FeHBB
è<< 9 : D =ğ
SOUTH_EAST
 ? (b & ~FileHBB) >> 7

133 : 
D
 =ğ
NORTH_WEST
 ? (
b
 & ~
FeABB
è<< 7 : D =ğ
SOUTH_WEST
 ? (b & ~FileABB) >> 9

135 
	}
}

141 
šlše
 
B™bßrd
 
	$adjaûÁ_fes_bb
(
Fe
 
f
) {

142  
AdjaûÁFesBB
[
f
];

143 
	}
}

151 
šlše
 
B™bßrd
 
	$b‘w“n_bb
(
Squ¬e
 
s1
, Squ¬
s2
) {

152  
B‘w“nBB
[
s1
][
s2
];

153 
	}
}

160 
šlše
 
B™bßrd
 
	$š_äÚt_bb
(
CŞÜ
 
c
, 
Rªk
 
r
) {

161  
InFrÚtBB
[
c
][
r
];

162 
	}
}

169 
šlše
 
B™bßrd
 
	$fÜw¬d_bb
(
CŞÜ
 
c
, 
Squ¬e
 
s
) {

170  
FÜw¬dBB
[
c
][
s
];

171 
	}
}

179 
šlše
 
B™bßrd
 
	$·wn_©ck_¥ª
(
CŞÜ
 
c
, 
Squ¬e
 
s
) {

180  
PawnA‰ackS·n
[
c
][
s
];

181 
	}
}

188 
šlše
 
B™bßrd
 
	$·s£d_·wn_mask
(
CŞÜ
 
c
, 
Squ¬e
 
s
) {

189  
Pas£dPawnMask
[
c
][
s
];

190 
	}
}

196 
šlše
 
boŞ
 
	$®igÃd
(
Squ¬e
 
s1
, Squ¬
s2
, Squ¬
s3
) {

197  
LšeBB
[
s1
][
s2
] & 
s3
;

198 
	}
}

204 
	g‹m¶©e
<
ty³Çme
 
	gT
> 
šlše
 
	$di¡ªû
(
T
 
x
, T 
y
è{  x < y ? y - x : x - y; 
	}
}

205 
	g‹m¶©e
<> 
šlše
 
	gdi¡ªû
<
	gSqu¬e
>(
Squ¬e
 
	gx
, Squ¬
	gy
è{  
	gSqu¬eDi¡ªû
[
x
][
y
]; }

207 
	g‹m¶©e
<
ty³Çme
 
	gT1
,y³Çm
	gT2
> 
šlše
 
di¡ªû
(
T2
 
x
, T2 
y
);

208 
	g‹m¶©e
<> 
šlše
 
	gdi¡ªû
<
	gFe
>(
Squ¬e
 
	gx
, Squ¬
	gy
è{  
di¡ªû
(
fe_of
(
x
), fe_of(
y
)); }

209 
	g‹m¶©e
<> 
šlše
 
	gdi¡ªû
<
	gRªk
>(
Squ¬e
 
	gx
, Squ¬
	gy
è{  
di¡ªû
(
¿nk_of
(
x
),„ªk_of(
y
)); }

215 
	g‹m¶©e
<
P›ûTy³
 
	gPt
>

216 
šlše
 
	$magic_šdex
(
Squ¬e
 
s
, 
B™bßrd
 
occup›d
) {

218 
B™bßrd
 
RookMasks
[
SQUARE_NB
];

219 
B™bßrd
 
RookMagics
[
SQUARE_NB
];

220 
RookShiás
[
SQUARE_NB
];

221 
B™bßrd
 
BishİMasks
[
SQUARE_NB
];

222 
B™bßrd
 
BishİMagics
[
SQUARE_NB
];

223 
BishİShiás
[
SQUARE_NB
];

225 
B™bßrd
* cÚ¡ 
Masks
 = 
Pt
 =ğ
ROOK
 ? 
RookMasks
 : 
BishİMasks
;

226 
B™bßrd
* cÚ¡ 
Magics
 = 
Pt
 =ğ
ROOK
 ? 
RookMagics
 : 
BishİMagics
;

227 * cÚ¡ 
Shiás
 = 
Pt
 =ğ
ROOK
 ? 
RookShiás
 : 
BishİShiás
;

229 ià(
HasPext
)

230  (
	`³xt
(
occup›d
, 
Masks
[
s
]));

232 ià(
Is64B™
)

233  (((
occup›d
 & 
Masks
[
s
]è* 
Magics
[s]è>> 
Shiás
[s]);

235 
lo
 = (
occup›d
è& (
Masks
[
s
]);

236 
hi
 = (
occup›d
 >> 32è& (
Masks
[
s
] >> 32);

237  (
lo
 * (
Magics
[
s
]è^ 
hi
 * (Magics[s] >> 32)è>> 
Shiás
[s];

238 
	}
}

240 
	g‹m¶©e
<
P›ûTy³
 
	gPt
>

241 
šlše
 
B™bßrd
 
	$©cks_bb
(
Squ¬e
 
s
, 
B™bßrd
 
occup›d
) {

243 
B™bßrd
* 
RookA‰acks
[
SQUARE_NB
];

244 
B™bßrd
* 
BishİA‰acks
[
SQUARE_NB
];

246  (
Pt
 =ğ
ROOK
 ? 
RookA‰acks
 : 
BishİA‰acks
)[
s
][
magic_šdex
<Pt>(s, 
occup›d
)];

247 
	}
}

249 
šlše
 
B™bßrd
 
	$©cks_bb
(
P›ûTy³
 
±
, 
Squ¬e
 
s
, 
B™bßrd
 
occup›d
) {

251 
	`as£¹
(
±
 !ğ
PAWN
);

253 
±
)

255 
BISHOP
:  
©cks_bb
<BISHOP>(
s
, 
occup›d
);

256 
ROOK
 :  
©cks_bb
<ROOK>(
s
, 
occup›d
);

257 
QUEEN
 :  
©cks_bb
<
BISHOP
>(
s
, 
occup›d
è|‡‰acks_bb<
ROOK
>(s, occupied);

258  :  
P£udoA‰acks
[
±
][
s
];

260 
	}
}

265 
šlše
 
	$pİcouÁ
(
B™bßrd
 
b
) {

267 #iâdeà
USE_POPCNT


269 
ušt8_t
 
PİCÁ16
[1 << 16];

270 uniÚ { 
B™bßrd
 
bb
; 
ušt16_t
 
u
[4]; } 
v
 = { 
b
 };

271  
PİCÁ16
[
v
.
u
[0]] + PopCnt16[v.u[1]] + PopCnt16[v.u[2]] + PopCnt16[v.u[3]];

273 #–ià
	`defšed
(
_MSC_VER
è|| defšed(
__INTEL_COMPILER
)

275  ()
	`_mm_pİút_u64
(
b
);

279  
	`__butš_pİcouÁÎ
(
b
);

282 
	}
}

287 #ià
defšed
(
__GNUC__
)

289 
šlše
 
Squ¬e
 
	$lsb
(
B™bßrd
 
b
) {

290 
	`as£¹
(
b
);

291  
	`Squ¬e
(
	`__butš_ùzÎ
(
b
));

292 
	}
}

294 
šlše
 
Squ¬e
 
	$msb
(
B™bßrd
 
b
) {

295 
	`as£¹
(
b
);

296  
	`Squ¬e
(63 ^ 
	`__butš_şzÎ
(
b
));

297 
	}
}

299 #–ià
defšed
(
_WIN64
è&& defšed(
_MSC_VER
)

301 
šlše
 
Squ¬e
 
	$lsb
(
B™bßrd
 
b
) {

302 
	`as£¹
(
b
);

303 
idx
;

304 
	`_B™SÿnFÜw¬d64
(&
idx
, 
b
);

305  (
Squ¬e
è
idx
;

306 
	}
}

308 
šlše
 
Squ¬e
 
	$msb
(
B™bßrd
 
b
) {

309 
	`as£¹
(
b
);

310 
idx
;

311 
	`_B™SÿnRev”£64
(&
idx
, 
b
);

312  (
Squ¬e
è
idx
;

313 
	}
}

317 
	#NO_BSF


318 

	)

319 
Squ¬e
 
lsb
(
B™bßrd
 
b
);

320 
Squ¬e
 
msb
(
B™bßrd
 
b
);

327 
šlše
 
Squ¬e
 
	$pİ_lsb
(
B™bßrd
* 
b
) {

328 cÚ¡ 
Squ¬e
 
s
 = 
	`lsb
(*
b
);

329 *
b
 &= *b - 1;

330  
s
;

331 
	}
}

337 
šlše
 
Squ¬e
 
	$äÚtmo¡_sq
(
CŞÜ
 
c
, 
B™bßrd
 
b
è{  c =ğ
WHITE
 ? 
	`msb
(bè: 
	`lsb
(b); 
	}
}

338 
šlše
 
Squ¬e
 
	$backmo¡_sq
(
CŞÜ
 
c
, 
B™bßrd
 
b
è{  c =ğ
WHITE
 ? 
	`lsb
(bè: 
	`msb
(b); 
	}
}

	@endgame.cpp

21 
	~<®gÜ™hm
>

22 
	~<ÿs£¹
>

24 
	~"b™bßrd.h
"

25 
	~"’dgame.h
"

26 
	~"moveg’.h
"

28 
usšg
 
	g¡d
::
¡ršg
;

30 
	gÇme¥aû
 {

34 cÚ¡ 
	gPushToEdges
[
SQUARE_NB
] = {

47 cÚ¡ 
	gPushToCÜÃrs
[
SQUARE_NB
] = {

59 cÚ¡ 
	gPushClo£
[8] = { 0, 0, 100, 80, 60, 40, 20, 10 };

60 cÚ¡ 
	gPushAway
 [8] = { 0, 5, 20, 40, 60, 80, 90, 100 };

63 cÚ¡ 
	gKRPPKRPSÿËFaùÜs
[
RANK_NB
] = { 0, 9, 10, 14, 21, 44, 0, 0 };

65 #iâdeà
NDEBUG


66 
boŞ
 
v”ify_m©”Ÿl
(cÚ¡ 
Pos™iÚ
& 
pos
, 
CŞÜ
 
c
, 
V®ue
 
Åm
, 
·wnsCÁ
) {

67  
	gpos
.
nÚ_·wn_m©”Ÿl
(
c
è=ğ
Åm
 && 
pos
.
couÁ
<
PAWN
>(cè=ğ
·wnsCÁ
;

73 
Squ¬e
 
nÜm®ize
(cÚ¡ 
Pos™iÚ
& 
pos
, 
CŞÜ
 
¡rÚgSide
, Squ¬
sq
) {

75 
as£¹
(
pos
.
couÁ
<
PAWN
>(
¡rÚgSide
) == 1);

77 ià(
fe_of
(
pos
.
squ¬e
<
PAWN
>(
¡rÚgSide
)è>ğ
FILE_E
)

78 
sq
 = 
Squ¬e
(sq ^ 7);

80 ià(
	g¡rÚgSide
 =ğ
BLACK
)

81 
sq
 = ~sq;

83  
	gsq
;

91 
	gEndgames
::
	$Endgames
() {

93 
add
<
KPK
>("KPK");

94 
add
<
KNNK
>("KNNK");

95 
add
<
KBNK
>("KBNK");

96 
add
<
KRKP
>("KRKP");

97 
add
<
KRKB
>("KRKB");

98 
add
<
KRKN
>("KRKN");

99 
add
<
KQKP
>("KQKP");

100 
add
<
KQKR
>("KQKR");

102 
add
<
KNPK
>("KNPK");

103 
add
<
KNPKB
>("KNPKB");

104 
add
<
KRPKR
>("KRPKR");

105 
add
<
KRPKB
>("KRPKB");

106 
add
<
KBPKB
>("KBPKB");

107 
add
<
KBPKN
>("KBPKN");

108 
add
<
KBPPKB
>("KBPPKB");

109 
add
<
KRPPKRP
>("KRPPKRP");

110 
	}
}

113 
	g‹m¶©e
<
EndgameTy³
 
	gE
, 
ty³Çme
 
	gT
>

114 
	gEndgames
::
	$add
(cÚ¡ 
¡ršg
& 
code
) {

115 
S‹Info
 
¡
;

116 
m­
<
T
>()[
	`Pos™iÚ
().
	`£t
(
code
, 
WHITE
, &
¡
).
	`m©”Ÿl_key
()] = 
¡d
::
unique_±r
<
EndgameBa£
<T>>(
Ãw
 
Endgame
<
E
>(WHITE));

117 
m­
<
T
>()[
	`Pos™iÚ
().
	`£t
(
code
, 
BLACK
, &
¡
).
	`m©”Ÿl_key
()] = 
¡d
::
unique_±r
<
EndgameBa£
<T>>(
Ãw
 
Endgame
<
E
>(BLACK));

118 
	}
}

125 
	g‹m¶©e
<>

126 
V®ue
 
	gEndgame
<
	gKXK
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

128 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
w—kSide
, 
VALUE_ZERO
, 0));

129 
	`as£¹
(!
pos
.
	`check”s
());

132 ià(
pos
.
	`side_to_move
(è=ğ
w—kSide
 && !
MoveLi¡
<
LEGAL
>Õos).
	`size
())

133  
VALUE_DRAW
;

135 
Squ¬e
 
wšÃrKSq
 = 
pos
.
squ¬e
<
KING
>(
¡rÚgSide
);

136 
Squ¬e
 
lo£rKSq
 = 
pos
.
squ¬e
<
KING
>(
w—kSide
);

138 
V®ue
 
»suÉ
 = 
pos
.
	`nÚ_·wn_m©”Ÿl
(
¡rÚgSide
)

139 + 
pos
.
couÁ
<
PAWN
>(
¡rÚgSide
è* 
PawnV®ueEg


140 + 
PushToEdges
[
lo£rKSq
]

141 + 
PushClo£
[
	`di¡ªû
(
wšÃrKSq
, 
lo£rKSq
)];

143 iàĞ
pos
.
couÁ
<
QUEEN
>(
¡rÚgSide
)

144 || 
pos
.
couÁ
<
ROOK
>(
¡rÚgSide
)

145 ||(
pos
.
couÁ
<
BISHOP
>(
¡rÚgSide
è&&…os.couÁ<
KNIGHT
>(strongSide))

146 ||(
pos
.
couÁ
<
BISHOP
>(
¡rÚgSide
è> 1 && 
	`İpos™e_cŞÜs
Õos.
squ¬es
<BISHOP>(strongSide)[0],

147 
pos
.
squ¬es
<
BISHOP
>(
¡rÚgSide
)[1])))

148 
»suÉ
 = 
¡d
::
	`mš
ÔesuÉ + 
VALUE_KNOWN_WIN
, 
VALUE_MATE_IN_MAX_PLY
 - 1);

150  
¡rÚgSide
 =ğ
pos
.
	`side_to_move
(è? 
»suÉ
 : -result;

151 
	}
}

156 
	g‹m¶©e
<>

157 
V®ue
 
	gEndgame
<
	gKBNK
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

159 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
¡rÚgSide
, 
KnightV®ueMg
 + 
BishİV®ueMg
, 0));

160 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
w—kSide
, 
VALUE_ZERO
, 0));

162 
Squ¬e
 
wšÃrKSq
 = 
pos
.
squ¬e
<
KING
>(
¡rÚgSide
);

163 
Squ¬e
 
lo£rKSq
 = 
pos
.
squ¬e
<
KING
>(
w—kSide
);

164 
Squ¬e
 
bishİSq
 = 
pos
.
squ¬e
<
BISHOP
>(
¡rÚgSide
);

169 ià(
	`İpos™e_cŞÜs
(
bishİSq
, 
SQ_A1
))

171 
wšÃrKSq
 = ~winnerKSq;

172 
lo£rKSq
 = ~loserKSq;

175 
V®ue
 
»suÉ
 = 
VALUE_KNOWN_WIN


176 + 
PushClo£
[
	`di¡ªû
(
wšÃrKSq
, 
lo£rKSq
)]

177 + 
PushToCÜÃrs
[
lo£rKSq
];

179  
¡rÚgSide
 =ğ
pos
.
	`side_to_move
(è? 
»suÉ
 : -result;

180 
	}
}

184 
	g‹m¶©e
<>

185 
V®ue
 
	gEndgame
<
	gKPK
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

187 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
¡rÚgSide
, 
VALUE_ZERO
, 1));

188 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
w—kSide
, 
VALUE_ZERO
, 0));

191 
Squ¬e
 
wksq
 = 
	`nÜm®ize
(
pos
, 
¡rÚgSide
,…os.
squ¬e
<
KING
>(strongSide));

192 
Squ¬e
 
bksq
 = 
	`nÜm®ize
(
pos
, 
¡rÚgSide
,…os.
squ¬e
<
KING
>(
w—kSide
));

193 
Squ¬e
 
psq
 = 
	`nÜm®ize
(
pos
, 
¡rÚgSide
,…os.
squ¬e
<
PAWN
>(strongSide));

195 
CŞÜ
 
us
 = 
¡rÚgSide
 =ğ
pos
.
	`side_to_move
(è? 
WHITE
 : 
BLACK
;

197 ià(!
B™ba£s
::
	`´obe
(
wksq
, 
psq
, 
bksq
, 
us
))

198  
VALUE_DRAW
;

200 
V®ue
 
»suÉ
 = 
VALUE_KNOWN_WIN
 + 
PawnV®ueEg
 + 
	`V®ue
(
	`¿nk_of
(
psq
));

202  
¡rÚgSide
 =ğ
pos
.
	`side_to_move
(è? 
»suÉ
 : -result;

203 
	}
}

210 
	g‹m¶©e
<>

211 
V®ue
 
	gEndgame
<
	gKRKP
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

213 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
¡rÚgSide
, 
RookV®ueMg
, 0));

214 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
w—kSide
, 
VALUE_ZERO
, 1));

216 
Squ¬e
 
wksq
 = 
	`»Ïtive_squ¬e
(
¡rÚgSide
, 
pos
.
squ¬e
<
KING
>(strongSide));

217 
Squ¬e
 
bksq
 = 
	`»Ïtive_squ¬e
(
¡rÚgSide
, 
pos
.
squ¬e
<
KING
>(
w—kSide
));

218 
Squ¬e
 
rsq
 = 
	`»Ïtive_squ¬e
(
¡rÚgSide
, 
pos
.
squ¬e
<
ROOK
>(strongSide));

219 
Squ¬e
 
psq
 = 
	`»Ïtive_squ¬e
(
¡rÚgSide
, 
pos
.
squ¬e
<
PAWN
>(
w—kSide
));

221 
Squ¬e
 
qu“nšgSq
 = 
	`make_squ¬e
(
	`fe_of
(
psq
), 
RANK_1
);

222 
V®ue
 
»suÉ
;

225 ià(
wksq
 < 
psq
 && 
	`fe_of
(wksq) == file_of(psq))

226 
»suÉ
 = 
RookV®ueEg
 - 
	`di¡ªû
(
wksq
, 
psq
);

230 iàĞ
	`di¡ªû
(
bksq
, 
psq
è>ğ3 + (
pos
.
	`side_to_move
(è=ğ
w—kSide
)

231 && 
	`di¡ªû
(
bksq
, 
rsq
) >= 3)

232 
»suÉ
 = 
RookV®ueEg
 - 
	`di¡ªû
(
wksq
, 
psq
);

236 iàĞ
	`¿nk_of
(
bksq
è<ğ
RANK_3


237 && 
	`di¡ªû
(
bksq
, 
psq
) == 1

238 && 
	`¿nk_of
(
wksq
è>ğ
RANK_4


239 && 
	`di¡ªû
(
wksq
, 
psq
è> 2 + (
pos
.
	`side_to_move
(è=ğ
¡rÚgSide
))

240 
»suÉ
 = 
	`V®ue
(80è- 8 * 
	`di¡ªû
(
wksq
, 
psq
);

243 
»suÉ
 = 
	`V®ue
(200è- 8 * ( 
	`di¡ªû
(
wksq
, 
psq
 + 
SOUTH
)

244 - 
	`di¡ªû
(
bksq
, 
psq
 + 
SOUTH
)

245 - 
	`di¡ªû
(
psq
, 
qu“nšgSq
));

247  
¡rÚgSide
 =ğ
pos
.
	`side_to_move
(è? 
»suÉ
 : -result;

248 
	}
}

253 
	g‹m¶©e
<>

254 
V®ue
 
	gEndgame
<
	gKRKB
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

256 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
¡rÚgSide
, 
RookV®ueMg
, 0));

257 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
w—kSide
, 
BishİV®ueMg
, 0));

259 
V®ue
 
»suÉ
 = 
	`V®ue
(
PushToEdges
[
pos
.
squ¬e
<
KING
>(
w—kSide
)]);

260  
¡rÚgSide
 =ğ
pos
.
	`side_to_move
(è? 
»suÉ
 : -result;

261 
	}
}

266 
	g‹m¶©e
<>

267 
V®ue
 
	gEndgame
<
	gKRKN
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

269 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
¡rÚgSide
, 
RookV®ueMg
, 0));

270 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
w—kSide
, 
KnightV®ueMg
, 0));

272 
Squ¬e
 
bksq
 = 
pos
.
squ¬e
<
KING
>(
w—kSide
);

273 
Squ¬e
 
bnsq
 = 
pos
.
squ¬e
<
KNIGHT
>(
w—kSide
);

274 
V®ue
 
»suÉ
 = 
	`V®ue
(
PushToEdges
[
bksq
] + 
PushAway
[
	`di¡ªû
(bksq, 
bnsq
)]);

275  
¡rÚgSide
 =ğ
pos
.
	`side_to_move
(è? 
»suÉ
 : -result;

276 
	}
}

283 
	g‹m¶©e
<>

284 
V®ue
 
	gEndgame
<
	gKQKP
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

286 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
¡rÚgSide
, 
Qu“nV®ueMg
, 0));

287 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
w—kSide
, 
VALUE_ZERO
, 1));

289 
Squ¬e
 
wšÃrKSq
 = 
pos
.
squ¬e
<
KING
>(
¡rÚgSide
);

290 
Squ¬e
 
lo£rKSq
 = 
pos
.
squ¬e
<
KING
>(
w—kSide
);

291 
Squ¬e
 
·wnSq
 = 
pos
.
squ¬e
<
PAWN
>(
w—kSide
);

293 
V®ue
 
»suÉ
 = 
	`V®ue
(
PushClo£
[
	`di¡ªû
(
wšÃrKSq
, 
lo£rKSq
)]);

295 iàĞ
	`»Ïtive_¿nk
(
w—kSide
, 
·wnSq
è!ğ
RANK_7


296 || 
	`di¡ªû
(
lo£rKSq
, 
·wnSq
) != 1

297 || !((
FeABB
 | 
FeCBB
 | 
FeFBB
 | 
FeHBB
è& 
·wnSq
))

298 
»suÉ
 +ğ
Qu“nV®ueEg
 - 
PawnV®ueEg
;

300  
¡rÚgSide
 =ğ
pos
.
	`side_to_move
(è? 
»suÉ
 : -result;

301 
	}
}

308 
	g‹m¶©e
<>

309 
V®ue
 
	gEndgame
<
	gKQKR
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

311 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
¡rÚgSide
, 
Qu“nV®ueMg
, 0));

312 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
w—kSide
, 
RookV®ueMg
, 0));

314 
Squ¬e
 
wšÃrKSq
 = 
pos
.
squ¬e
<
KING
>(
¡rÚgSide
);

315 
Squ¬e
 
lo£rKSq
 = 
pos
.
squ¬e
<
KING
>(
w—kSide
);

317 
V®ue
 
»suÉ
 = 
Qu“nV®ueEg


318 - 
RookV®ueEg


319 + 
PushToEdges
[
lo£rKSq
]

320 + 
PushClo£
[
	`di¡ªû
(
wšÃrKSq
, 
lo£rKSq
)];

322  
¡rÚgSide
 =ğ
pos
.
	`side_to_move
(è? 
»suÉ
 : -result;

323 
	}
}

327 
	g‹m¶©e
<> 
V®ue
 
	gEndgame
<
	gKNNK
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
&ècÚ¡ {  
VALUE_DRAW
; 
	}
}

334 
	g‹m¶©e
<>

335 
SÿËFaùÜ
 
	gEndgame
<
	gKBPsK
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

337 
	`as£¹
(
pos
.
	`nÚ_·wn_m©”Ÿl
(
¡rÚgSide
è=ğ
BishİV®ueMg
);

338 
	`as£¹
(
pos
.
couÁ
<
PAWN
>(
¡rÚgSide
) >= 1);

343 
B™bßrd
 
·wns
 = 
pos
.
	`p›ûs
(
¡rÚgSide
, 
PAWN
);

344 
Fe
 
·wnsFe
 = 
	`fe_of
(
	`lsb
(
·wns
));

347 iàĞ(
·wnsFe
 =ğ
FILE_A
 ||…awnsF=ğ
FILE_H
)

348 && !(
·wns
 & ~
	`fe_bb
(
·wnsFe
)))

350 
Squ¬e
 
bishİSq
 = 
pos
.
squ¬e
<
BISHOP
>(
¡rÚgSide
);

351 
Squ¬e
 
qu“nšgSq
 = 
	`»Ïtive_squ¬e
(
¡rÚgSide
, 
	`make_squ¬e
(
·wnsFe
, 
RANK_8
));

352 
Squ¬e
 
kšgSq
 = 
pos
.
squ¬e
<
KING
>(
w—kSide
);

354 iàĞ
	`İpos™e_cŞÜs
(
qu“nšgSq
, 
bishİSq
)

355 && 
	`di¡ªû
(
qu“nšgSq
, 
kšgSq
) <= 1)

356  
SCALE_FACTOR_DRAW
;

360 iàĞ(
·wnsFe
 =ğ
FILE_B
 ||…awnsF=ğ
FILE_G
)

361 && !(
pos
.
	`p›ûs
(
PAWN
è& ~
	`fe_bb
(
·wnsFe
))

362 && 
pos
.
	`nÚ_·wn_m©”Ÿl
(
w—kSide
) == 0

363 && 
pos
.
couÁ
<
PAWN
>(
w—kSide
) >= 1)

366 
Squ¬e
 
w—kPawnSq
 = 
	`backmo¡_sq
(
w—kSide
, 
pos
.
	`p›ûs
(w—kSide, 
PAWN
));

368 
Squ¬e
 
¡rÚgKšgSq
 = 
pos
.
squ¬e
<
KING
>(
¡rÚgSide
);

369 
Squ¬e
 
w—kKšgSq
 = 
pos
.
squ¬e
<
KING
>(
w—kSide
);

370 
Squ¬e
 
bishİSq
 = 
pos
.
squ¬e
<
BISHOP
>(
¡rÚgSide
);

374 iàĞ
	`»Ïtive_¿nk
(
¡rÚgSide
, 
w—kPawnSq
è=ğ
RANK_7


375 && (
pos
.
	`p›ûs
(
¡rÚgSide
, 
PAWN
è& (
w—kPawnSq
 + 
	`·wn_push
(
w—kSide
)))

376 && (
	`İpos™e_cŞÜs
(
bishİSq
, 
w—kPawnSq
è|| 
pos
.
couÁ
<
PAWN
>(
¡rÚgSide
) == 1))

378 
¡rÚgKšgDi¡
 = 
	`di¡ªû
(
w—kPawnSq
, 
¡rÚgKšgSq
);

379 
w—kKšgDi¡
 = 
	`di¡ªû
(
w—kPawnSq
, 
w—kKšgSq
);

387 iàĞ
	`»Ïtive_¿nk
(
¡rÚgSide
, 
w—kKšgSq
è>ğ
RANK_7


388 && 
w—kKšgDi¡
 <= 2

389 && 
w—kKšgDi¡
 <ğ
¡rÚgKšgDi¡
)

390  
SCALE_FACTOR_DRAW
;

394  
SCALE_FACTOR_NONE
;

395 
	}
}

400 
	g‹m¶©e
<>

401 
SÿËFaùÜ
 
	gEndgame
<
	gKQKRPs
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

403 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
¡rÚgSide
, 
Qu“nV®ueMg
, 0));

404 
	`as£¹
(
pos
.
couÁ
<
ROOK
>(
w—kSide
) == 1);

405 
	`as£¹
(
pos
.
couÁ
<
PAWN
>(
w—kSide
) >= 1);

407 
Squ¬e
 
kšgSq
 = 
pos
.
squ¬e
<
KING
>(
w—kSide
);

408 
Squ¬e
 
rsq
 = 
pos
.
squ¬e
<
ROOK
>(
w—kSide
);

410 iàĞ
	`»Ïtive_¿nk
(
w—kSide
, 
kšgSq
è<ğ
RANK_2


411 && 
	`»Ïtive_¿nk
(
w—kSide
, 
pos
.
squ¬e
<
KING
>(
¡rÚgSide
)è>ğ
RANK_4


412 && 
	`»Ïtive_¿nk
(
w—kSide
, 
rsq
è=ğ
RANK_3


413 && ( 
pos
.
	`p›ûs
(
w—kSide
, 
PAWN
)

414 & 
pos
.
©cks_äom
<
KING
>(
kšgSq
)

415 & 
pos
.
©cks_äom
<
PAWN
>(
rsq
, 
¡rÚgSide
)))

416  
SCALE_FACTOR_DRAW
;

418  
SCALE_FACTOR_NONE
;

419 
	}
}

428 
	g‹m¶©e
<>

429 
SÿËFaùÜ
 
	gEndgame
<
	gKRPKR
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

431 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
¡rÚgSide
, 
RookV®ueMg
, 1));

432 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
w—kSide
, 
RookV®ueMg
, 0));

435 
Squ¬e
 
wksq
 = 
	`nÜm®ize
(
pos
, 
¡rÚgSide
,…os.
squ¬e
<
KING
>(strongSide));

436 
Squ¬e
 
bksq
 = 
	`nÜm®ize
(
pos
, 
¡rÚgSide
,…os.
squ¬e
<
KING
>(
w—kSide
));

437 
Squ¬e
 
wrsq
 = 
	`nÜm®ize
(
pos
, 
¡rÚgSide
,…os.
squ¬e
<
ROOK
>(strongSide));

438 
Squ¬e
 
wpsq
 = 
	`nÜm®ize
(
pos
, 
¡rÚgSide
,…os.
squ¬e
<
PAWN
>(strongSide));

439 
Squ¬e
 
brsq
 = 
	`nÜm®ize
(
pos
, 
¡rÚgSide
,…os.
squ¬e
<
ROOK
>(
w—kSide
));

441 
Fe
 
f
 = 
	`fe_of
(
wpsq
);

442 
Rªk
 
r
 = 
	`¿nk_of
(
wpsq
);

443 
Squ¬e
 
qu“nšgSq
 = 
	`make_squ¬e
(
f
, 
RANK_8
);

444 
‹mpo
 = (
pos
.
	`side_to_move
(è=ğ
¡rÚgSide
);

448 iàĞ
r
 <ğ
RANK_5


449 && 
	`di¡ªû
(
bksq
, 
qu“nšgSq
) <= 1

450 && 
wksq
 <ğ
SQ_H5


451 && (
	`¿nk_of
(
brsq
è=ğ
RANK_6
 || (
r
 <ğ
RANK_3
 &&„ªk_of(
wrsq
) != RANK_6)))

452  
SCALE_FACTOR_DRAW
;

456 iàĞ
r
 =ğ
RANK_6


457 && 
	`di¡ªû
(
bksq
, 
qu“nšgSq
) <= 1

458 && 
	`¿nk_of
(
wksq
è+ 
‹mpo
 <ğ
RANK_6


459 && (
	`¿nk_of
(
brsq
è=ğ
RANK_1
 || (!
‹mpo
 && 
di¡ªû
<
Fe
>(brsq, 
wpsq
) >= 3)))

460  
SCALE_FACTOR_DRAW
;

462 iàĞ
r
 >ğ
RANK_6


463 && 
bksq
 =ğ
qu“nšgSq


464 && 
	`¿nk_of
(
brsq
è=ğ
RANK_1


465 && (!
‹mpo
 || 
	`di¡ªû
(
wksq
, 
wpsq
) >= 2))

466  
SCALE_FACTOR_DRAW
;

470 iàĞ
wpsq
 =ğ
SQ_A7


471 && 
wrsq
 =ğ
SQ_A8


472 && (
bksq
 =ğ
SQ_H7
 || bksq =ğ
SQ_G7
)

473 && 
	`fe_of
(
brsq
è=ğ
FILE_A


474 && (
	`¿nk_of
(
brsq
è<ğ
RANK_3
 || 
	`fe_of
(
wksq
è>ğ
FILE_D
 ||„ªk_of(wksqè<ğ
RANK_5
))

475  
SCALE_FACTOR_DRAW
;

479 iàĞ
r
 <ğ
RANK_5


480 && 
bksq
 =ğ
wpsq
 + 
NORTH


481 && 
	`di¡ªû
(
wksq
, 
wpsq
è- 
‹mpo
 >= 2

482 && 
	`di¡ªû
(
wksq
, 
brsq
è- 
‹mpo
 >= 2)

483  
SCALE_FACTOR_DRAW
;

488 iàĞ
r
 =ğ
RANK_7


489 && 
f
 !ğ
FILE_A


490 && 
	`fe_of
(
wrsq
è=ğ
f


491 && 
wrsq
 !ğ
qu“nšgSq


492 && (
	`di¡ªû
(
wksq
, 
qu“nšgSq
è< di¡ªû(
bksq
, qu“nšgSqè- 2 + 
‹mpo
)

493 && (
	`di¡ªû
(
wksq
, 
qu“nšgSq
è< di¡ªû(
bksq
, 
wrsq
è+ 
‹mpo
))

494  
	`SÿËFaùÜ
(
SCALE_FACTOR_MAX
 - 2 * 
	`di¡ªû
(
wksq
, 
qu“nšgSq
));

497 iàĞ
f
 !ğ
FILE_A


498 && 
	`fe_of
(
wrsq
è=ğ
f


499 && 
wrsq
 < 
wpsq


500 && (
	`di¡ªû
(
wksq
, 
qu“nšgSq
è< di¡ªû(
bksq
, qu“nšgSqè- 2 + 
‹mpo
)

501 && (
	`di¡ªû
(
wksq
, 
wpsq
 + 
NORTH
è< di¡ªû(
bksq
, wpsq + NORTHè- 2 + 
‹mpo
)

502 && ( 
	`di¡ªû
(
bksq
, 
wrsq
è+ 
‹mpo
 >= 3

503 || ( 
	`di¡ªû
(
wksq
, 
qu“nšgSq
è< di¡ªû(
bksq
, 
wrsq
è+ 
‹mpo


504 && (
	`di¡ªû
(
wksq
, 
wpsq
 + 
NORTH
è< di¡ªû(
bksq
, 
wrsq
è+ 
‹mpo
))))

505  
	`SÿËFaùÜ
Ğ
SCALE_FACTOR_MAX


506 - 8 * 
	`di¡ªû
(
wpsq
, 
qu“nšgSq
)

507 - 2 * 
	`di¡ªû
(
wksq
, 
qu“nšgSq
));

511 ià(
r
 <ğ
RANK_4
 && 
bksq
 > 
wpsq
)

513 ià(
	`fe_of
(
bksq
è=ğfe_of(
wpsq
))

514  
	`SÿËFaùÜ
(10);

515 iàĞ
di¡ªû
<
Fe
>(
bksq
, 
wpsq
) == 1

516 && 
	`di¡ªû
(
wksq
, 
bksq
) > 2)

517  
	`SÿËFaùÜ
(24 - 2 * 
	`di¡ªû
(
wksq
, 
bksq
));

519  
SCALE_FACTOR_NONE
;

520 
	}
}

522 
	g‹m¶©e
<>

523 
SÿËFaùÜ
 
	gEndgame
<
	gKRPKB
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

525 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
¡rÚgSide
, 
RookV®ueMg
, 1));

526 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
w—kSide
, 
BishİV®ueMg
, 0));

529 ià(
pos
.
	`p›ûs
(
PAWN
è& (
FeABB
 | 
FeHBB
))

531 
Squ¬e
 
ksq
 = 
pos
.
squ¬e
<
KING
>(
w—kSide
);

532 
Squ¬e
 
bsq
 = 
pos
.
squ¬e
<
BISHOP
>(
w—kSide
);

533 
Squ¬e
 
psq
 = 
pos
.
squ¬e
<
PAWN
>(
¡rÚgSide
);

534 
Rªk
 
rk
 = 
	`»Ïtive_¿nk
(
¡rÚgSide
, 
psq
);

535 
Squ¬e
 
push
 = 
	`·wn_push
(
¡rÚgSide
);

542 ià(
rk
 =ğ
RANK_5
 && !
	`İpos™e_cŞÜs
(
bsq
, 
psq
))

544 
d
 = 
	`di¡ªû
(
psq
 + 3 * 
push
, 
ksq
);

546 ià(
d
 <ğ2 && !(d =ğ0 && 
ksq
 =ğ
pos
.
squ¬e
<
KING
>(
¡rÚgSide
è+ 2 * 
push
))

547  
	`SÿËFaùÜ
(24);

549  
	`SÿËFaùÜ
(48);

556 iàĞ
rk
 =ğ
RANK_6


557 && 
	`di¡ªû
(
psq
 + 2 * 
push
, 
ksq
) <= 1

558 && (
P£udoA‰acks
[
BISHOP
][
bsq
] & (
psq
 + 
push
))

559 && 
di¡ªû
<
Fe
>(
bsq
, 
psq
) >= 2)

560  
	`SÿËFaùÜ
(8);

563  
SCALE_FACTOR_NONE
;

564 
	}
}

568 
	g‹m¶©e
<>

569 
SÿËFaùÜ
 
	gEndgame
<
	gKRPPKRP
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

571 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
¡rÚgSide
, 
RookV®ueMg
, 2));

572 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
w—kSide
, 
RookV®ueMg
, 1));

574 
Squ¬e
 
wpsq1
 = 
pos
.
squ¬es
<
PAWN
>(
¡rÚgSide
)[0];

575 
Squ¬e
 
wpsq2
 = 
pos
.
squ¬es
<
PAWN
>(
¡rÚgSide
)[1];

576 
Squ¬e
 
bksq
 = 
pos
.
squ¬e
<
KING
>(
w—kSide
);

579 ià(
pos
.
	`·wn_·s£d
(
¡rÚgSide
, 
wpsq1
è||…os.·wn_·s£d(¡rÚgSide, 
wpsq2
))

580  
SCALE_FACTOR_NONE
;

582 
Rªk
 
r
 = 
¡d
::
	`max
(
	`»Ïtive_¿nk
(
¡rÚgSide
, 
wpsq1
),„–©ive_¿nk(¡rÚgSide, 
wpsq2
));

584 iàĞ
di¡ªû
<
Fe
>(
bksq
, 
wpsq1
) <= 1

585 && 
di¡ªû
<
Fe
>(
bksq
, 
wpsq2
) <= 1

586 && 
	`»Ïtive_¿nk
(
¡rÚgSide
, 
bksq
è> 
r
)

588 
	`as£¹
(
r
 > 
RANK_1
 &&„ < 
RANK_7
);

589  
	`SÿËFaùÜ
(
KRPPKRPSÿËFaùÜs
[
r
]);

591  
SCALE_FACTOR_NONE
;

592 
	}
}

597 
	g‹m¶©e
<>

598 
SÿËFaùÜ
 
	gEndgame
<
	gKPsK
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

600 
	`as£¹
(
pos
.
	`nÚ_·wn_m©”Ÿl
(
¡rÚgSide
è=ğ
VALUE_ZERO
);

601 
	`as£¹
(
pos
.
couÁ
<
PAWN
>(
¡rÚgSide
) >= 2);

602 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
w—kSide
, 
VALUE_ZERO
, 0));

604 
Squ¬e
 
ksq
 = 
pos
.
squ¬e
<
KING
>(
w—kSide
);

605 
B™bßrd
 
·wns
 = 
pos
.
	`p›ûs
(
¡rÚgSide
, 
PAWN
);

609 iàĞ!(
·wns
 & ~
	`š_äÚt_bb
(
w—kSide
, 
	`¿nk_of
(
ksq
)))

610 && !((
·wns
 & ~
FeABB
è&& (·wn & ~
FeHBB
))

611 && 
di¡ªû
<
Fe
>(
ksq
, 
	`lsb
(
·wns
)) <= 1)

612  
SCALE_FACTOR_DRAW
;

614  
SCALE_FACTOR_NONE
;

615 
	}
}

622 
	g‹m¶©e
<>

623 
SÿËFaùÜ
 
	gEndgame
<
	gKBPKB
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

625 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
¡rÚgSide
, 
BishİV®ueMg
, 1));

626 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
w—kSide
, 
BishİV®ueMg
, 0));

628 
Squ¬e
 
·wnSq
 = 
pos
.
squ¬e
<
PAWN
>(
¡rÚgSide
);

629 
Squ¬e
 
¡rÚgBishİSq
 = 
pos
.
squ¬e
<
BISHOP
>(
¡rÚgSide
);

630 
Squ¬e
 
w—kBishİSq
 = 
pos
.
squ¬e
<
BISHOP
>(
w—kSide
);

631 
Squ¬e
 
w—kKšgSq
 = 
pos
.
squ¬e
<
KING
>(
w—kSide
);

634 iàĞ
	`fe_of
(
w—kKšgSq
è=ğfe_of(
·wnSq
)

635 && 
	`»Ïtive_¿nk
(
¡rÚgSide
, 
·wnSq
è<„–©ive_¿nk(¡rÚgSide, 
w—kKšgSq
)

636 && ( 
	`İpos™e_cŞÜs
(
w—kKšgSq
, 
¡rÚgBishİSq
)

637 || 
	`»Ïtive_¿nk
(
¡rÚgSide
, 
w—kKšgSq
è<ğ
RANK_6
))

638  
SCALE_FACTOR_DRAW
;

641 ià(
	`İpos™e_cŞÜs
(
¡rÚgBishİSq
, 
w—kBishİSq
))

653 ià(
	`»Ïtive_¿nk
(
¡rÚgSide
, 
·wnSq
è<ğ
RANK_5
)

654  
SCALE_FACTOR_DRAW
;

656 
B™bßrd
 
·th
 = 
	`fÜw¬d_bb
(
¡rÚgSide
, 
·wnSq
);

658 ià(
·th
 & 
pos
.
	`p›ûs
(
w—kSide
, 
KING
))

659  
SCALE_FACTOR_DRAW
;

661 iàĞ(
pos
.
©cks_äom
<
BISHOP
>(
w—kBishİSq
è& 
·th
)

662 && 
	`di¡ªû
(
w—kBishİSq
, 
·wnSq
) >= 3)

663  
SCALE_FACTOR_DRAW
;

665  
SCALE_FACTOR_NONE
;

666 
	}
}

670 
	g‹m¶©e
<>

671 
SÿËFaùÜ
 
	gEndgame
<
	gKBPPKB
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

673 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
¡rÚgSide
, 
BishİV®ueMg
, 2));

674 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
w—kSide
, 
BishİV®ueMg
, 0));

676 
Squ¬e
 
wbsq
 = 
pos
.
squ¬e
<
BISHOP
>(
¡rÚgSide
);

677 
Squ¬e
 
bbsq
 = 
pos
.
squ¬e
<
BISHOP
>(
w—kSide
);

679 ià(!
	`İpos™e_cŞÜs
(
wbsq
, 
bbsq
))

680  
SCALE_FACTOR_NONE
;

682 
Squ¬e
 
ksq
 = 
pos
.
squ¬e
<
KING
>(
w—kSide
);

683 
Squ¬e
 
psq1
 = 
pos
.
squ¬es
<
PAWN
>(
¡rÚgSide
)[0];

684 
Squ¬e
 
psq2
 = 
pos
.
squ¬es
<
PAWN
>(
¡rÚgSide
)[1];

685 
Rªk
 
r1
 = 
	`¿nk_of
(
psq1
);

686 
Rªk
 
r2
 = 
	`¿nk_of
(
psq2
);

687 
Squ¬e
 
blockSq1
, 
blockSq2
;

689 ià(
	`»Ïtive_¿nk
(
¡rÚgSide
, 
psq1
è>„–©ive_¿nk(¡rÚgSide, 
psq2
))

691 
blockSq1
 = 
psq1
 + 
	`·wn_push
(
¡rÚgSide
);

692 
blockSq2
 = 
	`make_squ¬e
(
	`fe_of
(
psq2
), 
	`¿nk_of
(
psq1
));

696 
blockSq1
 = 
psq2
 + 
	`·wn_push
(
¡rÚgSide
);

697 
blockSq2
 = 
	`make_squ¬e
(
	`fe_of
(
psq1
), 
	`¿nk_of
(
psq2
));

700 
di¡ªû
<
Fe
>(
psq1
, 
psq2
))

705 iàĞ
	`fe_of
(
ksq
è=ğfe_of(
blockSq1
)

706 && 
	`»Ïtive_¿nk
(
¡rÚgSide
, 
ksq
è>ğ»Ïtive_¿nk(¡rÚgSide, 
blockSq1
)

707 && 
	`İpos™e_cŞÜs
(
ksq
, 
wbsq
))

708  
SCALE_FACTOR_DRAW
;

710  
SCALE_FACTOR_NONE
;

716 iàĞ
ksq
 =ğ
blockSq1


717 && 
	`İpos™e_cŞÜs
(
ksq
, 
wbsq
)

718 && ( 
bbsq
 =ğ
blockSq2


719 || (
pos
.
©cks_äom
<
BISHOP
>(
blockSq2
è&…os.
	`p›ûs
(
w—kSide
, BISHOP))

720 || 
	`di¡ªû
(
r1
, 
r2
) >= 2))

721  
SCALE_FACTOR_DRAW
;

723 iàĞ
ksq
 =ğ
blockSq2


724 && 
	`İpos™e_cŞÜs
(
ksq
, 
wbsq
)

725 && ( 
bbsq
 =ğ
blockSq1


726 || (
pos
.
©cks_äom
<
BISHOP
>(
blockSq1
è&…os.
	`p›ûs
(
w—kSide
, BISHOP))))

727  
SCALE_FACTOR_DRAW
;

729  
SCALE_FACTOR_NONE
;

733  
SCALE_FACTOR_NONE
;

735 
	}
}

741 
	g‹m¶©e
<>

742 
SÿËFaùÜ
 
	gEndgame
<
	gKBPKN
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

744 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
¡rÚgSide
, 
BishİV®ueMg
, 1));

745 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
w—kSide
, 
KnightV®ueMg
, 0));

747 
Squ¬e
 
·wnSq
 = 
pos
.
squ¬e
<
PAWN
>(
¡rÚgSide
);

748 
Squ¬e
 
¡rÚgBishİSq
 = 
pos
.
squ¬e
<
BISHOP
>(
¡rÚgSide
);

749 
Squ¬e
 
w—kKšgSq
 = 
pos
.
squ¬e
<
KING
>(
w—kSide
);

751 iàĞ
	`fe_of
(
w—kKšgSq
è=ğfe_of(
·wnSq
)

752 && 
	`»Ïtive_¿nk
(
¡rÚgSide
, 
·wnSq
è<„–©ive_¿nk(¡rÚgSide, 
w—kKšgSq
)

753 && ( 
	`İpos™e_cŞÜs
(
w—kKšgSq
, 
¡rÚgBishİSq
)

754 || 
	`»Ïtive_¿nk
(
¡rÚgSide
, 
w—kKšgSq
è<ğ
RANK_6
))

755  
SCALE_FACTOR_DRAW
;

757  
SCALE_FACTOR_NONE
;

758 
	}
}

763 
	g‹m¶©e
<>

764 
SÿËFaùÜ
 
	gEndgame
<
	gKNPK
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

766 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
¡rÚgSide
, 
KnightV®ueMg
, 1));

767 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
w—kSide
, 
VALUE_ZERO
, 0));

770 
Squ¬e
 
·wnSq
 = 
	`nÜm®ize
(
pos
, 
¡rÚgSide
,…os.
squ¬e
<
PAWN
>(strongSide));

771 
Squ¬e
 
w—kKšgSq
 = 
	`nÜm®ize
(
pos
, 
¡rÚgSide
,…os.
squ¬e
<
KING
>(
w—kSide
));

773 ià(
·wnSq
 =ğ
SQ_A7
 && 
	`di¡ªû
(
SQ_A8
, 
w—kKšgSq
) <= 1)

774  
SCALE_FACTOR_DRAW
;

776  
SCALE_FACTOR_NONE
;

777 
	}
}

782 
	g‹m¶©e
<>

783 
SÿËFaùÜ
 
	gEndgame
<
	gKNPKB
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

785 
Squ¬e
 
·wnSq
 = 
pos
.
squ¬e
<
PAWN
>(
¡rÚgSide
);

786 
Squ¬e
 
bishİSq
 = 
pos
.
squ¬e
<
BISHOP
>(
w—kSide
);

787 
Squ¬e
 
w—kKšgSq
 = 
pos
.
squ¬e
<
KING
>(
w—kSide
);

791 ià(
	`fÜw¬d_bb
(
¡rÚgSide
, 
·wnSq
è& 
pos
.
©cks_äom
<
BISHOP
>(
bishİSq
))

792  
	`SÿËFaùÜ
(
	`di¡ªû
(
w—kKšgSq
, 
·wnSq
));

794  
SCALE_FACTOR_NONE
;

795 
	}
}

803 
	g‹m¶©e
<>

804 
SÿËFaùÜ
 
	gEndgame
<
	gKPKP
>::
	$İ”©Ü
()(cÚ¡ 
Pos™iÚ
& 
pos
) const {

806 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
¡rÚgSide
, 
VALUE_ZERO
, 1));

807 
	`as£¹
(
	`v”ify_m©”Ÿl
(
pos
, 
w—kSide
, 
VALUE_ZERO
, 1));

810 
Squ¬e
 
wksq
 = 
	`nÜm®ize
(
pos
, 
¡rÚgSide
,…os.
squ¬e
<
KING
>(strongSide));

811 
Squ¬e
 
bksq
 = 
	`nÜm®ize
(
pos
, 
¡rÚgSide
,…os.
squ¬e
<
KING
>(
w—kSide
));

812 
Squ¬e
 
psq
 = 
	`nÜm®ize
(
pos
, 
¡rÚgSide
,…os.
squ¬e
<
PAWN
>(strongSide));

814 
CŞÜ
 
us
 = 
¡rÚgSide
 =ğ
pos
.
	`side_to_move
(è? 
WHITE
 : 
BLACK
;

818 ià(
	`¿nk_of
(
psq
è>ğ
RANK_5
 && 
	`fe_of
Õsqè!ğ
FILE_A
)

819  
SCALE_FACTOR_NONE
;

823  
B™ba£s
::
	`´obe
(
wksq
, 
psq
, 
bksq
, 
us
è? 
SCALE_FACTOR_NONE
 : 
SCALE_FACTOR_DRAW
;

824 
	}
}

	@endgame.h

21 #iâdeà
ENDGAME_H_INCLUDED


22 
	#ENDGAME_H_INCLUDED


	)

24 
	~<m­
>

25 
	~<memÜy
>

26 
	~<¡ršg
>

27 
	~<ty³_Œa™s
>

28 
	~<ut™y
>

30 
	~"pos™iÚ.h
"

31 
	~"ty³s.h
"

36 
	eEndgameTy³
 {

40 
	mKNNK
,

41 
	mKXK
,

42 
	mKBNK
,

43 
	mKPK
,

44 
	mKRKP
,

45 
	mKRKB
,

46 
	mKRKN
,

47 
	mKQKP
,

48 
	mKQKR
,

52 
	mSCALING_FUNCTIONS
,

54 
	mKBPsK
,

55 
	mKQKRPs
,

56 
	mKRPKR
,

57 
	mKRPKB
,

58 
	mKRPPKRP
,

59 
	mKPsK
,

60 
	mKBPKB
,

61 
	mKBPPKB
,

62 
	mKBPKN
,

63 
	mKNPK
,

64 
	mKNPKB
,

65 
	mKPKP


71 
	g‹m¶©e
<
EndgameTy³
 
	gE
> 
usšg


72 
	geg_ty³
 = 
ty³Çme
 
¡d
::
cÚd™iÚ®
<(
E
 < 
SCALING_FUNCTIONS
), 
	gV®ue
, 
	gSÿËFaùÜ
>::
ty³
;

77 
	g‹m¶©e
<
ty³Çme
 
	gT
>

78 
	sEndgameBa£
 {

80 
	mvœtu®
 ~
EndgameBa£
() = ;

81 
vœtu®
 
CŞÜ
 
¡rÚg_side
() const = 0;

82 
vœtu®
 
T
 
İ”©Ü
()(cÚ¡ 
	mPos™iÚ
&) const = 0;

86 
	g‹m¶©e
<
EndgameTy³
 
	gE
, 
ty³Çme
 
	gT
 = 
eg_ty³
<
E
>>

87 
Endgame
 : 
public
 
EndgameBa£
<
T
> {

89 
ex¶ic™
 
Endgame
(
CŞÜ
 
c
è: 
¡rÚgSide
(c), 
w—kSide
(~c) {}

90 
CŞÜ
 
¡rÚg_side
(ècÚ¡ {  
¡rÚgSide
; }

91 
T
 
İ”©Ü
()(cÚ¡ 
	gPos™iÚ
&) const;

93 
	g´iv©e
:

94 
CŞÜ
 
¡rÚgSide
, 
	gw—kSide
;

102 şas 
	cEndgames
 {

104 
	m‹m¶©e
<
ty³Çme
 
	mT
> 
usšg
 
	mM­
 = 
¡d
::
m­
<
Key
, 
	m¡d
::
unique_±r
<
EndgameBa£
<
T
>>>;

106 
	m‹m¶©e
<
EndgameTy³
 
	mE
, 
ty³Çme
 
	mT
 = 
eg_ty³
<
E
>>

107 
add
(cÚ¡ 
¡d
::
¡ršg
& 
code
);

109 
	m‹m¶©e
<
ty³Çme
 
	mT
>

110 
	mM­
<
	mT
>& 
	$m­
() {

111  
¡d
::
g‘
<¡d::
is_§me
<
T
, 
SÿËFaùÜ
>::
v®ue
>(
m­s
);

114 
¡d
::
·œ
<
M­
<
V®ue
>, M­<
SÿËFaùÜ
>> 
m­s
;

116 
public
:

117 
	`Endgames
();

119 
‹m¶©e
<
ty³Çme
 
T
>

120 
EndgameBa£
<
T
>* 
	$´obe
(
Key
 
key
) {

121  
m­
<
T
>().
	`couÁ
(
key
è? m­<T>()[key].
	`g‘
(è: 
nuÎ±r
;

122 
	}
}

	@evaluate.cpp

21 
	~<®gÜ™hm
>

22 
	~<ÿs£¹
>

23 
	~<c¡ršg
>

24 
	~<iomª
>

25 
	~<s¡»am
>

27 
	~"b™bßrd.h
"

28 
	~"ev®u©e.h
"

29 
	~"m©”Ÿl.h
"

30 
	~"·wns.h
"

32 
	gÇme¥aû
 {

34 
Çme¥aû
 
	gT¿û
 {

36 
	eT”m
 {

37 
	gMATERIAL
 = 8, 
	gIMBALANCE
, 
	gMOBILITY
, 
	gTHREAT
, 
	gPASSED
, 
	gSPACE
, 
	gTOTAL
, 
	gTERM_NB


40 
	gscÜes
[
TERM_NB
][
COLOR_NB
][
PHASE_NB
];

42 
to_ı
(
V®ue
 
v
è{  (
	gv
è/ 
	gPawnV®ueEg
; }

44 
add
(
idx
, 
CŞÜ
 
c
, 
ScÜe
 
s
) {

45 
	gscÜes
[
idx
][
c
][
MG
] = 
to_ı
(
mg_v®ue
(
s
));

46 
	gscÜes
[
idx
][
c
][
EG
] = 
to_ı
(
eg_v®ue
(
s
));

49 
add
(
idx
, 
ScÜe
 
w
, ScÜ
b
 = 
SCORE_ZERO
) {

50 
add
(
idx
, 
WHITE
, 
w
);‡dd(idx, 
BLACK
, 
b
);

53 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
, 
T”m
 
	gt
) {

55 ià(
	gt
 =ğ
MATERIAL
 || 
t
 =ğ
IMBALANCE
 || =ğ
T”m
(
PAWN
è|| =ğ
TOTAL
)

56 
os
 << " --- --- | --- --- | ";

58 
	gos
 << 
	g¡d
::
£tw
(5è<< 
scÜes
[
t
][
WHITE
][
MG
] << " "

59 << 
¡d
::
£tw
(5è<< 
scÜes
[
t
][
WHITE
][
EG
] << " | "

60 << 
¡d
::
£tw
(5è<< 
scÜes
[
t
][
BLACK
][
MG
] << " "

61 << 
¡d
::
£tw
(5è<< 
scÜes
[
t
][
BLACK
][
EG
] << " | ";

63 
	gos
 << 
	g¡d
::
£tw
(5è<< 
scÜes
[
t
][
WHITE
][
MG
] - scÜes[t][
BLACK
][MG] << " "

64 << 
¡d
::
£tw
(5è<< 
scÜes
[
t
][
WHITE
][
EG
] - scÜes[t][
BLACK
][EG] << " \n";

66  
	gos
;

70 
usšg
 
Çme¥aû
 
	gT¿û
;

74 
	sEv®Info
 {

76 
	gM©”Ÿl
::
EÁry
* 
me
;

77 
	gPawns
::
EÁry
* 
³
;

78 
B™bßrd
 
	gmob™yA»a
[
COLOR_NB
];

82 
B™bßrd
 
	g©ckedBy
[
COLOR_NB
][
PIECE_TYPE_NB
];

87 
B™bßrd
 
	g©ckedBy2
[
COLOR_NB
];

95 
B™bßrd
 
	gkšgRšg
[
COLOR_NB
];

99 
	gkšgA‰ack”sCouÁ
[
COLOR_NB
];

105 
	gkšgA‰ack”sWeight
[
COLOR_NB
];

112 
	gkšgAdjaûÁZÚeA‰acksCouÁ
[
COLOR_NB
];

115 
	#V
(
v
è
	`V®ue
(v)

	)

116 
	#S
(
mg
, 
eg
è
	`make_scÜe
(mg,ƒg)

	)

120 cÚ¡ 
ScÜe
 
	gMob™yBÚus
[][32] = {

121 { 
S
(-75,-76), S(-57,-54), S( -9,-28), S( -2,-10), S( 6, 5), S( 14, 12),

122 
S
( 22, 26), S( 29, 29), S( 36, 29) },

123 { 
S
(-48,-59), S(-20,-23), S( 16, -3), S( 26, 13), S( 38, 24), S( 51, 42),

124 
S
( 55, 54), S( 63, 57), S( 63, 65), S( 68, 73), S( 81, 78), S( 81, 86),

125 
S
( 91, 88), S( 98, 97) },

126 { 
S
(-60,-77), S(-26,-20), S(-11, 27), S( -6, 57), S( -3, 69), S( -1, 82),

127 
S
( 10,109), S( 16,121), S( 24,131), S( 25,143), S( 32,155), S( 32,163),

128 
S
( 43,167), S( 48,171), S( 56,173) },

129 { 
S
(-39,-36), S(-21,-15), S( 3, 8), S( 3, 18), S( 14, 34), S( 22, 54),

130 
S
( 28, 61), S( 41, 73), S( 43, 79), S( 48, 92), S( 56, 94), S( 60,104),

131 
S
( 60,113), S( 66,120), S( 67,123), S( 70,126), S( 71,133), S( 73,136),

132 
S
( 79,140), S( 88,143), S( 88,148), S( 99,166), S(102,170), S(102,175),

133 
S
(106,184), S(109,191), S(113,206), S(116,212) }

140 cÚ¡ 
ScÜe
 
	gOuo¡
[][2] = {

141 { 
S
(22, 6), S(33, 9) },

142 { 
S
( 9, 2), S(14, 4) }

147 cÚ¡ 
ScÜe
 
	gRookOnFe
[] = { 
S
(20, 7), S(45, 20) };

152 cÚ¡ 
ScÜe
 
	gTh»©ByMšÜ
[
PIECE_TYPE_NB
] = {

153 
S
(0, 0), S(0, 33), S(45, 43), S(46, 47), S(72, 107), S(48, 118)

156 cÚ¡ 
ScÜe
 
	gTh»©ByRook
[
PIECE_TYPE_NB
] = {

157 
S
(0, 0), S(0, 25), S(40, 62), S(40, 59), S( 0, 34), S(35, 48)

162 cÚ¡ 
ScÜe
 
	gTh»©ByKšg
[] = { 
S
(3, 62), S(9, 138) };

166 cÚ¡ 
V®ue
 
	gPas£d
[][
RANK_NB
] = {

167 { 
V
(5), V( 5), V(31), V(73), V(166), V(252) },

168 { 
V
(7), V(14), V(38), V(73), V(166), V(252) }

172 cÚ¡ 
ScÜe
 
	gPas£dFe
[
FILE_NB
] = {

173 
S
( 9, 10), S( 2, 10), S( 1, -8), S(-20,-12),

174 
S
(-20,-12), S( 1, -8), S( 2, 10), S( 9, 10)

179 cÚ¡ 
ScÜe
 
	gPrÙeùÜ
[][8] = {

180 { 
S
(0, 0), S( 7, 9), S( 7, 1), S( 1, 5), S(-10,-4), S( -1,-4), S( -7,-3), S(-16,-10) },

181 { 
S
(0, 0), S(11, 8), S(-7,-1), S(-1,-2), S( -1,-7), S(-11,-3), S( -9,-1), S(-16, -1) },

182 { 
S
(0, 0), S(10, 0), S(-2, 2), S(-5, 4), S( -6, 2), S(-14,-3), S( -2,-9), S(-12, -7) },

183 { 
S
(0, 0), S( 3,-5), S( 2,-5), S(-4, 0), S( -9,-6), S( -4, 7), S(-13,-7), S(-10, -7) }

187 cÚ¡ 
ScÜe
 
	gMšÜBehšdPawn
 = 
S
( 16, 0);

188 cÚ¡ 
ScÜe
 
	gBishİPawns
 = 
S
( 8, 12);

189 cÚ¡ 
ScÜe
 
	gRookOnPawn
 = 
S
( 8, 24);

190 cÚ¡ 
ScÜe
 
	gT¿µedRook
 = 
S
( 92, 0);

191 cÚ¡ 
ScÜe
 
	gW—kQu“n
 = 
S
( 50, 10);

192 cÚ¡ 
ScÜe
 
	gOth”Check
 = 
S
( 10, 10);

193 cÚ¡ 
ScÜe
 
	gClo£EÃm›s
 = 
S
( 7, 0);

194 cÚ¡ 
ScÜe
 
	gPawÆessFÏnk
 = 
S
( 20, 80);

195 cÚ¡ 
ScÜe
 
	gTh»©ByHªgšgPawn
 = 
S
( 71, 61);

196 cÚ¡ 
ScÜe
 
	gTh»©BySaãPawn
 = 
S
(182,175);

197 cÚ¡ 
ScÜe
 
	gTh»©ByRªk
 = 
S
( 16, 3);

198 cÚ¡ 
ScÜe
 
	gHªgšg
 = 
S
( 48, 27);

199 cÚ¡ 
ScÜe
 
	gTh»©ByPawnPush
 = 
S
( 38, 22);

200 cÚ¡ 
ScÜe
 
	gHšd”Pas£dPawn
 = 
S
( 7, 0);

205 cÚ¡ 
ScÜe
 
	gT¿µedBishİA1H1
 = 
S
(50, 50);

207 #undeà
S


208 #undeà
V


211 cÚ¡ 
	gKšgA‰ackWeights
[
PIECE_TYPE_NB
] = { 0, 0, 78, 56, 45, 11 };

214 cÚ¡ 
	gQu“nCheck
 = 810;

215 cÚ¡ 
	gRookCheck
 = 888;

216 cÚ¡ 
	gBishİCheck
 = 400;

217 cÚ¡ 
	gKnightCheck
 = 790;

220 cÚ¡ 
V®ue
 
	gLazyTh»shŞd
 = Value(1500);

221 cÚ¡ 
V®ue
 
	gS·ûTh»shŞd
 = Value(12222);

226 
	g‹m¶©e
<
CŞÜ
 
	gUs
>

227 
ev®_š™
(cÚ¡ 
Pos™iÚ
& 
pos
, 
Ev®Info
& 
ei
) {

229 cÚ¡ 
CŞÜ
 
	gThem
 = (
Us
 =ğ
WHITE
 ? 
BLACK
 : WHITE);

230 cÚ¡ 
Squ¬e
 
	gUp
 = (
Us
 =ğ
WHITE
 ? 
NORTH
 : 
SOUTH
);

231 cÚ¡ 
Squ¬e
 
	gDown
 = (
Us
 =ğ
WHITE
 ? 
SOUTH
 : 
NORTH
);

232 cÚ¡ 
B™bßrd
 
	gLowRªks
 = (
Us
 =ğ
WHITE
 ? 
Rªk2BB
 | 
Rªk3BB
: 
Rªk7BB
 | 
Rªk6BB
);

235 
B™bßrd
 
	gb
 = 
pos
.
p›ûs
(
Us
, 
PAWN
è& (
	gshiá
<
	gDown
>(
	gpos
.p›ûs()è| 
	gLowRªks
);

239 
	gei
.
	gmob™yA»a
[
Us
] = ~(
b
 | 
pos
.
squ¬e
<
KING
>(Usè| 
ei
.
³
->
·wn_©cks
(
Them
));

242 
	gb
 = 
ei
.
©ckedBy
[
Us
][
KING
] = 
pos
.
©cks_äom
<KING>Õos.
squ¬e
<KING>(Us));

243 
	gei
.
	g©ckedBy
[
Us
][
PAWN
] = 
ei
.
³
->
·wn_©cks
(Us);

245 
	gei
.
	g©ckedBy2
[
Us
] = 
b
 & 
ei
.
©ckedBy
[Us][
PAWN
];

246 
	gei
.
	g©ckedBy
[
Us
][
ALL_PIECES
] = 
b
 | 
ei
.
©ckedBy
[Us][
PAWN
];

249 ià(
	gpos
.
nÚ_·wn_m©”Ÿl
(
Them
è>ğ
Qu“nV®ueMg
)

251 
ei
.
kšgRšg
[
Us
] = 
b
 | 
shiá
<
Up
>(b);

252 
	gei
.
	gkšgA‰ack”sCouÁ
[
Them
] = 
pİcouÁ
(
b
 & 
ei
.
³
->
·wn_©cks
(Them));

253 
	gei
.
	gkšgAdjaûÁZÚeA‰acksCouÁ
[
Them
] = 
ei
.
kšgA‰ack”sWeight
[Them] = 0;

256 
	gei
.
	gkšgRšg
[
Us
] = 
ei
.
kšgA‰ack”sCouÁ
[
Them
] = 0;

263 
	g‹m¶©e
<
boŞ
 
	gDoT¿û
, 
CŞÜ
 
	gUs
 = 
WHITE
, 
P›ûTy³
 
	gPt
 = 
KNIGHT
>

264 
ScÜe
 
ev®u©e_p›ûs
(cÚ¡ 
Pos™iÚ
& 
pos
, 
Ev®Info
& 
ei
, ScÜe* 
mob™y
) {

266 cÚ¡ 
CŞÜ
 
	gThem
 = (
Us
 =ğ
WHITE
 ? 
BLACK
 : WHITE);

267 cÚ¡ 
P›ûTy³
 
	gNextPt
 = (
Us
 =ğ
WHITE
 ? 
Pt
 : PieceType(Pt + 1));

268 cÚ¡ 
B™bßrd
 
	gOuo¡Rªks
 = (
Us
 =ğ
WHITE
 ? 
Rªk4BB
 | 
Rªk5BB
 | 
Rªk6BB


269 : 
Rªk5BB
 | 
Rªk4BB
 | 
Rªk3BB
);

270 cÚ¡ 
Squ¬e
* 
	g¶
 = 
pos
.
squ¬es
<
Pt
>(
Us
);

272 
B™bßrd
 
	gb
, 
	gbb
;

273 
Squ¬e
 
	gs
;

274 
ScÜe
 
	gscÜe
 = 
SCORE_ZERO
;

276 
	gei
.
	g©ckedBy
[
Us
][
Pt
] = 0;

278 (
	gs
 = *
¶
++è!ğ
SQ_NONE
)

281 
b
 = 
Pt
 =ğ
BISHOP
 ? 
©cks_bb
<BISHOP>(
s
, 
	gpos
.
p›ûs
(è^…os.p›ûs(
Us
, 
QUEEN
))

282 : 
Pt
 =ğ
ROOK
 ? 
©cks_bb
< ROOK>(
s
, 
	gpos
.
p›ûs
(è^…os.p›ûs(
Us
, ROOK, 
QUEEN
))

283 : 
pos
.
©cks_äom
<
Pt
>(
s
);

285 ià(
	gpos
.
pšÃd_p›ûs
(
Us
è& 
	gs
)

286 
	gb
 &ğ
LšeBB
[
pos
.
squ¬e
<
KING
>(
Us
)][
s
];

288 
	gei
.
	g©ckedBy2
[
Us
] |ğ
ei
.
©ckedBy
[Us][
ALL_PIECES
] & 
b
;

289 
	gei
.
	g©ckedBy
[
Us
][
ALL_PIECES
] |ğ
ei
.
©ckedBy
[Us][
Pt
] |ğ
b
;

291 ià(
	gb
 & 
	gei
.
	gkšgRšg
[
Them
])

293 
	gei
.
	gkšgA‰ack”sCouÁ
[
Us
]++;

294 
	gei
.
	gkšgA‰ack”sWeight
[
Us
] +ğ
KšgA‰ackWeights
[
Pt
];

295 
	gei
.
	gkšgAdjaûÁZÚeA‰acksCouÁ
[
Us
] +ğ
pİcouÁ
(
b
 & 
ei
.
©ckedBy
[
Them
][
KING
]);

298 
	gmob
 = 
pİcouÁ
(
b
 & 
ei
.
mob™yA»a
[
Us
]);

300 
	gmob™y
[
Us
] +ğ
Mob™yBÚus
[
Pt
-2][
mob
];

303 
	gscÜe
 +ğ
PrÙeùÜ
[
Pt
-2][
di¡ªû
(
s
, 
pos
.
squ¬e
<
KING
>(
Us
))];

305 ià(
	gPt
 =ğ
BISHOP
 || 
Pt
 =ğ
KNIGHT
)

308 
bb
 = 
Ouo¡Rªks
 & ~
ei
.
³
->
·wn_©cks_¥ª
(
Them
);

309 ià(
	gbb
 & 
	gs
)

310 
	gscÜe
 +ğ
Ouo¡
[
Pt
 =ğ
BISHOP
][!!(
ei
.
©ckedBy
[
Us
][
PAWN
] & 
s
)] * 2;

313 
	gbb
 &ğ
b
 & ~
pos
.
p›ûs
(
Us
);

314 ià(
	gbb
)

315 
	gscÜe
 +ğ
Ouo¡
[
Pt
 =ğ
BISHOP
][!!(
ei
.
©ckedBy
[
Us
][
PAWN
] & 
bb
)];

319 iàĞ
»Ïtive_¿nk
(
Us
, 
s
è< 
	gRANK_5


320 && (
	gpos
.
p›ûs
(
PAWN
è& (
	gs
 + 
·wn_push
(
Us
))))

321 
	gscÜe
 +ğ
MšÜBehšdPawn
;

324 ià(
	gPt
 =ğ
BISHOP
)

325 
scÜe
 -ğ
BishİPawns
 * 
ei
.
³
->
·wns_Ú_§me_cŞÜ_squ¬es
(
Us
, 
s
);

330 iàĞ
	gPt
 =ğ
BISHOP


331 && 
pos
.
is_chess960
()

332 && (
s
 =ğ
»Ïtive_squ¬e
(
Us
, 
SQ_A1
è|| 
	gs
 =ğ»Ïtive_squ¬e(Us, 
SQ_H1
)))

334 
Squ¬e
 
	gd
 = 
·wn_push
(
Us
è+ (
fe_of
(
s
è=ğ
FILE_A
 ? 
EAST
 : 
WEST
);

335 ià(
	gpos
.
p›û_Ú
(
s
 + 
d
è=ğ
make_p›û
(
Us
, 
PAWN
))

336 
	gscÜe
 -ğ!
pos
.
em±y
(
s
 + 
d
 + 
·wn_push
(
Us
)è? 
T¿µedBishİA1H1
 * 4

337 : 
pos
.
p›û_Ú
(
s
 + 
d
 + dè=ğ
make_p›û
(
Us
, 
PAWN
è? 
	gT¿µedBishİA1H1
 * 2

338 : 
T¿µedBishİA1H1
;

342 ià(
	gPt
 =ğ
ROOK
)

345 ià(
»Ïtive_¿nk
(
Us
, 
s
è>ğ
RANK_5
)

346 
scÜe
 +ğ
RookOnPawn
 * 
pİcouÁ
(
pos
.
p›ûs
(
Them
, 
PAWN
è& 
P£udoA‰acks
[
ROOK
][
s
]);

349 ià(
	gei
.
	g³
->
£miİ’_fe
(
Us
, 
fe_of
(
s
)))

350 
	gscÜe
 +ğ
RookOnFe
[!!
ei
.
³
->
£miİ’_fe
(
Them
, 
fe_of
(
s
))];

353 ià(
	gmob
 <= 3)

355 
Squ¬e
 
ksq
 = 
pos
.
squ¬e
<
KING
>(
Us
);

357 iàĞ((
fe_of
(
ksq
è< 
	gFILE_E
è=ğ(fe_of(
s
) < file_of(ksq)))

358 && !
ei
.
³
->
£miİ’_side
(
Us
, 
fe_of
(
ksq
), fe_of(
s
) < file_of(ksq)))

359 
	gscÜe
 -ğ(
T¿µedRook
 - 
make_scÜe
(
mob
 * 22, 0)è* (1 + !
	gpos
.
ÿn_ÿ¡Ë
(
Us
));

363 ià(
	gPt
 =ğ
QUEEN
)

366 
B™bßrd
 
pšÃrs
;

367 ià(
	gpos
.
¦id”_block”s
(
pos
.
p›ûs
(
Them
, 
ROOK
, 
BISHOP
), 
s
, 
pšÃrs
))

368 
	gscÜe
 -ğ
W—kQu“n
;

372 ià(
	gDoT¿û
)

373 
	gT¿û
::
add
(
Pt
, 
Us
, 
scÜe
);

376  
	gscÜe
 - 
	gev®u©e_p›ûs
<
	gDoT¿û
, 
	gThem
, 
	gNextPt
>(
	gpos
, 
	gei
, 
	gmob™y
);

379 
	g‹m¶©e
<>

380 
ScÜe
 
	gev®u©e_p›ûs
<
	gçl£
, 
	gWHITE
, 
	gKING
>(cÚ¡ 
	gPos™iÚ
&, 
	gEv®Info
&, 
	gScÜe
*è{  
	gSCORE_ZERO
; }

381 
	g‹m¶©e
<>

382 
ScÜe
 
	gev®u©e_p›ûs
< 
	gŒue
, 
	gWHITE
, 
	gKING
>(cÚ¡ 
	gPos™iÚ
&, 
	gEv®Info
&, 
	gScÜe
*è{  
	gSCORE_ZERO
; }

387 cÚ¡ 
B™bßrd
 
	gQu“nSide
 = 
FeABB
 | 
FeBBB
 | 
FeCBB
 | 
FeDBB
;

388 cÚ¡ 
B™bßrd
 
	gC’‹rFes
 = 
FeCBB
 | 
FeDBB
 | 
FeEBB
 | 
FeFBB
;

389 cÚ¡ 
B™bßrd
 
	gKšgSide
 = 
FeEBB
 | 
FeFBB
 | 
FeGBB
 | 
FeHBB
;

391 cÚ¡ 
B™bßrd
 
	gKšgFÏnk
[
FILE_NB
] = {

392 
Qu“nSide
, Qu“nSide, Qu“nSide, 
C’‹rFes
, C’‹rFes, 
KšgSide
, KingSide, KingSide

395 
	g‹m¶©e
<
CŞÜ
 
	gUs
, 
boŞ
 
	gDoT¿û
>

396 
ScÜe
 
ev®u©e_kšg
(cÚ¡ 
Pos™iÚ
& 
pos
, cÚ¡ 
Ev®Info
& 
ei
) {

398 cÚ¡ 
CŞÜ
 
	gThem
 = (
Us
 =ğ
WHITE
 ? 
BLACK
 : WHITE);

399 cÚ¡ 
Squ¬e
 
	gUp
 = (
Us
 =ğ
WHITE
 ? 
NORTH
 : 
SOUTH
);

400 cÚ¡ 
B™bßrd
 
	gCamp
 = (
Us
 =ğ
WHITE
 ? ~B™bßrd(0è^ 
Rªk6BB
 ^ 
Rªk7BB
 ^ 
Rªk8BB


401 : ~
B™bßrd
(0è^ 
Rªk1BB
 ^ 
Rªk2BB
 ^ 
Rªk3BB
);

403 cÚ¡ 
Squ¬e
 
	gksq
 = 
pos
.
squ¬e
<
KING
>(
Us
);

404 
B™bßrd
 
	gundeãnded
, 
	gb
, 
	gb1
, 
	gb2
, 
	g§ã
, 
	gÙh”
;

405 
	gkšgDªg”
;

408 
ScÜe
 
	gscÜe
 = 
ei
.
³
->
kšg_§ãty
<
Us
>(
pos
, 
	gksq
);

411 ià(
	gei
.
	gkšgA‰ack”sCouÁ
[
Them
])

414 
	gundeãnded
 = 
ei
.
©ckedBy
[
Them
][
ALL_PIECES
]

415 & 
ei
.
©ckedBy
[
Us
][
KING
]

416 & ~
ei
.
©ckedBy2
[
Us
];

419 
	gb
 = 
ei
.
©ckedBy
[
Them
][
ALL_PIECES
] & ~ei.©ckedBy[
Us
][ALL_PIECES]

420 & 
ei
.
kšgRšg
[
Us
] & ~
pos
.
p›ûs
(
Them
);

427 
	gkšgDªg”
 = 
ei
.
kšgA‰ack”sCouÁ
[
Them
] *ƒi.
kšgA‰ack”sWeight
[Them]

428 + 103 * 
ei
.
kšgAdjaûÁZÚeA‰acksCouÁ
[
Them
]

429 + 190 * 
pİcouÁ
(
undeãnded
)

430 + 142 * (
pİcouÁ
(
b
è+ !!
pos
.
pšÃd_p›ûs
(
Us
))

431 - 810 * !
pos
.
couÁ
<
QUEEN
>(
Them
)

432 - 6 * 
mg_v®ue
(
scÜe
) / 5 - 5;

435 
	g§ã
 = ~
pos
.
p›ûs
(
Them
);

436 
	g§ã
 &ğ~
ei
.
©ckedBy
[
Us
][
ALL_PIECES
] | (
undeãnded
 &ƒi.
©ckedBy2
[
Them
]);

438 
	gb1
 = 
pos
.
©cks_äom
<
ROOK
 >(
ksq
);

439 
	gb2
 = 
pos
.
©cks_äom
<
BISHOP
>(
ksq
);

442 ià((
	gb1
 | 
	gb2
è& 
	gei
.
	g©ckedBy
[
Them
][
QUEEN
] & 
	g§ã
)

443 
	gkšgDªg”
 +ğ
Qu“nCheck
;

447 
	g§ã
 |ğ
ei
.
©ckedBy2
[
Them
]

448 & ~(
ei
.
©ckedBy2
[
Us
] | 
pos
.
p›ûs
(
Them
))

449 & 
ei
.
©ckedBy
[
Us
][
QUEEN
];

454 
	gÙh”
 = ~Ğ
ei
.
©ckedBy
[
Us
][
PAWN
]

455 | (
pos
.
p›ûs
(
Them
, 
PAWN
è& 
	gshiá
<
	gUp
>(
	gpos
.pieces(PAWN))));

458 ià(
	gb1
 & 
	gei
.
	g©ckedBy
[
Them
][
ROOK
] & 
	g§ã
)

459 
	gkšgDªg”
 +ğ
RookCheck
;

461 ià(
	gb1
 & 
	gei
.
	g©ckedBy
[
Them
][
ROOK
] & 
	gÙh”
)

462 
	gscÜe
 -ğ
Oth”Check
;

465 ià(
	gb2
 & 
	gei
.
	g©ckedBy
[
Them
][
BISHOP
] & 
	g§ã
)

466 
	gkšgDªg”
 +ğ
BishİCheck
;

468 ià(
	gb2
 & 
	gei
.
	g©ckedBy
[
Them
][
BISHOP
] & 
	gÙh”
)

469 
	gscÜe
 -ğ
Oth”Check
;

472 
	gb
 = 
pos
.
©cks_äom
<
KNIGHT
>(
ksq
è& 
ei
.
©ckedBy
[
Them
][KNIGHT];

473 ià(
	gb
 & 
	g§ã
)

474 
	gkšgDªg”
 +ğ
KnightCheck
;

476 ià(
	gb
 & 
	gÙh”
)

477 
	gscÜe
 -ğ
Oth”Check
;

480 ià(
	gkšgDªg”
 > 0)

481 
	gscÜe
 -ğ
make_scÜe
(
kšgDªg”
 * kingDanger / 4096, 0);

485 
Fe
 
	gkf
 = 
fe_of
(
ksq
);

486 
	gb
 = 
ei
.
©ckedBy
[
Them
][
ALL_PIECES
] & 
KšgFÏnk
[
kf
] & 
Camp
;

488 
as£¹
(((
Us
 =ğ
WHITE
 ? 
b
 << 4 : b >> 4) & b) == 0);

489 
as£¹
(
pİcouÁ
(
Us
 =ğ
WHITE
 ? 
b
 << 4 : b >> 4) ==…opcount(b));

493 
	gb
 = (
Us
 =ğ
WHITE
 ? 
b
 << 4 : b >> 4)

494 | (
b
 & 
ei
.
©ckedBy2
[
Them
] & ~ei.
©ckedBy
[
Us
][
PAWN
]);

496 
	gscÜe
 -ğ
Clo£EÃm›s
 * 
pİcouÁ
(
b
);

499 ià(!(
	gpos
.
p›ûs
(
PAWN
è& 
	gKšgFÏnk
[
kf
]))

500 
	gscÜe
 -ğ
PawÆessFÏnk
;

502 ià(
	gDoT¿û
)

503 
	gT¿û
::
add
(
KING
, 
Us
, 
scÜe
);

505  
	gscÜe
;

512 
	g‹m¶©e
<
CŞÜ
 
	gUs
, 
boŞ
 
	gDoT¿û
>

513 
ScÜe
 
ev®u©e_th»©s
(cÚ¡ 
Pos™iÚ
& 
pos
, cÚ¡ 
Ev®Info
& 
ei
) {

515 cÚ¡ 
CŞÜ
 
	gThem
 = (
Us
 =ğ
WHITE
 ? 
BLACK
 : WHITE);

516 cÚ¡ 
Squ¬e
 
	gUp
 = (
Us
 =ğ
WHITE
 ? 
NORTH
 : 
SOUTH
);

517 cÚ¡ 
Squ¬e
 
	gLeá
 = (
Us
 =ğ
WHITE
 ? 
NORTH_WEST
 : 
SOUTH_EAST
);

518 cÚ¡ 
Squ¬e
 
	gRight
 = (
Us
 =ğ
WHITE
 ? 
NORTH_EAST
 : 
SOUTH_WEST
);

519 cÚ¡ 
B™bßrd
 
	gTRªk2BB
 = (
Us
 =ğ
WHITE
 ? 
Rªk2BB
 : 
Rªk7BB
);

520 cÚ¡ 
B™bßrd
 
	gTRªk7BB
 = (
Us
 =ğ
WHITE
 ? 
Rªk7BB
 : 
Rªk2BB
);

522 
B™bßrd
 
	gb
, 
	gw—k
, 
	gdeãnded
, 
	g¡rÚglyPrÙeùed
, 
	g§ãTh»©s
;

523 
ScÜe
 
	gscÜe
 = 
SCORE_ZERO
;

526 
	gw—k
 = (
pos
.
p›ûs
(
Them
è^…os.p›ûs(Them, 
PAWN
)è& 
	gei
.
	g©ckedBy
[
Us
][PAWN];

528 ià(
	gw—k
)

530 
	gb
 = 
pos
.
p›ûs
(
Us
, 
PAWN
è& ( ~
	gei
.
	g©ckedBy
[
Them
][
ALL_PIECES
]

531 | 
	gei
.
	g©ckedBy
[
Us
][
ALL_PIECES
]);

533 
	g§ãTh»©s
 = (
shiá
<
Right
>(
b
è| shiá<
Leá
>(b)è& 
w—k
;

535 
	gscÜe
 +ğ
Th»©BySaãPawn
 * 
pİcouÁ
(
§ãTh»©s
);

537 ià(
	gw—k
 ^ 
	g§ãTh»©s
)

538 
	gscÜe
 +ğ
Th»©ByHªgšgPawn
;

543 
	g¡rÚglyPrÙeùed
 = 
ei
.
©ckedBy
[
Them
][
PAWN
]

544 | (
ei
.
©ckedBy2
[
Them
] & ~ei.©ckedBy2[
Us
]);

547 
	gdeãnded
 = (
pos
.
p›ûs
(
Them
è^…os.p›ûs(Them, 
PAWN
))

548 & 
	g¡rÚglyPrÙeùed
;

551 
	gw—k
 = 
pos
.
p›ûs
(
Them
)

552 & ~
¡rÚglyPrÙeùed


553 & 
ei
.
©ckedBy
[
Us
][
ALL_PIECES
];

556 ià(
	gdeãnded
 | 
	gw—k
)

558 
	gb
 = (
deãnded
 | 
w—k
è& (
ei
.
©ckedBy
[
Us
][
KNIGHT
] |ƒi.©ckedBy[Us][
BISHOP
]);

559 
	gb
)

561 
Squ¬e
 
	gs
 = 
pİ_lsb
(&
b
);

562 
	gscÜe
 +ğ
Th»©ByMšÜ
[
ty³_of
(
pos
.
p›û_Ú
(
s
))];

563 ià(
ty³_of
(
pos
.
p›û_Ú
(
s
)è!ğ
PAWN
)

564 
scÜe
 +ğ
Th»©ByRªk
 * ()
»Ïtive_¿nk
(
Them
, 
s
);

567 
	gb
 = (
pos
.
p›ûs
(
Them
, 
QUEEN
è| 
	gw—k
è& 
	gei
.
	g©ckedBy
[
Us
][
ROOK
];

568 
	gb
)

570 
Squ¬e
 
	gs
 = 
pİ_lsb
(&
b
);

571 
	gscÜe
 +ğ
Th»©ByRook
[
ty³_of
(
pos
.
p›û_Ú
(
s
))];

572 ià(
ty³_of
(
pos
.
p›û_Ú
(
s
)è!ğ
PAWN
)

573 
scÜe
 +ğ
Th»©ByRªk
 * ()
»Ïtive_¿nk
(
Them
, 
s
);

576 
	gscÜe
 +ğ
Hªgšg
 * 
pİcouÁ
(
w—k
 & ~
ei
.
©ckedBy
[
Them
][
ALL_PIECES
]);

578 
	gb
 = 
w—k
 & 
ei
.
©ckedBy
[
Us
][
KING
];

579 ià(
	gb
)

580 
	gscÜe
 +ğ
Th»©ByKšg
[
mÜe_thª_Úe
(
b
)];

584 
	gb
 = 
pos
.
p›ûs
(
Us
, 
PAWN
è& ~
	gTRªk7BB
;

585 
	gb
 = 
shiá
<
Up
>(
b
 | (shiá<Up>(b & 
TRªk2BB
è& ~
pos
.
p›ûs
()));

587 
	gb
 &ğ~
pos
.
p›ûs
()

588 & ~
ei
.
©ckedBy
[
Them
][
PAWN
]

589 & (
ei
.
©ckedBy
[
Us
][
ALL_PIECES
] | ~ei.©ckedBy[
Them
][ALL_PIECES]);

591 
	gb
 = (
shiá
<
Leá
>(
b
è| shiá<
Right
>(b))

592 & 
pos
.
p›ûs
(
Them
)

593 & ~
ei
.
©ckedBy
[
Us
][
PAWN
];

595 
	gscÜe
 +ğ
Th»©ByPawnPush
 * 
pİcouÁ
(
b
);

597 ià(
	gDoT¿û
)

598 
	gT¿û
::
add
(
THREAT
, 
Us
, 
scÜe
);

600  
	gscÜe
;

607 
	g‹m¶©e
<
CŞÜ
 
	gUs
, 
boŞ
 
	gDoT¿û
>

608 
ScÜe
 
ev®u©e_·s£r_·wns
(cÚ¡ 
Pos™iÚ
& 
pos
, cÚ¡ 
Ev®Info
& 
ei
) {

610 cÚ¡ 
CŞÜ
 
	gThem
 = (
Us
 =ğ
WHITE
 ? 
BLACK
 : WHITE);

612 
B™bßrd
 
	gb
, 
	gbb
, 
	gsqu¬esToQu“n
, 
	gdeãndedSqu¬es
, 
	gun§ãSqu¬es
;

613 
ScÜe
 
	gscÜe
 = 
SCORE_ZERO
;

615 
	gb
 = 
ei
.
³
->
·s£d_·wns
(
Us
);

617 
	gb
)

619 
Squ¬e
 
	gs
 = 
pİ_lsb
(&
b
);

621 
as£¹
(!(
pos
.
p›ûs
(
PAWN
è& 
fÜw¬d_bb
(
Us
, 
s
)));

623 
	gbb
 = 
fÜw¬d_bb
(
Us
, 
s
è& (
	gei
.
	g©ckedBy
[
Them
][
ALL_PIECES
] | 
	gpos
.
p›ûs
(Them));

624 
	gscÜe
 -ğ
Hšd”Pas£dPawn
 * 
pİcouÁ
(
bb
);

626 
	gr
 = 
»Ïtive_¿nk
(
Us
, 
s
è- 
	gRANK_2
;

627 
	g¼
 = 
r
 * (r - 1);

629 
V®ue
 
	gmbÚus
 = 
Pas£d
[
MG
][
r
], 
	gebÚus
 = Pas£d[
EG
][r];

631 ià(
	g¼
)

633 
Squ¬e
 
	gblockSq
 = 
s
 + 
·wn_push
(
Us
);

636 
	gebÚus
 +ğ
di¡ªû
(
pos
.
squ¬e
<
KING
>(
Them
), 
blockSq
è* 5 * 
	g¼


637 - 
di¡ªû
(
pos
.
squ¬e
<
KING
>(
Us
 ), 
blockSq
è* 2 * 
	g¼
;

640 ià(
»Ïtive_¿nk
(
Us
, 
blockSq
è!ğ
RANK_8
)

641 
ebÚus
 -ğ
di¡ªû
(
pos
.
squ¬e
<
KING
>(
Us
), 
blockSq
 + 
·wn_push
(Us)è* 
	g¼
;

644 ià(
	gpos
.
em±y
(
blockSq
))

649 
	gdeãndedSqu¬es
 = 
un§ãSqu¬es
 = 
squ¬esToQu“n
 = 
fÜw¬d_bb
(
Us
, 
s
);

651 
	gbb
 = 
fÜw¬d_bb
(
Them
, 
s
è& 
	gpos
.
p›ûs
(
ROOK
, 
QUEEN
è&…os.
	g©cks_äom
<
	gROOK
>(
	gs
);

653 ià(!(
	gpos
.
p›ûs
(
Us
è& 
	gbb
))

654 
	gdeãndedSqu¬es
 &ğ
ei
.
©ckedBy
[
Us
][
ALL_PIECES
];

656 ià(!(
	gpos
.
p›ûs
(
Them
è& 
	gbb
))

657 
	gun§ãSqu¬es
 &ğ
ei
.
©ckedBy
[
Them
][
ALL_PIECES
] | 
pos
.
p›ûs
(Them);

661 
	gk
 = !
un§ãSqu¬es
 ? 18 : !(un§ãSqu¬e & 
blockSq
) ? 8 : 0;

665 ià(
	gdeãndedSqu¬es
 =ğ
squ¬esToQu“n
)

666 
k
 += 6;

668 ià(
	gdeãndedSqu¬es
 & 
	gblockSq
)

669 
	gk
 += 4;

671 
	gmbÚus
 +ğ
k
 * 
¼
, 
	gebÚus
 += k *„r;

673 ià(
	gpos
.
p›ûs
(
Us
è& 
	gblockSq
)

674 
	gmbÚus
 +ğ
¼
 + 
r
 * 2, 
	gebÚus
 +=„r +„ * 2;

679 ià(!
	gpos
.
·wn_·s£d
(
Us
, 
s
 + 
·wn_push
(Us)))

680 
	gmbÚus
 /ğ2, 
	gebÚus
 /= 2;

682 
	gscÜe
 +ğ
make_scÜe
(
mbÚus
, 
ebÚus
è+ 
	gPas£dFe
[
fe_of
(
s
)];

685 ià(
	gDoT¿û
)

686 
	gT¿û
::
add
(
PASSED
, 
Us
, 
scÜe
);

688  
	gscÜe
;

698 
	g‹m¶©e
<
CŞÜ
 
	gUs
>

699 
ScÜe
 
ev®u©e_¥aû
(cÚ¡ 
Pos™iÚ
& 
pos
, cÚ¡ 
Ev®Info
& 
ei
) {

701 cÚ¡ 
CŞÜ
 
	gThem
 = (
Us
 =ğ
WHITE
 ? 
BLACK
 : WHITE);

702 cÚ¡ 
B™bßrd
 
	gS·ûMask
 =

703 
Us
 =ğ
WHITE
 ? 
C’‹rFes
 & (
Rªk2BB
 | 
Rªk3BB
 | 
Rªk4BB
)

704 : 
C’‹rFes
 & (
Rªk7BB
 | 
Rªk6BB
 | 
Rªk5BB
);

709 
B™bßrd
 
	g§ã
 = 
S·ûMask


710 & ~
pos
.
p›ûs
(
Us
, 
PAWN
)

711 & ~
	gei
.
	g©ckedBy
[
Them
][
PAWN
]

712 & (
	gei
.
	g©ckedBy
[
Us
][
ALL_PIECES
] | ~ei.©ckedBy[
Them
][ALL_PIECES]);

715 
B™bßrd
 
	gbehšd
 = 
pos
.
p›ûs
(
Us
, 
PAWN
);

716 
	gbehšd
 |ğ(
Us
 =ğ
WHITE
 ? 
behšd
 >> 8 : behind << 8);

717 
	gbehšd
 |ğ(
Us
 =ğ
WHITE
 ? 
behšd
 >> 16 : behind << 16);

720 
as£¹
((
§ã
 >> (
Us
 =ğ
WHITE
 ? 32 : 0)) == 0);

723 
	gbÚus
 = 
pİcouÁ
((
Us
 =ğ
WHITE
 ? 
§ã
 << 32 : saã >> 32è| (
behšd
 & safe));

724 
	gweight
 = 
pos
.
couÁ
<
ALL_PIECES
>(
Us
è- 2 * 
ei
.
³
->
İ’_fes
();

726  
make_scÜe
(
bÚus
 * 
weight
 * weight / 16, 0);

733 
ScÜe
 
ev®u©e_š™Ÿtive
(cÚ¡ 
Pos™iÚ
& 
pos
, 
asymm‘ry
, 
V®ue
 
eg
) {

735 
	gkšgDi¡ªû
 = 
di¡ªû
<
Fe
>(
pos
.
squ¬e
<
KING
>(
WHITE
), 
	gpos
.
	gsqu¬e
<
	gKING
>(
	gBLACK
))

736 - 
	gdi¡ªû
<
	gRªk
>(
	gpos
.
	gsqu¬e
<
	gKING
>(
	gWHITE
),…os.squ¬e<KING>(
	gBLACK
));

737 
boŞ
 
	gbÙhFÏnks
 = (
pos
.
p›ûs
(
PAWN
è& 
Qu“nSide
è&& (pos.p›ûs(PAWNè& 
KšgSide
);

740 
	gš™Ÿtive
 = 8 * (
asymm‘ry
 + 
kšgDi¡ªû
 - 17è+ 12 * 
pos
.
couÁ
<
PAWN
>(è+ 16 * 
bÙhFÏnks
;

745 
	gv®ue
 = ((
eg
 > 0è- (eg < 0)è* 
¡d
::
max
(
š™Ÿtive
, -
abs
(eg));

747  
make_scÜe
(0, 
v®ue
);

752 
SÿËFaùÜ
 
ev®u©e_sÿË_çùÜ
(cÚ¡ 
Pos™iÚ
& 
pos
, cÚ¡ 
Ev®Info
& 
ei
, 
V®ue
 
eg
) {

754 
CŞÜ
 
	g¡rÚgSide
 = 
eg
 > 
VALUE_DRAW
 ? 
WHITE
 : 
BLACK
;

755 
SÿËFaùÜ
 
	gsf
 = 
ei
.
me
->
sÿË_çùÜ
(
pos
, 
¡rÚgSide
);

759 ià(
	gsf
 =ğ
SCALE_FACTOR_NORMAL
 || 
sf
 =ğ
SCALE_FACTOR_ONEPAWN
)

761 ià(
pos
.
İpos™e_bishİs
())

765 iàĞ
pos
.
nÚ_·wn_m©”Ÿl
(
WHITE
è=ğ
BishİV®ueMg


766 && 
pos
.
nÚ_·wn_m©”Ÿl
(
BLACK
è=ğ
BishİV®ueMg
)

767  
mÜe_thª_Úe
(
pos
.
p›ûs
(
PAWN
)è? 
SÿËFaùÜ
(31) : ScaleFactor(9);

771  
SÿËFaùÜ
(46);

775 iàĞ
abs
(
eg
è<ğ
BishİV®ueEg


776 && 
pos
.
couÁ
<
PAWN
>(
¡rÚgSide
) <= 2

777 && !
pos
.
·wn_·s£d
(~
¡rÚgSide
,…os.
squ¬e
<
KING
>(~strongSide)))

778  
SÿËFaùÜ
(37 + 7 * 
pos
.
couÁ
<
PAWN
>(
¡rÚgSide
));

781  
	gsf
;

790 
	g‹m¶©e
<
boŞ
 
	gDoT¿û
>

791 
V®ue
 
	gEv®
::
	$ev®u©e
(cÚ¡ 
Pos™iÚ
& 
pos
) {

793 
	`as£¹
(!
pos
.
	`check”s
());

795 
ScÜe
 
mob™y
[
COLOR_NB
] = { 
SCORE_ZERO
, SCORE_ZERO };

796 
V®ue
 
v
;

797 
Ev®Info
 
ei
;

800 
ei
.
me
 = 
M©”Ÿl
::
	`´obe
(
pos
);

804 ià(
ei
.
me
->
	`¥ecŸlized_ev®_exi¡s
())

805  
ei
.
me
->
	`ev®u©e
(
pos
);

810 
ScÜe
 
scÜe
 = 
pos
.
	`psq_scÜe
(è+ 
ei
.
me
->
	`imb®ªû
();

813 
ei
.
³
 = 
Pawns
::
	`´obe
(
pos
);

814 
scÜe
 +ğ
ei
.
³
->
	`·wns_scÜe
();

817 
v
 = (
	`mg_v®ue
(
scÜe
è+ 
	`eg_v®ue
(score)) / 2;

818 ià(
	`abs
(
v
è> 
LazyTh»shŞd
)

819  
pos
.
	`side_to_move
(è=ğ
WHITE
 ? 
v
 : -v;

822 
ev®_š™
<
WHITE
>(
pos
, 
ei
);

823 
ev®_š™
<
BLACK
>(
pos
, 
ei
);

826 
scÜe
 +ğ
ev®u©e_p›ûs
<
DoT¿û
>(
pos
, 
ei
, 
mob™y
);

827 
scÜe
 +ğ
mob™y
[
WHITE
] - mob™y[
BLACK
];

831 
scÜe
 +ğ
ev®u©e_kšg
<
WHITE
, 
DoT¿û
>(
pos
, 
ei
)

832 - 
ev®u©e_kšg
<
BLACK
, 
DoT¿û
>(
pos
, 
ei
);

835 
scÜe
 +ğ
ev®u©e_th»©s
<
WHITE
, 
DoT¿û
>(
pos
, 
ei
)

836 - 
ev®u©e_th»©s
<
BLACK
, 
DoT¿û
>(
pos
, 
ei
);

839 
scÜe
 +ğ
ev®u©e_·s£r_·wns
<
WHITE
, 
DoT¿û
>(
pos
, 
ei
)

840 - 
ev®u©e_·s£r_·wns
<
BLACK
, 
DoT¿û
>(
pos
, 
ei
);

843 ià(
pos
.
	`nÚ_·wn_m©”Ÿl
(è>ğ
S·ûTh»shŞd
)

844 
scÜe
 +ğ
ev®u©e_¥aû
<
WHITE
>(
pos
, 
ei
)

845 - 
ev®u©e_¥aû
<
BLACK
>(
pos
, 
ei
);

848 
scÜe
 +ğ
	`ev®u©e_š™Ÿtive
(
pos
, 
ei
.
³
->
	`·wn_asymm‘ry
(), 
	`eg_v®ue
(score));

851 
SÿËFaùÜ
 
sf
 = 
	`ev®u©e_sÿË_çùÜ
(
pos
, 
ei
, 
	`eg_v®ue
(
scÜe
));

854 
v
 = 
	`mg_v®ue
(
scÜe
è* (
ei
.
me
->
	`game_pha£
())

855 + 
	`eg_v®ue
(
scÜe
è* (
PHASE_MIDGAME
 - 
ei
.
me
->
	`game_pha£
()è* 
sf
 / 
SCALE_FACTOR_NORMAL
;

857 
v
 /ğ(
PHASE_MIDGAME
);

860 ià(
DoT¿û
)

862 
T¿û
::
	`add
(
MATERIAL
, 
pos
.
	`psq_scÜe
());

863 
T¿û
::
	`add
(
IMBALANCE
, 
ei
.
me
->
	`imb®ªû
());

864 
T¿û
::
	`add
(
PAWN
, 
ei
.
³
->
	`·wns_scÜe
());

865 
T¿û
::
	`add
(
MOBILITY
, 
mob™y
[
WHITE
], mob™y[
BLACK
]);

866 ià(
pos
.
	`nÚ_·wn_m©”Ÿl
(è>ğ
S·ûTh»shŞd
)

867 
T¿û
::
	`add
(
SPACE
, 
ev®u©e_¥aû
<
WHITE
>(
pos
, 
ei
)

868 , 
ev®u©e_¥aû
<
BLACK
>(
pos
, 
ei
));

869 
T¿û
::
	`add
(
TOTAL
, 
scÜe
);

872  (
pos
.
	`side_to_move
(è=ğ
WHITE
 ? 
v
 : -vè+ 
Ev®
::
Tempo
;

873 
	}
}

876 
‹m¶©e
 
V®ue
 
	gEv®
::
ev®u©e
<
Œue
 >(cÚ¡ 
Pos™iÚ
&);

877 
‹m¶©e
 
V®ue
 
	gEv®
::
ev®u©e
<
çl£
>(cÚ¡ 
Pos™iÚ
&);

884 
	g¡d
::
¡ršg
 
Ev®
::
	$Œaû
(cÚ¡ 
Pos™iÚ
& 
pos
) {

886 
¡d
::
	`mem£t
(
scÜes
, 0, (scores));

888 
V®ue
 
v
 = 
ev®u©e
<
Œue
>(
pos
);

889 
v
 = 
pos
.
	`side_to_move
(è=ğ
WHITE
 ? v : -v;

891 
¡d
::
¡ršg¡»am
 
ss
;

892 
ss
 << 
¡d
::
showpošt
 << std::
noshowpos
 << std::
fixed
 << std::
	`£»cisiÚ
(2)

896 << " M©”ŸÈ| " << 
	`T”m
(
MATERIAL
)

897 << " Imb®ªû | " << 
	`T”m
(
IMBALANCE
)

898 << " Pawn | " << 
	`T”m
(
PAWN
)

899 << " Knight | " << 
	`T”m
(
KNIGHT
)

900 << " Bishİ | " << 
	`T”m
(
BISHOP
)

901 << " Rook | " << 
	`T”m
(
ROOK
)

902 << " Qu“n | " << 
	`T”m
(
QUEEN
)

903 << " Mob™y | " << 
	`T”m
(
MOBILITY
)

904 << " Kšg saãty | " << 
	`T”m
(
KING
)

905 << " Th»© | " << 
	`T”m
(
THREAT
)

906 << " Pas£d…awn | " << 
	`T”m
(
PASSED
)

907 << " S·û | " << 
	`T”m
(
SPACE
)

909 << " TÙ® | " << 
	`T”m
(
TOTAL
);

911 
ss
 << "\nTÙ® Ev®u©iÚ: " << 
	`to_ı
(
v
) << " (white side)\n";

913  
ss
.
	`¡r
();

914 
	}
}

	@evaluate.h

21 #iâdeà
EVALUATE_H_INCLUDED


22 
	#EVALUATE_H_INCLUDED


	)

24 
	~<¡ršg
>

26 
	~"ty³s.h
"

28 
şass
 
	gPos™iÚ
;

30 
Çme¥aû
 
	gEv®
 {

32 cÚ¡ 
V®ue
 
	gTempo
 = Value(20);

34 
	g¡d
::
¡ršg
 
Œaû
(cÚ¡ 
Pos™iÚ
& 
pos
);

36 
	g‹m¶©e
<
boŞ
 
	gDoT¿û
 = 
çl£
>

37 
V®ue
 
ev®u©e
(cÚ¡ 
Pos™iÚ
& 
pos
);

	@main.cpp

21 
	~<ÿs£¹
>

22 
	~<c¡ddef
>

23 
	~<io¡»am
>

25 
	~"b™bßrd.h
"

26 
	~"pos™iÚ.h
"

27 
	~"£¬ch.h
"

28 
	~"th»ad.h
"

29 
	~"‰.h
"

30 
	~"uci.h
"

31 
	~"syzygy/tb´obe.h
"

33 
	~<mpi.h
>

35 
Çme¥aû
 
	gPSQT
 {

36 
š™
();

39 
	gmpi_¿nk
;

40 
	gmpi_size
;

41 
MPI_D©©y³
 
	gmpi_‰e_t
;

42 
MPI_D©©y³
 
	gmpi_fuÎ_‰e_t
;

43 
MPI_D©©y³
 
	gmpi_şu¡”_t
;

45 
	$š™_mpi
(*
¬gc
, ***
¬gv
) {

47 
th»adšg
,

48 
‰e_blockËngths
[] = {1, 1, 1, 1, 1, 1},

49 
şu‹r_blockËngths
[] = {
Clu¡”Size
, 1};

50 
MPI_Ašt
 
‰e_di¥Ïûm’ts
[6], 
fuÎ_‰e_di¥Ïûm’ts
[6] = {

51 
	`off£tof
(
FuÎTTEÁry
, 
key
),

52 
	`off£tof
(
FuÎTTEÁry
, 
move16
),

53 
	`off£tof
(
FuÎTTEÁry
, 
v®ue16
),

54 
	`off£tof
(
FuÎTTEÁry
, 
ev®16
),

55 
	`off£tof
(
FuÎTTEÁry
, 
g’Bound8
),

56 
	`off£tof
(
FuÎTTEÁry
, 
d•th8
)

57 }, 
şu¡”_di¥Ïûm’ts
[] = {

58 
	`off£tof
(
Clu¡”
, 
’Œy
),

59 
	`off£tof
(
Clu¡”
, 
key
)

61 
MPI_D©©y³
 
‰e_ty³s
[] = {

62 
MPI_UINT16_T
,

63 
MPI_UINT16_T
,

64 
MPI_INT16_T
,

65 
MPI_INT16_T
,

66 
MPI_UINT8_T
,

67 
MPI_INT8_T


68 }, 
şu¡”_ty³s
[2];

69 
MPI_D©©y³
 
fuÎ_‰e_ty³s
[] = {

70 
MPI_UINT64_T
,

71 
MPI_UINT16_T
,

72 
MPI_INT16_T
,

73 
MPI_INT16_T
,

74 
MPI_UINT8_T
,

75 
MPI_INT8_T


78 
	`MPI_In™_th»ad
(
¬gc
, 
¬gv
, 
MPI_THREAD_SERIALIZED
, &
th»adšg
);

79 
	`as£¹
(
th»adšg
 =ğ
MPI_THREAD_SERIALIZED
);

81 
	`MPI_Comm_¿nk
(
MPI_COMM_WORLD
, &
mpi_¿nk
);

82 
	`MPI_Comm_size
(
MPI_COMM_WORLD
, &
mpi_size
);

84 
TTEÁry
::
	`fl_di¥Ïûm’ts
(
‰e_di¥Ïûm’ts
);

85 
	`MPI_Ty³_ü—‹_¡ruù
(6, 
‰e_blockËngths
, 
‰e_di¥Ïûm’ts
, 
‰e_ty³s
,

86 &
mpi_‰e_t
);

87 
	`MPI_Ty³_ü—‹_¡ruù
(6, 
‰e_blockËngths
, 
fuÎ_‰e_di¥Ïûm’ts
, 
fuÎ_‰e_ty³s
,

88 &
mpi_fuÎ_‰e_t
);

89 
	`MPI_Ty³_comm™
(&
mpi_‰e_t
);

90 
	`MPI_Ty³_comm™
(&
mpi_fuÎ_‰e_t
);

91 
şu¡”_ty³s
[0] = 
mpi_‰e_t
;

92 
	`MPI_Ty³_ü—‹_¡ruù
(1, 
şu‹r_blockËngths
, 
şu¡”_di¥Ïûm’ts
,

93 
şu¡”_ty³s
, &
mpi_şu¡”_t
);

94 
	`MPI_Ty³_comm™
(&
mpi_şu¡”_t
);

95 
	}
}

97 
	$maš
(
¬gc
, * 
¬gv
[]) {

98 
	`š™_mpi
(&
¬gc
, &
¬gv
);

100 ià(
mpi_¿nk
 == 0) {

101 
¡d
::
cout
 << 
	`’gše_šfo
(è<< std::
’dl
;

104 
UCI
::
	`š™
(
O±iÚs
);

105 
PSQT
::
	`š™
();

106 
B™bßrds
::
	`š™
();

107 
Pos™iÚ
::
	`š™
();

108 
B™ba£s
::
	`š™
();

109 
S—rch
::
	`š™
();

110 
Pawns
::
	`š™
();

111 
Th»ads
.
	`š™
();

112 
TabËba£s
::
	`š™
(
O±iÚs
["SyzygyPath"]);

113 
TT
.
	`»size
(
O±iÚs
["Hash"]);

115 
UCI
::
	`loİ
(
¬gc
, 
¬gv
);

117 
Th»ads
.
	`ex™
();

119 
	`MPI_Fš®ize
();

122 
	}
}

	@material.cpp

21 
	~<®gÜ™hm
>

22 
	~<ÿs£¹
>

23 
	~<c¡ršg
>

25 
	~"m©”Ÿl.h
"

26 
	~"th»ad.h
"

28 
usšg
 
Çme¥aû
 
	g¡d
;

30 
	gÇme¥aû
 {

34 cÚ¡ 
	gQuad¿ticOurs
[][
PIECE_TYPE_NB
] = {

45 cÚ¡ 
	gQuad¿ticTheœs
[][
PIECE_TYPE_NB
] = {

57 cÚ¡ 
	gPawnS‘
[] = {

63 
	gEndgame
<
	gKXK
> 
	gEv®u©eKXK
[] = { 
Endgame
<
KXK
>(
WHITE
), Endgame<KXK>(
BLACK
) };

65 
	gEndgame
<
	gKBPsK
> 
	gSÿËKBPsK
[] = { 
Endgame
<
KBPsK
>(
WHITE
), Endgame<KBPsK>(
BLACK
) };

66 
	gEndgame
<
	gKQKRPs
> 
	gSÿËKQKRPs
[] = { 
Endgame
<
KQKRPs
>(
WHITE
), Endgame<KQKRPs>(
BLACK
) };

67 
	gEndgame
<
	gKPsK
> 
	gSÿËKPsK
[] = { 
Endgame
<
KPsK
>(
WHITE
), Endgame<KPsK>(
BLACK
) };

68 
	gEndgame
<
	gKPKP
> 
	gSÿËKPKP
[] = { 
Endgame
<
KPKP
>(
WHITE
), Endgame<KPKP>(
BLACK
) };

71 
boŞ
 
is_KXK
(cÚ¡ 
Pos™iÚ
& 
pos
, 
CŞÜ
 
us
) {

72  !
mÜe_thª_Úe
(
pos
.
p›ûs
(~
us
))

73 && 
	gpos
.
nÚ_·wn_m©”Ÿl
(
us
è>ğ
RookV®ueMg
;

76 
boŞ
 
is_KBPsKs
(cÚ¡ 
Pos™iÚ
& 
pos
, 
CŞÜ
 
us
) {

77  
	gpos
.
nÚ_·wn_m©”Ÿl
(
us
è=ğ
BishİV®ueMg


78 && 
pos
.
couÁ
<
BISHOP
>(
us
) == 1

79 && 
pos
.
couÁ
<
PAWN
 >(
us
) >= 1;

82 
boŞ
 
is_KQKRPs
(cÚ¡ 
Pos™iÚ
& 
pos
, 
CŞÜ
 
us
) {

83  !
	gpos
.
	gcouÁ
<
	gPAWN
>(
	gus
)

84 && 
	gpos
.
nÚ_·wn_m©”Ÿl
(
us
è=ğ
Qu“nV®ueMg


85 && 
pos
.
couÁ
<
QUEEN
>(
us
) == 1

86 && 
pos
.
couÁ
<
ROOK
>(~
us
) == 1

87 && 
pos
.
couÁ
<
PAWN
>(~
us
) >= 1;

92 
	g‹m¶©e
<
CŞÜ
 
	gUs
>

93 
imb®ªû
(cÚ¡ 
p›ûCouÁ
[][
PIECE_TYPE_NB
]) {

95 cÚ¡ 
CŞÜ
 
	gThem
 = (
Us
 =ğ
WHITE
 ? 
BLACK
 : WHITE);

97 
	gbÚus
 = 
PawnS‘
[
p›ûCouÁ
[
Us
][
PAWN
]];

100 
	g±1
 = 
NO_PIECE_TYPE
;…t1 <ğ
QUEEN
; ++pt1)

102 ià(!
	gp›ûCouÁ
[
Us
][
±1
])

105 
	gv
 = 0;

107 
	g±2
 = 
NO_PIECE_TYPE
;…t2 <ğ
±1
; ++pt2)

108 
	gv
 +ğ
Quad¿ticOurs
[
±1
][
±2
] * 
p›ûCouÁ
[
Us
][pt2]

109 + 
Quad¿ticTheœs
[
±1
][
±2
] * 
p›ûCouÁ
[
Them
][pt2];

111 
	gbÚus
 +ğ
p›ûCouÁ
[
Us
][
±1
] * 
v
;

114  
	gbÚus
;

119 
Çme¥aû
 
	gM©”Ÿl
 {

126 
EÁry
* 
´obe
(cÚ¡ 
Pos™iÚ
& 
pos
) {

128 
Key
 
	gkey
 = 
pos
.
m©”Ÿl_key
();

129 
EÁry
* 
	ge
 = 
pos
.
this_th»ad
()->
m©”ŸlTabË
[
key
];

131 ià(
	ge
->
	gkey
 =ğ
key
)

132  
e
;

134 
	g¡d
::
mem£t
(
e
, 0, (
EÁry
));

135 
	ge
->
	gkey
 = 
key
;

136 
	ge
->
	gçùÜ
[
WHITE
] = 
e
->
çùÜ
[
BLACK
] = (
ušt8_t
)
SCALE_FACTOR_NORMAL
;

137 
	ge
->
	ggamePha£
 = 
pos
.
game_pha£
();

142 ià((
	ge
->
	gev®u©iÚFunùiÚ
 = 
pos
.
this_th»ad
()->
’dgames
.
´obe
<
V®ue
>(
key
)è!ğ
nuÎ±r
)

143  
e
;

145 
CŞÜ
 
	gc
 = 
WHITE
; c <ğ
BLACK
; ++c)

146 ià(
is_KXK
(
pos
, 
c
))

148 
	ge
->
	gev®u©iÚFunùiÚ
 = &
Ev®u©eKXK
[
c
];

149  
	ge
;

154 
	gEndgameBa£
<
	gSÿËFaùÜ
>* 
	gsf
;

156 ià((
	gsf
 = 
pos
.
this_th»ad
()->
’dgames
.
´obe
<
SÿËFaùÜ
>(
key
)è!ğ
nuÎ±r
)

158 
e
->
sÿlšgFunùiÚ
[
sf
->
¡rÚg_side
()] = sf;

159  
	ge
;

165 
CŞÜ
 
	gc
 = 
WHITE
; c <ğ
BLACK
; ++c)

167 ià(
is_KBPsKs
(
pos
, 
c
))

168 
	ge
->
	gsÿlšgFunùiÚ
[
c
] = &
SÿËKBPsK
[c];

170 ià(
is_KQKRPs
(
pos
, 
c
))

171 
	ge
->
	gsÿlšgFunùiÚ
[
c
] = &
SÿËKQKRPs
[c];

174 
V®ue
 
	gÅm_w
 = 
pos
.
nÚ_·wn_m©”Ÿl
(
WHITE
);

175 
V®ue
 
	gÅm_b
 = 
pos
.
nÚ_·wn_m©”Ÿl
(
BLACK
);

177 ià(
	gÅm_w
 + 
	gÅm_b
 =ğ
VALUE_ZERO
 && 
pos
.
p›ûs
(
PAWN
))

179 ià(!
pos
.
couÁ
<
PAWN
>(
BLACK
))

181 
as£¹
(
pos
.
couÁ
<
PAWN
>(
WHITE
) >= 2);

183 
	ge
->
	gsÿlšgFunùiÚ
[
WHITE
] = &
SÿËKPsK
[WHITE];

185 ià(!
	gpos
.
	gcouÁ
<
	gPAWN
>(
	gWHITE
))

187 
as£¹
(
pos
.
couÁ
<
PAWN
>(
BLACK
) >= 2);

189 
	ge
->
	gsÿlšgFunùiÚ
[
BLACK
] = &
SÿËKPsK
[BLACK];

191 ià(
	gpos
.
	gcouÁ
<
	gPAWN
>(
	gWHITE
è=ğ1 && 
pos
.
couÁ
<
PAWN
>(
BLACK
) == 1)

195 
e
->
sÿlšgFunùiÚ
[
WHITE
] = &
SÿËKPKP
[WHITE];

196 
	ge
->
	gsÿlšgFunùiÚ
[
BLACK
] = &
SÿËKPKP
[BLACK];

203 ià(!
	gpos
.
	gcouÁ
<
	gPAWN
>(
	gWHITE
è&& 
	gÅm_w
 - 
	gÅm_b
 <ğ
BishİV®ueMg
)

204 
e
->
çùÜ
[
WHITE
] = 
ušt8_t
(
Åm_w
 < 
RookV®ueMg
 ? 
SCALE_FACTOR_DRAW
 :

205 
Åm_b
 <ğ
BishİV®ueMg
 ? 4 : 14);

207 ià(!
	gpos
.
	gcouÁ
<
	gPAWN
>(
	gBLACK
è&& 
	gÅm_b
 - 
	gÅm_w
 <ğ
BishİV®ueMg
)

208 
e
->
çùÜ
[
BLACK
] = 
ušt8_t
(
Åm_b
 < 
RookV®ueMg
 ? 
SCALE_FACTOR_DRAW
 :

209 
Åm_w
 <ğ
BishİV®ueMg
 ? 4 : 14);

211 ià(
	gpos
.
	gcouÁ
<
	gPAWN
>(
	gWHITE
è=ğ1 && 
Åm_w
 - 
Åm_b
 <ğ
BishİV®ueMg
)

212 
e
->
çùÜ
[
WHITE
] = (
ušt8_t
è
SCALE_FACTOR_ONEPAWN
;

214 ià(
	gpos
.
	gcouÁ
<
	gPAWN
>(
	gBLACK
è=ğ1 && 
Åm_b
 - 
Åm_w
 <ğ
BishİV®ueMg
)

215 
e
->
çùÜ
[
BLACK
] = (
ušt8_t
è
SCALE_FACTOR_ONEPAWN
;

220 cÚ¡ 
	gP›ûCouÁ
[
COLOR_NB
][
PIECE_TYPE_NB
] = {

221 { 
pos
.
couÁ
<
BISHOP
>(
WHITE
è> 1,…os.couÁ<
PAWN
>(WHITE),…os.couÁ<
KNIGHT
>(WHITE),

222 
pos
.
couÁ
<
BISHOP
>(
WHITE
è,…os.couÁ<
ROOK
>(WHITE),…os.couÁ<
QUEEN
 >(WHITE) },

223 { 
pos
.
couÁ
<
BISHOP
>(
BLACK
è> 1,…os.couÁ<
PAWN
>(BLACK),…os.couÁ<
KNIGHT
>(BLACK),

224 
pos
.
couÁ
<
BISHOP
>(
BLACK
è,…os.couÁ<
ROOK
>(BLACK),…os.couÁ<
QUEEN
 >(BLACK) } };

226 
	ge
->
	gv®ue
 = 
št16_t
((
imb®ªû
<
WHITE
>(
P›ûCouÁ
è- imb®ªû<
BLACK
>(PieceCount)) / 16);

227  
	ge
;

	@material.h

21 #iâdeà
MATERIAL_H_INCLUDED


22 
	#MATERIAL_H_INCLUDED


	)

24 
	~"’dgame.h
"

25 
	~"misc.h
"

26 
	~"pos™iÚ.h
"

27 
	~"ty³s.h
"

29 
Çme¥aû
 
	gM©”Ÿl
 {

40 
	sEÁry
 {

42 
ScÜe
 
imb®ªû
(ècÚ¡ {  
make_scÜe
(
v®ue
, value); }

43 
Pha£
 
game_pha£
(ècÚ¡ {  
	ggamePha£
; }

44 
boŞ
 
¥ecŸlized_ev®_exi¡s
(ècÚ¡ {  
	gev®u©iÚFunùiÚ
 !ğ
nuÎ±r
; }

45 
V®ue
 
ev®u©e
(cÚ¡ 
Pos™iÚ
& 
pos
ècÚ¡ {  (*
	gev®u©iÚFunùiÚ
)(
	gpos
); }

52 
SÿËFaùÜ
 
sÿË_çùÜ
(cÚ¡ 
Pos™iÚ
& 
pos
, 
CŞÜ
 
c
) const {

53 
SÿËFaùÜ
 
	gsf
 = 
sÿlšgFunùiÚ
[
c
] ? (*sÿlšgFunùiÚ[c])(
pos
)

54 : 
SCALE_FACTOR_NONE
;

55  
	gsf
 !ğ
SCALE_FACTOR_NONE
 ? 
sf
 : 
SÿËFaùÜ
(
çùÜ
[
c
]);

58 
Key
 
	gkey
;

59 
	gEndgameBa£
<
	gV®ue
>* 
	gev®u©iÚFunùiÚ
;

60 
	gEndgameBa£
<
	gSÿËFaùÜ
>* 
	gsÿlšgFunùiÚ
[
COLOR_NB
];

62 
št16_t
 
	gv®ue
;

63 
ušt8_t
 
	gçùÜ
[
COLOR_NB
];

64 
Pha£
 
	ggamePha£
;

67 
	gHashTabË
<
	tEÁry
, 8192> 
	tTabË
;

69 
EÁry
* 
´obe
(cÚ¡ 
Pos™iÚ
& 
pos
);

	@misc.cpp

21 #ifdeà
_WIN32


22 #ià
_WIN32_WINNT
 < 0x0601

23 #undeà
_WIN32_WINNT


24 
	#_WIN32_WINNT
 0x0601

26 
	~<wšdows.h
>

	)

32 
boŞ
(*
	tfun1_t
)(
	tLOGICAL_PROCESSOR_RELATIONSHIP
,

33 
	tPSYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX
, 
	tPDWORD
);

34 
boŞ
(*
	tfun2_t
)(
	tUSHORT
, 
	tPGROUP_AFFINITY
);

35 
boŞ
(*
	tfun3_t
)(
	tHANDLE
, 
	tCONST
 
	tGROUP_AFFINITY
*, 
	tPGROUP_AFFINITY
);

39 
	~<f¡»am
>

40 
	~<iomª
>

41 
	~<io¡»am
>

42 
	~<s¡»am
>

43 
	~<veùÜ
>

45 
	~"misc.h
"

46 
	~"th»ad.h
"

48 
usšg
 
Çme¥aû
 
¡d
;

50 
InfoSŒ—m
 
	gšfo_out
;

52 
	gÇme¥aû
 {

56 cÚ¡ 
¡ršg
 
	gV”siÚ
 = "";

64 
	gT›
: 
public
 
¡»ambuf
 {

66 
T›
(
¡»ambuf
* 
b
, sŒ—mbuf* 
l
è: 
buf
(b), 
logBuf
(l) {}

68 
sync
(è{  
	glogBuf
->
pubsync
(), 
	gbuf
->pubsync(); }

69 
ov”æow
(
c
è{  
log
(
buf
->
¥utc
(()c), "<< "); }

70 
und”æow
(è{  
	gbuf
->
sg‘c
(); }

71 
uæow
(è{  
log
(
buf
->
sbumpc
(), ">> "); }

73 
¡»ambuf
 *
	gbuf
, *
	glogBuf
;

75 
log
(
c
, cÚ¡ * 
´efix
) {

77 
	gÏ¡
 = '\n';

79 ià(
	gÏ¡
 == '\n')

80 
logBuf
->
¥uŠ
(
´efix
, 3);

82  
	gÏ¡
 = 
logBuf
->
¥utc
(()
c
);

86 şas 
	cLogg”
 {

88 
Logg”
(è: 
š
(
cš
.
rdbuf
(), 
fe
.rdbuf()), 
out
(
cout
.rdbuf(), file.rdbuf()) {}

89 ~
Logg”
(è{ 
¡¬t
(""); }

91 
of¡»am
 
	gfe
;

92 
T›
 
	gš
, 
	gout
;

94 
	gpublic
:

95 
¡¬t
(cÚ¡ 
¡d
::
¡ršg
& 
âame
) {

97 
Logg”
 
l
;

99 ià(!
	gâame
.
em±y
(è&& !
	gl
.
	gfe
.
is_İ’
())

101 
	gl
.
	gfe
.
İ’
(
âame
, 
if¡»am
::
out
);

102 
	gcš
.
rdbuf
(&
l
.
š
);

103 
	gcout
.
rdbuf
(&
l
.
out
);

105 ià(
	gâame
.
em±y
(è&& 
	gl
.
	gfe
.
is_İ’
())

107 
	gcout
.
rdbuf
(
l
.
out
.
buf
);

108 
	gcš
.
rdbuf
(
l
.
š
.
buf
);

109 
	gl
.
	gfe
.
şo£
();

121 cÚ¡ 
¡ršg
 
	$’gše_šfo
(
boŞ
 
to_uci
) {

123 cÚ¡ 
¡ršg
 
	`mÚths
("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec");

124 
¡ršg
 
mÚth
, 
day
, 
y—r
;

125 
¡ršg¡»am
 
ss
, 
	`d©e
(
__DATE__
);

127 
ss
 << "Stockfish " << 
V”siÚ
 << 
	`£tfl
('0');

129 ià(
V”siÚ
.
	`em±y
())

131 
d©e
 >> 
mÚth
 >> 
day
 >> 
y—r
;

132 
ss
 << 
	`£tw
(2è<< 
day
 << s‘w(2è<< (1 + 
mÚths
.
	`fšd
(
mÚth
è/ 4è<< 
y—r
.
	`sub¡r
(2);

135 
ss
 << (
Is64B™
 ? " 64" : "")

136 << (
HasPext
 ? " BMI2" : (
HasPİCÁ
 ? " POPCNT" : ""))

137 << (
to_uci
 ? "\nid‡uthor ": " by ")

140  
ss
.
	`¡r
();

141 
	}
}

145 
št64_t
 
	gh™s
[2], 
	gm—ns
[2];

147 
	$dbg_h™_Ú
(
boŞ
 
b
è{ ++
h™s
[0]; ià(bè++h™s[1]; 
	}
}

148 
	$dbg_h™_Ú
(
boŞ
 
c
, boŞ 
b
è{ ià(cè
	`dbg_h™_Ú
(b); 
	}
}

149 
	$dbg_m—n_of
(
v
è{ ++
m—ns
[0]; m—ns[1] +ğv; 
	}
}

151 
	$dbg_´št
() {

153 ià(
h™s
[0])

154 
û¼
 << "TÙ® " << 
h™s
[0] << " Hits " << hits[1]

155 << " h™„©(%è" << 100 * 
h™s
[1] / h™s[0] << 
’dl
;

157 ià(
m—ns
[0])

158 
û¼
 << "TÙ® " << 
m—ns
[0] << " Mean "

159 << ()
m—ns
[1] / m—ns[0] << 
’dl
;

160 
	}
}

163 
	$¡¬t_logg”
(cÚ¡ 
¡d
::
¡ršg
& 
âame
è{ 
Logg”
::
	`¡¬t
(âame); 
	}
}

169 #ifdeà
NO_PREFETCH


171 
	$´eãtch
(*è{
	}
}

175 
	$´eãtch
(* 
addr
) {

177 #ià
	`defšed
(
__INTEL_COMPILER
)

180 
	`__asm__
 ("");

183 #ià
	`defšed
(
__INTEL_COMPILER
è|| defšed(
_MSC_VER
)

184 
	`_mm_´eãtch
((*)
addr
, 
_MM_HINT_T0
);

186 
	`__butš_´eãtch
(
addr
);

188 
	}
}

192 
	$´eãtch2
(* 
addr
) {

194 
	`´eãtch
(
addr
);

195 
	`´eãtch
((
ušt8_t
*)
addr
 + 64);

196 
	}
}

198 
Çme¥aû
 
	gWšProcGroup
 {

200 #iâdeà
_WIN32


202 
bšdThisTh»ad
(
size_t
) {}

210 
g‘_group
(
size_t
 
idx
) {

212 
	gth»ads
 = 0;

213 
	gnodes
 = 0;

214 
	gcÜes
 = 0;

215 
DWORD
 
	g»tuºL’gth
 = 0;

216 
DWORD
 
	gby‹Off£t
 = 0;

219 
HMODULE
 
	gk32
 = 
G‘ModuËHªdË
("Kernel32.dll");

220 autØ
	gfun1
 = (
fun1_t
)
G‘ProcAdd»ss
(
k32
, "GetLogicalProcessorInformationEx");

221 ià(!
	gfun1
)

225 ià(
fun1
(
R–©iÚAÎ
, 
nuÎ±r
, &
»tuºL’gth
))

229 
SYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX
 *
	gbufãr
, *
	g±r
;

230 
	g±r
 = 
bufãr
 = (
SYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX
*)
m®loc
(
»tuºL’gth
);

233 ià(!
fun1
(
R–©iÚAÎ
, 
bufãr
, &
»tuºL’gth
))

235 
ä“
(
bufãr
);

239 
	g±r
->
	gSize
 > 0 && 
	gby‹Off£t
 +…Œ->Siz<ğ
»tuºL’gth
)

241 ià(
±r
->
R–©iÚsh
 =ğ
R–©iÚNumaNode
)

242 
nodes
++;

244 ià(
	g±r
->
	gR–©iÚsh
 =ğ
R–©iÚProûssÜCÜe
)

246 
cÜes
++;

247 
	gth»ads
 +ğ(
±r
->
ProûssÜ
.
FÏgs
 =ğ
LTP_PC_SMT
) ? 2 : 1;

250 
	gby‹Off£t
 +ğ
±r
->
Size
;

251 
	g±r
 = (
SYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX
*)(((*)
±r
è+…Œ->
Size
);

254 
ä“
(
bufãr
);

256 
	g¡d
::
veùÜ
<> 
groups
;

260 
	gn
 = 0;‚ < 
	gnodes
;‚++)

261 
	gi
 = 0; i < 
	gcÜes
 / 
	gnodes
; i++)

262 
	ggroups
.
push_back
(
n
);

267 
	gt
 = 0; < 
	gth»ads
 - 
	gcÜes
;++)

268 
	ggroups
.
push_back
(
t
 % 
nodes
);

272  
	gidx
 < 
	ggroups
.
size
(è? groups[
idx
] : -1;

278 
bšdThisTh»ad
(
size_t
 
idx
) {

285 ià(
	gTh»ads
.
size
() < 8)

289 
	ggroup
 = 
g‘_group
(
idx
);

291 ià(
	ggroup
 == -1)

295 
HMODULE
 
	gk32
 = 
G‘ModuËHªdË
("Kernel32.dll");

296 autØ
	gfun2
 = (
fun2_t
)
G‘ProcAdd»ss
(
k32
, "GetNumaNodeProcessorMaskEx");

297 autØ
	gfun3
 = (
fun3_t
)
G‘ProcAdd»ss
(
k32
, "SetThreadGroupAffinity");

299 ià(!
	gfun2
 || !
	gfun3
)

302 
GROUP_AFFINITY
 
	gaffš™y
;

303 ià(
fun2
(
group
, &
affš™y
))

304 
fun3
(
G‘Cu¼’tTh»ad
(), &
affš™y
, 
nuÎ±r
);

	@misc.h

21 #iâdeà
MISC_H_INCLUDED


22 
	#MISC_H_INCLUDED


	)

24 
	~<ÿs£¹
>

25 
	~<chrÚo
>

26 
	~<io¡»am
>

27 
	~<o¡»am
>

28 
	~<¡ršg
>

29 
	~<veùÜ
>

31 
	~"ty³s.h
"

32 
	~"th»ad_wš32.h
"

34 
	~<mpi.h
>

36 
mpi_¿nk
;

37 
mpi_size
;

38 
MPI_D©©y³
 
mpi_fuÎ_‰e_t
;

39 
MPI_D©©y³
 
mpi_‰e_t
;

40 
MPI_D©©y³
 
mpi_şu¡”_t
;

42 
	gMPI_TAGS
 : {

43 
TAG_UCI
,

44 
	gTAG_MOVE_REQUEST
,

45 
	gTAG_MOVE_RESULT


48 cÚ¡ 
	g¡d
::
¡ršg
 
’gše_šfo
(
boŞ
 
to_uci
 = 
çl£
);

49 
´eãtch
(* 
addr
);

50 
´eãtch2
(* 
addr
);

51 
¡¬t_logg”
(cÚ¡ 
¡d
::
¡ršg
& 
âame
);

53 
dbg_h™_Ú
(
boŞ
 
b
);

54 
dbg_h™_Ú
(
boŞ
 
c
, boŞ 
b
);

55 
dbg_m—n_of
(
v
);

56 
dbg_´št
();

58 
	g¡d
::
	tchrÚo
::
	tmli£cÚds
::
	t»p
 
	tTimePošt
;

60 
šlše
 
TimePošt
 
	$now
() {

61  
¡d
::
chrÚo
::
du¿tiÚ_ÿ¡
<¡d::chrÚo::
mli£cÚds
>

62 (
¡d
::
chrÚo
::
¡—dy_şock
::
	`now
().
	`time_sšû_•och
()).
	`couÁ
();

63 
	}
}

65 
	g‹m¶©e
<
şass
 
	gEÁry
, 
	gSize
>

66 
	sHashTabË
 {

67 
EÁry
* 
	mİ”©Ü
[](
Key
 
	mkey
è{  &
	mbË
[(
ušt32_t
)
key
 & (
Size
 - 1)]; }

69 
	m´iv©e
:

70 
¡d
::
veùÜ
<
EÁry
> 
bË
 = std::veùÜ<EÁry>(
Size
);

73 şas 
	cInfoSŒ—m
 { };

74 
InfoSŒ—m
 
šfo_out
;

76 şas 
	cSyncCout
 { 
	mIO_LOCK
, 
	mIO_UNLOCK
, 
	mIO_ENDL
 };

77 
	gInfoSŒ—m
& 
	gİ”©Ü
<<(InfoSŒ—m&, 
	gSyncCout
);

79 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

80 
	gInfoSŒ—m
& 
	gİ”©Ü
<<(InfoSŒ—m& 
	gis
, cÚ¡ 
	gT
& 
	gt
)

82 ià(
	gmpi_¿nk
 == 0) {

83 
¡d
::
cout
 << 
t
;

85  
	gis
;

88 
šlše
 
	gInfoSŒ—m
& 
	gİ”©Ü
<<(InfoSŒ—m& 
	gis
, 
SyncCout
 
	gsc
) {

90 
Mu‹x
 
	gm
;

92 
	gsc
) {

93 
	gSyncCout
::
IO_LOCK
:

94 
m
.
lock
();

97 
	gSyncCout
::
IO_UNLOCK
:

98 
m
.
uÆock
();

101 
	gSyncCout
::
IO_ENDL
:

102 ià(
mpi_¿nk
 == 0) {

103 
¡d
::
cout
 << std::
’dl
;

108  
	gis
;

112 
	#sync_šfo_out
 
šfo_out
 << 
SyncCout
::
IO_LOCK


	)

113 
	#sync_šfo_’dl
 
SyncCout
::
IO_ENDL
 << SyncCout::
IO_UNLOCK


	)

131 şas 
	cPRNG
 {

133 
ušt64_t
 
	ms
;

135 
ušt64_t
 
	$¿nd64
() {

137 
s
 ^= s >> 12, s ^= s << 25, s ^= s >> 27;

138  
s
 * 2685821657736338717LL;

141 
public
:

142 
	$PRNG
(
ušt64_t
 
£ed
è: 
	$s
(
£ed
è{ 
	`as£¹
(£ed); 
	}
}

144 
	g‹m¶©e
<
ty³Çme
 
	gT
> 
T
 
	$¿nd
(è{  
	`T
(
	`¿nd64
()); 
	}
}

148 
	g‹m¶©e
<
ty³Çme
 
	gT
> 
T
 
	$¥¬£_¿nd
()

149 {  
	`T
(
	`¿nd64
(è&„ªd64(è&„ªd64()); 
	}
}

159 
Çme¥aû
 
	gWšProcGroup
 {

160 
bšdThisTh»ad
(
size_t
 
idx
);

	@movegen.cpp

21 
	~<ÿs£¹
>

23 
	~"moveg’.h
"

24 
	~"pos™iÚ.h
"

26 
	gÇme¥aû
 {

28 
	g‹m¶©e
<
Ca¡lšgRight
 
	gCr
, 
boŞ
 
	gChecks
, boŞ 
	gChess960
>

29 
ExtMove
* 
g’”©e_ÿ¡lšg
(cÚ¡ 
Pos™iÚ
& 
pos
, ExtMove* 
moveLi¡
, 
CŞÜ
 
us
) {

31 cÚ¡ 
boŞ
 
	gKšgSide
 = (
Cr
 =ğ
WHITE_OO
 || C¸=ğ
BLACK_OO
);

33 ià(
	gpos
.
ÿ¡lšg_im³ded
(
Cr
è|| !pos.
ÿn_ÿ¡Ë
(Cr))

34  
	gmoveLi¡
;

38 
Squ¬e
 
	gkäom
 = 
pos
.
squ¬e
<
KING
>(
us
);

39 
Squ¬e
 
	gräom
 = 
pos
.
ÿ¡lšg_rook_squ¬e
(
Cr
);

40 
Squ¬e
 
	gkto
 = 
»Ïtive_squ¬e
(
us
, 
KšgSide
 ? 
SQ_G1
 : 
SQ_C1
);

41 
B™bßrd
 
	g’em›s
 = 
pos
.
p›ûs
(~
us
);

43 
as£¹
(!
pos
.
check”s
());

45 cÚ¡ 
Squ¬e
 
	gK
 = 
Chess960
 ? 
kto
 > 
käom
 ? 
WEST
 : 
EAST


46 : 
KšgSide
 ? 
WEST
 : 
EAST
;

48 
Squ¬e
 
	gs
 = 
kto
; s !ğ
käom
; s +ğ
K
)

49 ià(
pos
.
©ck”s_to
(
s
è& 
’em›s
)

50  
moveLi¡
;

55 ià(
	gChess960
 && (
	g©cks_bb
<
	gROOK
>(
	gkto
, 
	gpos
.
p›ûs
(è^ 
	gräom
è&…os.p›ûs(~
us
, 
ROOK
, 
QUEEN
)))

56  
	gmoveLi¡
;

58 
Move
 
	gm
 = 
make
<
CASTLING
>(
käom
, 
	gräom
);

60 ià(
	gChecks
 && !
	gpos
.
gives_check
(
m
))

61  
	gmoveLi¡
;

63 *
	gmoveLi¡
++ = 
m
;

64  
	gmoveLi¡
;

68 
	g‹m¶©e
<
G’Ty³
 
	gTy³
, 
Squ¬e
 
	gD
>

69 
ExtMove
* 
make_´omÙiÚs
(ExtMove* 
moveLi¡
, 
Squ¬e
 
to
, Squ¬
ksq
) {

71 ià(
	gTy³
 =ğ
CAPTURES
 || 
Ty³
 =ğ
EVASIONS
 || Ty³ =ğ
NON_EVASIONS
)

72 *
moveLi¡
++ = 
make
<
PROMOTION
>(
to
 - 
D
, 
	gto
, 
	gQUEEN
);

74 ià(
	gTy³
 =ğ
QUIETS
 || 
Ty³
 =ğ
EVASIONS
 || Ty³ =ğ
NON_EVASIONS
)

76 *
moveLi¡
++ = 
make
<
PROMOTION
>(
to
 - 
D
, 
	gto
, 
	gROOK
);

77 *
	gmoveLi¡
++ = 
make
<
PROMOTION
>(
to
 - 
D
, 
	gto
, 
	gBISHOP
);

78 *
	gmoveLi¡
++ = 
make
<
PROMOTION
>(
to
 - 
D
, 
	gto
, 
	gKNIGHT
);

83 ià(
	gTy³
 =ğ
QUIET_CHECKS
 && (
P£udoA‰acks
[
KNIGHT
][
to
] & 
ksq
))

84 *
moveLi¡
++ = 
make
<
PROMOTION
>(
to
 - 
D
, 
	gto
, 
	gKNIGHT
);

86 ()
	gksq
;

88  
	gmoveLi¡
;

92 
	g‹m¶©e
<
CŞÜ
 
	gUs
, 
G’Ty³
 
	gTy³
>

93 
ExtMove
* 
g’”©e_·wn_moves
(cÚ¡ 
Pos™iÚ
& 
pos
, ExtMove* 
moveLi¡
, 
B™bßrd
 
rg‘
) {

97 cÚ¡ 
CŞÜ
 
	gThem
 = (
Us
 =ğ
WHITE
 ? 
BLACK
 : WHITE);

98 cÚ¡ 
B™bßrd
 
	gTRªk8BB
 = (
Us
 =ğ
WHITE
 ? 
Rªk8BB
 : 
Rªk1BB
);

99 cÚ¡ 
B™bßrd
 
	gTRªk7BB
 = (
Us
 =ğ
WHITE
 ? 
Rªk7BB
 : 
Rªk2BB
);

100 cÚ¡ 
B™bßrd
 
	gTRªk3BB
 = (
Us
 =ğ
WHITE
 ? 
Rªk3BB
 : 
Rªk6BB
);

101 cÚ¡ 
Squ¬e
 
	gUp
 = (
Us
 =ğ
WHITE
 ? 
NORTH
 : 
SOUTH
);

102 cÚ¡ 
Squ¬e
 
	gRight
 = (
Us
 =ğ
WHITE
 ? 
NORTH_EAST
 : 
SOUTH_WEST
);

103 cÚ¡ 
Squ¬e
 
	gLeá
 = (
Us
 =ğ
WHITE
 ? 
NORTH_WEST
 : 
SOUTH_EAST
);

105 
B™bßrd
 
	gem±ySqu¬es
;

107 
B™bßrd
 
	g·wnsOn7
 = 
pos
.
p›ûs
(
Us
, 
PAWN
è& 
	gTRªk7BB
;

108 
B™bßrd
 
	g·wnsNÙOn7
 = 
pos
.
p›ûs
(
Us
, 
PAWN
è& ~
	gTRªk7BB
;

110 
B™bßrd
 
	g’em›s
 = (
Ty³
 =ğ
EVASIONS
 ? 
pos
.
p›ûs
(
Them
è& 
rg‘
:

111 
Ty³
 =ğ
CAPTURES
 ? 
rg‘
 : 
pos
.
p›ûs
(
Them
));

114 ià(
	gTy³
 !ğ
CAPTURES
)

116 
em±ySqu¬es
 = (
Ty³
 =ğ
QUIETS
 || Ty³ =ğ
QUIET_CHECKS
 ? 
rg‘
 : ~
pos
.
p›ûs
());

118 
B™bßrd
 
	gb1
 = 
shiá
<
Up
>(
·wnsNÙOn7
è& 
em±ySqu¬es
;

119 
B™bßrd
 
	gb2
 = 
shiá
<
Up
>(
b1
 & 
TRªk3BB
è& 
em±ySqu¬es
;

121 ià(
	gTy³
 =ğ
EVASIONS
)

123 
b1
 &ğ
rg‘
;

124 
	gb2
 &ğ
rg‘
;

127 ià(
	gTy³
 =ğ
QUIET_CHECKS
)

129 
Squ¬e
 
ksq
 = 
pos
.
squ¬e
<
KING
>(
Them
);

131 
	gb1
 &ğ
pos
.
©cks_äom
<
PAWN
>(
ksq
, 
	gThem
);

132 
	gb2
 &ğ
pos
.
©cks_äom
<
PAWN
>(
ksq
, 
	gThem
);

138 
B™bßrd
 
	gdcCªdid©es
 = 
pos
.
discov”ed_check_ÿndid©es
();

139 ià(
	g·wnsNÙOn7
 & 
	gdcCªdid©es
)

141 
B™bßrd
 
	gdc1
 = 
shiá
<
Up
>(
·wnsNÙOn7
 & 
dcCªdid©es
è& 
em±ySqu¬es
 & ~
fe_bb
(
ksq
);

142 
B™bßrd
 
	gdc2
 = 
shiá
<
Up
>(
dc1
 & 
TRªk3BB
è& 
em±ySqu¬es
;

144 
	gb1
 |ğ
dc1
;

145 
	gb2
 |ğ
dc2
;

149 
	gb1
)

151 
Squ¬e
 
	gto
 = 
pİ_lsb
(&
b1
);

152 *
	gmoveLi¡
++ = 
make_move
(
to
 - 
Up
,o);

155 
	gb2
)

157 
Squ¬e
 
	gto
 = 
pİ_lsb
(&
b2
);

158 *
	gmoveLi¡
++ = 
make_move
(
to
 - 
Up
 - Up,o);

163 ià(
	g·wnsOn7
 && (
	gTy³
 !ğ
EVASIONS
 || (
rg‘
 & 
TRªk8BB
)))

165 ià(
Ty³
 =ğ
CAPTURES
)

166 
em±ySqu¬es
 = ~
pos
.
p›ûs
();

168 ià(
	gTy³
 =ğ
EVASIONS
)

169 
em±ySqu¬es
 &ğ
rg‘
;

171 
B™bßrd
 
	gb1
 = 
shiá
<
Right
>(
·wnsOn7
è& 
’em›s
;

172 
B™bßrd
 
	gb2
 = 
shiá
<
Leá
 >(
·wnsOn7
è& 
’em›s
;

173 
B™bßrd
 
	gb3
 = 
shiá
<
Up
 >(
·wnsOn7
è& 
em±ySqu¬es
;

175 
Squ¬e
 
	gksq
 = 
pos
.
squ¬e
<
KING
>(
Them
);

177 
	gb1
)

178 
	gmoveLi¡
 = 
make_´omÙiÚs
<
Ty³
, 
	gRight
>(moveLi¡, 
pİ_lsb
(&
b1
), 
	gksq
);

180 
	gb2
)

181 
	gmoveLi¡
 = 
make_´omÙiÚs
<
Ty³
, 
	gLeá
 >(moveLi¡, 
pİ_lsb
(&
b2
), 
	gksq
);

183 
	gb3
)

184 
	gmoveLi¡
 = 
make_´omÙiÚs
<
Ty³
, 
	gUp
 >(moveLi¡, 
pİ_lsb
(&
b3
), 
	gksq
);

188 ià(
	gTy³
 =ğ
CAPTURES
 || 
Ty³
 =ğ
EVASIONS
 || Ty³ =ğ
NON_EVASIONS
)

190 
B™bßrd
 
b1
 = 
shiá
<
Right
>(
·wnsNÙOn7
è& 
’em›s
;

191 
B™bßrd
 
	gb2
 = 
shiá
<
Leá
 >(
·wnsNÙOn7
è& 
’em›s
;

193 
	gb1
)

195 
Squ¬e
 
	gto
 = 
pİ_lsb
(&
b1
);

196 *
	gmoveLi¡
++ = 
make_move
(
to
 - 
Right
,o);

199 
	gb2
)

201 
Squ¬e
 
	gto
 = 
pİ_lsb
(&
b2
);

202 *
	gmoveLi¡
++ = 
make_move
(
to
 - 
Leá
,o);

205 ià(
	gpos
.
•_squ¬e
(è!ğ
SQ_NONE
)

207 
as£¹
(
¿nk_of
(
pos
.
•_squ¬e
()è=ğ
»Ïtive_¿nk
(
Us
, 
RANK_6
));

212 ià(
	gTy³
 =ğ
EVASIONS
 && !(
rg‘
 & (
pos
.
•_squ¬e
(è- 
Up
)))

213  
moveLi¡
;

215 
	gb1
 = 
·wnsNÙOn7
 & 
pos
.
©cks_äom
<
PAWN
>Õos.
•_squ¬e
(), 
	gThem
);

217 
as£¹
(
b1
);

219 
	gb1
)

220 *
	gmoveLi¡
++ = 
make
<
ENPASSANT
>(
pİ_lsb
(&
b1
), 
	gpos
.
•_squ¬e
());

224  
	gmoveLi¡
;

228 
	g‹m¶©e
<
P›ûTy³
 
	gPt
, 
boŞ
 
	gChecks
>

229 
ExtMove
* 
g’”©e_moves
(cÚ¡ 
Pos™iÚ
& 
pos
, ExtMove* 
moveLi¡
, 
CŞÜ
 
us
,

230 
B™bßrd
 
rg‘
) {

232 
as£¹
(
Pt
 !ğ
KING
 && Pˆ!ğ
PAWN
);

234 cÚ¡ 
Squ¬e
* 
	g¶
 = 
pos
.
squ¬es
<
Pt
>(
us
);

236 
Squ¬e
 
	gäom
 = *
¶
; from !ğ
SQ_NONE
; from = *++pl)

238 ià(
Checks
)

240 iàĞ(
Pt
 =ğ
BISHOP
 || Pˆ=ğ
ROOK
 || Pˆ=ğ
QUEEN
)

241 && !(
P£udoA‰acks
[
Pt
][
äom
] & 
rg‘
 & 
pos
.
check_squ¬es
(Pt)))

244 ià(
	gpos
.
discov”ed_check_ÿndid©es
(è& 
	gäom
)

248 
B™bßrd
 
	gb
 = 
pos
.
©cks_äom
<
Pt
>(
äom
è& 
rg‘
;

250 ià(
	gChecks
)

251 
	gb
 &ğ
pos
.
check_squ¬es
(
Pt
);

253 
	gb
)

254 *
	gmoveLi¡
++ = 
make_move
(
äom
, 
pİ_lsb
(&
b
));

257  
	gmoveLi¡
;

261 
	g‹m¶©e
<
CŞÜ
 
	gUs
, 
G’Ty³
 
	gTy³
>

262 
ExtMove
* 
g’”©e_®l
(cÚ¡ 
Pos™iÚ
& 
pos
, ExtMove* 
moveLi¡
, 
B™bßrd
 
rg‘
) {

264 cÚ¡ 
boŞ
 
	gChecks
 = 
Ty³
 =ğ
QUIET_CHECKS
;

266 
	gmoveLi¡
 = 
g’”©e_·wn_moves
<
Us
, 
	gTy³
>(
	gpos
, moveLi¡, 
	grg‘
);

267 
	gmoveLi¡
 = 
g’”©e_moves
<
KNIGHT
, 
	gChecks
>(
	gpos
, moveLi¡, 
	gUs
, 
	grg‘
);

268 
	gmoveLi¡
 = 
g’”©e_moves
<
BISHOP
, 
	gChecks
>(
	gpos
, moveLi¡, 
	gUs
, 
	grg‘
);

269 
	gmoveLi¡
 = 
g’”©e_moves
< 
ROOK
, 
	gChecks
>(
	gpos
, moveLi¡, 
	gUs
, 
	grg‘
);

270 
	gmoveLi¡
 = 
g’”©e_moves
< 
QUEEN
, 
	gChecks
>(
	gpos
, moveLi¡, 
	gUs
, 
	grg‘
);

272 ià(
	gTy³
 !ğ
QUIET_CHECKS
 && 
Ty³
 !ğ
EVASIONS
)

274 
Squ¬e
 
ksq
 = 
pos
.
squ¬e
<
KING
>(
Us
);

275 
B™bßrd
 
	gb
 = 
pos
.
©cks_äom
<
KING
>(
ksq
è& 
rg‘
;

276 
	gb
)

277 *
	gmoveLi¡
++ = 
make_move
(
ksq
, 
pİ_lsb
(&
b
));

280 ià(
	gTy³
 !ğ
CAPTURES
 && 
Ty³
 !ğ
EVASIONS
 && 
pos
.
ÿn_ÿ¡Ë
(
Us
))

282 ià(
pos
.
is_chess960
())

284 
moveLi¡
 = 
g’”©e_ÿ¡lšg
<
MakeCa¡lšg
<
Us
, 
	gKING_SIDE
>::
right
, 
	gChecks
, 
	gŒue
>(
	gpos
, 
	gmoveLi¡
, 
	gUs
);

285 
	gmoveLi¡
 = 
g’”©e_ÿ¡lšg
<
MakeCa¡lšg
<
Us
, 
	gQUEEN_SIDE
>::
right
, 
	gChecks
, 
	gŒue
>(
	gpos
, moveLi¡, 
	gUs
);

289 
	gmoveLi¡
 = 
g’”©e_ÿ¡lšg
<
MakeCa¡lšg
<
Us
, 
	gKING_SIDE
>::
right
, 
	gChecks
, 
	gçl£
>(
	gpos
, moveLi¡, 
	gUs
);

290 
	gmoveLi¡
 = 
g’”©e_ÿ¡lšg
<
MakeCa¡lšg
<
Us
, 
	gQUEEN_SIDE
>::
right
, 
	gChecks
, 
	gçl£
>(
	gpos
, moveLi¡, 
	gUs
);

294  
	gmoveLi¡
;

309 
	g‹m¶©e
<
G’Ty³
 
	gTy³
>

310 
ExtMove
* 
	$g’”©e
(cÚ¡ 
Pos™iÚ
& 
pos
, 
ExtMove
* 
moveLi¡
) {

312 
	`as£¹
(
Ty³
 =ğ
CAPTURES
 || Ty³ =ğ
QUIETS
 || Ty³ =ğ
NON_EVASIONS
);

313 
	`as£¹
(!
pos
.
	`check”s
());

315 
CŞÜ
 
us
 = 
pos
.
	`side_to_move
();

317 
B™bßrd
 
rg‘
 = 
Ty³
 =ğ
CAPTURES
 ? 
pos
.
	`p›ûs
(~
us
)

318 : 
Ty³
 =ğ
QUIETS
 ? ~
pos
.
	`p›ûs
()

319 : 
Ty³
 =ğ
NON_EVASIONS
 ? ~
pos
.
	`p›ûs
(
us
) : 0;

321  
us
 =ğ
WHITE
 ? 
g’”©e_®l
<WHITE, 
Ty³
>(
pos
, 
moveLi¡
, 
rg‘
)

322 : 
g’”©e_®l
<
BLACK
, 
Ty³
>(
pos
, 
moveLi¡
, 
rg‘
);

323 
	}
}

326 
‹m¶©e
 
ExtMove
* 
	gg’”©e
<
	gCAPTURES
>(cÚ¡ 
	gPos™iÚ
&, 
	gExtMove
*);

327 
‹m¶©e
 
ExtMove
* 
	gg’”©e
<
	gQUIETS
>(cÚ¡ 
	gPos™iÚ
&, 
	gExtMove
*);

328 
‹m¶©e
 
ExtMove
* 
	gg’”©e
<
	gNON_EVASIONS
>(cÚ¡ 
	gPos™iÚ
&, 
	gExtMove
*);

333 
	g‹m¶©e
<>

334 
ExtMove
* 
	gg’”©e
<
	gQUIET_CHECKS
>(cÚ¡ 
	gPos™iÚ
& 
	gpos
, ExtMove* 
	gmoveLi¡
) {

336 
as£¹
(!
pos
.
check”s
());

338 
CŞÜ
 
	gus
 = 
pos
.
side_to_move
();

339 
B™bßrd
 
	gdc
 = 
pos
.
discov”ed_check_ÿndid©es
();

341 
	gdc
)

343 
Squ¬e
 
	gäom
 = 
pİ_lsb
(&
dc
);

344 
P›ûTy³
 
	g±
 = 
ty³_of
(
pos
.
p›û_Ú
(
äom
));

346 ià(
	g±
 =ğ
PAWN
)

349 
B™bßrd
 
	gb
 = 
pos
.
©cks_äom
(
±
, 
äom
è& ~
	gpos
.
p›ûs
();

351 ià(
	g±
 =ğ
KING
)

352 
b
 &ğ~
P£udoA‰acks
[
QUEEN
][
pos
.
squ¬e
<
KING
>(~
us
)];

354 
	gb
)

355 *
	gmoveLi¡
++ = 
make_move
(
äom
, 
pİ_lsb
(&
b
));

358  
	gus
 =ğ
WHITE
 ? 
g’”©e_®l
<WHITE, 
	gQUIET_CHECKS
>(
	gpos
, 
	gmoveLi¡
, ~pos.
p›ûs
())

359 : 
g’”©e_®l
<
BLACK
, 
	gQUIET_CHECKS
>(
	gpos
, 
	gmoveLi¡
, ~pos.
p›ûs
());

365 
	g‹m¶©e
<>

366 
ExtMove
* 
	gg’”©e
<
	gEVASIONS
>(cÚ¡ 
	gPos™iÚ
& 
	gpos
, ExtMove* 
	gmoveLi¡
) {

368 
as£¹
(
pos
.
check”s
());

370 
CŞÜ
 
	gus
 = 
pos
.
side_to_move
();

371 
Squ¬e
 
	gksq
 = 
pos
.
squ¬e
<
KING
>(
us
);

372 
B™bßrd
 
	g¦id”A‰acks
 = 0;

373 
B™bßrd
 
	g¦id”s
 = 
pos
.
check”s
(è& ~pos.
p›ûs
(
KNIGHT
, 
PAWN
);

378 
	g¦id”s
)

380 
Squ¬e
 
	gchecksq
 = 
pİ_lsb
(&
¦id”s
);

381 
	g¦id”A‰acks
 |ğ
LšeBB
[
checksq
][
ksq
] ^ checksq;

385 
B™bßrd
 
	gb
 = 
pos
.
©cks_äom
<
KING
>(
ksq
è& ~pos.
p›ûs
(
us
è& ~
¦id”A‰acks
;

386 
	gb
)

387 *
	gmoveLi¡
++ = 
make_move
(
ksq
, 
pİ_lsb
(&
b
));

389 ià(
mÜe_thª_Úe
(
pos
.
check”s
()))

390  
	gmoveLi¡
;

393 
Squ¬e
 
	gchecksq
 = 
lsb
(
pos
.
check”s
());

394 
B™bßrd
 
	grg‘
 = 
b‘w“n_bb
(
checksq
, 
ksq
è| 
	gchecksq
;

396  
	gus
 =ğ
WHITE
 ? 
g’”©e_®l
<WHITE, 
	gEVASIONS
>(
	gpos
, 
	gmoveLi¡
, 
	grg‘
)

397 : 
g’”©e_®l
<
BLACK
, 
	gEVASIONS
>(
	gpos
, 
	gmoveLi¡
, 
	grg‘
);

403 
	g‹m¶©e
<>

404 
ExtMove
* 
	gg’”©e
<
	gLEGAL
>(cÚ¡ 
	gPos™iÚ
& 
	gpos
, ExtMove* 
	gmoveLi¡
) {

406 
B™bßrd
 
	gpšÃd
 = 
pos
.
pšÃd_p›ûs
Õos.
side_to_move
());

407 
Squ¬e
 
	gksq
 = 
pos
.
squ¬e
<
KING
>Õos.
side_to_move
());

408 
ExtMove
* 
	gcur
 = 
moveLi¡
;

410 
	gmoveLi¡
 = 
pos
.
check”s
(è? 
g’”©e
<
EVASIONS
 >(pos, moveList)

411 : 
g’”©e
<
NON_EVASIONS
>(
pos
, 
	gmoveLi¡
);

412 
	gcur
 !ğ
moveLi¡
)

413 iàĞ(
pšÃd
 || 
äom_sq
(*
cur
è=ğ
ksq
 || 
ty³_of
(*curè=ğ
ENPASSANT
)

414 && !
pos
.
Ëg®
(*
cur
))

415 *
cur
 = (--
moveLi¡
)->
move
;

417 ++
	gcur
;

419  
	gmoveLi¡
;

	@movegen.h

21 #iâdeà
MOVEGEN_H_INCLUDED


22 
	#MOVEGEN_H_INCLUDED


	)

24 
	~<®gÜ™hm
>

26 
	~"ty³s.h
"

28 
şass
 
	gPos™iÚ
;

30 
	eG’Ty³
 {

31 
	mCAPTURES
,

32 
	mQUIETS
,

33 
	mQUIET_CHECKS
,

34 
	mEVASIONS
,

35 
	mNON_EVASIONS
,

36 
	mLEGAL


39 
	sExtMove
 {

40 
Move
 
	mmove
;

41 
	mv®ue
;

43 
İ”©Ü
 
Move
(ècÚ¡ {  
	mmove
; }

44 
	mİ”©Ü
=(
Move
 
m
è{ 
move
 = m; }

47 
šlše
 
boŞ
 
	gİ”©Ü
<(cÚ¡ 
	gExtMove
& 
	gf
, cÚ¡ ExtMove& 
	gs
) {

48  
	gf
.
	gv®ue
 < 
	gs
.value;

51 
	g‹m¶©e
<
	gG’Ty³
>

52 
ExtMove
* 
g’”©e
(cÚ¡ 
Pos™iÚ
& 
pos
, ExtMove* 
moveLi¡
);

56 
	g‹m¶©e
<
G’Ty³
 
	gT
>

57 
	sMoveLi¡
 {

59 
ex¶ic™
 
MoveLi¡
(cÚ¡ 
Pos™iÚ
& 
pos
è: 
Ï¡
(
g’”©e
<
T
>Õos, 
moveLi¡
)) {}

60 cÚ¡ 
ExtMove
* 
begš
(ècÚ¡ {  
	mmoveLi¡
; }

61 cÚ¡ 
ExtMove
* 
’d
(ècÚ¡ {  
	mÏ¡
; }

62 
size_t
 
size
(ècÚ¡ {  
	mÏ¡
 - 
	mmoveLi¡
; }

63 
boŞ
 
cÚšs
(
Move
 
move
) const {

64  
	m¡d
::
fšd
(
begš
(), 
’d
(), 
move
) !=ƒnd();

67 
	m´iv©e
:

68 
ExtMove
 
moveLi¡
[
MAX_MOVES
], *
	mÏ¡
;

	@movepick.cpp

21 
	~<ÿs£¹
>

23 
	~"mov•ick.h
"

24 
	~"th»ad.h
"

26 
	gÇme¥aû
 {

28 
	eSges
 {

29 
	gMAIN_SEARCH
, 
	gCAPTURES_INIT
, 
	gGOOD_CAPTURES
, 
	gKILLERS
, 
	gCOUNTERMOVE
, 
	gQUIET_INIT
, 
	gQUIET
, 
	gBAD_CAPTURES
,

30 
	gEVASION
, 
	gEVASIONS_INIT
, 
	gALL_EVASIONS
,

31 
	gPROBCUT
, 
	gPROBCUT_INIT
, 
	gPROBCUT_CAPTURES
,

32 
	gQSEARCH_WITH_CHECKS
, 
	gQCAPTURES_1_INIT
, 
	gQCAPTURES_1
, 
	gQCHECKS
,

33 
	gQSEARCH_NO_CHECKS
, 
	gQCAPTURES_2_INIT
, 
	gQCAPTURES_2
,

34 
	gQSEARCH_RECAPTURES
, 
	gQRECAPTURES


40 
·¹Ÿl_š£¹iÚ_sÜt
(
ExtMove
* 
begš
, ExtMove* 
’d
, 
lim™
) {

42 
ExtMove
 *
	gsÜ‹dEnd
 = 
begš
 + 1, *
	gp
 = begš + 1;… < 
	g’d
; ++p)

43 ià(
	gp
->
	gv®ue
 >ğ
lim™
)

45 
ExtMove
 
tmp
 = *
p
, *
	gq
;

46 *
	gp
 = *
sÜ‹dEnd
;

47 
	gq
 = 
sÜ‹dEnd
; q !ğ
begš
 && *(
q
-1è< 
tmp
; --q)

48 *
	gq
 = *(
q
-1);

49 *
	gq
 = 
tmp
;

50 ++
	gsÜ‹dEnd
;

57 
Move
 
pick_be¡
(
ExtMove
* 
begš
, ExtMove* 
’d
) {

59 
	g¡d
::
sw­
(*
begš
, *
¡d
::
max_–em’t
(begš, 
’d
));

60  *
	gbegš
;

72 
	gMovePick”
::
	$MovePick”
(cÚ¡ 
Pos™iÚ
& 
p
, 
Move
 
‰m
, 
D•th
 
d
, 
S—rch
::
Sck
* 
s
)

73 : 
	`pos
(
p
), 
	`ss
(
s
), 
	$d•th
(
d
) {

75 
	`as£¹
(
d
 > 
DEPTH_ZERO
);

77 
Squ¬e
 
´evSq
 = 
	`to_sq
((
ss
-1)->
cu¼’tMove
);

78 
couÁ”move
 = 
pos
.
	`this_th»ad
()->
couÁ”Moves
[pos.
	`p›û_Ú
(
´evSq
)][prevSq];

79 
kËrs
[0] = 
ss
->killers[0];

80 
kËrs
[1] = 
ss
->killers[1];

82 
¡age
 = 
pos
.
	`check”s
(è? 
EVASION
 : 
MAIN_SEARCH
;

83 
‰Move
 = 
‰m
 && 
pos
.
	`p£udo_Ëg®
Ñtmè?tm : 
MOVE_NONE
;

84 
¡age
 +ğ(
‰Move
 =ğ
MOVE_NONE
);

85 
	}
}

87 
	gMovePick”
::
	$MovePick”
(cÚ¡ 
Pos™iÚ
& 
p
, 
Move
 
‰m
, 
D•th
 
d
, 
Squ¬e
 
s
)

88 : 
	$pos
(
p
) {

90 
	`as£¹
(
d
 <ğ
DEPTH_ZERO
);

92 ià(
pos
.
	`check”s
())

93 
¡age
 = 
EVASION
;

95 ià(
d
 > 
DEPTH_QS_NO_CHECKS
)

96 
¡age
 = 
QSEARCH_WITH_CHECKS
;

98 ià(
d
 > 
DEPTH_QS_RECAPTURES
)

99 
¡age
 = 
QSEARCH_NO_CHECKS
;

103 
¡age
 = 
QSEARCH_RECAPTURES
;

104 
»ÿ±u»Squ¬e
 = 
s
;

108 
‰Move
 = 
‰m
 && 
pos
.
	`p£udo_Ëg®
Ñtmè?tm : 
MOVE_NONE
;

109 
¡age
 +ğ(
‰Move
 =ğ
MOVE_NONE
);

110 
	}
}

112 
	gMovePick”
::
	$MovePick”
(cÚ¡ 
Pos™iÚ
& 
p
, 
Move
 
‰m
, 
V®ue
 
th
)

113 : 
	`pos
(
p
), 
	$th»shŞd
(
th
) {

115 
	`as£¹
(!
pos
.
	`check”s
());

117 
¡age
 = 
PROBCUT
;

120 
‰Move
 = 
‰m


121 && 
pos
.
	`p£udo_Ëg®
(
‰m
)

122 && 
pos
.
	`ÿ±u»
(
‰m
)

123 && 
pos
.
	`£e_ge
(
‰m
, 
th»shŞd
è?tm : 
MOVE_NONE
;

125 
¡age
 +ğ(
‰Move
 =ğ
MOVE_NONE
);

126 
	}
}

131 
	g‹m¶©e
<>

132 
	gMovePick”
::
scÜe
<
CAPTURES
>() {

140 auto& 
m
 : *
this
)

141 
m
.
v®ue
 = 
P›ûV®ue
[
MG
][
pos
.
p›û_Ú
(
to_sq
(m))]

142 - 
V®ue
(200 * 
»Ïtive_¿nk
(
pos
.
side_to_move
(), 
to_sq
(
m
)));

145 
	g‹m¶©e
<>

146 
	gMovePick”
::
scÜe
<
QUIETS
>() {

148 cÚ¡ 
Hi¡ÜySts
& 
hi¡Üy
 = 
pos
.
this_th»ad
()->history;

150 cÚ¡ 
	gCouÁ”MoveSts
& 
	gcmh
 = *(
ss
-1)->
couÁ”Moves
;

151 cÚ¡ 
	gCouÁ”MoveSts
& 
	gfmh
 = *(
ss
-2)->
couÁ”Moves
;

152 cÚ¡ 
	gCouÁ”MoveSts
& 
	gfm2
 = *(
ss
-4)->
couÁ”Moves
;

154 
CŞÜ
 
	gc
 = 
pos
.
side_to_move
();

156 auto& 
	gm
 : *
this
)

157 
m
.
v®ue
 = 
cmh
[
pos
.
moved_p›û
(m)][
to_sq
(m)]

158 + 
fmh
[
pos
.
moved_p›û
(
m
)][
to_sq
(m)]

159 + 
fm2
[
pos
.
moved_p›û
(
m
)][
to_sq
(m)]

160 + 
hi¡Üy
.
g‘
(
c
, 
m
);

163 
	g‹m¶©e
<>

164 
	gMovePick”
::
scÜe
<
EVASIONS
>() {

166 cÚ¡ 
Hi¡ÜySts
& 
hi¡Üy
 = 
pos
.
this_th»ad
()->history;

167 
CŞÜ
 
	gc
 = 
pos
.
side_to_move
();

169 auto& 
	gm
 : *
this
)

170 ià(
pos
.
ÿ±u»
(
m
))

171 
m
.
v®ue
 = 
P›ûV®ue
[
MG
][
pos
.
p›û_Ú
(
to_sq
(m))]

172 - 
V®ue
(
ty³_of
(
pos
.
moved_p›û
(
m
))è+ 
Hi¡ÜySts
::
Max
;

174 
	gm
.
	gv®ue
 = 
hi¡Üy
.
g‘
(
c
, 
m
);

183 
Move
 
	gMovePick”
::
	$Ãxt_move
(
boŞ
 
skQu›ts
) {

185 
Move
 
move
;

187 
¡age
) {

189 
MAIN_SEARCH
: 
EVASION
: 
QSEARCH_WITH_CHECKS
:

190 
QSEARCH_NO_CHECKS
: 
PROBCUT
:

191 ++
¡age
;

192  
‰Move
;

194 
CAPTURES_INIT
:

195 
’dBadC­tu»s
 = 
cur
 = 
moves
;

196 
’dMoves
 = 
g’”©e
<
CAPTURES
>(
pos
, 
cur
);

197 
scÜe
<
CAPTURES
>();

198 ++
¡age
;

201 
GOOD_CAPTURES
:

202 
cur
 < 
’dMoves
)

204 
move
 = 
	`pick_be¡
(
cur
++, 
’dMoves
);

205 ià(
move
 !ğ
‰Move
)

207 ià(
pos
.
	`£e_ge
(
move
, 
VALUE_ZERO
))

208  
move
;

211 *
’dBadC­tu»s
++ = 
move
;

215 ++
¡age
;

216 
move
 = 
kËrs
[0];

217 iàĞ
move
 !ğ
MOVE_NONE


218 && 
move
 !ğ
‰Move


219 && 
pos
.
	`p£udo_Ëg®
(
move
)

220 && !
pos
.
	`ÿ±u»
(
move
))

221  
move
;

224 
KILLERS
:

225 ++
¡age
;

226 
move
 = 
kËrs
[1];

227 iàĞ
move
 !ğ
MOVE_NONE


228 && 
move
 !ğ
‰Move


229 && 
pos
.
	`p£udo_Ëg®
(
move
)

230 && !
pos
.
	`ÿ±u»
(
move
))

231  
move
;

234 
COUNTERMOVE
:

235 ++
¡age
;

236 
move
 = 
couÁ”move
;

237 iàĞ
move
 !ğ
MOVE_NONE


238 && 
move
 !ğ
‰Move


239 && 
move
 !ğ
kËrs
[0]

240 && 
move
 !ğ
kËrs
[1]

241 && 
pos
.
	`p£udo_Ëg®
(
move
)

242 && !
pos
.
	`ÿ±u»
(
move
))

243  
move
;

246 
QUIET_INIT
:

247 
cur
 = 
’dBadC­tu»s
;

248 
’dMoves
 = 
g’”©e
<
QUIETS
>(
pos
, 
cur
);

249 
scÜe
<
QUIETS
>();

250 
	`·¹Ÿl_š£¹iÚ_sÜt
(
cur
, 
’dMoves
, -4000 * 
d•th
 / 
ONE_PLY
);

251 ++
¡age
;

254 
QUIET
:

255  
cur
 < 
’dMoves


256 && (!
skQu›ts
 || 
cur
->
v®ue
 >ğ
VALUE_ZERO
))

258 
move
 = *
cur
++;

260 iàĞ
move
 !ğ
‰Move


261 && 
move
 !ğ
kËrs
[0]

262 && 
move
 !ğ
kËrs
[1]

263 && 
move
 !ğ
couÁ”move
)

264  
move
;

266 ++
¡age
;

267 
cur
 = 
moves
;

270 
BAD_CAPTURES
:

271 ià(
cur
 < 
’dBadC­tu»s
)

272  *
cur
++;

275 
EVASIONS_INIT
:

276 
cur
 = 
moves
;

277 
’dMoves
 = 
g’”©e
<
EVASIONS
>(
pos
, 
cur
);

278 
scÜe
<
EVASIONS
>();

279 ++
¡age
;

282 
ALL_EVASIONS
:

283 
cur
 < 
’dMoves
)

285 
move
 = 
	`pick_be¡
(
cur
++, 
’dMoves
);

286 ià(
move
 !ğ
‰Move
)

287  
move
;

291 
PROBCUT_INIT
:

292 
cur
 = 
moves
;

293 
’dMoves
 = 
g’”©e
<
CAPTURES
>(
pos
, 
cur
);

294 
scÜe
<
CAPTURES
>();

295 ++
¡age
;

298 
PROBCUT_CAPTURES
:

299 
cur
 < 
’dMoves
)

301 
move
 = 
	`pick_be¡
(
cur
++, 
’dMoves
);

302 iàĞ
move
 !ğ
‰Move


303 && 
pos
.
	`£e_ge
(
move
, 
th»shŞd
))

304  
move
;

308 
QCAPTURES_1_INIT
: 
QCAPTURES_2_INIT
:

309 
cur
 = 
moves
;

310 
’dMoves
 = 
g’”©e
<
CAPTURES
>(
pos
, 
cur
);

311 
scÜe
<
CAPTURES
>();

312 ++
¡age
;

315 
QCAPTURES_1
: 
QCAPTURES_2
:

316 
cur
 < 
’dMoves
)

318 
move
 = 
	`pick_be¡
(
cur
++, 
’dMoves
);

319 ià(
move
 !ğ
‰Move
)

320  
move
;

322 ià(
¡age
 =ğ
QCAPTURES_2
)

324 
cur
 = 
moves
;

325 
’dMoves
 = 
g’”©e
<
QUIET_CHECKS
>(
pos
, 
cur
);

326 ++
¡age
;

329 
QCHECKS
:

330 
cur
 < 
’dMoves
)

332 
move
 = 
cur
++->move;

333 ià(
move
 !ğ
‰Move
)

334  
move
;

338 
QSEARCH_RECAPTURES
:

339 
cur
 = 
moves
;

340 
’dMoves
 = 
g’”©e
<
CAPTURES
>(
pos
, 
cur
);

341 
scÜe
<
CAPTURES
>();

342 ++
¡age
;

345 
QRECAPTURES
:

346 
cur
 < 
’dMoves
)

348 
move
 = 
	`pick_be¡
(
cur
++, 
’dMoves
);

349 ià(
	`to_sq
(
move
è=ğ
»ÿ±u»Squ¬e
)

350  
move
;

355 
	`as£¹
(
çl£
);

358  
MOVE_NONE
;

359 
	}
}

	@movepick.h

21 #iâdeà
MOVEPICK_H_INCLUDED


22 
	#MOVEPICK_H_INCLUDED


	)

24 
	~<c¡ršg
>

26 
	~"moveg’.h
"

27 
	~"pos™iÚ.h
"

28 
	~"ty³s.h
"

33 
	sHi¡ÜySts
 {

35 cÚ¡ 
	mMax
 = 1 << 28;

37 
g‘
(
CŞÜ
 
c
, 
Move
 
m
ècÚ¡ {  
	mbË
[c][
äom_sq
(m)][
to_sq
(m)]; }

38 
ş—r
(è{ 
	m¡d
::
mem£t
(
bË
, 0, (table)); }

39 
upd©e
(
CŞÜ
 
c
, 
Move
 
m
, 
v
) {

41 
Squ¬e
 
	mäom
 = 
äom_sq
(
m
);

42 
Squ¬e
 
	mto
 = 
to_sq
(
m
);

44 cÚ¡ 
	mD
 = 324;

46 
as£¹
(
abs
((
v
)è<ğ
D
);

48 
	mbË
[
c
][
äom
][
to
] -ğ
bË
[c][äom][to] * 
abs
((
v
)è/ 
D
;

49 
	mbË
[
c
][
äom
][
to
] +ğ(
v
) * 32;

52 
	m´iv©e
:

53 
bË
[
COLOR_NB
][
SQUARE_NB
][SQUARE_NB];

63 
	g‹m¶©e
<
ty³Çme
 
	gT
>

64 
	sSts
 {

65 cÚ¡ 
T
* 
	mİ”©Ü
[](
P›û
 
	mpc
ècÚ¡ {  
	mbË
[
pc
]; }

66 
T
* 
	mİ”©Ü
[](
P›û
 
	mpc
è{  
	mbË
[
pc
]; }

67 
ş—r
(è{ 
	m¡d
::
mem£t
(
bË
, 0, (table)); }

68 
upd©e
(
P›û
 
pc
, 
Squ¬e
 
to
, 
Move
 
m
è{ 
	mbË
[pc][to] = m; }

69 
upd©e
(
P›û
 
pc
, 
Squ¬e
 
to
, 
v
) {

71 cÚ¡ 
	mD
 = 936;

73 
as£¹
(
abs
((
v
)è<ğ
D
);

75 
	mbË
[
pc
][
to
] -ğ
bË
[pc][to] * 
abs
((
v
)è/ 
D
;

76 
	mbË
[
pc
][
to
] +ğ(
v
) * 32;

79 
	m´iv©e
:

80 
T
 
bË
[
PIECE_NB
][
SQUARE_NB
];

83 
	gSts
<
	tMove
> 
	tMoveSts
;

84 
	gSts
<> 
	tCouÁ”MoveSts
;

85 
	gSts
<
	tCouÁ”MoveSts
> 
	tCouÁ”MoveHi¡ÜySts
;

94 
Çme¥aû
 
	gS—rch
 { 
	gSck
; }

96 şas 
	cMovePick”
 {

97 
	mpublic
:

98 
MovePick”
(cÚ¡ MovePick”&èğ
d–‘e
;

99 
	mMovePick”
& 
	mİ”©Ü
=(cÚ¡ 
MovePick”
&èğ
d–‘e
;

101 
MovePick”
(cÚ¡ 
Pos™iÚ
&, 
Move
, 
V®ue
);

102 
MovePick”
(cÚ¡ 
Pos™iÚ
&, 
Move
, 
D•th
, 
Squ¬e
);

103 
MovePick”
(cÚ¡ 
Pos™iÚ
&, 
Move
, 
D•th
, 
S—rch
::
Sck
*);

105 
Move
 
Ãxt_move
(
boŞ
 
skQu›ts
 = 
çl£
);

107 
	m´iv©e
:

108 
‹m¶©e
<
G’Ty³
> 
scÜe
();

109 
ExtMove
* 
	$begš
(è{  
cur
; }

110 
ExtMove
* 
	$’d
(è{  
’dMoves
; 
	}
}

112 cÚ¡ 
	gPos™iÚ
& 
	gpos
;

113 cÚ¡ 
	gS—rch
::
Sck
* 
ss
;

114 
Move
 
	gkËrs
[2];

115 
Move
 
	gcouÁ”move
;

116 
D•th
 
	gd•th
;

117 
Move
 
	g‰Move
;

118 
Squ¬e
 
	g»ÿ±u»Squ¬e
;

119 
V®ue
 
	gth»shŞd
;

120 
	g¡age
;

121 
ExtMove
 *
	gcur
, *
	g’dMoves
, *
	g’dBadC­tu»s
;

122 
ExtMove
 
	gmoves
[
MAX_MOVES
];

	@pawns.cpp

21 
	~<®gÜ™hm
>

22 
	~<ÿs£¹
>

24 
	~"b™bßrd.h
"

25 
	~"·wns.h
"

26 
	~"pos™iÚ.h
"

27 
	~"th»ad.h
"

29 
	gÇme¥aû
 {

31 
	#V
 
V®ue


	)

32 
	#S
(
mg
, 
eg
è
	`make_scÜe
(mg,ƒg)

	)

35 cÚ¡ 
ScÜe
 
	gIsŞ©ed
[] = { 
S
(45, 40), S(30, 27) };

38 cÚ¡ 
ScÜe
 
	gBackw¬d
[] = { 
S
(56, 33), S(41, 19) };

41 cÚ¡ 
ScÜe
 
	gUnsuµÜ‹d
 = 
S
(17, 8);

44 
ScÜe
 
	gCÚÃùed
[2][2][2][
RANK_NB
];

47 cÚ¡ 
ScÜe
 
	gDoubËd
 = 
S
(18, 38);

50 cÚ¡ 
ScÜe
 
	gLev”
[
RANK_NB
] = {

51 
S
( 0, 0), S( 0, 0), S(0, 0), S(0, 0),

52 
S
(17, 16), S(33, 32), S(0, 0), S(0, 0)

57 cÚ¡ 
V®ue
 
	gSh–‹rW—kÃss
[][
RANK_NB
] = {

58 { 
V
(100), V(20), V(10), V(46), V(82), V( 86), V( 98) },

59 { 
V
(116), V( 4), V(28), V(87), V(94), V(108), V(104) },

60 { 
V
(109), V( 1), V(59), V(87), V(62), V( 91), V(116) },

61 { 
V
( 75), V(12), V(43), V(59), V(90), V( 84), V(112) }

67 cÚ¡ 
V®ue
 
	gStÜmDªg”
[][4][
RANK_NB
] = {

68 { { 
V
( 0), V(-290), V(-274), V(57), V(41) },

69 { 
V
( 0), V( 60), V( 144), V(39), V(13) },

70 { 
V
( 0), V( 65), V( 141), V(41), V(34) },

71 { 
V
( 0), V( 53), V( 127), V(56), V(14) } },

72 { { 
V
( 4), V( 73), V( 132), V(46), V(31) },

73 { 
V
( 1), V( 64), V( 143), V(26), V(13) },

74 { 
V
( 1), V( 47), V( 110), V(44), V(24) },

75 { 
V
( 0), V( 72), V( 127), V(50), V(31) } },

76 { { 
V
( 0), V( 0), V( 79), V(23), V( 1) },

77 { 
V
( 0), V( 0), V( 148), V(27), V( 2) },

78 { 
V
( 0), V( 0), V( 161), V(16), V( 1) },

79 { 
V
( 0), V( 0), V( 171), V(22), V(15) } },

80 { { 
V
(22), V( 45), V( 104), V(62), V( 6) },

81 { 
V
(31), V( 30), V( 99), V(39), V(19) },

82 { 
V
(23), V( 29), V( 96), V(41), V(15) },

83 { 
V
(21), V( 23), V( 116), V(41), V(15) } }

88 cÚ¡ 
V®ue
 
	gMaxSaãtyBÚus
 = 
V
(258);

90 #undeà
S


91 #undeà
V


93 
	g‹m¶©e
<
CŞÜ
 
	gUs
>

94 
ScÜe
 
ev®u©e
(cÚ¡ 
Pos™iÚ
& 
pos
, 
Pawns
::
EÁry
* 
e
) {

96 cÚ¡ 
CŞÜ
 
Them
 = (
Us
 =ğ
WHITE
 ? 
BLACK
 : WHITE);

97 cÚ¡ 
Squ¬e
 
	gUp
 = (
Us
 =ğ
WHITE
 ? 
NORTH
 : 
SOUTH
);

98 cÚ¡ 
Squ¬e
 
	gRight
 = (
Us
 =ğ
WHITE
 ? 
NORTH_EAST
 : 
SOUTH_WEST
);

99 cÚ¡ 
Squ¬e
 
	gLeá
 = (
Us
 =ğ
WHITE
 ? 
NORTH_WEST
 : 
SOUTH_EAST
);

101 
B™bßrd
 
	gb
, 
	gÃighbours
, 
	g¡İ³rs
, 
	gdoubËd
, 
	gsuµÜ‹d
, 
	gph®ªx
;

102 
B™bßrd
 
	gËv”
, 
	gËv”Push
, 
	gcÚÃùed
;

103 
Squ¬e
 
	gs
;

104 
boŞ
 
	gİpo£d
, 
	gbackw¬d
;

105 
ScÜe
 
	gscÜe
 = 
SCORE_ZERO
;

106 cÚ¡ 
Squ¬e
* 
	g¶
 = 
pos
.
squ¬es
<
PAWN
>(
Us
);

108 
B™bßrd
 
	gourPawns
 = 
pos
.
p›ûs
(
Us
 , 
PAWN
);

109 
B™bßrd
 
	gtheœPawns
 = 
pos
.
p›ûs
(
Them
, 
PAWN
);

111 
	ge
->
	g·s£dPawns
[
Us
] = 
e
->
·wnA‰acksS·n
[Us] = 0;

112 
	ge
->
	g£miİ’Fes
[
Us
] = 0xFF;

113 
	ge
->
	gkšgSqu¬es
[
Us
] = 
SQ_NONE
;

114 
	ge
->
	g·wnA‰acks
[
Us
] = 
shiá
<
Right
>(
ourPawns
è| shiá<
Leá
>(ourPawns);

115 
	ge
->
	g·wnsOnSqu¬es
[
Us
][
BLACK
] = 
pİcouÁ
(
ourPawns
 & 
D¬kSqu¬es
);

116 
	ge
->
	g·wnsOnSqu¬es
[
Us
][
WHITE
] = 
pos
.
couÁ
<
PAWN
>(Usè- 
e
->
·wnsOnSqu¬es
[Us][
BLACK
];

119 (
	gs
 = *
¶
++è!ğ
SQ_NONE
)

121 
as£¹
(
pos
.
p›û_Ú
(
s
è=ğ
make_p›û
(
Us
, 
PAWN
));

123 
Fe
 
	gf
 = 
fe_of
(
s
);

125 
	ge
->
	g£miİ’Fes
[
Us
] &ğ~(1 << 
f
);

126 
	ge
->
	g·wnA‰acksS·n
[
Us
] |ğ
·wn_©ck_¥ª
(Us, 
s
);

129 
	gİpo£d
 = 
theœPawns
 & 
fÜw¬d_bb
(
Us
, 
s
);

130 
	g¡İ³rs
 = 
theœPawns
 & 
·s£d_·wn_mask
(
Us
, 
s
);

131 
	gËv”
 = 
theœPawns
 & 
PawnA‰acks
[
Us
][
s
];

132 
	gËv”Push
 = 
theœPawns
 & 
PawnA‰acks
[
Us
][
s
 + 
Up
];

133 
	gdoubËd
 = 
ourPawns
 & (
s
 - 
Up
);

134 
	gÃighbours
 = 
ourPawns
 & 
adjaûÁ_fes_bb
(
f
);

135 
	gph®ªx
 = 
Ãighbours
 & 
¿nk_bb
(
s
);

136 
	gsuµÜ‹d
 = 
Ãighbours
 & 
¿nk_bb
(
s
 - 
Up
);

137 
	gcÚÃùed
 = 
suµÜ‹d
 | 
ph®ªx
;

141 ià(!
	gÃighbours
 || 
	gËv”
 || 
»Ïtive_¿nk
(
Us
, 
s
è>ğ
RANK_5
)

142 
backw¬d
 = 
çl£
;

146 
	gb
 = 
¿nk_bb
(
backmo¡_sq
(
Us
, 
Ãighbours
 | 
¡İ³rs
));

151 
	gbackw¬d
 = (
b
 | 
shiá
<
Up
>(b & 
adjaûÁ_fes_bb
(
f
))è& 
¡İ³rs
;

153 
as£¹
(!
backw¬d
 || !(
·wn_©ck_¥ª
(
Them
, 
s
 + 
Up
è& 
Ãighbours
));

160 iàĞ!(
	g¡İ³rs
 ^ 
	gËv”
 ^ 
	gËv”Push
)

161 && !(
	gourPawns
 & 
fÜw¬d_bb
(
Us
, 
s
))

162 && 
pİcouÁ
(
suµÜ‹d
è>ğpİcouÁ(
Ëv”
)

163 && 
pİcouÁ
(
ph®ªx
è>ğpİcouÁ(
Ëv”Push
))

164 
e
->
·s£dPawns
[
Us
] |ğ
s
;

167 ià(!
	gÃighbours
)

168 
	gscÜe
 -ğ
IsŞ©ed
[
İpo£d
];

170 ià(
	gbackw¬d
)

171 
	gscÜe
 -ğ
Backw¬d
[
İpo£d
];

173 ià(!
	gsuµÜ‹d
)

174 
	gscÜe
 -ğ
UnsuµÜ‹d
;

176 ià(
	gcÚÃùed
)

177 
	gscÜe
 +ğ
CÚÃùed
[
İpo£d
][!!
ph®ªx
][
mÜe_thª_Úe
(
suµÜ‹d
)][
»Ïtive_¿nk
(
Us
, 
s
)];

179 ià(
	gdoubËd
 && !
	gsuµÜ‹d
)

180 
	gscÜe
 -ğ
DoubËd
;

182 ià(
	gËv”
)

183 
	gscÜe
 +ğ
Lev”
[
»Ïtive_¿nk
(
Us
, 
s
)];

186  
	gscÜe
;

191 
Çme¥aû
 
	gPawns
 {

197 
š™
() {

199 cÚ¡ 
	gS“d
[
RANK_NB
] = { 0, 8, 19, 13, 71, 94, 169, 324 };

201 
	gİpo£d
 = 0; opposed <= 1; ++opposed)

202 
	gph®ªx
 = 0;…halanx <= 1; ++phalanx)

203 
	g­ex
 = 0;‡pex <= 1; ++apex)

204 
Rªk
 
	gr
 = 
RANK_2
;„ < 
	gRANK_8
; ++r)

206 
	gv
 = (
S“d
[
r
] + (
ph®ªx
 ? (S“d[¸+ 1] - S“d[r]è/ 2 : 0)è>> 
İpo£d
;

207 
	gv
 +ğ(
­ex
 ? 
v
 / 2 : 0);

208 
	gCÚÃùed
[
İpo£d
][
ph®ªx
][
­ex
][
r
] = 
make_scÜe
(
v
, v * (r-2) / 4);

218 
EÁry
* 
´obe
(cÚ¡ 
Pos™iÚ
& 
pos
) {

220 
Key
 
	gkey
 = 
pos
.
·wn_key
();

221 
EÁry
* 
	ge
 = 
pos
.
this_th»ad
()->
·wnsTabË
[
key
];

223 ià(
	ge
->
	gkey
 =ğ
key
)

224  
e
;

226 
	ge
->
	gkey
 = 
key
;

227 
	ge
->
	gscÜe
 = 
ev®u©e
<
WHITE
>(
pos
,ƒè- 
	gev®u©e
<
	gBLACK
>(
	gpos
,ƒ);

228 
	ge
->
	gasymm‘ry
 = 
pİcouÁ
(
e
->
£miİ’Fes
[
WHITE
] ^ƒ->£miİ’Fes[
BLACK
]);

229 
	ge
->
	gİ’Fes
 = 
pİcouÁ
(
e
->
£miİ’Fes
[
WHITE
] &ƒ->£miİ’Fes[
BLACK
]);

230  
	ge
;

237 
	g‹m¶©e
<
CŞÜ
 
	gUs
>

238 
V®ue
 
	gEÁry
::
sh–‹r_¡Üm
(cÚ¡ 
Pos™iÚ
& 
pos
, 
Squ¬e
 
ksq
) {

240 cÚ¡ 
CŞÜ
 
	gThem
 = (
Us
 =ğ
WHITE
 ? 
BLACK
 : WHITE);

242 ’um { 
	gBlockedByKšg
, 
	gUnİpo£d
, 
	gBlockedByPawn
, 
	gUnblocked
 };

244 
B™bßrd
 
	gb
 = 
pos
.
p›ûs
(
PAWN
è& (
š_äÚt_bb
(
Us
, 
¿nk_of
(
ksq
)è| 
¿nk_bb
(ksq));

245 
B™bßrd
 
	gourPawns
 = 
b
 & 
pos
.
p›ûs
(
Us
);

246 
B™bßrd
 
	gtheœPawns
 = 
b
 & 
pos
.
p›ûs
(
Them
);

247 
V®ue
 
	g§ãty
 = 
MaxSaãtyBÚus
;

248 
Fe
 
	gûÁ”
 = 
¡d
::
max
(
FILE_B
, std::
mš
(
FILE_G
, 
fe_of
(
ksq
)));

250 
Fe
 
	gf
 = 
ûÁ”
 - File(1); f <= center + File(1); ++f)

252 
	gb
 = 
ourPawns
 & 
fe_bb
(
f
);

253 
Rªk
 
	grkUs
 = 
b
 ? 
»Ïtive_¿nk
(
Us
, 
backmo¡_sq
(Us, b)è: 
RANK_1
;

255 
	gb
 = 
theœPawns
 & 
fe_bb
(
f
);

256 
Rªk
 
	grkThem
 = 
b
 ? 
»Ïtive_¿nk
(
Us
, 
äÚtmo¡_sq
(
Them
, b)è: 
RANK_1
;

258 
	gd
 = 
¡d
::
mš
(
f
, 
FILE_H
 - f);

259 
	g§ãty
 -ğ
Sh–‹rW—kÃss
[
d
][
rkUs
]

260 + 
StÜmDªg”


261 [
f
 =ğ
fe_of
(
ksq
è&& 
rkThem
 =ğ
»Ïtive_¿nk
(
Us
, ksqè+ 1 ? 
BlockedByKšg
 :

262 
rkUs
 =ğ
RANK_1
 ? 
Unİpo£d
 :

263 
rkThem
 =ğ
rkUs
 + 1 ? 
BlockedByPawn
 : 
Unblocked
]

264 [
d
][
rkThem
];

267  
	g§ãty
;

274 
	g‹m¶©e
<
CŞÜ
 
	gUs
>

275 
ScÜe
 
	gEÁry
::
do_kšg_§ãty
(cÚ¡ 
Pos™iÚ
& 
pos
, 
Squ¬e
 
ksq
) {

277 
	gkšgSqu¬es
[
Us
] = 
ksq
;

278 
	gÿ¡lšgRights
[
Us
] = 
pos
.
ÿn_ÿ¡Ë
(Us);

279 
	gmšKšgPawnDi¡ªû
 = 0;

281 
B™bßrd
 
	g·wns
 = 
pos
.
p›ûs
(
Us
, 
PAWN
);

282 ià(
	g·wns
)

283 !(
	gDi¡ªûRšgBB
[
ksq
][
mšKšgPawnDi¡ªû
++] & 
	g·wns
)) {}

285 
V®ue
 
	gbÚus
 = 
sh–‹r_¡Üm
<
Us
>(
pos
, 
	gksq
);

288 ià(
	gpos
.
ÿn_ÿ¡Ë
(
MakeCa¡lšg
<
Us
, 
KING_SIDE
>::
right
))

289 
bÚus
 = 
¡d
::
max
(bÚus, 
sh–‹r_¡Üm
<
Us
>(
pos
, 
»Ïtive_squ¬e
(Us, 
SQ_G1
)));

291 ià(
	gpos
.
ÿn_ÿ¡Ë
(
MakeCa¡lšg
<
Us
, 
QUEEN_SIDE
>::
right
))

292 
bÚus
 = 
¡d
::
max
(bÚus, 
sh–‹r_¡Üm
<
Us
>(
pos
, 
»Ïtive_squ¬e
(Us, 
SQ_C1
)));

294  
make_scÜe
(
bÚus
, -16 * 
mšKšgPawnDi¡ªû
);

298 
‹m¶©e
 
ScÜe
 
	gEÁry
::
do_kšg_§ãty
<
WHITE
>(cÚ¡ 
Pos™iÚ
& 
pos
, 
Squ¬e
 
	gksq
);

299 
‹m¶©e
 
ScÜe
 
	gEÁry
::
do_kšg_§ãty
<
BLACK
>(cÚ¡ 
Pos™iÚ
& 
pos
, 
Squ¬e
 
	gksq
);

	@pawns.h

21 #iâdeà
PAWNS_H_INCLUDED


22 
	#PAWNS_H_INCLUDED


	)

24 
	~"misc.h
"

25 
	~"pos™iÚ.h
"

26 
	~"ty³s.h
"

28 
Çme¥aû
 
	gPawns
 {

34 
	sEÁry
 {

36 
ScÜe
 
·wns_scÜe
(ècÚ¡ {  
	gscÜe
; }

37 
B™bßrd
 
·wn_©cks
(
CŞÜ
 
c
ècÚ¡ {  
	g·wnA‰acks
[c]; }

38 
B™bßrd
 
·s£d_·wns
(
CŞÜ
 
c
ècÚ¡ {  
	g·s£dPawns
[c]; }

39 
B™bßrd
 
·wn_©cks_¥ª
(
CŞÜ
 
c
ècÚ¡ {  
	g·wnA‰acksS·n
[c]; }

40 
·wn_asymm‘ry
(ècÚ¡ {  
	gasymm‘ry
; }

41 
İ’_fes
(ècÚ¡ {  
	gİ’Fes
; }

43 
£miİ’_fe
(
CŞÜ
 
c
, 
Fe
 
f
) const {

44  
	g£miİ’Fes
[
c
] & (1 << 
	gf
);

47 
£miİ’_side
(
CŞÜ
 
c
, 
Fe
 
f
, 
boŞ
 
ËáSide
) const {

48  
	g£miİ’Fes
[
c
] & (
	gËáSide
 ? (1 << 
	gf
è- 1 : ~((1 << (
f
 + 1)) - 1));

51 
·wns_Ú_§me_cŞÜ_squ¬es
(
CŞÜ
 
c
, 
Squ¬e
 
s
) const {

52  
	g·wnsOnSqu¬es
[
c
][!!(
D¬kSqu¬es
 & 
s
)];

55 
	g‹m¶©e
<
CŞÜ
 
	gUs
>

56 
ScÜe
 
kšg_§ãty
(cÚ¡ 
Pos™iÚ
& 
pos
, 
Squ¬e
 
ksq
) {

57  
	gkšgSqu¬es
[
Us
] =ğ
ksq
 && 
ÿ¡lšgRights
[Us] =ğ
pos
.
ÿn_ÿ¡Ë
(Us)

58 ? 
kšgSaãty
[
Us
] : (kšgSaãty[Us] = 
do_kšg_§ãty
<Us>(
pos
, 
	gksq
));

61 
	g‹m¶©e
<
CŞÜ
 
	gUs
>

62 
ScÜe
 
do_kšg_§ãty
(cÚ¡ 
Pos™iÚ
& 
pos
, 
Squ¬e
 
ksq
);

64 
	g‹m¶©e
<
CŞÜ
 
	gUs
>

65 
V®ue
 
sh–‹r_¡Üm
(cÚ¡ 
Pos™iÚ
& 
pos
, 
Squ¬e
 
ksq
);

67 
Key
 
	gkey
;

68 
ScÜe
 
	gscÜe
;

69 
B™bßrd
 
	g·s£dPawns
[
COLOR_NB
];

70 
B™bßrd
 
	g·wnA‰acks
[
COLOR_NB
];

71 
B™bßrd
 
	g·wnA‰acksS·n
[
COLOR_NB
];

72 
Squ¬e
 
	gkšgSqu¬es
[
COLOR_NB
];

73 
ScÜe
 
	gkšgSaãty
[
COLOR_NB
];

74 
	gÿ¡lšgRights
[
COLOR_NB
];

75 
	g£miİ’Fes
[
COLOR_NB
];

76 
	g·wnsOnSqu¬es
[
COLOR_NB
][COLOR_NB];

77 
	gasymm‘ry
;

78 
	gİ’Fes
;

81 
	gHashTabË
<
	tEÁry
, 16384> 
	tTabË
;

83 
š™
();

84 
EÁry
* 
´obe
(cÚ¡ 
Pos™iÚ
& 
pos
);

	@position.cpp

21 
	~<®gÜ™hm
>

22 
	~<ÿs£¹
>

23 
	~<c¡ddef
>

24 
	~<c¡ršg
>

25 
	~<iomª
>

26 
	~<s¡»am
>

28 
	~"b™bßrd.h
"

29 
	~"misc.h
"

30 
	~"moveg’.h
"

31 
	~"pos™iÚ.h
"

32 
	~"th»ad.h
"

33 
	~"‰.h
"

34 
	~"uci.h
"

35 
	~"syzygy/tb´obe.h
"

37 
usšg
 
	g¡d
::
¡ršg
;

39 
Çme¥aû
 
	gPSQT
 {

40 
ScÜe
 
psq
[
PIECE_NB
][
SQUARE_NB
];

43 
Çme¥aû
 
	gZobri¡
 {

45 
Key
 
	gpsq
[
PIECE_NB
][
SQUARE_NB
];

46 
Key
 
	g’·s§Á
[
FILE_NB
];

47 
Key
 
	gÿ¡lšg
[
CASTLING_RIGHT_NB
];

48 
Key
 
	gside
, 
	gnoPawns
;

51 
	gÇme¥aû
 {

53 cÚ¡ 
¡ršg
 
P›ûToCh¬
(" PNBRQK…nbrqk");

59 
	g‹m¶©e
<
	gPt
>

60 
P›ûTy³
 
mš_©ck”
(cÚ¡ 
B™bßrd
* 
bb
, 
Squ¬e
 
to
, B™bßrd 
¡mA‰ack”s
,

61 
B™bßrd
& 
occup›d
, B™bßrd& 
©ck”s
) {

63 
B™bßrd
 
	gb
 = 
¡mA‰ack”s
 & 
bb
[
Pt
];

64 ià(!
	gb
)

65  
	gmš_©ck”
<
	gPt
+1>(
	gbb
, 
	gto
, 
	g¡mA‰ack”s
, 
	goccup›d
, 
	g©ck”s
);

67 
	goccup›d
 ^ğ
b
 & ~(b - 1);

69 ià(
	gPt
 =ğ
PAWN
 || 
Pt
 =ğ
BISHOP
 || Pˆ=ğ
QUEEN
)

70 
©ck”s
 |ğ
©cks_bb
<
BISHOP
>(
to
, 
	goccup›d
è& (
	gbb
[BISHOP] | bb[
QUEEN
]);

72 ià(
	gPt
 =ğ
ROOK
 || 
Pt
 =ğ
QUEEN
)

73 
©ck”s
 |ğ
©cks_bb
<
ROOK
>(
to
, 
	goccup›d
è& (
	gbb
[ROOK] | bb[
QUEEN
]);

75 
	g©ck”s
 &ğ
occup›d
;

76  (
	gP›ûTy³
)
	gPt
;

79 
	g‹m¶©e
<>

80 
P›ûTy³
 
	gmš_©ck”
<
	gKING
>(cÚ¡ 
	gB™bßrd
*, 
	gSqu¬e
, Bitboard, Bitboard&, Bitboard&) {

81  
	gKING
;

89 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
, cÚ¡ 
	gPos™iÚ
& 
	gpos
) {

91 
	gos
 << "\n +---+---+---+---+---+---+---+---+\n";

93 
Rªk
 
	gr
 = 
RANK_8
;„ >ğ
RANK_1
; --r)

95 
Fe
 
	gf
 = 
FILE_A
; f <ğ
FILE_H
; ++f)

96 
	gos
 << " | " << 
	gP›ûToCh¬
[
pos
.
p›û_Ú
(
make_squ¬e
(
f
, 
r
))];

98 
	gos
 << " |\n +---+---+---+---+---+---+---+---+\n";

101 
	gos
 << "\nF’: " << 
	gpos
.
ãn
(è<< "\nKey: " << 
	g¡d
::
hex
 << 
¡d
::
uµ”ÿ£


102 << 
¡d
::
£tfl
('0'è<< std::
£tw
(16è<< 
pos
.
key
()

103 << 
¡d
::
£tfl
(' 'è<< std::
dec
 << "\nCheckers: ";

105 
B™bßrd
 
	gb
 = 
pos
.
check”s
(); b; )

106 
	gos
 << 
	gUCI
::
squ¬e
(
pİ_lsb
(&
b
)) << " ";

108 iàĞ(
	gTabËba£s
::
MaxC¬dš®™y
è>ğ
pİcouÁ
(
pos
.
p›ûs
())

109 && !
pos
.
ÿn_ÿ¡Ë
(
ANY_CASTLING
))

111 
S‹Info
 
¡
;

112 
Pos™iÚ
 
	gp
;

113 
	gp
.
£t
(
pos
.
ãn
(),…os.
is_chess960
(), &
¡
,…os.
this_th»ad
());

114 
	gTabËba£s
::
ProbeS‹
 
s1
, 
	gs2
;

115 
	gTabËba£s
::
WDLScÜe
 
wdl
 = 
TabËba£s
::
´obe_wdl
(
p
, &
s1
);

116 
	gdtz
 = 
TabËba£s
::
´obe_dtz
(
p
, &
s2
);

117 
	gos
 << "\nTabËba£ WDL: " << 
	g¡d
::
£tw
(4è<< 
wdl
 << " (" << 
s1
 << ")"

118 << "\nTabËba£ DTZ: " << 
¡d
::
£tw
(4è<< 
dtz
 << " (" << 
s2
 << ")";

121  
	gos
;

128 
	gPos™iÚ
::
	$š™
() {

130 
PRNG
 
	`ºg
(1070372);

132 
P›û
 
pc
 : 
P›ûs
)

133 
Squ¬e
 
s
 = 
SQ_A1
; s <ğ
SQ_H8
; ++s)

134 
Zobri¡
::
psq
[
pc
][
s
] = 
ºg
.
¿nd
<
Key
>();

136 
Fe
 
f
 = 
FILE_A
; f <ğ
FILE_H
; ++f)

137 
Zobri¡
::
’·s§Á
[
f
] = 
ºg
.
¿nd
<
Key
>();

139 
ü
 = 
NO_CASTLING
; c¸<ğ
ANY_CASTLING
; ++cr)

141 
Zobri¡
::
ÿ¡lšg
[
ü
] = 0;

142 
B™bßrd
 
b
 = 
ü
;

143 
b
)

145 
Key
 
k
 = 
Zobri¡
::
ÿ¡lšg
[1ULL << 
	`pİ_lsb
(&
b
)];

146 
Zobri¡
::
ÿ¡lšg
[
ü
] ^ğ
k
 ? k : 
ºg
.
¿nd
<
Key
>();

150 
Zobri¡
::
side
 = 
ºg
.
¿nd
<
Key
>();

151 
Zobri¡
::
noPawns
 = 
ºg
.
¿nd
<
Key
>();

152 
	}
}

159 
	gPos™iÚ
& Pos™iÚ::
	$£t
(cÚ¡ 
¡ršg
& 
ãnSŒ
, 
boŞ
 
isChess960
, 
S‹Info
* 
si
, 
Th»ad
* 
th
) {

195 
cŞ
, 
row
, 
tok’
;

196 
size_t
 
idx
;

197 
Squ¬e
 
sq
 = 
SQ_A8
;

198 
¡d
::
i¡ršg¡»am
 
	`ss
(
ãnSŒ
);

200 
¡d
::
	`mem£t
(
this
, 0, (
Pos™iÚ
));

201 
¡d
::
	`mem£t
(
si
, 0, (
S‹Info
));

202 
¡d
::
	`fl_n
(&
p›ûLi¡
[0][0], Õ›ûLi¡è/ (
Squ¬e
), 
SQ_NONE
);

203 
¡
 = 
si
;

205 
ss
 >> 
¡d
::
noskws
;

208 (
ss
 >> 
tok’
è&& !
	`is¥aû
(token))

210 ià(
	`isdig™
(
tok’
))

211 
sq
 +ğ
	`Squ¬e
(
tok’
 - '0');

213 ià(
tok’
 == '/')

214 
sq
 -ğ
	`Squ¬e
(16);

216 ià((
idx
 = 
P›ûToCh¬
.
	`fšd
(
tok’
)è!ğ
¡ršg
::
Åos
)

218 
	`put_p›û
(
	`P›û
(
idx
), 
sq
);

219 ++
sq
;

224 
ss
 >> 
tok’
;

225 
sideToMove
 = (
tok’
 =ğ'w' ? 
WHITE
 : 
BLACK
);

226 
ss
 >> 
tok’
;

233 (
ss
 >> 
tok’
è&& !
	`is¥aû
(token))

235 
Squ¬e
 
rsq
;

236 
CŞÜ
 
c
 = 
	`i¦ow”
(
tok’
è? 
BLACK
 : 
WHITE
;

237 
P›û
 
rook
 = 
	`make_p›û
(
c
, 
ROOK
);

239 
tok’
 = (
	`touµ”
(token));

241 ià(
tok’
 == 'K')

242 
rsq
 = 
	`»Ïtive_squ¬e
(
c
, 
SQ_H1
); 
	`p›û_Ú
Ôsqè!ğ
rook
; --rsq) {}

244 ià(
tok’
 == 'Q')

245 
rsq
 = 
	`»Ïtive_squ¬e
(
c
, 
SQ_A1
); 
	`p›û_Ú
Ôsqè!ğ
rook
; ++rsq) {}

247 ià(
tok’
 >= 'A' &&oken <= 'H')

248 
rsq
 = 
	`make_squ¬e
(
	`Fe
(
tok’
 - 'A'), 
	`»Ïtive_¿nk
(
c
, 
RANK_1
));

253 
	`£t_ÿ¡lšg_right
(
c
, 
rsq
);

257 iàĞ((
ss
 >> 
cŞ
) && (col >= 'a' && col <= 'h'))

258 && ((
ss
 >> 
row
) && (row == '3' ||„ow == '6')))

260 
¡
->
•Squ¬e
 = 
	`make_squ¬e
(
	`Fe
(
cŞ
 - 'a'), 
	`Rªk
(
row
 - '1'));

262 iàĞ!(
	`©ck”s_to
(
¡
->
•Squ¬e
è& 
	`p›ûs
(
sideToMove
, 
PAWN
))

263 || !(
	`p›ûs
(~
sideToMove
, 
PAWN
è& (
¡
->
•Squ¬e
 + 
	`·wn_push
(~sideToMove))))

264 
¡
->
•Squ¬e
 = 
SQ_NONE
;

267 
¡
->
•Squ¬e
 = 
SQ_NONE
;

270 
ss
 >> 
¡d
::
skws
 >> 
¡
->
ruË50
 >> 
gamePly
;

274 
gamePly
 = 
¡d
::
	`max
(2 * (gamePly - 1), 0è+ (
sideToMove
 =ğ
BLACK
);

276 
chess960
 = 
isChess960
;

277 
thisTh»ad
 = 
th
;

278 
	`£t_¡©e
(
¡
);

280 
	`as£¹
(
	`pos_is_ok
());

282  *
this
;

283 
	}
}

289 
	gPos™iÚ
::
	$£t_ÿ¡lšg_right
(
CŞÜ
 
c
, 
Squ¬e
 
räom
) {

291 
Squ¬e
 
käom
 = 
squ¬e
<
KING
>(
c
);

292 
Ca¡lšgSide
 
cs
 = 
käom
 < 
räom
 ? 
KING_SIDE
 : 
QUEEN_SIDE
;

293 
Ca¡lšgRight
 
ü
 = (
c
 | 
cs
);

295 
¡
->
ÿ¡lšgRights
 |ğ
ü
;

296 
ÿ¡lšgRightsMask
[
käom
] |ğ
ü
;

297 
ÿ¡lšgRightsMask
[
räom
] |ğ
ü
;

298 
ÿ¡lšgRookSqu¬e
[
ü
] = 
räom
;

300 
Squ¬e
 
kto
 = 
	`»Ïtive_squ¬e
(
c
, 
cs
 =ğ
KING_SIDE
 ? 
SQ_G1
 : 
SQ_C1
);

301 
Squ¬e
 
¹o
 = 
	`»Ïtive_squ¬e
(
c
, 
cs
 =ğ
KING_SIDE
 ? 
SQ_F1
 : 
SQ_D1
);

303 
Squ¬e
 
s
 = 
¡d
::
	`mš
(
räom
, 
¹o
); s <ğ¡d::
	`max
(rfrom,„to); ++s)

304 ià(
s
 !ğ
käom
 && s !ğ
räom
)

305 
ÿ¡lšgP©h
[
ü
] |ğ
s
;

307 
Squ¬e
 
s
 = 
¡d
::
	`mš
(
käom
, 
kto
); s <ğ¡d::
	`max
(kfrom, kto); ++s)

308 ià(
s
 !ğ
käom
 && s !ğ
räom
)

309 
ÿ¡lšgP©h
[
ü
] |ğ
s
;

310 
	}
}

315 
	gPos™iÚ
::
	$£t_check_šfo
(
S‹Info
* 
si
) const {

317 
si
->
block”sFÜKšg
[
WHITE
] = 
	`¦id”_block”s
(
	`p›ûs
(
BLACK
), 
squ¬e
<
KING
>(WHITE), si->
pšÃrsFÜKšg
[WHITE]);

318 
si
->
block”sFÜKšg
[
BLACK
] = 
	`¦id”_block”s
(
	`p›ûs
(
WHITE
), 
squ¬e
<
KING
>(BLACK), si->
pšÃrsFÜKšg
[BLACK]);

320 
Squ¬e
 
ksq
 = 
squ¬e
<
KING
>(~
sideToMove
);

322 
si
->
checkSqu¬es
[
PAWN
] = 
©cks_äom
<PAWN>(
ksq
, ~
sideToMove
);

323 
si
->
checkSqu¬es
[
KNIGHT
] = 
©cks_äom
<KNIGHT>(
ksq
);

324 
si
->
checkSqu¬es
[
BISHOP
] = 
©cks_äom
<BISHOP>(
ksq
);

325 
si
->
checkSqu¬es
[
ROOK
] = 
©cks_äom
<ROOK>(
ksq
);

326 
si
->
checkSqu¬es
[
QUEEN
] = si->checkSqu¬es[
BISHOP
] | si->checkSqu¬es[
ROOK
];

327 
si
->
checkSqu¬es
[
KING
] = 0;

328 
	}
}

336 
	gPos™iÚ
::
	$£t_¡©e
(
S‹Info
* 
si
) const {

338 
si
->
key
 = si->
m©”ŸlKey
 = 0;

339 
si
->
·wnKey
 = 
Zobri¡
::
noPawns
;

340 
si
->
nÚPawnM©”Ÿl
[
WHITE
] = si->nÚPawnM©”Ÿl[
BLACK
] = 
VALUE_ZERO
;

341 
si
->
psq
 = 
SCORE_ZERO
;

342 
si
->
check”sBB
 = 
	`©ck”s_to
(
squ¬e
<
KING
>(
sideToMove
)è& 
	`p›ûs
(~sideToMove);

344 
	`£t_check_šfo
(
si
);

346 
B™bßrd
 
b
 = 
	`p›ûs
(); b; )

348 
Squ¬e
 
s
 = 
	`pİ_lsb
(&
b
);

349 
P›û
 
pc
 = 
	`p›û_Ú
(
s
);

350 
si
->
key
 ^ğ
Zobri¡
::
psq
[
pc
][
s
];

351 
si
->
psq
 +ğ
PSQT
::psq[
pc
][
s
];

354 ià(
si
->
•Squ¬e
 !ğ
SQ_NONE
)

355 
si
->
key
 ^ğ
Zobri¡
::
’·s§Á
[
	`fe_of
(si->
•Squ¬e
)];

357 ià(
sideToMove
 =ğ
BLACK
)

358 
si
->
key
 ^ğ
Zobri¡
::
side
;

360 
si
->
key
 ^ğ
Zobri¡
::
ÿ¡lšg
[si->
ÿ¡lšgRights
];

362 
B™bßrd
 
b
 = 
	`p›ûs
(
PAWN
); b; )

364 
Squ¬e
 
s
 = 
	`pİ_lsb
(&
b
);

365 
si
->
·wnKey
 ^ğ
Zobri¡
::
psq
[
	`p›û_Ú
(
s
)][s];

368 
P›û
 
pc
 : 
P›ûs
)

370 ià(
	`ty³_of
(
pc
è!ğ
PAWN
 &&y³_ofÕcè!ğ
KING
)

371 
si
->
nÚPawnM©”Ÿl
[
	`cŞÜ_of
(
pc
)] +ğ
p›ûCouÁ
[pc] * 
P›ûV®ue
[
MG
][pc];

373 
út
 = 0; cÁ < 
p›ûCouÁ
[
pc
]; ++cnt)

374 
si
->
m©”ŸlKey
 ^ğ
Zobri¡
::
psq
[
pc
][
út
];

376 
	}
}

384 
	gPos™iÚ
& Pos™iÚ::
	$£t
(cÚ¡ 
¡ršg
& 
code
, 
CŞÜ
 
c
, 
S‹Info
* 
si
) {

386 
	`as£¹
(
code
.
	`Ëngth
() > 0 && code.length() < 8);

387 
	`as£¹
(
code
[0] == 'K');

389 
¡ršg
 
sides
[] = { 
code
.
	`sub¡r
(code.
	`fšd
('K', 1)),

390 
code
.
	`sub¡r
(0, code.
	`fšd
('K', 1)) };

392 
¡d
::
	`ŒªsfÜm
(
sides
[
c
].
	`begš
(), sides[c].
	`’d
(), sides[c].begš(), 
tŞow”
);

394 
¡ršg
 
ãnSŒ
 = 
sides
[0] + (8 - sides[0].
	`Ëngth
() + '0') + "/8/8/8/8/8/8/"

395 + 
sides
[1] + (8 - sides[1].
	`Ëngth
() + '0') + " w - - 0 10";

397  
	`£t
(
ãnSŒ
, 
çl£
, 
si
, 
nuÎ±r
);

398 
	}
}

404 cÚ¡ 
¡ršg
 
	gPos™iÚ
::
	$ãn
() const {

406 
em±yCÁ
;

407 
¡d
::
o¡ršg¡»am
 
ss
;

409 
Rªk
 
r
 = 
RANK_8
;„ >ğ
RANK_1
; --r)

411 
Fe
 
f
 = 
FILE_A
; f <ğ
FILE_H
; ++f)

413 
em±yCÁ
 = 0; 
f
 <ğ
FILE_H
 && 
	`em±y
(
	`make_squ¬e
(f, 
r
)); ++f)

414 ++
em±yCÁ
;

416 ià(
em±yCÁ
)

417 
ss
 << 
em±yCÁ
;

419 ià(
f
 <ğ
FILE_H
)

420 
ss
 << 
P›ûToCh¬
[
	`p›û_Ú
(
	`make_squ¬e
(
f
, 
r
))];

423 ià(
r
 > 
RANK_1
)

424 
ss
 << '/';

427 
ss
 << (
sideToMove
 =ğ
WHITE
 ? " w " : " b ");

429 ià(
	`ÿn_ÿ¡Ë
(
WHITE_OO
))

430 
ss
 << (
chess960
 ? ('A' + 
	`fe_of
(
	`ÿ¡lšg_rook_squ¬e
(
WHITE
 | 
KING_SIDE
))) : 'K');

432 ià(
	`ÿn_ÿ¡Ë
(
WHITE_OOO
))

433 
ss
 << (
chess960
 ? ('A' + 
	`fe_of
(
	`ÿ¡lšg_rook_squ¬e
(
WHITE
 | 
QUEEN_SIDE
))) : 'Q');

435 ià(
	`ÿn_ÿ¡Ë
(
BLACK_OO
))

436 
ss
 << (
chess960
 ? ('a' + 
	`fe_of
(
	`ÿ¡lšg_rook_squ¬e
(
BLACK
 | 
KING_SIDE
))) : 'k');

438 ià(
	`ÿn_ÿ¡Ë
(
BLACK_OOO
))

439 
ss
 << (
chess960
 ? ('a' + 
	`fe_of
(
	`ÿ¡lšg_rook_squ¬e
(
BLACK
 | 
QUEEN_SIDE
))) : 'q');

441 ià(!
	`ÿn_ÿ¡Ë
(
WHITE
è&& !ÿn_ÿ¡Ë(
BLACK
))

442 
ss
 << '-';

444 
ss
 << (
	`•_squ¬e
(è=ğ
SQ_NONE
 ? " - " : " " + 
UCI
::
	`squ¬e
(ep_square()) + " ")

445 << 
¡
->
ruË50
 << " " << 1 + (
gamePly
 - (
sideToMove
 =ğ
BLACK
)) / 2;

447  
ss
.
	`¡r
();

448 
	}
}

454 
Pha£
 
	gPos™iÚ
::
	$game_pha£
() const {

456 
V®ue
 
Åm
 = 
¡
->
nÚPawnM©”Ÿl
[
WHITE
] + st->nÚPawnM©”Ÿl[
BLACK
];

458 
Åm
 = 
¡d
::
	`max
(
EndgameLim™
, std::
	`mš
Òpm, 
MidgameLim™
));

460  
	`Pha£
(((
Åm
 - 
EndgameLim™
è* 
PHASE_MIDGAME
è/ (
MidgameLim™
 - EndgameLimit));

461 
	}
}

471 
B™bßrd
 
	gPos™iÚ
::
	$¦id”_block”s
(
B™bßrd
 
¦id”s
, 
Squ¬e
 
s
, B™bßrd& 
pšÃrs
) const {

473 
B™bßrd
 
»suÉ
 = 0;

474 
pšÃrs
 = 0;

477 
B™bßrd
 
¢”s
 = ( (
P£udoA‰acks
[
ROOK
 ][
s
] & 
	`p›ûs
(
QUEEN
, ROOK))

478 | (
P£udoA‰acks
[
BISHOP
][
s
] & 
	`p›ûs
(
QUEEN
, BISHOP))è& 
¦id”s
;

480 
¢”s
)

482 
Squ¬e
 
¢”Sq
 = 
	`pİ_lsb
(&
¢”s
);

483 
B™bßrd
 
b
 = 
	`b‘w“n_bb
(
s
, 
¢”Sq
è& 
	`p›ûs
();

485 ià(!
	`mÜe_thª_Úe
(
b
))

487 
»suÉ
 |ğ
b
;

488 ià(
b
 & 
	`p›ûs
(
	`cŞÜ_of
(
	`p›û_Ú
(
s
))))

489 
pšÃrs
 |ğ
¢”Sq
;

492  
»suÉ
;

493 
	}
}

499 
B™bßrd
 
	gPos™iÚ
::
	$©ck”s_to
(
Squ¬e
 
s
, 
B™bßrd
 
occup›d
) const {

501  (
©cks_äom
<
PAWN
>(
s
, 
BLACK
è& 
	`p›ûs
(
WHITE
, PAWN))

502 | (
©cks_äom
<
PAWN
>(
s
, 
WHITE
è& 
	`p›ûs
(
BLACK
, PAWN))

503 | (
©cks_äom
<
KNIGHT
>(
s
è& 
	`p›ûs
(KNIGHT))

504 | (
©cks_bb
<
ROOK
 >(
s
, 
occup›d
è& 
	`p›ûs
(ROOK, 
QUEEN
))

505 | (
©cks_bb
<
BISHOP
>(
s
, 
occup›d
è& 
	`p›ûs
(BISHOP, 
QUEEN
))

506 | (
©cks_äom
<
KING
>(
s
è& 
	`p›ûs
(KING));

507 
	}
}

512 
boŞ
 
	gPos™iÚ
::
	$Ëg®
(
Move
 
m
) const {

514 
	`as£¹
(
	`is_ok
(
m
));

516 
CŞÜ
 
us
 = 
sideToMove
;

517 
Squ¬e
 
äom
 = 
	`äom_sq
(
m
);

519 
	`as£¹
(
	`cŞÜ_of
(
	`moved_p›û
(
m
)è=ğ
us
);

520 
	`as£¹
(
	`p›û_Ú
(
squ¬e
<
KING
>(
us
)è=ğ
	`make_p›û
(us, KING));

525 ià(
	`ty³_of
(
m
è=ğ
ENPASSANT
)

527 
Squ¬e
 
ksq
 = 
squ¬e
<
KING
>(
us
);

528 
Squ¬e
 
to
 = 
	`to_sq
(
m
);

529 
Squ¬e
 
ÿpsq
 = 
to
 - 
	`·wn_push
(
us
);

530 
B™bßrd
 
occup›d
 = (
	`p›ûs
(è^ 
äom
 ^ 
ÿpsq
è| 
to
;

532 
	`as£¹
(
to
 =ğ
	`•_squ¬e
());

533 
	`as£¹
(
	`moved_p›û
(
m
è=ğ
	`make_p›û
(
us
, 
PAWN
));

534 
	`as£¹
(
	`p›û_Ú
(
ÿpsq
è=ğ
	`make_p›û
(~
us
, 
PAWN
));

535 
	`as£¹
(
	`p›û_Ú
(
to
è=ğ
NO_PIECE
);

537  !(
©cks_bb
< 
ROOK
>(
ksq
, 
occup›d
è& 
	`p›ûs
(~
us
, 
QUEEN
, ROOK))

538 && !(
©cks_bb
<
BISHOP
>(
ksq
, 
occup›d
è& 
	`p›ûs
(~
us
, 
QUEEN
, BISHOP));

544 ià(
	`ty³_of
(
	`p›û_Ú
(
äom
)è=ğ
KING
)

545  
	`ty³_of
(
m
è=ğ
CASTLING
 || !(
	`©ck”s_to
(
	`to_sq
(m)è& 
	`p›ûs
(~
us
));

549  !(
	`pšÃd_p›ûs
(
us
è& 
äom
)

550 || 
	`®igÃd
(
äom
, 
	`to_sq
(
m
), 
squ¬e
<
KING
>(
us
));

551 
	}
}

558 
boŞ
 
	gPos™iÚ
::
	$p£udo_Ëg®
(cÚ¡ 
Move
 
m
) const {

560 
CŞÜ
 
us
 = 
sideToMove
;

561 
Squ¬e
 
äom
 = 
	`äom_sq
(
m
);

562 
Squ¬e
 
to
 = 
	`to_sq
(
m
);

563 
P›û
 
pc
 = 
	`moved_p›û
(
m
);

566 ià(
	`ty³_of
(
m
è!ğ
NORMAL
)

567  
MoveLi¡
<
LEGAL
>(*
this
).
	`cÚšs
(
m
);

570 ià(
	`´omÙiÚ_ty³
(
m
è- 
KNIGHT
 !ğ
NO_PIECE_TYPE
)

571  
çl£
;

575 ià(
pc
 =ğ
NO_PIECE
 || 
	`cŞÜ_of
Õcè!ğ
us
)

576  
çl£
;

579 ià(
	`p›ûs
(
us
è& 
to
)

580  
çl£
;

583 ià(
	`ty³_of
(
pc
è=ğ
PAWN
)

587 ià(
	`¿nk_of
(
to
è=ğ
	`»Ïtive_¿nk
(
us
, 
RANK_8
))

588  
çl£
;

590 iàĞ!(
©cks_äom
<
PAWN
>(
äom
, 
us
è& 
	`p›ûs
(~usè& 
to
)

591 && !((
äom
 + 
	`·wn_push
(
us
è=ğ
to
è&& 
	`em±y
(to))

592 && !Ğ(
äom
 + 2 * 
	`·wn_push
(
us
è=ğ
to
)

593 && (
	`¿nk_of
(
äom
è=ğ
	`»Ïtive_¿nk
(
us
, 
RANK_2
))

594 && 
	`em±y
(
to
)

595 && 
	`em±y
(
to
 - 
	`·wn_push
(
us
))))

596  
çl£
;

598 ià(!(
	`©cks_äom
(
	`ty³_of
(
pc
), 
äom
è& 
to
))

599  
çl£
;

604 ià(
	`check”s
())

606 ià(
	`ty³_of
(
pc
è!ğ
KING
)

609 ià(
	`mÜe_thª_Úe
(
	`check”s
()))

610  
çl£
;

613 ià(!((
	`b‘w“n_bb
(
	`lsb
(
	`check”s
()), 
squ¬e
<
KING
>(
us
)è| check”s()è& 
to
))

614  
çl£
;

618 ià(
	`©ck”s_to
(
to
, 
	`p›ûs
(è^ 
äom
è&…›ûs(~
us
))

619  
çl£
;

622  
Œue
;

623 
	}
}

628 
boŞ
 
	gPos™iÚ
::
	$gives_check
(
Move
 
m
) const {

630 
	`as£¹
(
	`is_ok
(
m
));

631 
	`as£¹
(
	`cŞÜ_of
(
	`moved_p›û
(
m
)è=ğ
sideToMove
);

633 
Squ¬e
 
äom
 = 
	`äom_sq
(
m
);

634 
Squ¬e
 
to
 = 
	`to_sq
(
m
);

637 ià(
¡
->
checkSqu¬es
[
	`ty³_of
(
	`p›û_Ú
(
äom
))] & 
to
)

638  
Œue
;

641 iàĞ(
	`discov”ed_check_ÿndid©es
(è& 
äom
)

642 && !
	`®igÃd
(
äom
, 
to
, 
squ¬e
<
KING
>(~
sideToMove
)))

643  
Œue
;

645 
	`ty³_of
(
m
))

647 
NORMAL
:

648  
çl£
;

650 
PROMOTION
:

651  
	`©cks_bb
(
	`´omÙiÚ_ty³
(
m
), 
to
, 
	`p›ûs
(è^ 
äom
è& 
squ¬e
<
KING
>(~
sideToMove
);

657 
ENPASSANT
:

659 
Squ¬e
 
ÿpsq
 = 
	`make_squ¬e
(
	`fe_of
(
to
), 
	`¿nk_of
(
äom
));

660 
B™bßrd
 
b
 = (
	`p›ûs
(è^ 
äom
 ^ 
ÿpsq
è| 
to
;

662  (
©cks_bb
< 
ROOK
>(
squ¬e
<
KING
>(~
sideToMove
), 
b
è& 
	`p›ûs
(sideToMove, 
QUEEN
, ROOK))

663 | (
©cks_bb
<
BISHOP
>(
squ¬e
<
KING
>(~
sideToMove
), 
b
è& 
	`p›ûs
(sideToMove, 
QUEEN
, BISHOP));

665 
CASTLING
:

667 
Squ¬e
 
käom
 = 
äom
;

668 
Squ¬e
 
räom
 = 
to
;

669 
Squ¬e
 
kto
 = 
	`»Ïtive_squ¬e
(
sideToMove
, 
räom
 > 
käom
 ? 
SQ_G1
 : 
SQ_C1
);

670 
Squ¬e
 
¹o
 = 
	`»Ïtive_squ¬e
(
sideToMove
, 
räom
 > 
käom
 ? 
SQ_F1
 : 
SQ_D1
);

672  (
P£udoA‰acks
[
ROOK
][
¹o
] & 
squ¬e
<
KING
>(~
sideToMove
))

673 && (
©cks_bb
<
ROOK
>(
¹o
, (
	`p›ûs
(è^ 
käom
 ^ 
räom
è|„tØ| 
kto
è& 
squ¬e
<
KING
>(~
sideToMove
));

676 
	`as£¹
(
çl£
);

677  
çl£
;

679 
	}
}

686 
	gPos™iÚ
::
	$do_move
(
Move
 
m
, 
S‹Info
& 
ÃwSt
, 
boŞ
 
givesCheck
) {

688 
	`as£¹
(
	`is_ok
(
m
));

689 
	`as£¹
(&
ÃwSt
 !ğ
¡
);

691 ++
nodes
;

692 
Key
 
k
 = 
¡
->
key
 ^ 
Zobri¡
::
side
;

697 
¡d
::
	`memıy
(&
ÃwSt
, 
¡
, 
	`off£tof
(
S‹Info
, 
key
));

698 
ÃwSt
.
´evious
 = 
¡
;

699 
¡
 = &
ÃwSt
;

703 ++
gamePly
;

704 ++
¡
->
ruË50
;

705 ++
¡
->
¶›sFromNuÎ
;

707 
CŞÜ
 
us
 = 
sideToMove
;

708 
CŞÜ
 
them
 = ~
us
;

709 
Squ¬e
 
äom
 = 
	`äom_sq
(
m
);

710 
Squ¬e
 
to
 = 
	`to_sq
(
m
);

711 
P›û
 
pc
 = 
	`p›û_Ú
(
äom
);

712 
P›û
 
ÿ±u»d
 = 
	`ty³_of
(
m
è=ğ
ENPASSANT
 ? 
	`make_p›û
(
them
, 
PAWN
è: 
	`p›û_Ú
(
to
);

714 
	`as£¹
(
	`cŞÜ_of
(
pc
è=ğ
us
);

715 
	`as£¹
(
ÿ±u»d
 =ğ
NO_PIECE
 || 
	`cŞÜ_of
(ÿ±u»dè=ğ(
	`ty³_of
(
m
è!ğ
CASTLING
 ? 
them
 : 
us
));

716 
	`as£¹
(
	`ty³_of
(
ÿ±u»d
è!ğ
KING
);

718 ià(
	`ty³_of
(
m
è=ğ
CASTLING
)

720 
	`as£¹
(
pc
 =ğ
	`make_p›û
(
us
, 
KING
));

721 
	`as£¹
(
ÿ±u»d
 =ğ
	`make_p›û
(
us
, 
ROOK
));

723 
Squ¬e
 
räom
, 
¹o
;

724 
do_ÿ¡lšg
<
Œue
>(
us
, 
äom
, 
to
, 
räom
, 
¹o
);

726 
¡
->
psq
 +ğ
PSQT
::psq[
ÿ±u»d
][
¹o
] - PSQT::psq[ÿ±u»d][
räom
];

727 
k
 ^ğ
Zobri¡
::
psq
[
ÿ±u»d
][
räom
] ^ Zobri¡::psq[ÿ±u»d][
¹o
];

728 
ÿ±u»d
 = 
NO_PIECE
;

731 ià(
ÿ±u»d
)

733 
Squ¬e
 
ÿpsq
 = 
to
;

737 ià(
	`ty³_of
(
ÿ±u»d
è=ğ
PAWN
)

739 ià(
	`ty³_of
(
m
è=ğ
ENPASSANT
)

741 
ÿpsq
 -ğ
	`·wn_push
(
us
);

743 
	`as£¹
(
pc
 =ğ
	`make_p›û
(
us
, 
PAWN
));

744 
	`as£¹
(
to
 =ğ
¡
->
•Squ¬e
);

745 
	`as£¹
(
	`»Ïtive_¿nk
(
us
, 
to
è=ğ
RANK_6
);

746 
	`as£¹
(
	`p›û_Ú
(
to
è=ğ
NO_PIECE
);

747 
	`as£¹
(
	`p›û_Ú
(
ÿpsq
è=ğ
	`make_p›û
(
them
, 
PAWN
));

749 
bßrd
[
ÿpsq
] = 
NO_PIECE
;

752 
¡
->
·wnKey
 ^ğ
Zobri¡
::
psq
[
ÿ±u»d
][
ÿpsq
];

755 
¡
->
nÚPawnM©”Ÿl
[
them
] -ğ
P›ûV®ue
[
MG
][
ÿ±u»d
];

758 
	`»move_p›û
(
ÿ±u»d
, 
ÿpsq
);

761 
k
 ^ğ
Zobri¡
::
psq
[
ÿ±u»d
][
ÿpsq
];

762 
¡
->
m©”ŸlKey
 ^ğ
Zobri¡
::
psq
[
ÿ±u»d
][
p›ûCouÁ
[captured]];

763 
	`´eãtch
(
thisTh»ad
->
m©”ŸlTabË
[
¡
->
m©”ŸlKey
]);

766 
¡
->
psq
 -ğ
PSQT
::psq[
ÿ±u»d
][
ÿpsq
];

769 
¡
->
ruË50
 = 0;

773 
k
 ^ğ
Zobri¡
::
psq
[
pc
][
äom
] ^ Zobri¡::psq[pc][
to
];

776 ià(
¡
->
•Squ¬e
 !ğ
SQ_NONE
)

778 
k
 ^ğ
Zobri¡
::
’·s§Á
[
	`fe_of
(
¡
->
•Squ¬e
)];

779 
¡
->
•Squ¬e
 = 
SQ_NONE
;

783 ià(
¡
->
ÿ¡lšgRights
 && (
ÿ¡lšgRightsMask
[
äom
] | ca¡lšgRightsMask[
to
]))

785 
ü
 = 
ÿ¡lšgRightsMask
[
äom
] | ca¡lšgRightsMask[
to
];

786 
k
 ^ğ
Zobri¡
::
ÿ¡lšg
[
¡
->
ÿ¡lšgRights
 & 
ü
];

787 
¡
->
ÿ¡lšgRights
 &ğ~
ü
;

791 ià(
	`ty³_of
(
m
è!ğ
CASTLING
)

792 
	`move_p›û
(
pc
, 
äom
, 
to
);

795 ià(
	`ty³_of
(
pc
è=ğ
PAWN
)

798 iàĞ((
to
è^ (
äom
)) == 16

799 && (
©cks_äom
<
PAWN
>(
to
 - 
	`·wn_push
(
us
), usè& 
	`p›ûs
(
them
, PAWN)))

801 
¡
->
•Squ¬e
 = (
äom
 + 
to
) / 2;

802 
k
 ^ğ
Zobri¡
::
’·s§Á
[
	`fe_of
(
¡
->
•Squ¬e
)];

805 ià(
	`ty³_of
(
m
è=ğ
PROMOTION
)

807 
P›û
 
´omÙiÚ
 = 
	`make_p›û
(
us
, 
	`´omÙiÚ_ty³
(
m
));

809 
	`as£¹
(
	`»Ïtive_¿nk
(
us
, 
to
è=ğ
RANK_8
);

810 
	`as£¹
(
	`ty³_of
(
´omÙiÚ
è>ğ
KNIGHT
 &&y³_ofÕromÙiÚè<ğ
QUEEN
);

812 
	`»move_p›û
(
pc
, 
to
);

813 
	`put_p›û
(
´omÙiÚ
, 
to
);

816 
k
 ^ğ
Zobri¡
::
psq
[
pc
][
to
] ^ Zobri¡::psq[
´omÙiÚ
][to];

817 
¡
->
·wnKey
 ^ğ
Zobri¡
::
psq
[
pc
][
to
];

818 
¡
->
m©”ŸlKey
 ^ğ
Zobri¡
::
psq
[
´omÙiÚ
][
p›ûCouÁ
[promotion]-1]

819 ^ 
Zobri¡
::
psq
[
pc
][
p›ûCouÁ
[pc]];

822 
¡
->
psq
 +ğ
PSQT
::psq[
´omÙiÚ
][
to
] - PSQT::psq[
pc
][to];

825 
¡
->
nÚPawnM©”Ÿl
[
us
] +ğ
P›ûV®ue
[
MG
][
´omÙiÚ
];

829 
¡
->
·wnKey
 ^ğ
Zobri¡
::
psq
[
pc
][
äom
] ^ Zobri¡::psq[pc][
to
];

830 
	`´eãtch2
(
thisTh»ad
->
·wnsTabË
[
¡
->
·wnKey
]);

833 
¡
->
ruË50
 = 0;

837 
¡
->
psq
 +ğ
PSQT
::psq[
pc
][
to
] - PSQT::psq[pc][
äom
];

840 
¡
->
ÿ±u»dP›û
 = 
ÿ±u»d
;

843 
¡
->
key
 = 
k
;

846 
¡
->
check”sBB
 = 
givesCheck
 ? 
	`©ck”s_to
(
squ¬e
<
KING
>(
them
)è& 
	`p›ûs
(
us
) : 0;

848 
sideToMove
 = ~sideToMove;

851 
	`£t_check_šfo
(
¡
);

853 
	`as£¹
(
	`pos_is_ok
());

854 
	}
}

860 
	gPos™iÚ
::
	$undo_move
(
Move
 
m
) {

862 
	`as£¹
(
	`is_ok
(
m
));

864 
sideToMove
 = ~sideToMove;

866 
CŞÜ
 
us
 = 
sideToMove
;

867 
Squ¬e
 
äom
 = 
	`äom_sq
(
m
);

868 
Squ¬e
 
to
 = 
	`to_sq
(
m
);

869 
P›û
 
pc
 = 
	`p›û_Ú
(
to
);

871 
	`as£¹
(
	`em±y
(
äom
è|| 
	`ty³_of
(
m
è=ğ
CASTLING
);

872 
	`as£¹
(
	`ty³_of
(
¡
->
ÿ±u»dP›û
è!ğ
KING
);

874 ià(
	`ty³_of
(
m
è=ğ
PROMOTION
)

876 
	`as£¹
(
	`»Ïtive_¿nk
(
us
, 
to
è=ğ
RANK_8
);

877 
	`as£¹
(
	`ty³_of
(
pc
è=ğ
	`´omÙiÚ_ty³
(
m
));

878 
	`as£¹
(
	`ty³_of
(
pc
è>ğ
KNIGHT
 &&y³_ofÕcè<ğ
QUEEN
);

880 
	`»move_p›û
(
pc
, 
to
);

881 
pc
 = 
	`make_p›û
(
us
, 
PAWN
);

882 
	`put_p›û
(
pc
, 
to
);

885 ià(
	`ty³_of
(
m
è=ğ
CASTLING
)

887 
Squ¬e
 
räom
, 
¹o
;

888 
do_ÿ¡lšg
<
çl£
>(
us
, 
äom
, 
to
, 
räom
, 
¹o
);

892 
	`move_p›û
(
pc
, 
to
, 
äom
);

894 ià(
¡
->
ÿ±u»dP›û
)

896 
Squ¬e
 
ÿpsq
 = 
to
;

898 ià(
	`ty³_of
(
m
è=ğ
ENPASSANT
)

900 
ÿpsq
 -ğ
	`·wn_push
(
us
);

902 
	`as£¹
(
	`ty³_of
(
pc
è=ğ
PAWN
);

903 
	`as£¹
(
to
 =ğ
¡
->
´evious
->
•Squ¬e
);

904 
	`as£¹
(
	`»Ïtive_¿nk
(
us
, 
to
è=ğ
RANK_6
);

905 
	`as£¹
(
	`p›û_Ú
(
ÿpsq
è=ğ
NO_PIECE
);

906 
	`as£¹
(
¡
->
ÿ±u»dP›û
 =ğ
	`make_p›û
(~
us
, 
PAWN
));

909 
	`put_p›û
(
¡
->
ÿ±u»dP›û
, 
ÿpsq
);

914 
¡
 = st->
´evious
;

915 --
gamePly
;

917 
	`as£¹
(
	`pos_is_ok
());

918 
	}
}

923 
	g‹m¶©e
<
boŞ
 
	gDo
>

924 
	gPos™iÚ
::
	$do_ÿ¡lšg
(
CŞÜ
 
us
, 
Squ¬e
 
äom
, Squ¬e& 
to
, Squ¬e& 
räom
, Squ¬e& 
¹o
) {

926 
boŞ
 
kšgSide
 = 
to
 > 
äom
;

927 
räom
 = 
to
;

928 
¹o
 = 
	`»Ïtive_squ¬e
(
us
, 
kšgSide
 ? 
SQ_F1
 : 
SQ_D1
);

929 
to
 = 
	`»Ïtive_squ¬e
(
us
, 
kšgSide
 ? 
SQ_G1
 : 
SQ_C1
);

932 
	`»move_p›û
(
	`make_p›û
(
us
, 
KING
), 
Do
 ? 
äom
 : 
to
);

933 
	`»move_p›û
(
	`make_p›û
(
us
, 
ROOK
), 
Do
 ? 
räom
 : 
¹o
);

934 
bßrd
[
Do
 ? 
äom
 : 
to
] = bßrd[DØ? 
räom
 : 
¹o
] = 
NO_PIECE
;

935 
	`put_p›û
(
	`make_p›û
(
us
, 
KING
), 
Do
 ? 
to
 : 
äom
);

936 
	`put_p›û
(
	`make_p›û
(
us
, 
ROOK
), 
Do
 ? 
¹o
 : 
räom
);

937 
	}
}

943 
	gPos™iÚ
::
	$do_nuÎ_move
(
S‹Info
& 
ÃwSt
) {

945 
	`as£¹
(!
	`check”s
());

946 
	`as£¹
(&
ÃwSt
 !ğ
¡
);

948 
¡d
::
	`memıy
(&
ÃwSt
, 
¡
, (
S‹Info
));

949 
ÃwSt
.
´evious
 = 
¡
;

950 
¡
 = &
ÃwSt
;

952 ià(
¡
->
•Squ¬e
 !ğ
SQ_NONE
)

954 
¡
->
key
 ^ğ
Zobri¡
::
’·s§Á
[
	`fe_of
(¡->
•Squ¬e
)];

955 
¡
->
•Squ¬e
 = 
SQ_NONE
;

958 
¡
->
key
 ^ğ
Zobri¡
::
side
;

959 
	`´eãtch
(
TT
.
	`fœ¡_’Œy
(
¡
->
key
));

961 ++
¡
->
ruË50
;

962 
¡
->
¶›sFromNuÎ
 = 0;

964 
sideToMove
 = ~sideToMove;

966 
	`£t_check_šfo
(
¡
);

968 
	`as£¹
(
	`pos_is_ok
());

969 
	}
}

971 
	gPos™iÚ
::
	$undo_nuÎ_move
() {

973 
	`as£¹
(!
	`check”s
());

975 
¡
 = st->
´evious
;

976 
sideToMove
 = ~sideToMove;

977 
	}
}

984 
Key
 
	gPos™iÚ
::
	$key_aá”
(
Move
 
m
) const {

986 
Squ¬e
 
äom
 = 
	`äom_sq
(
m
);

987 
Squ¬e
 
to
 = 
	`to_sq
(
m
);

988 
P›û
 
pc
 = 
	`p›û_Ú
(
äom
);

989 
P›û
 
ÿ±u»d
 = 
	`p›û_Ú
(
to
);

990 
Key
 
k
 = 
¡
->
key
 ^ 
Zobri¡
::
side
;

992 ià(
ÿ±u»d
)

993 
k
 ^ğ
Zobri¡
::
psq
[
ÿ±u»d
][
to
];

995  
k
 ^ 
Zobri¡
::
psq
[
pc
][
to
] ^ Zobri¡::psq[pc][
äom
];

996 
	}
}

1003 
boŞ
 
	gPos™iÚ
::
	$£e_ge
(
Move
 
m
, 
V®ue
 
v
) const {

1005 
	`as£¹
(
	`is_ok
(
m
));

1010 ià(
	`ty³_of
(
m
è=ğ
CASTLING
)

1011  
VALUE_ZERO
 >ğ
v
;

1013 
Squ¬e
 
äom
 = 
	`äom_sq
(
m
), 
to
 = 
	`to_sq
(m);

1014 
P›ûTy³
 
ÃxtViùim
 = 
	`ty³_of
(
	`p›û_Ú
(
äom
));

1015 
CŞÜ
 
¡m
 = ~
	`cŞÜ_of
(
	`p›û_Ú
(
äom
));

1016 
V®ue
 
b®ªû
;

1017 
B™bßrd
 
occup›d
, 
¡mA‰ack”s
;

1019 ià(
	`ty³_of
(
m
è=ğ
ENPASSANT
)

1021 
occup›d
 = 
Squ¬eBB
[
to
 - 
	`·wn_push
(~
¡m
)];

1022 
b®ªû
 = 
P›ûV®ue
[
MG
][
PAWN
];

1026 
b®ªû
 = 
P›ûV®ue
[
MG
][
	`p›û_Ú
(
to
)];

1027 
occup›d
 = 0;

1030 ià(
b®ªû
 < 
v
)

1031  
çl£
;

1033 ià(
ÃxtViùim
 =ğ
KING
)

1034  
Œue
;

1036 
b®ªû
 -ğ
P›ûV®ue
[
MG
][
ÃxtViùim
];

1038 ià(
b®ªû
 >ğ
v
)

1039  
Œue
;

1041 
boŞ
 
»ÏtiveStm
 = 
Œue
;

1042 
occup›d
 ^ğ
	`p›ûs
(è^ 
äom
 ^ 
to
;

1046 
B™bßrd
 
©ck”s
 = 
	`©ck”s_to
(
to
, 
occup›d
) & occupied;

1048 
Œue
)

1050 
¡mA‰ack”s
 = 
©ck”s
 & 
	`p›ûs
(
¡m
);

1054 ià(!(
¡
->
pšÃrsFÜKšg
[
¡m
] & ~
occup›d
))

1055 
¡mA‰ack”s
 &ğ~
¡
->
block”sFÜKšg
[
¡m
];

1057 ià(!
¡mA‰ack”s
)

1058  
»ÏtiveStm
;

1061 
ÃxtViùim
 = 
mš_©ck”
<
PAWN
>(
byTy³BB
, 
to
, 
¡mA‰ack”s
, 
occup›d
, 
©ck”s
);

1063 ià(
ÃxtViùim
 =ğ
KING
)

1064  
»ÏtiveStm
 =ğ
	`boŞ
(
©ck”s
 & 
	`p›ûs
(~
¡m
));

1066 
b®ªû
 +ğ
»ÏtiveStm
 ? 
P›ûV®ue
[
MG
][
ÃxtViùim
]

1067 : -
P›ûV®ue
[
MG
][
ÃxtViùim
];

1069 
»ÏtiveStm
 = !relativeStm;

1071 ià(
»ÏtiveStm
 =ğ(
b®ªû
 >ğ
v
))

1072  
»ÏtiveStm
;

1074 
¡m
 = ~stm;

1076 
	}
}

1082 
boŞ
 
	gPos™iÚ
::
	$is_d¿w
(
¶y
) const {

1084 ià(
¡
->
ruË50
 > 99 && (!
	`check”s
(è|| 
MoveLi¡
<
LEGAL
>(*
this
).
	`size
()))

1085  
Œue
;

1087 
’d
 = 
¡d
::
	`mš
(
¡
->
ruË50
, st->
¶›sFromNuÎ
);

1089 ià(
’d
 < 4)

1090  
çl£
;

1092 
S‹Info
* 
¡p
 = 
¡
->
´evious
->previous;

1093 
út
 = 0;

1095 
i
 = 4; i <ğ
’d
; i += 2)

1097 
¡p
 = s->
´evious
->previous;

1102 iàĞ
¡p
->
key
 =ğ
¡
->key

1103 && ++
út
 + (
¶y
 - 
i
 > 0) == 2)

1104  
Œue
;

1107  
çl£
;

1108 
	}
}

1114 
	gPos™iÚ
::
	$æ
() {

1116 
¡ršg
 
f
, 
tok’
;

1117 
¡d
::
¡ršg¡»am
 
	`ss
(
	`ãn
());

1119 
Rªk
 
r
 = 
RANK_8
;„ >ğ
RANK_1
; --r)

1121 
¡d
::
	`g‘lše
(
ss
, 
tok’
, 
r
 > 
RANK_1
 ? '/' : ' ');

1122 
f
.
	`š£¹
(0, 
tok’
 + (f.
	`em±y
() ? " " : "/"));

1125 
ss
 >> 
tok’
;

1126 
f
 +ğ(
tok’
 == "w" ? "B " : "W ");

1128 
ss
 >> 
tok’
;

1129 
f
 +ğ
tok’
 + " ";

1131 
¡d
::
	`ŒªsfÜm
(
f
.
	`begš
(), f.
	`’d
(), f.begin(),

1132 [](
c
è{  (
	`i¦ow”
(cè? 
	`touµ”
(cè: 
	`tŞow”
(c)); });

1134 
ss
 >> 
tok’
;

1135 
f
 +ğ(
tok’
 =ğ"-" ?ok’ :ok’.
	`»¶aû
(1, 1,oken[1] == '3' ? "6" : "3"));

1137 
¡d
::
	`g‘lše
(
ss
, 
tok’
);

1138 
f
 +ğ
tok’
;

1140 
	`£t
(
f
, 
	`is_chess960
(), 
¡
, 
	`this_th»ad
());

1142 
	`as£¹
(
	`pos_is_ok
());

1143 
	}
}

1149 
boŞ
 
	gPos™iÚ
::
	$pos_is_ok
(* 
çedS‹p
) const {

1151 cÚ¡ 
boŞ
 
Fa¡
 = 
Œue
;

1153 ’um { 
DeçuÉ
, 
Kšg
, 
B™bßrds
, 
S‹
, 
Li¡s
, 
Ca¡lšg
 };

1155 
¡•
 = 
DeçuÉ
; s‹°<ğ(
Fa¡
 ? DeçuÉ : 
Ca¡lšg
); step++)

1157 ià(
çedS‹p
)

1158 *
çedS‹p
 = 
¡•
;

1160 ià(
¡•
 =ğ
DeçuÉ
)

1161 iàĞ(
sideToMove
 !ğ
WHITE
 && sideToMov!ğ
BLACK
)

1162 || 
	`p›û_Ú
(
squ¬e
<
KING
>(
WHITE
)è!ğ
W_KING


1163 || 
	`p›û_Ú
(
squ¬e
<
KING
>(
BLACK
)è!ğ
B_KING


1164 || ( 
	`•_squ¬e
(è!ğ
SQ_NONE


1165 && 
	`»Ïtive_¿nk
(
sideToMove
, 
	`•_squ¬e
()è!ğ
RANK_6
))

1166  
çl£
;

1168 ià(
¡•
 =ğ
Kšg
)

1169 iàĞ
¡d
::
	`couÁ
(
bßrd
, bßrd + 
SQUARE_NB
, 
W_KING
) != 1

1170 || 
¡d
::
	`couÁ
(
bßrd
, bßrd + 
SQUARE_NB
, 
B_KING
) != 1

1171 || 
	`©ck”s_to
(
squ¬e
<
KING
>(~
sideToMove
)è& 
	`p›ûs
(sideToMove))

1172  
çl£
;

1174 ià(
¡•
 =ğ
B™bßrds
)

1176 iàĞ(
	`p›ûs
(
WHITE
è&…›ûs(
BLACK
))

1177 ||(
	`p›ûs
(
WHITE
è|…›ûs(
BLACK
)) !=…ieces())

1178  
çl£
;

1180 
P›ûTy³
 
p1
 = 
PAWN
;…1 <ğ
KING
; ++p1)

1181 
P›ûTy³
 
p2
 = 
PAWN
;…2 <ğ
KING
; ++p2)

1182 ià(
p1
 !ğ
p2
 && (
	`p›ûs
(p1) &…ieces(p2)))

1183  
çl£
;

1186 ià(
¡•
 =ğ
S‹
)

1188 
S‹Info
 
si
 = *
¡
;

1189 
	`£t_¡©e
(&
si
);

1190 ià(
¡d
::
	`memcmp
(&
si
, 
¡
, (
S‹Info
)))

1191  
çl£
;

1194 ià(
¡•
 =ğ
Li¡s
)

1195 
P›û
 
pc
 : 
P›ûs
)

1197 ià(
p›ûCouÁ
[
pc
] !ğ
	`pİcouÁ
(
	`p›ûs
(
	`cŞÜ_of
Õc), 
	`ty³_of
(pc))))

1198  
çl£
;

1200 
i
 = 0; i < 
p›ûCouÁ
[
pc
]; ++i)

1201 ià(
bßrd
[
p›ûLi¡
[
pc
][
i
]] !ğpø|| 
šdex
[pieceList[pc][i]] != i)

1202  
çl£
;

1205 ià(
¡•
 =ğ
Ca¡lšg
)

1206 
CŞÜ
 
c
 = 
WHITE
; c <ğ
BLACK
; ++c)

1207 
Ca¡lšgSide
 
s
 = 
KING_SIDE
; s <ğ
QUEEN_SIDE
; s = 
	`Ca¡lšgSide
(s + 1))

1209 ià(!
	`ÿn_ÿ¡Ë
(
c
 | 
s
))

1212 iàĞ
	`p›û_Ú
(
ÿ¡lšgRookSqu¬e
[
c
 | 
s
]è!ğ
	`make_p›û
(c, 
ROOK
)

1213 || 
ÿ¡lšgRightsMask
[
ÿ¡lšgRookSqu¬e
[
c
 | 
s
]] != (c | s)

1214 ||(
ÿ¡lšgRightsMask
[
squ¬e
<
KING
>(
c
)] & (ø| 
s
)) != (c | s))

1215  
çl£
;

1219  
Œue
;

1220 
	}
}

	@position.h

21 #iâdeà
POSITION_H_INCLUDED


22 
	#POSITION_H_INCLUDED


	)

24 
	~<ÿs£¹
>

25 
	~<deque
>

26 
	~<memÜy
>

27 
	~<¡ršg
>

29 
	~"b™bßrd.h
"

30 
	~"ty³s.h
"

37 
	sS‹Info
 {

40 
Key
 
	m·wnKey
;

41 
Key
 
	mm©”ŸlKey
;

42 
V®ue
 
	mnÚPawnM©”Ÿl
[
COLOR_NB
];

43 
	mÿ¡lšgRights
;

44 
	mruË50
;

45 
	m¶›sFromNuÎ
;

46 
ScÜe
 
	mpsq
;

47 
Squ¬e
 
	m•Squ¬e
;

50 
Key
 
	mkey
;

51 
B™bßrd
 
	mcheck”sBB
;

52 
P›û
 
	mÿ±u»dP›û
;

53 
S‹Info
* 
	m´evious
;

54 
B™bßrd
 
	mblock”sFÜKšg
[
COLOR_NB
];

55 
B™bßrd
 
	mpšÃrsFÜKšg
[
COLOR_NB
];

56 
B™bßrd
 
	mcheckSqu¬es
[
PIECE_TYPE_NB
];

60 
	g¡d
::
	tunique_±r
<
	t¡d
::
	tdeque
<
	tS‹Info
>> 
	tS‹Li¡PŒ
;

67 
şass
 
	gTh»ad
;

69 şas 
	cPos™iÚ
 {

70 
	mpublic
:

71 
š™
();

73 
Pos™iÚ
() = ;

74 
Pos™iÚ
(cÚ¡ Pos™iÚ&èğ
d–‘e
;

75 
	mPos™iÚ
& 
	mİ”©Ü
=(cÚ¡ 
Pos™iÚ
&èğ
d–‘e
;

78 
	mPos™iÚ
& 
£t
(cÚ¡ 
¡d
::
¡ršg
& 
ãnSŒ
, 
boŞ
 
isChess960
, 
S‹Info
* 
si
, 
Th»ad
* 
th
);

79 
	mPos™iÚ
& 
£t
(cÚ¡ 
¡d
::
¡ršg
& 
code
, 
CŞÜ
 
c
, 
S‹Info
* 
si
);

80 cÚ¡ 
	m¡d
::
¡ršg
 
	$ãn
() const;

83 
B™bßrd
 
	$p›ûs
() const;

84 
B™bßrd
 
	$p›ûs
(
P›ûTy³
 
±
) const;

85 
B™bßrd
 
	$p›ûs
(
P›ûTy³
 
±1
, P›ûTy³ 
±2
) const;

86 
B™bßrd
 
	$p›ûs
(
CŞÜ
 
c
) const;

87 
B™bßrd
 
	$p›ûs
(
CŞÜ
 
c
, 
P›ûTy³
 
±
) const;

88 
B™bßrd
 
	$p›ûs
(
CŞÜ
 
c
, 
P›ûTy³
 
±1
, P›ûTy³ 
±2
) const;

89 
P›û
 
	$p›û_Ú
(
Squ¬e
 
s
) const;

90 
Squ¬e
 
	$•_squ¬e
() const;

91 
boŞ
 
	$em±y
(
Squ¬e
 
s
) const;

92 
‹m¶©e
<
P›ûTy³
 
Pt
> 
	$couÁ
(
CŞÜ
 
c
) const;

93 
‹m¶©e
<
P›ûTy³
 
Pt
> 
	$couÁ
() const;

94 
‹m¶©e
<
P›ûTy³
 
Pt
> cÚ¡ 
Squ¬e
* 
	$squ¬es
(
CŞÜ
 
c
) const;

95 
‹m¶©e
<
P›ûTy³
 
Pt
> 
Squ¬e
 
	$squ¬e
(
CŞÜ
 
c
) const;

98 
	$ÿn_ÿ¡Ë
(
CŞÜ
 
c
) const;

99 
	$ÿn_ÿ¡Ë
(
Ca¡lšgRight
 
ü
) const;

100 
boŞ
 
	$ÿ¡lšg_im³ded
(
Ca¡lšgRight
 
ü
) const;

101 
Squ¬e
 
	$ÿ¡lšg_rook_squ¬e
(
Ca¡lšgRight
 
ü
) const;

104 
B™bßrd
 
	$check”s
() const;

105 
B™bßrd
 
	$discov”ed_check_ÿndid©es
() const;

106 
B™bßrd
 
	$pšÃd_p›ûs
(
CŞÜ
 
c
) const;

107 
B™bßrd
 
	$check_squ¬es
(
P›ûTy³
 
±
) const;

110 
B™bßrd
 
	$©ck”s_to
(
Squ¬e
 
s
) const;

111 
B™bßrd
 
	$©ck”s_to
(
Squ¬e
 
s
, 
B™bßrd
 
occup›d
) const;

112 
B™bßrd
 
	$©cks_äom
(
P›ûTy³
 
±
, 
Squ¬e
 
s
) const;

113 
‹m¶©e
<
P›ûTy³
> 
B™bßrd
 
	$©cks_äom
(
Squ¬e
 
s
) const;

114 
‹m¶©e
<
P›ûTy³
> 
B™bßrd
 
	$©cks_äom
(
Squ¬e
 
s
, 
CŞÜ
 
c
) const;

115 
B™bßrd
 
	$¦id”_block”s
(
B™bßrd
 
¦id”s
, 
Squ¬e
 
s
, B™bßrd& 
pšÃrs
) const;

118 
boŞ
 
	$Ëg®
(
Move
 
m
) const;

119 
boŞ
 
	$p£udo_Ëg®
(cÚ¡ 
Move
 
m
) const;

120 
boŞ
 
	$ÿ±u»
(
Move
 
m
) const;

121 
boŞ
 
	$ÿ±u»_Ü_´omÙiÚ
(
Move
 
m
) const;

122 
boŞ
 
	$gives_check
(
Move
 
m
) const;

123 
boŞ
 
	$advªûd_·wn_push
(
Move
 
m
) const;

124 
P›û
 
	$moved_p›û
(
Move
 
m
) const;

125 
P›û
 
	$ÿ±u»d_p›û
() const;

128 
boŞ
 
	$·wn_·s£d
(
CŞÜ
 
c
, 
Squ¬e
 
s
) const;

129 
boŞ
 
	$İpos™e_bishİs
() const;

132 
	`do_move
(
Move
 
m
, 
S‹Info
& 
ÃwSt
);

133 
	`do_move
(
Move
 
m
, 
S‹Info
& 
ÃwSt
, 
boŞ
 
givesCheck
);

134 
	`undo_move
(
Move
 
m
);

135 
	`do_nuÎ_move
(
S‹Info
& 
ÃwSt
);

136 
	`undo_nuÎ_move
();

139 
boŞ
 
	$£e_ge
(
Move
 
m
, 
V®ue
 
v®ue
) const;

142 
Key
 
	$key
() const;

143 
Key
 
	$key_aá”
(
Move
 
m
) const;

144 
Key
 
	$m©”Ÿl_key
() const;

145 
Key
 
	$·wn_key
() const;

148 
CŞÜ
 
	$side_to_move
() const;

149 
Pha£
 
	$game_pha£
() const;

150 
	$game_¶y
() const;

151 
boŞ
 
	$is_chess960
() const;

152 
Th»ad
* 
	$this_th»ad
() const;

153 
ušt64_t
 
	$nodes_£¬ched
() const;

154 
boŞ
 
	$is_d¿w
(
¶y
) const;

155 
	$ruË50_couÁ
() const;

156 
ScÜe
 
	$psq_scÜe
() const;

157 
V®ue
 
	$nÚ_·wn_m©”Ÿl
(
CŞÜ
 
c
) const;

158 
V®ue
 
	$nÚ_·wn_m©”Ÿl
() const;

161 
boŞ
 
	$pos_is_ok
(* 
çedS‹p
 = 
nuÎ±r
) const;

162 
	`æ
();

164 
´iv©e
:

166 
	`£t_ÿ¡lšg_right
(
CŞÜ
 
c
, 
Squ¬e
 
räom
);

167 
	$£t_¡©e
(
S‹Info
* 
si
) const;

168 
	$£t_check_šfo
(
S‹Info
* 
si
) const;

171 
	`put_p›û
(
P›û
 
pc
, 
Squ¬e
 
s
);

172 
	`»move_p›û
(
P›û
 
pc
, 
Squ¬e
 
s
);

173 
	`move_p›û
(
P›û
 
pc
, 
Squ¬e
 
äom
, Squ¬
to
);

174 
‹m¶©e
<
boŞ
 
Do
>

175 
	`do_ÿ¡lšg
(
CŞÜ
 
us
, 
Squ¬e
 
äom
, Squ¬e& 
to
, Squ¬e& 
räom
, Squ¬e& 
¹o
);

178 
P›û
 
bßrd
[
SQUARE_NB
];

179 
B™bßrd
 
byTy³BB
[
PIECE_TYPE_NB
];

180 
B™bßrd
 
byCŞÜBB
[
COLOR_NB
];

181 
p›ûCouÁ
[
PIECE_NB
];

182 
Squ¬e
 
p›ûLi¡
[
PIECE_NB
][16];

183 
šdex
[
SQUARE_NB
];

184 
ÿ¡lšgRightsMask
[
SQUARE_NB
];

185 
Squ¬e
 
ÿ¡lšgRookSqu¬e
[
CASTLING_RIGHT_NB
];

186 
B™bßrd
 
ÿ¡lšgP©h
[
CASTLING_RIGHT_NB
];

187 
ušt64_t
 
nodes
;

188 
gamePly
;

189 
CŞÜ
 
sideToMove
;

190 
Th»ad
* 
thisTh»ad
;

191 
S‹Info
* 
¡
;

192 
boŞ
 
chess960
;

195 
¡d
::
o¡»am
& 
İ”©Ü
<<(¡d::o¡»am& 
os
, cÚ¡ 
Pos™iÚ
& 
pos
);

197 
šlše
 
CŞÜ
 
Pos™iÚ
::
	$side_to_move
() const {

198  
sideToMove
;

199 
	}
}

201 
šlše
 
boŞ
 
	gPos™iÚ
::
	$em±y
(
Squ¬e
 
s
) const {

202  
bßrd
[
s
] =ğ
NO_PIECE
;

203 
	}
}

205 
šlše
 
P›û
 
	gPos™iÚ
::
	$p›û_Ú
(
Squ¬e
 
s
) const {

206  
bßrd
[
s
];

207 
	}
}

209 
šlše
 
P›û
 
	gPos™iÚ
::
	$moved_p›û
(
Move
 
m
) const {

210  
bßrd
[
	`äom_sq
(
m
)];

211 
	}
}

213 
šlše
 
B™bßrd
 
	gPos™iÚ
::
	$p›ûs
() const {

214  
byTy³BB
[
ALL_PIECES
];

215 
	}
}

217 
šlše
 
B™bßrd
 
	gPos™iÚ
::
	$p›ûs
(
P›ûTy³
 
±
) const {

218  
byTy³BB
[
±
];

219 
	}
}

221 
šlše
 
B™bßrd
 
	gPos™iÚ
::
	$p›ûs
(
P›ûTy³
 
±1
, P›ûTy³ 
±2
) const {

222  
byTy³BB
[
±1
] | byTy³BB[
±2
];

223 
	}
}

225 
šlše
 
B™bßrd
 
	gPos™iÚ
::
	$p›ûs
(
CŞÜ
 
c
) const {

226  
byCŞÜBB
[
c
];

227 
	}
}

229 
šlše
 
B™bßrd
 
	gPos™iÚ
::
	$p›ûs
(
CŞÜ
 
c
, 
P›ûTy³
 
±
) const {

230  
byCŞÜBB
[
c
] & 
byTy³BB
[
±
];

231 
	}
}

233 
šlše
 
B™bßrd
 
	gPos™iÚ
::
	$p›ûs
(
CŞÜ
 
c
, 
P›ûTy³
 
±1
, P›ûTy³ 
±2
) const {

234  
byCŞÜBB
[
c
] & (
byTy³BB
[
±1
] | byTy³BB[
±2
]);

235 
	}
}

237 
	g‹m¶©e
<
P›ûTy³
 
	gPt
> 
šlše
 
	gPos™iÚ
::
	$couÁ
(
CŞÜ
 
c
) const {

238  
p›ûCouÁ
[
	`make_p›û
(
c
, 
Pt
)];

239 
	}
}

241 
	g‹m¶©e
<
P›ûTy³
 
	gPt
> 
šlše
 
	gPos™iÚ
::
	$couÁ
() const {

242  
p›ûCouÁ
[
	`make_p›û
(
WHITE
, 
Pt
)] +…›ûCouÁ[make_p›û(
BLACK
, Pt)];

243 
	}
}

245 
	g‹m¶©e
<
P›ûTy³
 
	gPt
> 
šlše
 cÚ¡ 
Squ¬e
* 
	gPos™iÚ
::
	$squ¬es
(
CŞÜ
 
c
) const {

246  
p›ûLi¡
[
	`make_p›û
(
c
, 
Pt
)];

247 
	}
}

249 
	g‹m¶©e
<
P›ûTy³
 
	gPt
> 
šlše
 
Squ¬e
 
	gPos™iÚ
::
	$squ¬e
(
CŞÜ
 
c
) const {

250 
	`as£¹
(
p›ûCouÁ
[
	`make_p›û
(
c
, 
Pt
)] == 1);

251  
p›ûLi¡
[
	`make_p›û
(
c
, 
Pt
)][0];

252 
	}
}

254 
šlše
 
Squ¬e
 
	gPos™iÚ
::
	$•_squ¬e
() const {

255  
¡
->
•Squ¬e
;

256 
	}
}

258 
šlše
 
	gPos™iÚ
::
	$ÿn_ÿ¡Ë
(
Ca¡lšgRight
 
ü
) const {

259  
¡
->
ÿ¡lšgRights
 & 
ü
;

260 
	}
}

262 
šlše
 
	gPos™iÚ
::
	$ÿn_ÿ¡Ë
(
CŞÜ
 
c
) const {

263  
¡
->
ÿ¡lšgRights
 & ((
WHITE_OO
 | 
WHITE_OOO
è<< (2 * 
c
));

264 
	}
}

266 
šlše
 
boŞ
 
	gPos™iÚ
::
	$ÿ¡lšg_im³ded
(
Ca¡lšgRight
 
ü
) const {

267  
byTy³BB
[
ALL_PIECES
] & 
ÿ¡lšgP©h
[
ü
];

268 
	}
}

270 
šlše
 
Squ¬e
 
	gPos™iÚ
::
	$ÿ¡lšg_rook_squ¬e
(
Ca¡lšgRight
 
ü
) const {

271  
ÿ¡lšgRookSqu¬e
[
ü
];

272 
	}
}

274 
	g‹m¶©e
<
P›ûTy³
 
	gPt
>

275 
šlše
 
B™bßrd
 
	gPos™iÚ
::
	$©cks_äom
(
Squ¬e
 
s
) const {

276 
	`as£¹
(
Pt
 !ğ
PAWN
);

277  
Pt
 =ğ
BISHOP
 || Pˆ=ğ
ROOK
 ? 
©cks_bb
<Pt>(
s
, 
byTy³BB
[
ALL_PIECES
])

278 : 
Pt
 =ğ
QUEEN
 ? 
©cks_äom
<
ROOK
>(
s
è|‡‰acks_äom<
BISHOP
>(s)

279 : 
P£udoA‰acks
[
Pt
][
s
];

280 
	}
}

282 
	g‹m¶©e
<>

283 
šlše
 
B™bßrd
 
	gPos™iÚ
::
©cks_äom
<
PAWN
>(
Squ¬e
 
s
, 
CŞÜ
 
	gc
) const {

284  
	gPawnA‰acks
[
c
][
s
];

287 
šlše
 
B™bßrd
 
	gPos™iÚ
::
	$©cks_äom
(
P›ûTy³
 
±
, 
Squ¬e
 
s
) const {

288  
	`©cks_bb
(
±
, 
s
, 
byTy³BB
[
ALL_PIECES
]);

289 
	}
}

291 
šlše
 
B™bßrd
 
	gPos™iÚ
::
	$©ck”s_to
(
Squ¬e
 
s
) const {

292  
	`©ck”s_to
(
s
, 
byTy³BB
[
ALL_PIECES
]);

293 
	}
}

295 
šlše
 
B™bßrd
 
	gPos™iÚ
::
	$check”s
() const {

296  
¡
->
check”sBB
;

297 
	}
}

299 
šlše
 
B™bßrd
 
	gPos™iÚ
::
	$discov”ed_check_ÿndid©es
() const {

300  
¡
->
block”sFÜKšg
[~
sideToMove
] & 
	`p›ûs
(sideToMove);

301 
	}
}

303 
šlše
 
B™bßrd
 
	gPos™iÚ
::
	$pšÃd_p›ûs
(
CŞÜ
 
c
) const {

304  
¡
->
block”sFÜKšg
[
c
] & 
	`p›ûs
(c);

305 
	}
}

307 
šlše
 
B™bßrd
 
	gPos™iÚ
::
	$check_squ¬es
(
P›ûTy³
 
±
) const {

308  
¡
->
checkSqu¬es
[
±
];

309 
	}
}

311 
šlše
 
boŞ
 
	gPos™iÚ
::
	$·wn_·s£d
(
CŞÜ
 
c
, 
Squ¬e
 
s
) const {

312  !(
	`p›ûs
(~
c
, 
PAWN
è& 
	`·s£d_·wn_mask
(c, 
s
));

313 
	}
}

315 
šlše
 
boŞ
 
	gPos™iÚ
::
	$advªûd_·wn_push
(
Move
 
m
) const {

316  
	`ty³_of
(
	`moved_p›û
(
m
)è=ğ
PAWN


317 && 
	`»Ïtive_¿nk
(
sideToMove
, 
	`äom_sq
(
m
)è> 
RANK_4
;

318 
	}
}

320 
šlše
 
Key
 
	gPos™iÚ
::
	$key
() const {

321  
¡
->
key
;

322 
	}
}

324 
šlše
 
Key
 
	gPos™iÚ
::
	$·wn_key
() const {

325  
¡
->
·wnKey
;

326 
	}
}

328 
šlše
 
Key
 
	gPos™iÚ
::
	$m©”Ÿl_key
() const {

329  
¡
->
m©”ŸlKey
;

330 
	}
}

332 
šlše
 
ScÜe
 
	gPos™iÚ
::
	$psq_scÜe
() const {

333  
¡
->
psq
;

334 
	}
}

336 
šlše
 
V®ue
 
	gPos™iÚ
::
	$nÚ_·wn_m©”Ÿl
(
CŞÜ
 
c
) const {

337  
¡
->
nÚPawnM©”Ÿl
[
c
];

338 
	}
}

340 
šlše
 
V®ue
 
	gPos™iÚ
::
	$nÚ_·wn_m©”Ÿl
() const {

341  
¡
->
nÚPawnM©”Ÿl
[
WHITE
] + st->nÚPawnM©”Ÿl[
BLACK
];

342 
	}
}

344 
šlše
 
	gPos™iÚ
::
	$game_¶y
() const {

345  
gamePly
;

346 
	}
}

348 
šlše
 
	gPos™iÚ
::
	$ruË50_couÁ
() const {

349  
¡
->
ruË50
;

350 
	}
}

352 
šlše
 
ušt64_t
 
	gPos™iÚ
::
	$nodes_£¬ched
() const {

353  
nodes
;

354 
	}
}

356 
šlše
 
boŞ
 
	gPos™iÚ
::
	$İpos™e_bishİs
() const {

357  
p›ûCouÁ
[
W_BISHOP
] == 1

358 && 
p›ûCouÁ
[
B_BISHOP
] == 1

359 && 
	`İpos™e_cŞÜs
(
squ¬e
<
BISHOP
>(
WHITE
), squ¬e<BISHOP>(
BLACK
));

360 
	}
}

362 
šlše
 
boŞ
 
	gPos™iÚ
::
	$is_chess960
() const {

363  
chess960
;

364 
	}
}

366 
šlše
 
boŞ
 
	gPos™iÚ
::
	$ÿ±u»_Ü_´omÙiÚ
(
Move
 
m
) const {

367 
	`as£¹
(
	`is_ok
(
m
));

368  
	`ty³_of
(
m
è!ğ
NORMAL
 ?y³_of(mè!ğ
CASTLING
 : !
	`em±y
(
	`to_sq
(m));

369 
	}
}

371 
šlše
 
boŞ
 
	gPos™iÚ
::
	$ÿ±u»
(
Move
 
m
) const {

372 
	`as£¹
(
	`is_ok
(
m
));

374  (!
	`em±y
(
	`to_sq
(
m
)è&& 
	`ty³_of
(mè!ğ
CASTLING
è||y³_of(mè=ğ
ENPASSANT
;

375 
	}
}

377 
šlše
 
P›û
 
	gPos™iÚ
::
	$ÿ±u»d_p›û
() const {

378  
¡
->
ÿ±u»dP›û
;

379 
	}
}

381 
šlše
 
Th»ad
* 
	gPos™iÚ
::
	$this_th»ad
() const {

382  
thisTh»ad
;

383 
	}
}

385 
šlše
 
	gPos™iÚ
::
	$put_p›û
(
P›û
 
pc
, 
Squ¬e
 
s
) {

387 
bßrd
[
s
] = 
pc
;

388 
byTy³BB
[
ALL_PIECES
] |ğ
s
;

389 
byTy³BB
[
	`ty³_of
(
pc
)] |ğ
s
;

390 
byCŞÜBB
[
	`cŞÜ_of
(
pc
)] |ğ
s
;

391 
šdex
[
s
] = 
p›ûCouÁ
[
pc
]++;

392 
p›ûLi¡
[
pc
][
šdex
[
s
]] = s;

393 
p›ûCouÁ
[
	`make_p›û
(
	`cŞÜ_of
(
pc
), 
ALL_PIECES
)]++;

394 
	}
}

396 
šlše
 
	gPos™iÚ
::
	$»move_p›û
(
P›û
 
pc
, 
Squ¬e
 
s
) {

402 
byTy³BB
[
ALL_PIECES
] ^ğ
s
;

403 
byTy³BB
[
	`ty³_of
(
pc
)] ^ğ
s
;

404 
byCŞÜBB
[
	`cŞÜ_of
(
pc
)] ^ğ
s
;

406 
Squ¬e
 
Ï¡Squ¬e
 = 
p›ûLi¡
[
pc
][--
p›ûCouÁ
[pc]];

407 
šdex
[
Ï¡Squ¬e
] = index[
s
];

408 
p›ûLi¡
[
pc
][
šdex
[
Ï¡Squ¬e
]] =†astSquare;

409 
p›ûLi¡
[
pc
][
p›ûCouÁ
[pc]] = 
SQ_NONE
;

410 
p›ûCouÁ
[
	`make_p›û
(
	`cŞÜ_of
(
pc
), 
ALL_PIECES
)]--;

411 
	}
}

413 
šlše
 
	gPos™iÚ
::
	$move_p›û
(
P›û
 
pc
, 
Squ¬e
 
äom
, Squ¬
to
) {

417 
B™bßrd
 
äom_to_bb
 = 
Squ¬eBB
[
äom
] ^ Squ¬eBB[
to
];

418 
byTy³BB
[
ALL_PIECES
] ^ğ
äom_to_bb
;

419 
byTy³BB
[
	`ty³_of
(
pc
)] ^ğ
äom_to_bb
;

420 
byCŞÜBB
[
	`cŞÜ_of
(
pc
)] ^ğ
äom_to_bb
;

421 
bßrd
[
äom
] = 
NO_PIECE
;

422 
bßrd
[
to
] = 
pc
;

423 
šdex
[
to
] = index[
äom
];

424 
p›ûLi¡
[
pc
][
šdex
[
to
]] =o;

425 
	}
}

427 
šlše
 
	gPos™iÚ
::
	$do_move
(
Move
 
m
, 
S‹Info
& 
ÃwSt
) {

428 
	`do_move
(
m
, 
ÃwSt
, 
	`gives_check
(m));

429 
	}
}

	@psqt.cpp

21 
	~<®gÜ™hm
>

23 
	~"ty³s.h
"

25 
V®ue
 
	gP›ûV®ue
[
PHASE_NB
][
PIECE_NB
] = {

26 { 
VALUE_ZERO
, 
PawnV®ueMg
, 
KnightV®ueMg
, 
BishİV®ueMg
, 
RookV®ueMg
, 
Qu“nV®ueMg
 },

27 { 
VALUE_ZERO
, 
PawnV®ueEg
, 
KnightV®ueEg
, 
BishİV®ueEg
, 
RookV®ueEg
, 
Qu“nV®ueEg
 }

30 
Çme¥aû
 
	gPSQT
 {

32 
	#S
(
mg
, 
eg
è
	`make_scÜe
(mg,ƒg)

	)

38 cÚ¡ 
ScÜe
 
	gBÚus
[][
RANK_NB
][(
FILE_NB
) / 2] = {

41 { 
S
( 0, 0), S( 0, 0), S( 0, 0), S( 0, 0) },

42 { 
S
(-11, 7), S( 6,-4), S( 7, 8), S( 3,-2) },

43 { 
S
(-18,-4), S( -2,-5), S( 19, 5), S(24, 4) },

44 { 
S
(-17, 3), S( -9, 3), S( 20,-8), S(35,-3) },

45 { 
S
( -6, 8), S( 5, 9), S( 3, 7), S(21,-6) },

46 { 
S
( -6, 8), S( -8,-5), S( -6, 2), S(-2, 4) },

47 { 
S
( -4, 3), S( 20,-9), S( -8, 1), S(-4,18) }

50 { 
S
(-144, -98), S(-96,-82), S(-80,-46), S(-73,-14) },

51 { 
S
( -83, -69), S(-43,-54), S(-21,-17), S(-10, 9) },

52 { 
S
( -71, -50), S(-22,-39), S( 0, -7), S( 9, 28) },

53 { 
S
( -25, -41), S( 18,-25), S( 43, 6), S( 47, 38) },

54 { 
S
( -26, -46), S( 16,-25), S( 38, 3), S( 50, 40) },

55 { 
S
( -11, -54), S( 37,-38), S( 56, -7), S( 65, 27) },

56 { 
S
( -62, -65), S(-17,-50), S( 5,-24), S( 14, 13) },

57 { 
S
(-194,-109), S(-66,-89), S(-42,-50), S(-29,-13) }

60 { 
S
(-44,-58), S(-13,-31), S(-25,-37), S(-34,-19) },

61 { 
S
(-20,-34), S( 20, -9), S( 12,-14), S( 1, 4) },

62 { 
S
( -9,-23), S( 27, 0), S( 21, -3), S( 11, 16) },

63 { 
S
(-11,-26), S( 28, -3), S( 21, -5), S( 10, 16) },

64 { 
S
(-11,-26), S( 24, -4), S( 16, -7), S( 9, 14) },

65 { 
S
(-17,-24), S( 16, -2), S( 12, 0), S( 2, 13) },

66 { 
S
(-23,-34), S( 17,-10), S( 6,-12), S( -2, 6) },

67 { 
S
(-35,-55), S(-11,-32), S(-19,-36), S(-29,-17) }

70 { 
S
(-25, 0), S(-16, 0), S(-16, 0), S(-9, 0) },

71 { 
S
(-21, 0), S( -8, 0), S( -3, 0), S( 0, 0) },

72 { 
S
(-21, 0), S( -9, 0), S( -4, 0), S( 2, 0) },

73 { 
S
(-22, 0), S( -6, 0), S( -1, 0), S( 2, 0) },

74 { 
S
(-22, 0), S( -7, 0), S( 0, 0), S( 1, 0) },

75 { 
S
(-21, 0), S( -7, 0), S( 0, 0), S( 2, 0) },

76 { 
S
(-12, 0), S( 4, 0), S( 8, 0), S(12, 0) },

77 { 
S
(-23, 0), S(-15, 0), S(-11, 0), S(-5, 0) }

80 { 
S
( 0,-71), S(-4,-56), S(-3,-42), S(-1,-29) },

81 { 
S
(-4,-56), S( 6,-30), S( 9,-21), S( 8, -5) },

82 { 
S
(-2,-39), S( 6,-17), S( 9, -8), S( 9, 5) },

83 { 
S
(-1,-29), S( 8, -5), S(10, 9), S( 7, 19) },

84 { 
S
(-3,-27), S( 9, -5), S( 8, 10), S( 7, 21) },

85 { 
S
(-2,-40), S( 6,-16), S( 8,-10), S(10, 3) },

86 { 
S
(-2,-55), S( 7,-30), S( 7,-21), S( 6, -6) },

87 { 
S
(-1,-74), S(-4,-55), S(-1,-43), S( 0,-30) }

90 { 
S
(267, 0), S(320, 48), S(270, 75), S(195, 84) },

91 { 
S
(264, 43), S(304, 92), S(238,143), S(180,132) },

92 { 
S
(200, 83), S(245,138), S(176,167), S(110,165) },

93 { 
S
(177,106), S(185,169), S(148,169), S(110,179) },

94 { 
S
(149,108), S(177,163), S(115,200), S( 66,203) },

95 { 
S
(118, 95), S(159,155), S( 84,176), S( 41,174) },

96 { 
S
( 86, 50), S(128, 99), S( 63,122), S( 18,139) },

97 { 
S
( 63, 9), S( 89, 55), S( 47, 80), S( 0, 90) }

101 #undeà
S


103 
ScÜe
 
	gpsq
[
PIECE_NB
][
SQUARE_NB
];

108 
š™
() {

110 
P›û
 
	gpc
 = 
W_PAWN
;…ø<ğ
W_KING
; ++pc)

112 
	gP›ûV®ue
[
MG
][~
pc
] = 
P›ûV®ue
[MG][pc];

113 
	gP›ûV®ue
[
EG
][~
pc
] = 
P›ûV®ue
[EG][pc];

115 
ScÜe
 
	gv
 = 
make_scÜe
(
P›ûV®ue
[
MG
][
pc
], P›ûV®ue[
EG
][pc]);

117 
Squ¬e
 
	gs
 = 
SQ_A1
; s <ğ
SQ_H8
; ++s)

119 
Fe
 
	gf
 = 
¡d
::
mš
(
fe_of
(
s
), 
FILE_H
 - file_of(s));

120 
	gpsq
[ 
pc
][ 
s
] = 
v
 + 
BÚus
[pc][
¿nk_of
(s)][
f
];

121 
	gpsq
[~
pc
][~
s
] = -
psq
[pc][s];

	@search.cpp

21 
	~<®gÜ™hm
>

22 
	~<ÿs£¹
>

23 
	~<cm©h
>

24 
	~<c¡ršg
>

25 
	~<io¡»am
>

26 
	~<s¡»am
>

28 
	~"ev®u©e.h
"

29 
	~"misc.h
"

30 
	~"moveg’.h
"

31 
	~"mov•ick.h
"

32 
	~"pos™iÚ.h
"

33 
	~"£¬ch.h
"

34 
	~"timemª.h
"

35 
	~"th»ad.h
"

36 
	~"‰.h
"

37 
	~"uci.h
"

38 
	~"syzygy/tb´obe.h
"

40 
Çme¥aû
 
	gS—rch
 {

42 
SigÇlsTy³
 
	gSigÇls
;

43 
Lim™sTy³
 
	gLim™s
;

46 
Çme¥aû
 
	gTabËba£s
 {

48 
	gC¬dš®™y
;

49 
boŞ
 
	gRoÙInTB
;

50 
boŞ
 
	gU£RuË50
;

51 
D•th
 
	gProbeD•th
;

52 
V®ue
 
	gScÜe
;

55 
Çme¥aû
 
	gTB
 = 
TabËba£s
;

57 
usšg
 
	g¡d
::
¡ršg
;

58 
usšg
 
	gEv®
::
ev®u©e
;

59 
usšg
 
Çme¥aû
 
	gS—rch
;

61 
	gÇme¥aû
 {

64 
	eNodeTy³
 { 
	gNÚPV
, 
	gPV
 };

67 cÚ¡ 
	gskSize
[] = { 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4 };

68 cÚ¡ 
	gskPha£
[] = { 0, 1, 0, 1, 2, 3, 0, 1, 2, 3, 4, 5, 0, 1, 2, 3, 4, 5, 6, 7 };

72 cÚ¡ 
	g¿zÜ_m¬gš
[] = { 0, 570, 603, 554 };

73 
V®ue
 
fut™y_m¬gš
(
D•th
 
d
è{  V®ue(150 * d / 
ONE_PLY
); }

76 
	gFut™yMoveCouÁs
[2][16];

77 
	gReduùiÚs
[2][2][64][64];

80 cÚ¡ 
	gCouÁ”MovePruÃTh»shŞd
 = 0;

82 
	g‹m¶©e
 <
boŞ
 
	gPvNode
> 
D•th
 
»duùiÚ
(boŞ 
i
, D•th 
d
, 
mn
) {

83  
	gReduùiÚs
[
PvNode
][
i
][
¡d
::
mš
(
d
 / 
ONE_PLY
, 63)][¡d::mš(
mn
, 63)] * 
	gONE_PLY
;

87 
¡©_bÚus
(
D•th
 
d•th
) {

88 
	gd
 = 
d•th
 / 
ONE_PLY
 ;

89  
	gd
 > 17 ? 0 : 
d
 * d + 2 * d - 2;

93 
	sSkl
 {

94 
Skl
(
l
è: 
Ëv–
(l) {}

95 
boŞ
 
’abËd
(ècÚ¡ {  
Ëv–
 < 20; }

96 
boŞ
 
time_to_pick
(
D•th
 
d•th
ècÚ¡ {  
	gd•th
 / 
	gONE_PLY
 =ğ1 + 
Ëv–
; }

97 
Move
 
be¡_move
(
size_t
 
muÉiPV
è{  
	gbe¡
 ? be¡ : 
pick_be¡
(multiPV); }

98 
Move
 
pick_be¡
(
size_t
 
muÉiPV
);

100 
	gËv–
;

101 
Move
 
	gbe¡
 = 
MOVE_NONE
;

106 
	sEasyMoveMªag”
 {

108 
ş—r
() {

109 
	g¡abËCÁ
 = 0;

110 
	gex³ùedPosKey
 = 0;

111 
	gpv
[0] = 
pv
[1] =…v[2] = 
MOVE_NONE
;

114 
Move
 
g‘
(
Key
 
key
) const {

115  
	gex³ùedPosKey
 =ğ
key
 ? 
pv
[2] : 
MOVE_NONE
;

118 
upd©e
(
Pos™iÚ
& 
pos
, cÚ¡ 
¡d
::
veùÜ
<
Move
>& 
ÃwPv
) {

120 
as£¹
(
ÃwPv
.
size
() >= 3);

123 
	g¡abËCÁ
 = (
ÃwPv
[2] =ğ
pv
[2]è? 
¡abËCÁ
 + 1 : 0;

125 ià(!
	g¡d
::
equ®
(
ÃwPv
.
begš
(),‚ewPv.begš(è+ 3, 
pv
))

127 
	g¡d
::
cİy
(
ÃwPv
.
begš
(),‚ewPv.begš(è+ 3, 
pv
);

129 
S‹Info
 
	g¡
[2];

130 
	gpos
.
do_move
(
ÃwPv
[0], 
¡
[0]);

131 
	gpos
.
do_move
(
ÃwPv
[1], 
¡
[1]);

132 
	gex³ùedPosKey
 = 
pos
.
key
();

133 
	gpos
.
undo_move
(
ÃwPv
[1]);

134 
	gpos
.
undo_move
(
ÃwPv
[0]);

138 
	g¡abËCÁ
;

139 
Key
 
	gex³ùedPosKey
;

140 
Move
 
	gpv
[3];

143 
EasyMoveMªag”
 
	gEasyMove
;

144 
V®ue
 
	gD¿wV®ue
[
COLOR_NB
];

146 
	g‹m¶©e
 <
NodeTy³
 
	gNT
>

147 
V®ue
 
£¬ch
(
Pos™iÚ
& 
pos
, 
Sck
* 
ss
, V®u
®pha
, V®u
b‘a
, 
D•th
 
d•th
, 
boŞ
 
cutNode
, boŞ 
skE¬lyPrunšg
);

149 
	g‹m¶©e
 <
NodeTy³
 
	gNT
, 
boŞ
 
	gInCheck
>

150 
V®ue
 
q£¬ch
(
Pos™iÚ
& 
pos
, 
Sck
* 
ss
, V®u
®pha
, V®u
b‘a
, 
D•th
 
d•th
 = 
DEPTH_ZERO
);

152 
V®ue
 
v®ue_to_‰
(V®u
v
, 
¶y
);

153 
V®ue
 
v®ue_äom_‰
(V®u
v
, 
¶y
);

154 
upd©e_pv
(
Move
* 
pv
, Mov
move
, Move* 
chdPv
);

155 
upd©e_cm_¡©s
(
Sck
* 
ss
, 
P›û
 
pc
, 
Squ¬e
 
s
, 
bÚus
);

156 
upd©e_¡©s
(cÚ¡ 
Pos™iÚ
& 
pos
, 
Sck
* 
ss
, 
Move
 
move
, Move* 
qu›ts
, 
qu›tsCÁ
, 
bÚus
);

157 
check_time
();

164 
	gS—rch
::
	$š™
() {

166 
imp
 = 0; imp <= 1; ++imp)

167 
d
 = 1; d < 64; ++d)

168 
mc
 = 1; mc < 64; ++mc)

170 
r
 = 
	`log
(
d
è*†og(
mc
) / 1.95;

172 
ReduùiÚs
[
NÚPV
][
imp
][
d
][
mc
] = (
¡d
::
	`round
(
r
));

173 
ReduùiÚs
[
PV
][
imp
][
d
][
mc
] = 
¡d
::
	`max
(ReduùiÚs[
NÚPV
][imp][d][mc] - 1, 0);

176 ià(!
imp
 && 
ReduùiÚs
[
NÚPV
][imp][
d
][
mc
] >= 2)

177 
ReduùiÚs
[
NÚPV
][
imp
][
d
][
mc
]++;

180 
d
 = 0; d < 16; ++d)

182 
Fut™yMoveCouÁs
[0][
d
] = (2.4 + 0.74 * 
	`pow
(d, 1.78));

183 
Fut™yMoveCouÁs
[1][
d
] = (5.0 + 1.00 * 
	`pow
(d, 2.00));

185 
	}
}

190 
	gS—rch
::
	$ş—r
() {

192 
TT
.
	`ş—r
();

194 
Th»ad
* 
th
 : 
Th»ads
)

196 
th
->
couÁ”Moves
.
	`ş—r
();

197 
th
->
hi¡Üy
.
	`ş—r
();

198 
th
->
couÁ”MoveHi¡Üy
.
	`ş—r
();

199 
th
->
»£tC®ls
 = 
Œue
;

200 
CouÁ”MoveSts
& 
cm
 = 
th
->
couÁ”MoveHi¡Üy
[
NO_PIECE
][0];

201 * 
t
 = &
cm
[
NO_PIECE
][0];

202 
¡d
::
	`fl
(
t
, + (
cm
), 
CouÁ”MovePruÃTh»shŞd
 - 1);

205 
Th»ads
.
	`maš
()->
´eviousScÜe
 = 
VALUE_INFINITE
;

206 
	}
}

211 
	g‹m¶©e
<
boŞ
 
	gRoÙ
>

212 
ušt64_t
 
	gS—rch
::
	$³rá
(
Pos™iÚ
& 
pos
, 
D•th
 
d•th
) {

214 
S‹Info
 
¡
;

215 
ušt64_t
 
út
, 
nodes
 = 0;

216 cÚ¡ 
boŞ
 
Ëaf
 = (
d•th
 =ğ2 * 
ONE_PLY
);

218 cÚ¡‡uto& 
m
 : 
MoveLi¡
<
LEGAL
>(
pos
))

220 ià(
RoÙ
 && 
d•th
 <ğ
ONE_PLY
)

221 
út
 = 1, 
nodes
++;

224 
pos
.
	`do_move
(
m
, 
¡
);

225 
út
 = 
Ëaf
 ? 
MoveLi¡
<
LEGAL
>(
pos
).
	`size
(è: 
³rá
<
çl£
>Õos, 
d•th
 - 
ONE_PLY
);

226 
nodes
 +ğ
út
;

227 
pos
.
	`undo_move
(
m
);

229 ià(
RoÙ
)

230 
sync_šfo_out
 << 
UCI
::
	`move
(
m
, 
pos
.
	`is_chess960
()è<< ": " << 
út
 << 
sync_šfo_’dl
;

232  
nodes
;

233 
	}
}

235 
‹m¶©e
 
ušt64_t
 
	gS—rch
::
³rá
<
Œue
>(
Pos™iÚ
&, 
	gD•th
);

241 
	gMašTh»ad
::
	$£¬ch
() {

243 
CŞÜ
 
us
 = 
roÙPos
.
	`side_to_move
();

244 
Time
.
	`š™
(
Lim™s
, 
us
, 
roÙPos
.
	`game_¶y
());

246 
cÚ‹m±
 = 
O±iÚs
["CÚ‹m±"] * 
PawnV®ueEg
 / 100;

247 
D¿wV®ue
[ 
us
] = 
VALUE_DRAW
 - 
	`V®ue
(
cÚ‹m±
);

248 
D¿wV®ue
[~
us
] = 
VALUE_DRAW
 + 
	`V®ue
(
cÚ‹m±
);

250 ià(
roÙMoves
.
	`em±y
())

252 
roÙMoves
.
	`push_back
(
	`RoÙMove
(
MOVE_NONE
));

253 
sync_šfo_out
 << "info depth 0 score "

254 << 
UCI
::
	`v®ue
(
roÙPos
.
	`check”s
(è? -
VALUE_MATE
 : 
VALUE_DRAW
)

255 << 
sync_šfo_’dl
;

259 
Th»ad
* 
th
 : 
Th»ads
)

260 ià(
th
 !ğ
this
)

261 
th
->
	`¡¬t_£¬chšg
();

264 
this
->
	`ma¡”PrÙocŞ
();

269 ià(
Lim™s
.
Åm£c
)

270 
Time
.
avaabËNodes
 +ğ
Lim™s
.
šc
[
us
] - 
Th»ads
.
	`nodes_£¬ched
();

277 ià(!
SigÇls
.
¡İ
 && (
Lim™s
.
pÚd”
 || Lim™s.
šfš™e
))

279 
SigÇls
.
¡İOnPÚd”h™
 = 
Œue
;

280 
	`wa™
(
SigÇls
.
¡İ
);

284 
SigÇls
.
¡İ
 = 
Œue
;

287 
Th»ad
* 
th
 : 
Th»ads
)

288 ià(
th
 !ğ
this
)

289 
th
->
	`wa™_fÜ_£¬ch_fšished
();

292 
Th»ad
* 
be¡Th»ad
 = 
this
;

293 iàĞ!
this
->
—syMovePÏyed


294 && 
O±iÚs
["MultiPV"] == 1

295 && !
Lim™s
.
d•th


296 && !
	`Skl
(
O±iÚs
["SkÈLev–"]).
	`’abËd
()

297 && 
roÙMoves
[0].
pv
[0] !ğ
MOVE_NONE
)

299 
Th»ad
* 
th
 : 
Th»ads
)

301 
D•th
 
d•thDiff
 = 
th
->
com¶‘edD•th
 - 
be¡Th»ad
->completedDepth;

302 
V®ue
 
scÜeDiff
 = 
th
->
roÙMoves
[0].
scÜe
 - 
be¡Th»ad
->rootMoves[0].score;

304 ià(
scÜeDiff
 > 0 && 
d•thDiff
 >= 0)

305 
be¡Th»ad
 = 
th
;

309 
´eviousScÜe
 = 
be¡Th»ad
->
roÙMoves
[0].
scÜe
;

312 ià(
be¡Th»ad
 !ğ
this
)

313 
sync_šfo_out
 << 
UCI
::
	`pv
(
be¡Th»ad
->
roÙPos
, be¡Th»ad->
com¶‘edD•th
, -
VALUE_INFINITE
, VALUE_INFINITEè<< 
sync_šfo_’dl
;

315 
sync_šfo_out
 << "be¡mov" << 
UCI
::
	`move
(
be¡Th»ad
->
roÙMoves
[0].
pv
[0], 
roÙPos
.
	`is_chess960
());

317 ià(
be¡Th»ad
->
roÙMoves
[0].
pv
.
	`size
(è> 1 || be¡Th»ad->roÙMoves[0].
	`exŒaù_pÚd”_äom_‰
(
roÙPos
))

318 
šfo_out
 << "…Úd” " << 
UCI
::
	`move
(
be¡Th»ad
->
roÙMoves
[0].
pv
[1], 
roÙPos
.
	`is_chess960
());

320 
šfo_out
 << 
sync_šfo_’dl
;

321 
	}
}

329 
	gMašTh»ad
::
	$ma¡”PrÙocŞ
() {

331 ià(
mpi_¿nk
 == 0) {

335 
Th»ad
::
	`£¬ch
();

338 
Œue
) {

339 
FuÎTTEÁry
 
á‹
;

340 
	`MPI_Recv
(&
á‹
, 1, 
mpi_fuÎ_‰e_t
, 
MPI_ANY_SOURCE
, 
MPI_TAGS
::
TAG_MOVE_RESULT
, 
MPI_COMM_WORLD
, 
MPI_STATUS_IGNORE
);

344 
boŞ
 
found
;

345 
TTEÁry
 *
’Œy
 = 
TT
.
	`´obe
(
á‹
.
key
, 
found
);

346 
’Œy
->
	`§ve
(
á‹
.
key
, (
V®ue
èá‹.
v®ue16
, (
Bound
è((á‹.
g’Bound8
) & 0x3),

347 (
D•th
è(
á‹
.
d•th8
 * (
ONE_PLY
)), (
Move
èá‹.
move16
, (
V®ue
èá‹.
v®ue16
,

348 
á‹
.
g’Bound8
 & ~0x3);

351 cÚ¡ 
¡ršg
 
ãn
 = 
this
->
roÙPos
.
	`ãn
();

355 
Œue
) {

357 
found
;

358 
	`MPI_I´obe
(0, 
MPI_TAGS
::
TAG_MOVE_REQUEST
, 
MPI_COMM_WORLD
, &
found
, 
MPI_STATUS_IGNORE
);

359 ià(
found
) {

361 
ušt16_t
 
moves
[
MAX_MOVEBUF_MOVES
];

362 
	`MPI_Recv
(
moves
, 
MAX_MOVEBUF_MOVES
, 
MPI_UINT16_T
, 0, 
MPI_TAGS
::
TAG_MOVE_REQUEST
, 
MPI_COMM_WORLD
, 
MPI_STATUS_IGNORE
);

364 
Pos™iÚ
 
pos
;

365 
S‹Li¡PŒ
 
	`S‹s
(
Ãw
 
¡d
::
deque
<
S‹Info
>(1));

366 
pos
.
	`£t
(
ãn
, 
this
->
roÙPos
.
	`is_chess960
(), &
S‹s
->
	`back
(),his);

367 
ušt16_t
 
m
 : 
moves
) {

368 
Move
 
move
 = (Moveè
m
;

369 
S‹s
->
	`push_back
(
	`S‹Info
());

370 
pos
.
	`do_move
(
move
, 
S‹s
->
	`back
());

374 
size_t
 
th»ad
 = 1;h»ad < 
Th»ads
.
	`size
(); ++thread) {

375 ià(!
Th»ads
[
th»ad
]->
	`isS—rchšg
()) {

376 
Th»ads
[
th»ad
]->
	`ev®u©e_pos™iÚ
(
pos
, 
S‹s
, 
Lim™s
);

389 
	}
}

396 
	gTh»ad
::
	$£¬ch
() {

398 
Sck
 
¡ack
[
MAX_PLY
+7], *
ss
 = stack+4;

399 
V®ue
 
be¡V®ue
, 
®pha
, 
b‘a
, 
d–
;

400 
Move
 
—syMove
 = 
MOVE_NONE
;

401 
MašTh»ad
* 
mašTh»ad
 = (
this
 =ğ
Th»ads
.
	`maš
(è? Th»ads.maš(è: 
nuÎ±r
);

403 
¡d
::
	`mem£t
(
ss
-4, 0, 7 * (
Sck
));

404 
i
 = 4; i > 0; i--)

405 (
ss
-
i
)->
couÁ”Moves
 = &
this
->
couÁ”MoveHi¡Üy
[
NO_PIECE
][0];

407 
be¡V®ue
 = 
d–
 = 
®pha
 = -
VALUE_INFINITE
;

408 
b‘a
 = 
VALUE_INFINITE
;

409 
com¶‘edD•th
 = 
DEPTH_ZERO
;

411 ià(
mašTh»ad
)

413 
—syMove
 = 
EasyMove
.
	`g‘
(
roÙPos
.
	`key
());

414 
EasyMove
.
	`ş—r
();

415 
mašTh»ad
->
—syMovePÏyed
 = mašTh»ad->
çedLow
 = 
çl£
;

416 
mašTh»ad
->
be¡MoveChªges
 = 0;

417 
TT
.
	`Ãw_£¬ch
();

420 
size_t
 
muÉiPV
 = 
O±iÚs
["MultiPV"];

421 
Skl
 
	`skl
(
O±iÚs
["Skill Level"]);

425 ià(
skl
.
	`’abËd
())

426 
muÉiPV
 = 
¡d
::
	`max
(muÉiPV, (
size_t
)4);

428 
muÉiPV
 = 
¡d
::
	`mš
(muÉiPV, 
roÙMoves
.
	`size
());

431  (
roÙD•th
 +ğ
ONE_PLY
è< 
DEPTH_MAX


432 && !
SigÇls
.
¡İ


433 && (!
Lim™s
.
d•th
 || 
Th»ads
.
	`maš
()->
roÙD•th
 / 
ONE_PLY
 <= Limits.depth))

436 ià(
idx
)

438 
i
 = (
idx
 - 1) % 20;

439 ià(((
roÙD•th
 / 
ONE_PLY
 + 
roÙPos
.
	`game_¶y
(è+ 
skPha£
[
i
]è/ 
skSize
[i]) % 2)

444 ià(
mašTh»ad
)

445 
mašTh»ad
->
be¡MoveChªges
 *ğ0.505, mašTh»ad->
çedLow
 = 
çl£
;

449 
RoÙMove
& 
rm
 : 
roÙMoves
)

450 
rm
.
´eviousScÜe
 =„m.
scÜe
;

453 
PVIdx
 = 0; PVIdx < 
muÉiPV
 && !
SigÇls
.
¡İ
; ++PVIdx)

456 ià(
roÙD•th
 >ğ5 * 
ONE_PLY
)

458 
d–
 = 
	`V®ue
(18);

459 
®pha
 = 
¡d
::
	`max
(
roÙMoves
[
PVIdx
].
´eviousScÜe
 - 
d–
,-
VALUE_INFINITE
);

460 
b‘a
 = 
¡d
::
	`mš
(
roÙMoves
[
PVIdx
].
´eviousScÜe
 + 
d–
, 
VALUE_INFINITE
);

466 
Œue
)

468 
be¡V®ue
 = ::
£¬ch
<
PV
>(
roÙPos
, 
ss
, 
®pha
, 
b‘a
, 
roÙD•th
, 
çl£
, false);

476 
¡d
::
	`¡abË_sÜt
(
roÙMoves
.
	`begš
(è+ 
PVIdx
,„oÙMoves.
	`’d
());

481 ià(
SigÇls
.
¡İ
)

486 iàĞ
mašTh»ad


487 && 
muÉiPV
 == 1

488 && (
be¡V®ue
 <ğ
®pha
 || be¡V®u>ğ
b‘a
)

489 && 
Time
.
	`–­£d
() > 3000)

490 
sync_šfo_out
 << 
UCI
::
	`pv
(
roÙPos
, 
roÙD•th
, 
®pha
, 
b‘a
è<< 
sync_šfo_’dl
;

494 ià(
be¡V®ue
 <ğ
®pha
)

496 
b‘a
 = (
®pha
 + beta) / 2;

497 
®pha
 = 
¡d
::
	`max
(
be¡V®ue
 - 
d–
, -
VALUE_INFINITE
);

499 ià(
mašTh»ad
)

501 
mašTh»ad
->
çedLow
 = 
Œue
;

502 
SigÇls
.
¡İOnPÚd”h™
 = 
çl£
;

505 ià(
be¡V®ue
 >ğ
b‘a
)

507 
®pha
 = (®ph¨+ 
b‘a
) / 2;

508 
b‘a
 = 
¡d
::
	`mš
(
be¡V®ue
 + 
d–
, 
VALUE_INFINITE
);

513 
d–
 += delta / 4 + 5;

515 
	`as£¹
(
®pha
 >ğ-
VALUE_INFINITE
 && 
b‘a
 <= VALUE_INFINITE);

519 
¡d
::
	`¡abË_sÜt
(
roÙMoves
.
	`begš
(),„oÙMoves.begš(è+ 
PVIdx
 + 1);

521 ià(!
mašTh»ad
)

524 ià(
SigÇls
.
¡İ
 || 
PVIdx
 + 1 =ğ
muÉiPV
 || 
Time
.
	`–­£d
() > 3000)

525 
sync_šfo_out
 << 
UCI
::
	`pv
(
roÙPos
, 
roÙD•th
, 
®pha
, 
b‘a
è<< 
sync_šfo_’dl
;

528 ià(!
SigÇls
.
¡İ
)

529 
com¶‘edD•th
 = 
roÙD•th
;

531 ià(!
mašTh»ad
)

535 ià(
skl
.
	`’abËd
(è&& skl.
	`time_to_pick
(
roÙD•th
))

536 
skl
.
	`pick_be¡
(
muÉiPV
);

539 iàĞ
Lim™s
.
m©e


540 && 
be¡V®ue
 >ğ
VALUE_MATE_IN_MAX_PLY


541 && 
VALUE_MATE
 - 
be¡V®ue
 <ğ2 * 
Lim™s
.
m©e
)

542 
SigÇls
.
¡İ
 = 
Œue
;

545 ià(
Lim™s
.
	`u£_time_mªagem’t
())

547 ià(!
SigÇls
.
¡İ
 && !SigÇls.
¡İOnPÚd”h™
)

552 cÚ¡ 
F
[] = { 
mašTh»ad
->
çedLow
,

553 
be¡V®ue
 - 
mašTh»ad
->
´eviousScÜe
 };

555 
im´ovšgFaùÜ
 = 
¡d
::
	`max
(229, std::
	`mš
(715, 357 + 119 * 
F
[0] - 6 * F[1]));

556 
un¡abËPvFaùÜ
 = 1 + 
mašTh»ad
->
be¡MoveChªges
;

558 
boŞ
 
doEasyMove
 = 
roÙMoves
[0].
pv
[0] =ğ
—syMove


559 && 
mašTh»ad
->
be¡MoveChªges
 < 0.03

560 && 
Time
.
	`–­£d
(è> Time.
	`İtimum
() * 5 / 44;

562 iàĞ
roÙMoves
.
	`size
() == 1

563 || 
Time
.
	`–­£d
(è> Time.
	`İtimum
(è* 
un¡abËPvFaùÜ
 * 
im´ovšgFaùÜ
 / 628

564 || (
mašTh»ad
->
—syMovePÏyed
 = 
doEasyMove
, doEasyMove))

568 ià(
Lim™s
.
pÚd”
)

569 
SigÇls
.
¡İOnPÚd”h™
 = 
Œue
;

571 
SigÇls
.
¡İ
 = 
Œue
;

575 ià(
roÙMoves
[0].
pv
.
	`size
() >= 3)

576 
EasyMove
.
	`upd©e
(
roÙPos
, 
roÙMoves
[0].
pv
);

578 
EasyMove
.
	`ş—r
();

582 ià(!
mašTh»ad
)

587 ià(
EasyMove
.
¡abËCÁ
 < 6 || 
mašTh»ad
->
—syMovePÏyed
)

588 
EasyMove
.
	`ş—r
();

591 ià(
skl
.
	`’abËd
())

592 
¡d
::
	`sw­
(
roÙMoves
[0], *¡d::
	`fšd
ÔoÙMoves.
	`begš
(),

593 
roÙMoves
.
	`’d
(), 
skl
.
	`be¡_move
(
muÉiPV
)));

594 
	}
}

597 
	gÇme¥aû
 {

601 
	g‹m¶©e
 <
NodeTy³
 
	gNT
>

602 
V®ue
 
£¬ch
(
Pos™iÚ
& 
pos
, 
Sck
* 
ss
, V®u
®pha
, V®u
b‘a
, 
D•th
 
d•th
, 
boŞ
 
cutNode
, boŞ 
skE¬lyPrunšg
) {

604 cÚ¡ 
boŞ
 
	gPvNode
 = 
NT
 =ğ
PV
;

605 cÚ¡ 
boŞ
 
	groÙNode
 = 
PvNode
 && (
ss
-1)->
¶y
 == 0;

607 
as£¹
(-
VALUE_INFINITE
 <ğ
®pha
 &&‡Íh¨< 
b‘a
 && beta <= VALUE_INFINITE);

608 
as£¹
(
PvNode
 || (
®pha
 =ğ
b‘a
 - 1));

609 
as£¹
(
DEPTH_ZERO
 < 
d•th
 && d•th < 
DEPTH_MAX
);

610 
as£¹
(!(
PvNode
 && 
cutNode
));

611 
as£¹
(
d•th
 / 
ONE_PLY
 * ONE_PLY == depth);

613 
Move
 
	gpv
[
MAX_PLY
+1], 
	gqu›tsS—rched
[64];

614 
S‹Info
 
	g¡
;

615 
TTEÁry
* 
	g‰e
;

616 
Key
 
	gposKey
;

617 
Move
 
	g‰Move
, 
	gmove
, 
	gexşudedMove
, 
	gbe¡Move
;

618 
D•th
 
	gex‹nsiÚ
, 
	gÃwD•th
;

619 
V®ue
 
	gbe¡V®ue
, 
	gv®ue
, 
	g‰V®ue
, 
	gev®
;

620 
boŞ
 
	g‰H™
, 
	gšCheck
, 
	ggivesCheck
, 
	gsšguÏrEx‹nsiÚNode
, 
	gim´ovšg
;

621 
boŞ
 
	gÿ±u»OrPromÙiÚ
, 
	gdoFuÎD•thS—rch
, 
	gmoveCouÁPrunšg
, 
	gskQu›ts
;

622 
P›û
 
	gmoved_p›û
;

623 
	gmoveCouÁ
, 
	gqu›tCouÁ
;

626 
Th»ad
* 
	gthisTh»ad
 = 
pos
.
this_th»ad
();

627 
	gšCheck
 = 
pos
.
check”s
();

628 
	gmoveCouÁ
 = 
qu›tCouÁ
 = 
ss
->
moveCouÁ
 = 0;

629 
	gss
->
	ghi¡Üy
 = 0;

630 
	gbe¡V®ue
 = -
VALUE_INFINITE
;

631 
	gss
->
	g¶y
 = (
ss
-1)->
¶y
 + 1;

634 ià(
	gthisTh»ad
->
	g»£tC®ls
.
lßd
(
¡d
::
memÜy_Üd”_»Ïxed
))

636 
thisTh»ad
->
»£tC®ls
 = 
çl£
;

640 
	gthisTh»ad
->
	gÿÎsCÁ
 = 
Lim™s
.
nodes
 ? 
¡d
::
mš
(4096, (Limits.nodes / 1024))

644 ià(--
	gthisTh»ad
->
	gÿÎsCÁ
 <= 0)

646 
Th»ad
* 
th
 : 
Th»ads
)

647 
th
->
»£tC®ls
 = 
Œue
;

649 
check_time
();

653 ià(
	gPvNode
 && 
	gthisTh»ad
->
	gmaxPly
 < 
	gss
->
	g¶y
)

654 
	gthisTh»ad
->
	gmaxPly
 = 
ss
->
¶y
;

656 ià(!
	groÙNode
)

659 ià(
	gSigÇls
.
	g¡İ
.
lßd
(
¡d
::
memÜy_Üd”_»Ïxed
è|| 
pos
.
is_d¿w
(
ss
->
¶y
è|| ss->¶y >ğ
MAX_PLY
)

660  
ss
->
¶y
 >ğ
MAX_PLY
 && !
šCheck
 ? 
ev®u©e
(
pos
)

661 : 
D¿wV®ue
[
pos
.
side_to_move
()];

669 
	g®pha
 = 
¡d
::
max
(
m©ed_š
(
ss
->
¶y
), 
®pha
);

670 
	gb‘a
 = 
¡d
::
mš
(
m©e_š
(
ss
->
¶y
+1), 
b‘a
);

671 ià(
	g®pha
 >ğ
b‘a
)

672  
®pha
;

675 
as£¹
(0 <ğ
ss
->
¶y
 && ss->¶y < 
MAX_PLY
);

677 
	gss
->
	gcu¼’tMove
 = (
ss
+1)->
exşudedMove
 = 
be¡Move
 = 
MOVE_NONE
;

678 
	gss
->
	gcouÁ”Moves
 = &
thisTh»ad
->
couÁ”MoveHi¡Üy
[
NO_PIECE
][0];

679 (
	gss
+2)->
	gkËrs
[0] = (
ss
+2)->
kËrs
[1] = 
MOVE_NONE
;

680 
Squ¬e
 
	g´evSq
 = 
to_sq
((
ss
-1)->
cu¼’tMove
);

685 
	gexşudedMove
 = 
ss
->
exşudedMove
;

686 
	gposKey
 = 
pos
.
key
(è^ 
Key
(
exşudedMove
);

687 
	g‰e
 = 
TT
.
´obe
(
posKey
, 
‰H™
);

688 
	g‰V®ue
 = 
‰H™
 ? 
v®ue_äom_‰
(
‰e
->
v®ue
(), 
ss
->
¶y
è: 
VALUE_NONE
;

689 
	g‰Move
 = 
roÙNode
 ? 
thisTh»ad
->
roÙMoves
[thisTh»ad->
PVIdx
].
pv
[0]

690 : 
‰H™
 ? 
‰e
->
move
(è: 
MOVE_NONE
;

693 iàĞ!
	gPvNode


694 && 
	g‰H™


695 && 
	g‰e
->
d•th
() >= depth

696 && 
‰V®ue
 !ğ
VALUE_NONE


697 && (
‰V®ue
 >ğ
b‘a
 ? (
‰e
->
bound
(è& 
BOUND_LOWER
)

698 : (
‰e
->
bound
(è& 
BOUND_UPPER
)))

701 ià(
‰Move
)

703 ià(
‰V®ue
 >ğ
b‘a
)

705 ià(!
pos
.
ÿ±u»_Ü_´omÙiÚ
(
‰Move
))

706 
upd©e_¡©s
(
pos
, 
ss
, 
‰Move
, 
nuÎ±r
, 0, 
¡©_bÚus
(
d•th
));

709 ià((
	gss
-1)->
	gmoveCouÁ
 =ğ1 && !
pos
.
ÿ±u»d_p›û
())

710 
upd©e_cm_¡©s
(
ss
-1, 
pos
.
p›û_Ú
(
´evSq
),…»vSq, -
¡©_bÚus
(
d•th
 + 
ONE_PLY
));

713 ià(!
	gpos
.
ÿ±u»_Ü_´omÙiÚ
(
‰Move
))

715 
	g³ÇÉy
 = -
¡©_bÚus
(
d•th
);

716 
	gthisTh»ad
->
	ghi¡Üy
.
upd©e
(
pos
.
side_to_move
(), 
‰Move
, 
³ÇÉy
);

717 
upd©e_cm_¡©s
(
ss
, 
pos
.
moved_p›û
(
‰Move
), 
to_sq
ÑtMove), 
³ÇÉy
);

720  
	g‰V®ue
;

724 ià(!
	groÙNode
 && 
	gTB
::
C¬dš®™y
)

726 
p›ûsCouÁ
 = 
pos
.
couÁ
<
ALL_PIECES
>();

728 iàĞ
	gp›ûsCouÁ
 <ğ
TB
::
C¬dš®™y


729 && (
p›ûsCouÁ
 < 
TB
::
C¬dš®™y
 || 
d•th
 >ğTB::
ProbeD•th
)

730 && 
pos
.
ruË50_couÁ
() == 0

731 && !
pos
.
ÿn_ÿ¡Ë
(
ANY_CASTLING
))

733 
TB
::
ProbeS‹
 
”r
;

734 
	gTB
::
WDLScÜe
 
v
 = 
TabËba£s
::
´obe_wdl
(
pos
, &
”r
);

736 ià(
	g”r
 !ğ
TB
::
ProbeS‹
::
FAIL
)

738 
thisTh»ad
->
tbH™s
++;

740 
	gd¿wScÜe
 = 
TB
::
U£RuË50
 ? 1 : 0;

742 
	gv®ue
 = 
v
 < -
d¿wScÜe
 ? -
VALUE_MATE
 + 
MAX_PLY
 + 
ss
->
¶y


743 : 
v
 > 
d¿wScÜe
 ? 
VALUE_MATE
 - 
MAX_PLY
 - 
ss
->
¶y


744 : 
VALUE_DRAW
 + 2 * 
v
 * 
d¿wScÜe
;

746 
	g‰e
->
§ve
(
posKey
, 
v®ue_to_‰
(
v®ue
, 
ss
->
¶y
), 
BOUND_EXACT
,

747 
¡d
::
mš
(
DEPTH_MAX
 - 
ONE_PLY
, 
d•th
 + 6 * ONE_PLY),

748 
MOVE_NONE
, 
VALUE_NONE
, 
TT
.
g’”©iÚ
());

750  
	gv®ue
;

756 ià(
	gšCheck
)

758 
	gss
->
	g¡©icEv®
 = 
ev®
 = 
VALUE_NONE
;

759 
	gmoves_loİ
;

762 ià(
	g‰H™
)

765 ià((
	gss
->
	g¡©icEv®
 = 
ev®
 = 
‰e
->ev®()è=ğ
VALUE_NONE
)

766 
ev®
 = 
ss
->
¡©icEv®
 = 
ev®u©e
(
pos
);

769 ià(
	g‰V®ue
 !ğ
VALUE_NONE
)

770 ià(
‰e
->
bound
(è& (
‰V®ue
 > 
ev®
 ? 
BOUND_LOWER
 : 
BOUND_UPPER
))

771 
ev®
 = 
‰V®ue
;

775 
	gev®
 = 
ss
->
¡©icEv®
 =

776 (
ss
-1)->
cu¼’tMove
 !ğ
MOVE_NULL
 ? 
ev®u©e
(
pos
)

777 : -(
ss
-1)->
¡©icEv®
 + 2 * 
Ev®
::
Tempo
;

779 
	g‰e
->
§ve
(
posKey
, 
VALUE_NONE
, 
BOUND_NONE
, 
DEPTH_NONE
, 
MOVE_NONE
,

780 
ss
->
¡©icEv®
, 
TT
.
g’”©iÚ
());

783 ià(
	gskE¬lyPrunšg
)

784 
	gmoves_loİ
;

787 iàĞ!
	gPvNode


788 && 
	gd•th
 < 4 * 
	gONE_PLY


789 && 
	gev®
 + 
	g¿zÜ_m¬gš
[
d•th
 / 
ONE_PLY
] <ğ
®pha
)

791 ià(
d•th
 <ğ
ONE_PLY
)

792  
q£¬ch
<
NÚPV
, 
	gçl£
>(
	gpos
, 
	gss
, 
	g®pha
,‡lpha+1);

794 
V®ue
 
	g¿Íha
 = 
®pha
 - 
¿zÜ_m¬gš
[
d•th
 / 
ONE_PLY
];

795 
V®ue
 
	gv
 = 
q£¬ch
<
NÚPV
, 
	gçl£
>(
	gpos
, 
	gss
, 
	g¿Íha
,„alpha+1);

796 ià(
	gv
 <ğ
¿Íha
)

797  
v
;

801 iàĞ!
	groÙNode


802 && 
	gd•th
 < 7 * 
	gONE_PLY


803 && 
	gev®
 - 
fut™y_m¬gš
(
d•th
è>ğ
b‘a


804 && 
ev®
 < 
VALUE_KNOWN_WIN


805 && 
pos
.
nÚ_·wn_m©”Ÿl
Õos.
side_to_move
()))

806  
ev®
;

809 iàĞ!
	gPvNode


810 && 
	gev®
 >ğ
b‘a


811 && (
ss
->
¡©icEv®
 >ğ
b‘a
 - 35 * (
d•th
 / 
ONE_PLY
 - 6) || depth >= 13 * ONE_PLY)

812 && 
pos
.
nÚ_·wn_m©”Ÿl
Õos.
side_to_move
()))

815 
as£¹
(
ev®
 - 
b‘a
 >= 0);

818 
D•th
 
	gR
 = ((823 + 67 * 
d•th
 / 
ONE_PLY
è/ 256 + 
¡d
::
mš
((
ev®
 - 
b‘a
è/ 
PawnV®ueMg
, 3)è* 
	gONE_PLY
;

820 
	gss
->
	gcu¼’tMove
 = 
MOVE_NULL
;

821 
	gss
->
	gcouÁ”Moves
 = &
thisTh»ad
->
couÁ”MoveHi¡Üy
[
NO_PIECE
][0];

823 
	gpos
.
do_nuÎ_move
(
¡
);

824 
V®ue
 
	gnuÎV®ue
 = 
d•th
-
R
 < 
ONE_PLY
 ? -
q£¬ch
<
NÚPV
, 
	gçl£
>(
	gpos
, 
	gss
+1, -
	gb‘a
, -beta+1)

825 : - 
£¬ch
<
NÚPV
>(
pos
, 
	gss
+1, -
	gb‘a
, -b‘a+1, 
	gd•th
-
	gR
, !
	gcutNode
, 
	gŒue
);

826 
	gpos
.
undo_nuÎ_move
();

828 ià(
	gnuÎV®ue
 >ğ
b‘a
)

831 ià(
nuÎV®ue
 >ğ
VALUE_MATE_IN_MAX_PLY
)

832 
nuÎV®ue
 = 
b‘a
;

834 ià(
	gd•th
 < 12 * 
	gONE_PLY
 && 
abs
(
b‘a
è< 
	gVALUE_KNOWN_WIN
)

835  
	gnuÎV®ue
;

838 
V®ue
 
	gv
 = 
d•th
-
R
 < 
ONE_PLY
 ? 
q£¬ch
<
NÚPV
, 
	gçl£
>(
	gpos
, 
	gss
, 
	gb‘a
-1, beta)

839 : 
£¬ch
<
NÚPV
>(
pos
, 
	gss
, 
	gb‘a
-1, b‘a, 
	gd•th
-
	gR
, 
	gçl£
, 
	gŒue
);

841 ià(
	gv
 >ğ
b‘a
)

842  
nuÎV®ue
;

849 iàĞ!
	gPvNode


850 && 
	gd•th
 >ğ5 * 
ONE_PLY


851 && 
abs
(
b‘a
è< 
VALUE_MATE_IN_MAX_PLY
)

853 
V®ue
 
rb‘a
 = 
¡d
::
mš
(
b‘a
 + 200, 
VALUE_INFINITE
);

854 
D•th
 
	grd•th
 = 
d•th
 - 4 * 
ONE_PLY
;

856 
as£¹
(
rd•th
 >ğ
ONE_PLY
);

857 
as£¹
(
is_ok
((
ss
-1)->
cu¼’tMove
));

859 
MovePick”
 
mp
(
pos
, 
‰Move
, 
rb‘a
 - 
ss
->
¡©icEv®
);

861 (
	gmove
 = 
mp
.
Ãxt_move
()è!ğ
MOVE_NONE
)

862 ià(
pos
.
Ëg®
(
move
))

864 
ss
->
cu¼’tMove
 = 
move
;

865 
	gss
->
	gcouÁ”Moves
 = &
thisTh»ad
->
couÁ”MoveHi¡Üy
[
pos
.
moved_p›û
(
move
)][
to_sq
(move)];

867 
	gpos
.
do_move
(
move
, 
¡
);

868 
	gv®ue
 = -
£¬ch
<
NÚPV
>(
pos
, 
	gss
+1, -
	grb‘a
, -rb‘a+1, 
	grd•th
, !
	gcutNode
, 
	gçl£
);

869 
	gpos
.
undo_move
(
move
);

870 ià(
	gv®ue
 >ğ
rb‘a
)

871  
v®ue
;

876 iàĞ
	gd•th
 >ğ6 * 
ONE_PLY


877 && !
‰Move


878 && (
PvNode
 || 
ss
->
¡©icEv®
 + 256 >ğ
b‘a
))

880 
D•th
 
d
 = (3 * 
d•th
 / (4 * 
ONE_PLY
) - 2) * ONE_PLY;

881 
	g£¬ch
<
	gNT
>(
	gpos
, 
	gss
, 
	g®pha
, 
	gb‘a
, 
	gd
, 
	gcutNode
, 
	gŒue
);

883 
	g‰e
 = 
TT
.
´obe
(
posKey
, 
‰H™
);

884 
	g‰Move
 = 
‰H™
 ? 
‰e
->
move
(è: 
MOVE_NONE
;

887 
	gmoves_loİ
:

889 cÚ¡ 
CouÁ”MoveSts
& 
cmh
 = *(
ss
-1)->
couÁ”Moves
;

890 cÚ¡ 
	gCouÁ”MoveSts
& 
	gfmh
 = *(
ss
-2)->
couÁ”Moves
;

891 cÚ¡ 
	gCouÁ”MoveSts
& 
	gfm2
 = *(
ss
-4)->
couÁ”Moves
;

893 
MovePick”
 
mp
(
pos
, 
‰Move
, 
d•th
, 
ss
);

894 
	gv®ue
 = 
be¡V®ue
;

895 
	gim´ovšg
 = 
ss
->
¡©icEv®
 >= (ss-2)->staticEval

897 ||(
ss
-2)->
¡©icEv®
 =ğ
VALUE_NONE
;

899 
	gsšguÏrEx‹nsiÚNode
 = !
roÙNode


900 && 
d•th
 >ğ8 * 
ONE_PLY


901 && 
‰Move
 !ğ
MOVE_NONE


902 && 
‰V®ue
 !ğ
VALUE_NONE


903 && !
exşudedMove


904 && (
‰e
->
bound
(è& 
BOUND_LOWER
)

905 && 
‰e
->
d•th
(è>ğd•th - 3 * 
ONE_PLY
;

906 
	gskQu›ts
 = 
çl£
;

910 (
	gmove
 = 
mp
.
Ãxt_move
(
skQu›ts
)è!ğ
MOVE_NONE
)

912 
as£¹
(
is_ok
(
move
));

914 ià(
	gmove
 =ğ
exşudedMove
)

920 ià(
	groÙNode
 && !
	g¡d
::
couÁ
(
thisTh»ad
->
roÙMoves
.
begš
(è+hisTh»ad->
PVIdx
,

921 
thisTh»ad
->
roÙMoves
.
’d
(), 
move
))

924 
	gss
->
	gmoveCouÁ
 = ++
moveCouÁ
;

926 ià(
	groÙNode
 && 
	gthisTh»ad
 =ğ
Th»ads
.
maš
(è&& 
Time
.
–­£d
() > 3000)

927 
sync_šfo_out
 << "šfØd•th " << 
d•th
 / 
ONE_PLY


928 << " cu¼mov" << 
UCI
::
move
(move, 
pos
.
is_chess960
())

929 << " cu¼mov’umb” " << 
	gmoveCouÁ
 + 
	gthisTh»ad
->
	gPVIdx
 << 
	gsync_šfo_’dl
;

931 ià(
	gPvNode
)

932 (
	gss
+1)->
	gpv
 = 
nuÎ±r
;

934 
	gex‹nsiÚ
 = 
DEPTH_ZERO
;

935 
	gÿ±u»OrPromÙiÚ
 = 
pos
.
ÿ±u»_Ü_´omÙiÚ
(
move
);

936 
	gmoved_p›û
 = 
pos
.
moved_p›û
(
move
);

938 
	ggivesCheck
 = 
ty³_of
(
move
è=ğ
NORMAL
 && !
pos
.
discov”ed_check_ÿndid©es
()

939 ? 
pos
.
check_squ¬es
(
ty³_of
Õos.
p›û_Ú
(
äom_sq
(
move
)))è& 
to_sq
(move)

940 : 
pos
.
gives_check
(
move
);

942 
	gmoveCouÁPrunšg
 = 
d•th
 < 16 * 
ONE_PLY


943 && 
moveCouÁ
 >ğ
Fut™yMoveCouÁs
[
im´ovšg
][
d•th
 / 
ONE_PLY
];

952 iàĞ
	gsšguÏrEx‹nsiÚNode


953 && 
	gmove
 =ğ
‰Move


954 && 
pos
.
Ëg®
(
move
))

956 
V®ue
 
rB‘a
 = 
¡d
::
max
(
‰V®ue
 - 2 * 
d•th
 / 
ONE_PLY
, -
VALUE_MATE
);

957 
D•th
 
	gd
 = (
d•th
 / (2 * 
ONE_PLY
)) * ONE_PLY;

958 
	gss
->
	gexşudedMove
 = 
move
;

959 
	gv®ue
 = 
£¬ch
<
NÚPV
>(
pos
, 
	gss
, 
	grB‘a
 - 1,„B‘a, 
	gd
, 
	gcutNode
, 
	gŒue
);

960 
	gss
->
	gexşudedMove
 = 
MOVE_NONE
;

962 ià(
	gv®ue
 < 
	grB‘a
)

963 
	gex‹nsiÚ
 = 
ONE_PLY
;

965 iàĞ
	ggivesCheck


966 && !
	gmoveCouÁPrunšg


967 && 
	gpos
.
£e_ge
(
move
, 
VALUE_ZERO
))

968 
	gex‹nsiÚ
 = 
ONE_PLY
;

971 
	gÃwD•th
 = 
d•th
 - 
ONE_PLY
 + 
ex‹nsiÚ
;

974 iàĞ!
	groÙNode


975 && 
	gpos
.
nÚ_·wn_m©”Ÿl
(
pos
.
side_to_move
())

976 && 
	gbe¡V®ue
 > 
	gVALUE_MATED_IN_MAX_PLY
)

978 iàĞ!
	gÿ±u»OrPromÙiÚ


979 && !
	ggivesCheck


980 && (!
	gpos
.
advªûd_·wn_push
(
move
è||…os.
nÚ_·wn_m©”Ÿl
(è>ğ
V®ue
(5000)))

983 ià(
moveCouÁPrunšg
)

985 
skQu›ts
 = 
Œue
;

990 
	glmrD•th
 = 
¡d
::
max
(
ÃwD•th
 - 
»duùiÚ
<
PvNode
>(
im´ovšg
, 
d•th
, 
moveCouÁ
), 
DEPTH_ZERO
è/ 
	gONE_PLY
;

993 iàĞ
	glmrD•th
 < 3

994 && (
	gcmh
[
moved_p›û
][
to_sq
(
move
)] < 
	gCouÁ”MovePruÃTh»shŞd
)

995 && (
	gfmh
[
moved_p›û
][
to_sq
(
move
)] < 
	gCouÁ”MovePruÃTh»shŞd
))

999 iàĞ
	glmrD•th
 < 7

1000 && !
	gšCheck


1001 && 
	gss
->
	g¡©icEv®
 + 256 + 200 * 
	glmrD•th
 <ğ
®pha
)

1005 iàĞ
	glmrD•th
 < 8

1006 && !
	gpos
.
£e_ge
(
move
, 
V®ue
(-35 * 
lmrD•th
 *†mrDepth)))

1009 iàĞ
	gd•th
 < 7 * 
	gONE_PLY


1010 && !
	gex‹nsiÚ


1011 && !
	gpos
.
£e_ge
(
move
, -
PawnV®ueEg
 * (
d•th
 / 
ONE_PLY
)))

1016 
´eãtch
(
TT
.
fœ¡_’Œy
(
pos
.
key_aá”
(
move
)));

1019 ià(!
	groÙNode
 && !
	gpos
.
Ëg®
(
move
))

1021 
	gss
->
	gmoveCouÁ
 = --
moveCouÁ
;

1026 
	gss
->
	gcu¼’tMove
 = 
move
;

1027 
	gss
->
	gcouÁ”Moves
 = &
thisTh»ad
->
couÁ”MoveHi¡Üy
[
moved_p›û
][
to_sq
(
move
)];

1030 
	gpos
.
do_move
(
move
, 
¡
, 
givesCheck
);

1034 iàĞ
	gd•th
 >ğ3 * 
ONE_PLY


1035 && 
moveCouÁ
 > 1

1036 && (!
ÿ±u»OrPromÙiÚ
 || 
moveCouÁPrunšg
))

1038 
D•th
 
r
 = 
»duùiÚ
<
PvNode
>(
im´ovšg
, 
	gd•th
, 
	gmoveCouÁ
);

1040 ià(
	gÿ±u»OrPromÙiÚ
)

1041 
	gr
 -ğ
r
 ? 
ONE_PLY
 : 
DEPTH_ZERO
;

1045 ià(
	gcutNode
)

1046 
	gr
 +ğ2 * 
ONE_PLY
;

1051 iàĞ
ty³_of
(
move
è=ğ
NORMAL


1052 && !
pos
.
£e_ge
(
make_move
(
to_sq
(
move
), 
äom_sq
(move)), 
VALUE_ZERO
))

1053 
	gr
 -ğ2 * 
ONE_PLY
;

1055 
	gss
->
	ghi¡Üy
 = 
cmh
[
moved_p›û
][
to_sq
(
move
)]

1056 + 
fmh
[
moved_p›û
][
to_sq
(
move
)]

1057 + 
fm2
[
moved_p›û
][
to_sq
(
move
)]

1058 + 
thisTh»ad
->
hi¡Üy
.
g‘
(~
pos
.
side_to_move
(), 
move
)

1062 ià(
	gss
->
	ghi¡Üy
 > 0 && (ss-1)->history < 0)

1063 
	gr
 -ğ
ONE_PLY
;

1065 ià(
	gss
->
	ghi¡Üy
 < 0 && (ss-1)->history > 0)

1066 
	gr
 +ğ
ONE_PLY
;

1069 
	gr
 = 
¡d
::
max
(
DEPTH_ZERO
, (
r
 / 
ONE_PLY
 - 
ss
->
hi¡Üy
 / 20000) * ONE_PLY);

1072 
D•th
 
	gd
 = 
¡d
::
max
(
ÃwD•th
 - 
r
, 
ONE_PLY
);

1074 
	gv®ue
 = -
£¬ch
<
NÚPV
>(
pos
, 
	gss
+1, -(
	g®pha
+1), -®pha, 
	gd
, 
	gŒue
, 
	gçl£
);

1076 
	gdoFuÎD•thS—rch
 = (
v®ue
 > 
®pha
 && 
d
 !ğ
ÃwD•th
);

1079 
	gdoFuÎD•thS—rch
 = !
PvNode
 || 
moveCouÁ
 > 1;

1082 ià(
	gdoFuÎD•thS—rch
)

1083 
	gv®ue
 = 
ÃwD•th
 < 
ONE_PLY
 ?

1084 
givesCheck
 ? -
q£¬ch
<
NÚPV
, 
	gŒue
>(
	gpos
, 
	gss
+1, -(
	g®pha
+1), -alpha)

1085 : -
q£¬ch
<
NÚPV
, 
	gçl£
>(
	gpos
, 
	gss
+1, -(
	g®pha
+1), -alpha)

1086 : - 
£¬ch
<
NÚPV
>(
pos
, 
	gss
+1, -(
	g®pha
+1), -®pha, 
	gÃwD•th
, !
	gcutNode
, 
	gçl£
);

1091 ià(
	gPvNode
 && (
	gmoveCouÁ
 =ğ1 || (
v®ue
 > 
®pha
 && (
roÙNode
 || v®u< 
b‘a
))))

1093 (
ss
+1)->
pv
 =…v;

1094 (
	gss
+1)->
	gpv
[0] = 
MOVE_NONE
;

1096 
	gv®ue
 = 
ÃwD•th
 < 
ONE_PLY
 ?

1097 
givesCheck
 ? -
q£¬ch
<
PV
, 
	gŒue
>(
	gpos
, 
	gss
+1, -
	gb‘a
, -
	g®pha
)

1098 : -
q£¬ch
<
PV
, 
	gçl£
>(
	gpos
, 
	gss
+1, -
	gb‘a
, -
	g®pha
)

1099 : - 
£¬ch
<
PV
>(
pos
, 
	gss
+1, -
	gb‘a
, -
	g®pha
, 
	gÃwD•th
, 
	gçl£
, false);

1103 
	gpos
.
undo_move
(
move
);

1105 
as£¹
(
v®ue
 > -
VALUE_INFINITE
 && value < VALUE_INFINITE);

1111 ià(
	gSigÇls
.
	g¡İ
.
lßd
(
¡d
::
memÜy_Üd”_»Ïxed
))

1112  
VALUE_ZERO
;

1114 ià(
	groÙNode
)

1116 
	gRoÙMove
& 
	grm
 = *
¡d
::
fšd
(
thisTh»ad
->
roÙMoves
.
begš
(),

1117 
thisTh»ad
->
roÙMoves
.
’d
(), 
move
);

1120 ià(
	gmoveCouÁ
 =ğ1 || 
v®ue
 > 
®pha
)

1122 
rm
.
scÜe
 = 
v®ue
;

1123 
	grm
.
	gpv
.
»size
(1);

1125 
as£¹
((
ss
+1)->
pv
);

1127 
Move
* 
	gm
 = (
ss
+1)->
pv
; *m !ğ
MOVE_NONE
; ++m)

1128 
	grm
.
	gpv
.
push_back
(*
m
);

1133 ià(
	gmoveCouÁ
 > 1 && 
	gthisTh»ad
 =ğ
Th»ads
.
maš
())

1134 ++
¡©ic_ÿ¡
<
MašTh»ad
*>(
thisTh»ad
)->
be¡MoveChªges
;

1140 
	grm
.
	gscÜe
 = -
VALUE_INFINITE
;

1143 ià(
	gv®ue
 > 
	gbe¡V®ue
)

1145 
	gbe¡V®ue
 = 
v®ue
;

1147 ià(
	gv®ue
 > 
	g®pha
)

1149 
	gbe¡Move
 = 
move
;

1151 ià(
	gPvNode
 && !
	groÙNode
)

1152 
upd©e_pv
(
ss
->
pv
, 
move
, (ss+1)->pv);

1154 ià(
	gPvNode
 && 
	gv®ue
 < 
	gb‘a
)

1155 
	g®pha
 = 
v®ue
;

1158 
as£¹
(
v®ue
 >ğ
b‘a
);

1164 ià(!
	gÿ±u»OrPromÙiÚ
 && 
	gmove
 !ğ
be¡Move
 && 
qu›tCouÁ
 < 64)

1165 
qu›tsS—rched
[
qu›tCouÁ
++] = 
move
;

1181 
as£¹
(
moveCouÁ
 || !
šCheck
 || 
exşudedMove
 || !
MoveLi¡
<
LEGAL
>(
pos
).
size
());

1183 ià(!
	gmoveCouÁ
)

1184 
	gbe¡V®ue
 = 
exşudedMove
 ? 
®pha


1185 : 
šCheck
 ? 
m©ed_š
(
ss
->
¶y
è: 
D¿wV®ue
[
pos
.
side_to_move
()];

1186 ià(
	gbe¡Move
)

1190 ià(!
	gpos
.
ÿ±u»_Ü_´omÙiÚ
(
be¡Move
))

1191 
upd©e_¡©s
(
pos
, 
ss
, 
be¡Move
, 
qu›tsS—rched
, 
qu›tCouÁ
, 
¡©_bÚus
(
d•th
));

1194 ià((
	gss
-1)->
	gmoveCouÁ
 =ğ1 && !
pos
.
ÿ±u»d_p›û
())

1195 
upd©e_cm_¡©s
(
ss
-1, 
pos
.
p›û_Ú
(
´evSq
),…»vSq, -
¡©_bÚus
(
d•th
 + 
ONE_PLY
));

1198 iàĞ
	gd•th
 >ğ3 * 
ONE_PLY


1199 && !
pos
.
ÿ±u»d_p›û
()

1200 && 
is_ok
((
ss
-1)->
cu¼’tMove
))

1201 
upd©e_cm_¡©s
(
ss
-1, 
pos
.
p›û_Ú
(
´evSq
),…»vSq, 
¡©_bÚus
(
d•th
));

1203 ià(!
	gexşudedMove
)

1204 
	g‰e
->
§ve
(
posKey
, 
v®ue_to_‰
(
be¡V®ue
, 
ss
->
¶y
),

1205 
be¡V®ue
 >ğ
b‘a
 ? 
BOUND_LOWER
 :

1206 
PvNode
 && 
be¡Move
 ? 
BOUND_EXACT
 : 
BOUND_UPPER
,

1207 
d•th
, 
be¡Move
, 
ss
->
¡©icEv®
, 
TT
.
g’”©iÚ
());

1209 
as£¹
(
be¡V®ue
 > -
VALUE_INFINITE
 && bestValue < VALUE_INFINITE);

1211  
	gbe¡V®ue
;

1218 
	g‹m¶©e
 <
NodeTy³
 
	gNT
, 
boŞ
 
	gInCheck
>

1219 
V®ue
 
q£¬ch
(
Pos™iÚ
& 
pos
, 
Sck
* 
ss
, V®u
®pha
, V®u
b‘a
, 
D•th
 
d•th
) {

1221 cÚ¡ 
boŞ
 
	gPvNode
 = 
NT
 =ğ
PV
;

1223 
as£¹
(
InCheck
 =ğ!!
pos
.
check”s
());

1224 
as£¹
(
®pha
 >ğ-
VALUE_INFINITE
 &&‡Íh¨< 
b‘a
 && beta <= VALUE_INFINITE);

1225 
as£¹
(
PvNode
 || (
®pha
 =ğ
b‘a
 - 1));

1226 
as£¹
(
d•th
 <ğ
DEPTH_ZERO
);

1227 
as£¹
(
d•th
 / 
ONE_PLY
 * ONE_PLY == depth);

1229 
Move
 
	gpv
[
MAX_PLY
+1];

1230 
S‹Info
 
	g¡
;

1231 
TTEÁry
* 
	g‰e
;

1232 
Key
 
	gposKey
;

1233 
Move
 
	g‰Move
, 
	gmove
, 
	gbe¡Move
;

1234 
V®ue
 
	gbe¡V®ue
, 
	gv®ue
, 
	g‰V®ue
, 
	gfut™yV®ue
, 
	gfut™yBa£
, 
	gŞdAÍha
;

1235 
boŞ
 
	g‰H™
, 
	ggivesCheck
, 
	gevasiÚPruÇbË
;

1236 
D•th
 
	g‰D•th
;

1238 ià(
	gPvNode
)

1240 
	gŞdAÍha
 = 
®pha
;

1241 (
	gss
+1)->
	gpv
 = 
pv
;

1242 
	gss
->
	gpv
[0] = 
MOVE_NONE
;

1245 
	gss
->
	gcu¼’tMove
 = 
be¡Move
 = 
MOVE_NONE
;

1246 
	gss
->
	g¶y
 = (
ss
-1)->
¶y
 + 1;

1249 ià(
	gpos
.
is_d¿w
(
ss
->
¶y
è|| 
	gss
->
	g¶y
 >ğ
MAX_PLY
)

1250  
ss
->
¶y
 >ğ
MAX_PLY
 && !
InCheck
 ? 
ev®u©e
(
pos
)

1251 : 
D¿wV®ue
[
pos
.
side_to_move
()];

1253 
as£¹
(0 <ğ
ss
->
¶y
 && ss->¶y < 
MAX_PLY
);

1258 
	g‰D•th
 = 
InCheck
 || 
d•th
 >ğ
DEPTH_QS_CHECKS
 ? DEPTH_QS_CHECKS

1259 : 
DEPTH_QS_NO_CHECKS
;

1262 
	gposKey
 = 
pos
.
key
();

1263 
	g‰e
 = 
TT
.
´obe
(
posKey
, 
‰H™
);

1264 
	g‰Move
 = 
‰H™
 ? 
‰e
->
move
(è: 
MOVE_NONE
;

1265 
	g‰V®ue
 = 
‰H™
 ? 
v®ue_äom_‰
(
‰e
->
v®ue
(), 
ss
->
¶y
è: 
VALUE_NONE
;

1267 iàĞ!
	gPvNode


1268 && 
	g‰H™


1269 && 
	g‰e
->
d•th
(è>ğ
‰D•th


1270 && 
‰V®ue
 !ğ
VALUE_NONE


1271 && (
‰V®ue
 >ğ
b‘a
 ? (
‰e
->
bound
(è& 
BOUND_LOWER
)

1272 : (
‰e
->
bound
(è& 
BOUND_UPPER
)))

1273  
‰V®ue
;

1276 ià(
	gInCheck
)

1278 
	gss
->
	g¡©icEv®
 = 
VALUE_NONE
;

1279 
	gbe¡V®ue
 = 
fut™yBa£
 = -
VALUE_INFINITE
;

1283 ià(
	g‰H™
)

1286 ià((
	gss
->
	g¡©icEv®
 = 
be¡V®ue
 = 
‰e
->
ev®
()è=ğ
VALUE_NONE
)

1287 
ss
->
¡©icEv®
 = 
be¡V®ue
 = 
ev®u©e
(
pos
);

1290 ià(
	g‰V®ue
 !ğ
VALUE_NONE
)

1291 ià(
‰e
->
bound
(è& (
‰V®ue
 > 
be¡V®ue
 ? 
BOUND_LOWER
 : 
BOUND_UPPER
))

1292 
be¡V®ue
 = 
‰V®ue
;

1295 
	gss
->
	g¡©icEv®
 = 
be¡V®ue
 =

1296 (
ss
-1)->
cu¼’tMove
 !ğ
MOVE_NULL
 ? 
ev®u©e
(
pos
)

1297 : -(
ss
-1)->
¡©icEv®
 + 2 * 
Ev®
::
Tempo
;

1300 ià(
	gbe¡V®ue
 >ğ
b‘a
)

1302 ià(!
‰H™
)

1303 
‰e
->
§ve
(
pos
.
key
(), 
v®ue_to_‰
(
be¡V®ue
, 
ss
->
¶y
), 
BOUND_LOWER
,

1304 
DEPTH_NONE
, 
MOVE_NONE
, 
ss
->
¡©icEv®
, 
TT
.
g’”©iÚ
());

1306  
	gbe¡V®ue
;

1309 ià(
	gPvNode
 && 
	gbe¡V®ue
 > 
	g®pha
)

1310 
	g®pha
 = 
be¡V®ue
;

1312 
	gfut™yBa£
 = 
be¡V®ue
 + 128;

1319 
MovePick”
 
mp
(
pos
, 
‰Move
, 
d•th
, 
to_sq
((
ss
-1)->
cu¼’tMove
));

1322 (
	gmove
 = 
mp
.
Ãxt_move
()è!ğ
MOVE_NONE
)

1324 
as£¹
(
is_ok
(
move
));

1326 
	ggivesCheck
 = 
ty³_of
(
move
è=ğ
NORMAL
 && !
pos
.
discov”ed_check_ÿndid©es
()

1327 ? 
pos
.
check_squ¬es
(
ty³_of
Õos.
p›û_Ú
(
äom_sq
(
move
)))è& 
to_sq
(move)

1328 : 
pos
.
gives_check
(
move
);

1331 iàĞ!
	gInCheck


1332 && !
	ggivesCheck


1333 && 
	gfut™yBa£
 > -
	gVALUE_KNOWN_WIN


1334 && !
	gpos
.
advªûd_·wn_push
(
move
))

1336 
as£¹
(
ty³_of
(
move
è!ğ
ENPASSANT
);

1338 
	gfut™yV®ue
 = 
fut™yBa£
 + 
P›ûV®ue
[
EG
][
pos
.
p›û_Ú
(
to_sq
(
move
))];

1340 ià(
	gfut™yV®ue
 <ğ
®pha
)

1342 
be¡V®ue
 = 
¡d
::
max
(be¡V®ue, 
fut™yV®ue
);

1346 ià(
	gfut™yBa£
 <ğ
®pha
 && !
pos
.
£e_ge
(
move
, 
VALUE_ZERO
 + 1))

1348 
	gbe¡V®ue
 = 
¡d
::
max
(
be¡V®ue
, 
fut™yBa£
);

1354 
	gevasiÚPruÇbË
 = 
InCheck


1355 && 
d•th
 !ğ
DEPTH_ZERO


1356 && 
be¡V®ue
 > 
VALUE_MATED_IN_MAX_PLY


1357 && !
pos
.
ÿ±u»
(
move
);

1360 iàĞ(!
	gInCheck
 || 
	gevasiÚPruÇbË
)

1361 && 
ty³_of
(
move
è!ğ
PROMOTION


1362 && !
pos
.
£e_ge
(
move
, 
VALUE_ZERO
))

1366 
´eãtch
(
TT
.
fœ¡_’Œy
(
pos
.
key_aá”
(
move
)));

1369 ià(!
	gpos
.
Ëg®
(
move
))

1372 
	gss
->
	gcu¼’tMove
 = 
move
;

1375 
	gpos
.
do_move
(
move
, 
¡
, 
givesCheck
);

1376 
	gv®ue
 = 
givesCheck
 ? -
q£¬ch
<
NT
, 
	gŒue
>(
	gpos
, 
	gss
+1, -
	gb‘a
, -
	g®pha
, 
	gd•th
 - 
	gONE_PLY
)

1377 : -
q£¬ch
<
NT
, 
	gçl£
>(
	gpos
, 
	gss
+1, -
	gb‘a
, -
	g®pha
, 
	gd•th
 - 
	gONE_PLY
);

1378 
	gpos
.
undo_move
(
move
);

1380 
as£¹
(
v®ue
 > -
VALUE_INFINITE
 && value < VALUE_INFINITE);

1383 ià(
	gv®ue
 > 
	gbe¡V®ue
)

1385 
	gbe¡V®ue
 = 
v®ue
;

1387 ià(
	gv®ue
 > 
	g®pha
)

1389 ià(
	gPvNode
)

1390 
upd©e_pv
(
ss
->
pv
, 
move
, (ss+1)->pv);

1392 ià(
	gPvNode
 && 
	gv®ue
 < 
	gb‘a
)

1394 
	g®pha
 = 
v®ue
;

1395 
	gbe¡Move
 = 
move
;

1399 
	g‰e
->
§ve
(
posKey
, 
v®ue_to_‰
(
v®ue
, 
ss
->
¶y
), 
BOUND_LOWER
,

1400 
‰D•th
, 
move
, 
ss
->
¡©icEv®
, 
TT
.
g’”©iÚ
());

1402  
	gv®ue
;

1410 ià(
	gInCheck
 && 
	gbe¡V®ue
 =ğ-
VALUE_INFINITE
)

1411  
m©ed_š
(
ss
->
¶y
);

1413 
	g‰e
->
§ve
(
posKey
, 
v®ue_to_‰
(
be¡V®ue
, 
ss
->
¶y
),

1414 
PvNode
 && 
be¡V®ue
 > 
ŞdAÍha
 ? 
BOUND_EXACT
 : 
BOUND_UPPER
,

1415 
‰D•th
, 
be¡Move
, 
ss
->
¡©icEv®
, 
TT
.
g’”©iÚ
());

1417 
as£¹
(
be¡V®ue
 > -
VALUE_INFINITE
 && bestValue < VALUE_INFINITE);

1419  
	gbe¡V®ue
;

1427 
V®ue
 
v®ue_to_‰
(V®u
v
, 
¶y
) {

1429 
as£¹
(
v
 !ğ
VALUE_NONE
);

1431  
	gv
 >ğ
VALUE_MATE_IN_MAX_PLY
 ? 
v
 + 
¶y


1432 : 
v
 <ğ
VALUE_MATED_IN_MAX_PLY
 ? v - 
¶y
 : v;

1440 
V®ue
 
v®ue_äom_‰
(V®u
v
, 
¶y
) {

1442  
	gv
 =ğ
VALUE_NONE
 ? VALUE_NONE

1443 : 
v
 >ğ
VALUE_MATE_IN_MAX_PLY
 ? v - 
¶y


1444 : 
v
 <ğ
VALUE_MATED_IN_MAX_PLY
 ? v + 
¶y
 : v;

1450 
upd©e_pv
(
Move
* 
pv
, Mov
move
, Move* 
chdPv
) {

1452 *
	gpv
++ = 
move
; 
	gchdPv
 && *chdPv !ğ
MOVE_NONE
; )

1453 *
	gpv
++ = *
chdPv
++;

1454 *
	gpv
 = 
MOVE_NONE
;

1460 
upd©e_cm_¡©s
(
Sck
* 
ss
, 
P›û
 
pc
, 
Squ¬e
 
s
, 
bÚus
) {

1462 
	gi
 : {1, 2, 4})

1463 ià(
is_ok
((
ss
-
i
)->
cu¼’tMove
))

1464 (
	gss
-
	gi
)->
	gcouÁ”Moves
->
upd©e
(
pc
, 
s
, 
bÚus
);

1470 
upd©e_¡©s
(cÚ¡ 
Pos™iÚ
& 
pos
, 
Sck
* 
ss
, 
Move
 
move
,

1471 
Move
* 
qu›ts
, 
qu›tsCÁ
, 
bÚus
) {

1473 ià(
	gss
->
	gkËrs
[0] !ğ
move
)

1475 
ss
->
kËrs
[1] = ss->killers[0];

1476 
	gss
->
	gkËrs
[0] = 
move
;

1479 
CŞÜ
 
	gc
 = 
pos
.
side_to_move
();

1480 
Th»ad
* 
	gthisTh»ad
 = 
pos
.
this_th»ad
();

1481 
	gthisTh»ad
->
	ghi¡Üy
.
upd©e
(
c
, 
move
, 
bÚus
);

1482 
upd©e_cm_¡©s
(
ss
, 
pos
.
moved_p›û
(
move
), 
to_sq
(move), 
bÚus
);

1484 ià(
is_ok
((
ss
-1)->
cu¼’tMove
))

1486 
Squ¬e
 
	g´evSq
 = 
to_sq
((
ss
-1)->
cu¼’tMove
);

1487 
	gthisTh»ad
->
	gcouÁ”Moves
.
upd©e
(
pos
.
p›û_Ú
(
´evSq
),…»vSq, 
move
);

1491 
	gi
 = 0; i < 
	gqu›tsCÁ
; ++i)

1493 
	gthisTh»ad
->
	ghi¡Üy
.
upd©e
(
c
, 
qu›ts
[
i
], -
bÚus
);

1494 
upd©e_cm_¡©s
(
ss
, 
pos
.
moved_p›û
(
qu›ts
[
i
]), 
to_sq
(qu›ts[i]), -
bÚus
);

1502 
Move
 
	gSkl
::
pick_be¡
(
size_t
 
muÉiPV
) {

1504 cÚ¡ 
RoÙMoves
& 
roÙMoves
 = 
Th»ads
.
maš
()->rootMoves;

1505 
PRNG
 
ºg
(
now
());

1508 
V®ue
 
	gtİScÜe
 = 
roÙMoves
[0].
scÜe
;

1509 
	gd–
 = 
¡d
::
mš
(
tİScÜe
 - 
roÙMoves
[
muÉiPV
 - 1].
scÜe
, 
PawnV®ueMg
);

1510 
	gw—kÃss
 = 120 - 2 * 
Ëv–
;

1511 
	gmaxScÜe
 = -
VALUE_INFINITE
;

1516 
size_t
 
	gi
 = 0; i < 
	gmuÉiPV
; ++i)

1519 
	gpush
 = ( 
w—kÃss
 * (
tİScÜe
 - 
roÙMoves
[
i
].
scÜe
)

1520 + 
d–
 * (
ºg
.
¿nd
<>(è% 
w—kÃss
)) / 128;

1522 ià(
	groÙMoves
[
i
].
	gscÜe
 + 
	gpush
 > 
	gmaxScÜe
)

1524 
	gmaxScÜe
 = 
roÙMoves
[
i
].
scÜe
 + 
push
;

1525 
	gbe¡
 = 
roÙMoves
[
i
].
pv
[0];

1529  
	gbe¡
;

1536 
check_time
() {

1538 
TimePošt
 
	gÏ¡InfoTime
 = 
now
();

1540 
	g–­£d
 = 
Time
.
–­£d
();

1541 
TimePošt
 
	gtick
 = 
Lim™s
.
¡¬tTime
 + 
–­£d
;

1543 ià(
	gtick
 - 
	gÏ¡InfoTime
 >= 1000)

1545 
Ï¡InfoTime
 = 
tick
;

1546 
dbg_´št
();

1550 ià(
	gLim™s
.
	gpÚd”
)

1553 iàĞ(
	gLim™s
.
u£_time_mªagem’t
(è&& 
	g–­£d
 > 
	gTime
.
maximum
() - 10)

1554 || (
	gLim™s
.
	gmov‘ime
 && 
	g–­£d
 >ğ
Lim™s
.
mov‘ime
)

1555 || (
Lim™s
.
nodes
 && 
Th»ads
.
nodes_£¬ched
(è>ğ(
ušt64_t
)Limits.nodes))

1556 
SigÇls
.
¡İ
 = 
Œue
;

1565 
¡ršg
 
	gUCI
::
	$pv
(cÚ¡ 
Pos™iÚ
& 
pos
, 
D•th
 
d•th
, 
V®ue
 
®pha
, V®u
b‘a
) {

1567 
¡d
::
¡ršg¡»am
 
ss
;

1568 
–­£d
 = 
Time
.
	`–­£d
() + 1;

1569 cÚ¡ 
RoÙMoves
& 
roÙMoves
 = 
pos
.
	`this_th»ad
()->rootMoves;

1570 
size_t
 
PVIdx
 = 
pos
.
	`this_th»ad
()->PVIdx;

1571 
size_t
 
muÉiPV
 = 
¡d
::
	`mš
((size_t)
O±iÚs
["MuÉiPV"], 
roÙMoves
.
	`size
());

1572 
ušt64_t
 
nodesS—rched
 = 
Th»ads
.
	`nodes_£¬ched
();

1573 
ušt64_t
 
tbH™s
 = 
Th»ads
.
	`tb_h™s
(è+ (
TB
::
RoÙInTB
 ? 
roÙMoves
.
	`size
() : 0);

1575 
size_t
 
i
 = 0; i < 
muÉiPV
; ++i)

1577 
boŞ
 
upd©ed
 = (
i
 <ğ
PVIdx
);

1579 ià(
d•th
 =ğ
ONE_PLY
 && !
upd©ed
)

1582 
D•th
 
d
 = 
upd©ed
 ? 
d•th
 : d•th - 
ONE_PLY
;

1583 
V®ue
 
v
 = 
upd©ed
 ? 
roÙMoves
[
i
].
scÜe
 :„oÙMoves[i].
´eviousScÜe
;

1585 
boŞ
 
tb
 = 
TB
::
RoÙInTB
 && 
	`abs
(
v
è< 
VALUE_MATE
 - 
MAX_PLY
;

1586 
v
 = 
tb
 ? 
TB
::
ScÜe
 : v;

1588 ià(
ss
.
	`rdbuf
()->
	`š_ava
())

1589 
ss
 << "\n";

1591 
ss
 << "info"

1592 << " d•th " << 
d
 / 
ONE_PLY


1593 << " s–d•th " << 
pos
.
	`this_th»ad
()->
maxPly


1594 << " muÉv " << 
i
 + 1

1595 << " scÜ" << 
UCI
::
	`v®ue
(
v
);

1597 ià(!
tb
 && 
i
 =ğ
PVIdx
)

1598 
ss
 << (
v
 >ğ
b‘a
 ? "†ow”bound" : v <ğ
®pha
 ? " upperbound" : "");

1600 
ss
 << "‚ode " << 
nodesS—rched


1601 << "‚p " << 
nodesS—rched
 * 1000 / 
–­£d
;

1603 ià(
–­£d
 > 1000)

1604 
ss
 << " hashfuÎ " << 
TT
.
	`hashfuÎ
();

1606 
ss
 << "bh™ " << 
tbH™s


1607 << "im" << 
–­£d


1610 
Move
 
m
 : 
roÙMoves
[
i
].
pv
)

1611 
ss
 << " " << 
UCI
::
	`move
(
m
, 
pos
.
	`is_chess960
());

1614  
ss
.
	`¡r
();

1615 
	}
}

1623 
boŞ
 
	gRoÙMove
::
	$exŒaù_pÚd”_äom_‰
(
Pos™iÚ
& 
pos
) {

1625 
S‹Info
 
¡
;

1626 
boŞ
 
‰H™
;

1628 
	`as£¹
(
pv
.
	`size
() == 1);

1630 ià(!
pv
[0])

1631  
çl£
;

1633 
pos
.
	`do_move
(
pv
[0], 
¡
);

1634 
TTEÁry
* 
‰e
 = 
TT
.
	`´obe
(
pos
.
	`key
(), 
‰H™
);

1636 ià(
‰H™
)

1638 
Move
 
m
 = 
‰e
->
	`move
();

1639 ià(
MoveLi¡
<
LEGAL
>(
pos
).
	`cÚšs
(
m
))

1640 
pv
.
	`push_back
(
m
);

1643 
pos
.
	`undo_move
(
pv
[0]);

1644  
pv
.
	`size
() > 1;

1645 
	}
}

1647 
	gTabËba£s
::
	$f‹r_roÙ_moves
(
Pos™iÚ
& 
pos
, 
S—rch
::
RoÙMoves
& 
roÙMoves
) {

1649 
RoÙInTB
 = 
çl£
;

1650 
U£RuË50
 = 
O±iÚs
["Syzygy50MoveRule"];

1651 
ProbeD•th
 = 
O±iÚs
["SyzygyProbeD•th"] * 
ONE_PLY
;

1652 
C¬dš®™y
 = 
O±iÚs
["SyzygyProbeLimit"];

1655 ià(
C¬dš®™y
 > 
MaxC¬dš®™y
)

1657 
C¬dš®™y
 = 
MaxC¬dš®™y
;

1658 
ProbeD•th
 = 
DEPTH_ZERO
;

1661 ià(
C¬dš®™y
 < 
	`pİcouÁ
(
pos
.
	`p›ûs
()è||…os.
	`ÿn_ÿ¡Ë
(
ANY_CASTLING
))

1666 
RoÙInTB
 = 
	`roÙ_´obe
(
pos
, 
roÙMoves
, 
TB
::
ScÜe
);

1668 ià(
RoÙInTB
)

1669 
C¬dš®™y
 = 0;

1674 
RoÙInTB
 = 
	`roÙ_´obe_wdl
(
pos
, 
roÙMoves
, 
TB
::
ScÜe
);

1677 ià(
RoÙInTB
 && 
TB
::
ScÜe
 <ğ
VALUE_DRAW
)

1678 
C¬dš®™y
 = 0;

1681 ià(
RoÙInTB
 && !
U£RuË50
)

1682 
TB
::
ScÜe
 = TB::ScÜ> 
VALUE_DRAW
 ? 
VALUE_MATE
 - 
MAX_PLY
 - 1

1683 : 
TB
::
ScÜe
 < 
VALUE_DRAW
 ? -
VALUE_MATE
 + 
MAX_PLY
 + 1

1684 : 
VALUE_DRAW
;

1685 
	}
}

	@search.h

21 #iâdeà
SEARCH_H_INCLUDED


22 
	#SEARCH_H_INCLUDED


	)

24 
	~<©omic
>

25 
	~<veùÜ
>

27 
	~"misc.h
"

28 
	~"mov•ick.h
"

29 
	~"ty³s.h
"

31 
şass
 
	gPos™iÚ
;

33 
Çme¥aû
 
	gS—rch
 {

39 
	sSck
 {

40 
Move
* 
	gpv
;

41 
CouÁ”MoveSts
* 
	gcouÁ”Moves
;

42 
	g¶y
;

43 
Move
 
	gcu¼’tMove
;

44 
Move
 
	gexşudedMove
;

45 
Move
 
	gkËrs
[2];

46 
V®ue
 
	g¡©icEv®
;

47 
	ghi¡Üy
;

48 
	gmoveCouÁ
;

56 
	sRoÙMove
 {

58 
ex¶ic™
 
RoÙMove
(
Move
 
m
è: 
pv
(1, m) {}

60 
boŞ
 
	gİ”©Ü
<(cÚ¡ 
	gRoÙMove
& 
	gm
ècÚ¡ {  m.
	gscÜe
 < score; }

61 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
Move
& 
m
ècÚ¡ {  
pv
[0] == m; }

62 
boŞ
 
exŒaù_pÚd”_äom_‰
(
Pos™iÚ
& 
pos
);

64 
V®ue
 
	gscÜe
 = -
VALUE_INFINITE
;

65 
V®ue
 
	g´eviousScÜe
 = -
VALUE_INFINITE
;

66 
	g¡d
::
veùÜ
<
Move
> 
pv
;

69 
	g¡d
::
	tveùÜ
<
	tRoÙMove
> 
	tRoÙMoves
;

76 
	sLim™sTy³
 {

78 
Lim™sTy³
() {

79 
	gnodes
 = 
time
[
WHITE
] =ime[
BLACK
] = 
šc
[WHITE] = inc[BLACK] =

80 
Åm£c
 = 
move¡ogo
 = 
d•th
 = 
mov‘ime
 = 
m©e
 = 
šfš™e
 = 
pÚd”
 = 0;

83 
boŞ
 
u£_time_mªagem’t
() const {

84  !(
	gm©e
 | 
	gmov‘ime
 | 
	gd•th
 | 
	gnodes
 | 
	gšfš™e
);

87 
	g¡d
::
veùÜ
<
Move
> 
£¬chmoves
;

88 
	gtime
[
COLOR_NB
], 
	gšc
[COLOR_NB], 
	gÅm£c
, 
	gmove¡ogo
, 
	gd•th
, 
	gmov‘ime
, 
	gm©e
, 
	gšfš™e
, 
	gpÚd”
;

89 
št64_t
 
	gnodes
;

90 
TimePošt
 
	g¡¬tTime
;

97 
	sSigÇlsTy³
 {

98 
	g¡d
::
©omic_boŞ
 
¡İ
, 
	g¡İOnPÚd”h™
;

101 
SigÇlsTy³
 
SigÇls
;

102 
Lim™sTy³
 
Lim™s
;

104 
š™
();

105 
ş—r
();

106 
	g‹m¶©e
<
boŞ
 
	gRoÙ
 = 
Œue
> 
ušt64_t
 
³rá
(
Pos™iÚ
& 
pos
, 
D•th
 
d•th
);

109 cÚ¡ 
	gMOVEBUF_SIZE
 = 1024;

110 cÚ¡ 
	gMAX_MOVEBUF_MOVES
 = 32;

111 
ušt16_t
 
	gmovebuf
[
MOVEBUF_SIZE
][
MAX_MOVEBUF_MOVES
];

	@syzygy/tbprobe.cpp

20 
	~<®gÜ™hm
>

21 
	~<©omic
>

22 
	~<c¡dšt
>

23 
	~<c¡ršg
>

24 
	~<deque
>

25 
	~<f¡»am
>

26 
	~<io¡»am
>

27 
	~<li¡
>

28 
	~<s¡»am
>

29 
	~<ty³_Œa™s
>

31 
	~"../b™bßrd.h
"

32 
	~"../moveg’.h
"

33 
	~"../pos™iÚ.h
"

34 
	~"../£¬ch.h
"

35 
	~"../th»ad_wš32.h
"

36 
	~"../ty³s.h
"

38 
	~"tb´obe.h
"

40 #iâdeà
_WIN32


41 
	~<fú.h
>

42 
	~<uni¡d.h
>

43 
	~<sys/mmª.h
>

44 
	~<sys/¡©.h
>

46 
	#WIN32_LEAN_AND_MEAN


	)

47 
	#NOMINMAX


	)

48 
	~<wšdows.h
>

51 
usšg
 
Çme¥aû
 
	gTabËba£s
;

53 
	gTabËba£s
::
MaxC¬dš®™y
;

55 
	gÇme¥aû
 {

58 
	eTBFÏg
 { 
	gSTM
 = 1, 
	gM­³d
 = 2, 
	gWšPl›s
 = 4, 
	gLossPl›s
 = 8, 
	gSšgËV®ue
 = 128 };

60 
šlše
 
WDLScÜe
 
	gİ”©Ü
-(WDLScÜ
	gd
è{  WDLScÜe(-(
d
)); }

61 
šlše
 
Squ¬e
 
	gİ”©Ü
^=(Squ¬e& 
s
, 
	gi
è{  
	gs
 = Squ¬e((sè^ 
i
); }

62 
šlše
 
Squ¬e
 
	gİ”©Ü
^(Squ¬
	gs
, 
	gi
è{  Squ¬e((
s
è^ 
i
); }

67 
dtz_befÜe_z”ošg
(
WDLScÜe
 
wdl
) {

68  
	gwdl
 =ğ
WDLWš
 ? 1 :

69 
wdl
 =ğ
WDLCur£dWš
 ? 101 :

70 
wdl
 =ğ
WDLBËs£dLoss
 ? -101 :

71 
wdl
 =ğ
WDLLoss
 ? -1 : 0;

75 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
sign_of
(
T
 
v®
) {

76  (
T
(0è< 
	gv®
) - (val < T(0));

80 
	sS·r£EÁry
 {

81 
	gblock
[4];

82 
	goff£t
[2];

85 
¡©ic_as£¹
((
S·r£EÁry
) == 6, "SparseEntry must be 6 bytes");

87 
ušt16_t
 
	tSym
;

89 
	sLR
 {

90 
	eSide
 { 
	gLeá
, 
	gRight
, 
	gV®ue
 };

92 
ušt8_t
 
	gÌ
[3];

95 
	g‹m¶©e
<
Side
 
	gS
>

96 
Sym
 
g‘
() {

97  
	gS
 =ğ
Leá
 ? ((
Ì
[1] & 0xF) << 8) |†r[0] :

98 
S
 =ğ
Right
 ? (
Ì
[2] << 4) | (lr[1] >> 4) :

99 
S
 =ğ
V®ue
 ? 
Ì
[0] : (
as£¹
(
çl£
), 
Sym
(-1));

103 
¡©ic_as£¹
((
LR
) == 3, "LRreeƒntry must be 3 bytes");

105 cÚ¡ 
	gTBPIECES
 = 6;

107 
	sPaœsD©a
 {

108 
	gæags
;

109 
size_t
 
	gsizeofBlock
;

110 
size_t
 
	g¥ª
;

111 
	gblocksNum
;

112 
	gmaxSymL’
;

113 
	gmšSymL’
;

114 
Sym
* 
	glowe¡Sym
;

115 
LR
* 
	gbŒ“
;

116 
ušt16_t
* 
	gblockL’gth
;

117 
	gblockL’gthSize
;

118 
S·r£EÁry
* 
	g¥¬£Index
;

119 
size_t
 
	g¥¬£IndexSize
;

120 
ušt8_t
* 
	gd©a
;

121 
	g¡d
::
veùÜ
<
ušt64_t
> 
ba£64
;

122 
	g¡d
::
veùÜ
<
ušt8_t
> 
symËn
;

123 
P›û
 
	gp›ûs
[
TBPIECES
];

124 
ušt64_t
 
	ggroupIdx
[
TBPIECES
+1];

125 
	ggroupL’
[
TBPIECES
+1];

130 
	sAtomic
 {

131 
Atomic
() = ;

132 
Atomic
(cÚ¡ Atomic& 
e
è{ 
	g»ady
 =ƒ.
»ady
.
lßd
(); }

133 
	g¡d
::
©omic_boŞ
 
»ady
;

139 
	sWLDEÁryP›û
 {

140 
PaœsD©a
* 
	g´ecomp
;

143 
	sWDLEÁryPawn
 {

144 
ušt8_t
 
	g·wnCouÁ
[2];

145 
WLDEÁryP›û
 
	gfe
[2][4];

148 
	sDTZEÁryP›û
 {

149 
PaœsD©a
* 
	g´ecomp
;

150 
ušt16_t
 
	gm­_idx
[4];

151 
ušt8_t
* 
	gm­
;

154 
	sDTZEÁryPawn
 {

155 
ušt8_t
 
	g·wnCouÁ
[2];

156 
DTZEÁryP›û
 
	gfe
[4];

157 
ušt8_t
* 
	gm­
;

160 
	gTBEÁry
 : 
public
 
Atomic
 {

161 * 
ba£Add»ss
;

162 
ušt64_t
 
	gm­pšg
;

163 
Key
 
	gkey
;

164 
Key
 
	gkey2
;

165 
	gp›ûCouÁ
;

166 
boŞ
 
	ghasPawns
;

167 
boŞ
 
	ghasUniqueP›ûs
;

171 
	gWDLEÁry
 : 
public
 
TBEÁry
 {

172 
WDLEÁry
(cÚ¡ 
¡d
::
¡ršg
& 
code
);

173 ~
WDLEÁry
();

175 
WLDEÁryP›û
 
	gp›ûTabË
[2];

176 
WDLEÁryPawn
 
	g·wnTabË
;

180 
	gDTZEÁry
 : 
public
 
TBEÁry
 {

181 
DTZEÁry
(cÚ¡ 
WDLEÁry
& 
wdl
);

182 ~
DTZEÁry
();

184 
DTZEÁryP›û
 
	gp›ûTabË
;

185 
DTZEÁryPawn
 
	g·wnTabË
;

189 
deşty³
(
	tWDLEÁry
::
	tp›ûTabË
è
	tWDLP›ûTabË
;

190 
deşty³
(
	tDTZEÁry
::
	tp›ûTabË
è
	tDTZP›ûTabË
;

191 
deşty³
(
	tWDLEÁry
::
	t·wnTabË
 ) 
	tWDLPawnTabË
;

192 
deşty³
(
	tDTZEÁry
::
	t·wnTabË
 ) 
	tDTZPawnTabË
;

194 autØ
™em
(
WDLP›ûTabË
& 
e
, 
¡m
, è-> 
deşty³
Ó[¡m])& {  
	ge
[stm]; }

195 autØ
™em
(
DTZP›ûTabË
& 
e
, , è-> 
deşty³
Ó)& {  
	ge
; }

196 autØ
™em
(
WDLPawnTabË
& 
e
, 
¡m
, 
f
è-> 
deşty³
Ó.
fe
[¡m][f])& {  
	ge
.
	gfe
[stm][f]; }

197 autØ
™em
(
DTZPawnTabË
& 
e
, , 
f
è-> 
deşty³
Ó.
fe
[f])& {  
	ge
.
	gfe
[f]; }

199 
	g‹m¶©e
<
ty³Çme
 
	gE
> 
	sR‘
 { 
	tty³
; };

200 
	g‹m¶©e
<> 
	gR‘
<
	gWDLEÁry
> { 
WDLScÜe
 
	tty³
; };

202 
	gM­Pawns
[
SQUARE_NB
];

203 
	gM­B1H1H7
[
SQUARE_NB
];

204 
	gM­A1D1D4
[
SQUARE_NB
];

205 
	gM­KK
[10][
SQUARE_NB
];

208 
boŞ
 
·wns_comp
(
Squ¬e
 
i
, Squ¬
j
è{  
	gM­Pawns
[i] < MapPawns[j]; }

209 
off_A1H8
(
Squ¬e
 
sq
è{  (
¿nk_of
(sq)è- 
fe_of
(sq); }

211 cÚ¡ 
V®ue
 
	gWDL_to_v®ue
[] = {

212 -
VALUE_MATE
 + 
MAX_PLY
 + 1,

213 
VALUE_DRAW
 - 2,

214 
VALUE_DRAW
,

215 
VALUE_DRAW
 + 2,

216 
VALUE_MATE
 - 
MAX_PLY
 - 1

219 cÚ¡ 
	g¡d
::
¡ršg
 
P›ûToCh¬
 = " PNBRQK…nbrqk";

221 
	gBšomŸl
[6][
SQUARE_NB
];

222 
	gL—dPawnIdx
[5][
SQUARE_NB
];

223 
	gL—dPawnsSize
[5][4];

225 ’um { 
	gBigEndŸn
, 
	gL™eEndŸn
 };

227 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gH®f
 = (
T
è/ 2, 
	gEnd
 = (T) - 1>

228 
šlše
 
sw­_by‹
(
T
& 
x
)

230 
tmp
, *
c
 = (*)&
x
;

231 
	gi
 = 0; i < 
	gH®f
; ++i)

232 
	gtmp
 = 
c
[
i
], 
	gc
[i] = c[
End
 - i], c[End - i] = 
tmp
;

234 
	g‹m¶©e
<> 
šlše
 
	gsw­_by‹
<
	gušt8_t
, 0, 0>(uint8_t&) {}

236 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gLE
> 
T
 
numb”
(* 
addr
)

238 cÚ¡ uniÚ { 
ušt32_t
 
	gi
; 
	gc
[4]; } 
	gLe
 = { 0x01020304 };

239 cÚ¡ 
boŞ
 
	gIsL™eEndŸn
 = (
Le
.
c
[0] == 4);

241 
T
 
	gv
;

243 ià((
	gušŒ_t
)
	gaddr
 & (
®ignof
(
T
) - 1))

244 
	g¡d
::
memıy
(&
v
, 
addr
, (
T
));

246 
	gv
 = *((
T
*)
addr
);

248 ià(
	gLE
 !ğ
IsL™eEndŸn
)

249 
sw­_by‹
(
v
);

250  
	gv
;

253 şas 
	cHashTabË
 {

255 
	g¡d
::
	t·œ
<
	tWDLEÁry
*, 
	tDTZEÁry
*> 
	tEÁryPaœ
;

256 
	g¡d
::
	t·œ
<
	tKey
, 
	tEÁryPaœ
> 
	tEÁry
;

258 cÚ¡ 
	gTBHASHBITS
 = 10;

259 cÚ¡ 
	gHSHMAX
 = 5;

261 
EÁry
 
	ghashTabË
[1 << 
TBHASHBITS
][
HSHMAX
];

263 
	g¡d
::
deque
<
WDLEÁry
> 
wdlTabË
;

264 
	g¡d
::
deque
<
DTZEÁry
> 
dtzTabË
;

266 
š£¹
(
Key
 
key
, 
WDLEÁry
* 
wdl
, 
DTZEÁry
* 
dtz
) {

267 
EÁry
* 
	g’Œy
 = 
hashTabË
[
key
 >> (64 - 
TBHASHBITS
)];

269 
	gi
 = 0; i < 
	gHSHMAX
; ++i, ++
	g’Œy
)

270 ià(!
	g’Œy
->
	g£cÚd
.
	gfœ¡
 ||ƒÁry->fœ¡ =ğ
key
) {

271 *
’Œy
 = 
¡d
::
make_·œ
(
key
, std::make_·œ(
wdl
, 
dtz
));

275 
	g¡d
::
û¼
 << "HSHMAXoØlow!" << 
¡d
::
’dl
;

276 
ex™
(1);

279 
	gpublic
:

280 
‹m¶©e
<
ty³Çme
 
E
, 
	gI
 = 
¡d
::
is_§me
<E, 
	gWDLEÁry
>::
v®ue
 ? 0 : 1>

281 
E
* 
g‘
(
Key
 
key
) {

282 
EÁry
* 
’Œy
 = 
hashTabË
[
key
 >> (64 - 
TBHASHBITS
)];

284 
	gi
 = 0; i < 
	gHSHMAX
; ++i, ++
	g’Œy
)

285 ià(
	g’Œy
->
	gfœ¡
 =ğ
key
)

286  
¡d
::
g‘
<
I
>(
’Œy
->
£cÚd
);

288  
	gnuÎ±r
;

291 
ş—r
() {

292 
	g¡d
::
mem£t
(
hashTabË
, 0, (hashTable));

293 
	gwdlTabË
.
ş—r
();

294 
	gdtzTabË
.
ş—r
();

296 
size_t
 
size
(ècÚ¡ {  
	gwdlTabË
.size(); }

297 
š£¹
(cÚ¡ 
¡d
::
veùÜ
<
P›ûTy³
>& 
p›ûs
);

300 
HashTabË
 
	gEÁryTabË
;

302 şas 
	cTBFe
 : 
public
 
¡d
::
if¡»am
 {

304 
¡d
::
¡ršg
 
âame
;

306 
	gpublic
:

313 
¡d
::
¡ršg
 
P©hs
;

315 
TBFe
(cÚ¡ 
¡d
::
¡ršg
& 
f
) {

317 #iâdeà
_WIN32


318 cÚ¡ 
S•Ch¬
 = ':';

320 cÚ¡ 
	gS•Ch¬
 = ';';

322 
	g¡d
::
¡ršg¡»am
 
ss
(
P©hs
);

323 
	g¡d
::
¡ršg
 
·th
;

325 
	g¡d
::
g‘lše
(
ss
, 
·th
, 
S•Ch¬
)) {

326 
	gâame
 = 
·th
 + "/" + 
f
;

327 
	g¡d
::
if¡»am
::
İ’
(
âame
);

328 ià(
is_İ’
())

335 
ušt8_t
* 
m­
(** 
ba£Add»ss
, 
ušt64_t
* 
m­pšg
, cÚ¡ ušt8_t* 
TB_MAGIC
) {

337 
as£¹
(
is_İ’
());

339 
şo£
();

341 #iâdeà
_WIN32


342 
¡©
 
	g¡©buf
;

343 
	gfd
 = ::
İ’
(
âame
.
c_¡r
(), 
O_RDONLY
);

344 
f¡©
(
fd
, &
¡©buf
);

345 *
	gm­pšg
 = 
¡©buf
.
¡_size
;

346 *
	gba£Add»ss
 = 
mm­
(
nuÎ±r
, 
¡©buf
.
¡_size
, 
PROT_READ
, 
MAP_SHARED
, 
fd
, 0);

347 ::
şo£
(
fd
);

349 ià(*
	gba£Add»ss
 =ğ
MAP_FAILED
) {

350 
¡d
::
û¼
 << "Could‚Ù mm­(è" << 
âame
 << std::
’dl
;

351 
ex™
(1);

354 
HANDLE
 
	gfd
 = 
C»©eFe
(
âame
.
c_¡r
(), 
GENERIC_READ
, 
FILE_SHARE_READ
, 
nuÎ±r
,

355 
OPEN_EXISTING
, 
FILE_ATTRIBUTE_NORMAL
, 
nuÎ±r
);

356 
DWORD
 
	gsize_high
;

357 
DWORD
 
	gsize_low
 = 
G‘FeSize
(
fd
, &
size_high
);

358 
HANDLE
 
	gmm­
 = 
C»©eFeM­pšg
(
fd
, 
nuÎ±r
, 
PAGE_READONLY
, 
size_high
, 
size_low
,‚ullptr);

359 
Clo£HªdË
(
fd
);

361 ià(!
	gmm­
) {

362 
	g¡d
::
û¼
 << "C»©eFeM­pšg(èçed" << 
¡d
::
’dl
;

363 
ex™
(1);

366 *
	gm­pšg
 = (
ušt64_t
)
mm­
;

367 *
	gba£Add»ss
 = 
M­V›wOfFe
(
mm­
, 
FILE_MAP_READ
, 0, 0, 0);

369 ià(!*
	gba£Add»ss
) {

370 
	g¡d
::
û¼
 << "M­V›wOfFe(èçed,‚amğ" << 
âame


371 << ",ƒ¼Ü = " << 
G‘La¡E¼Ü
(è<< 
¡d
::
’dl
;

372 
ex™
(1);

375 
ušt8_t
* 
	gd©a
 = (ušt8_t*)*
ba£Add»ss
;

377 iàĞ*
	gd©a
++ !ğ*
TB_MAGIC
++

378 || *
d©a
++ !ğ*
TB_MAGIC
++

379 || *
d©a
++ !ğ*
TB_MAGIC
++

380 || *
d©a
++ !ğ*
TB_MAGIC
) {

381 
¡d
::
û¼
 << "CÜru±edabË iÀf" << 
âame
 << std::
’dl
;

382 
unm­
(*
ba£Add»ss
, *
m­pšg
);

383 *
	gba£Add»ss
 = 
nuÎ±r
;

384  
	gnuÎ±r
;

387  
	gd©a
;

390 
unm­
(* 
ba£Add»ss
, 
ušt64_t
 
m­pšg
) {

392 #iâdeà
_WIN32


393 
munm­
(
ba£Add»ss
, 
m­pšg
);

395 
Unm­V›wOfFe
(
ba£Add»ss
);

396 
Clo£HªdË
((
HANDLE
)
m­pšg
);

401 
	g¡d
::
¡ršg
 
TBFe
::
P©hs
;

403 
	gWDLEÁry
::
	$WDLEÁry
(cÚ¡ 
¡d
::
¡ršg
& 
code
) {

405 
S‹Info
 
¡
;

406 
Pos™iÚ
 
pos
;

408 
	`mem£t
(
this
, 0, (
WDLEÁry
));

410 
»ady
 = 
çl£
;

411 
key
 = 
pos
.
	`£t
(
code
, 
WHITE
, &
¡
).
	`m©”Ÿl_key
();

412 
p›ûCouÁ
 = 
	`pİcouÁ
(
pos
.
	`p›ûs
());

413 
hasPawns
 = 
pos
.
	`p›ûs
(
PAWN
);

415 
CŞÜ
 
c
 = 
WHITE
; c <ğ
BLACK
; ++c)

416 
P›ûTy³
 
±
 = 
PAWN
;…ˆ< 
KING
; ++pt)

417 ià(
	`pİcouÁ
(
pos
.
	`p›ûs
(
c
, 
±
)) == 1)

418 
hasUniqueP›ûs
 = 
Œue
;

420 ià(
hasPawns
) {

423 
boŞ
 
c
 = !
pos
.
couÁ
<
PAWN
>(
BLACK
)

424 || ( 
pos
.
couÁ
<
PAWN
>(
WHITE
)

425 && 
pos
.
couÁ
<
PAWN
>(
BLACK
è>ğpos.couÁ<PAWN>(
WHITE
));

427 
·wnTabË
.
·wnCouÁ
[0] = 
pos
.
couÁ
<
PAWN
>(
c
 ? 
WHITE
 : 
BLACK
);

428 
·wnTabË
.
·wnCouÁ
[1] = 
pos
.
couÁ
<
PAWN
>(
c
 ? 
BLACK
 : 
WHITE
);

431 
key2
 = 
pos
.
	`£t
(
code
, 
BLACK
, &
¡
).
	`m©”Ÿl_key
();

432 
	}
}

434 
	gWDLEÁry
::~
	$WDLEÁry
() {

436 ià(
ba£Add»ss
)

437 
TBFe
::
	`unm­
(
ba£Add»ss
, 
m­pšg
);

439 
i
 = 0; i < 2; ++i)

440 ià(
hasPawns
)

441 
Fe
 
f
 = 
FILE_A
; f <ğ
FILE_D
; ++f)

442 
d–‘e
 
·wnTabË
.
fe
[
i
][
f
].
´ecomp
;

444 
d–‘e
 
p›ûTabË
[
i
].
´ecomp
;

445 
	}
}

447 
	gDTZEÁry
::
	$DTZEÁry
(cÚ¡ 
WDLEÁry
& 
wdl
) {

449 
	`mem£t
(
this
, 0, (
DTZEÁry
));

451 
»ady
 = 
çl£
;

452 
key
 = 
wdl
.key;

453 
key2
 = 
wdl
.key2;

454 
p›ûCouÁ
 = 
wdl
.pieceCount;

455 
hasPawns
 = 
wdl
.hasPawns;

456 
hasUniqueP›ûs
 = 
wdl
.hasUniquePieces;

458 ià(
hasPawns
) {

459 
·wnTabË
.
·wnCouÁ
[0] = 
wdl
.pawnTable.pawnCount[0];

460 
·wnTabË
.
·wnCouÁ
[1] = 
wdl
.pawnTable.pawnCount[1];

462 
	}
}

464 
	gDTZEÁry
::~
	$DTZEÁry
() {

466 ià(
ba£Add»ss
)

467 
TBFe
::
	`unm­
(
ba£Add»ss
, 
m­pšg
);

469 ià(
hasPawns
)

470 
Fe
 
f
 = 
FILE_A
; f <ğ
FILE_D
; ++f)

471 
d–‘e
 
·wnTabË
.
fe
[
f
].
´ecomp
;

473 
d–‘e
 
p›ûTabË
.
´ecomp
;

474 
	}
}

476 
	gHashTabË
::
š£¹
(cÚ¡ 
¡d
::
veùÜ
<
P›ûTy³
>& 
p›ûs
) {

478 
¡d
::
¡ršg
 
code
;

480 
P›ûTy³
 
	g±
 : 
p›ûs
)

481 
code
 +ğ
P›ûToCh¬
[
±
];

483 
TBFe
 
fe
(
code
.
š£¹
(code.
fšd
('K', 1), "v") + ".rtbw");

485 ià(!
	gfe
.
is_İ’
())

488 
	gfe
.
şo£
();

490 
	gMaxC¬dš®™y
 = 
¡d
::
max
(()
p›ûs
.
size
(), 
MaxC¬dš®™y
);

492 
	gwdlTabË
.
push_back
(
WDLEÁry
(
code
));

493 
	gdtzTabË
.
push_back
(
DTZEÁry
(
wdlTabË
.
back
()));

495 
š£¹
(
wdlTabË
.
back
().
key
 , &wdlTabË.back(), &
dtzTabË
.back());

496 
š£¹
(
wdlTabË
.
back
().
key2
, &wdlTabË.back(), &
dtzTabË
.back());

514 
	$decom´ess_·œs
(
PaœsD©a
* 
d
, 
ušt64_t
 
idx
) {

517 ià(
d
->
æags
 & 
TBFÏg
::
SšgËV®ue
)

518  
d
->
mšSymL’
;

535 
ušt32_t
 
k
 = 
idx
 / 
d
->
¥ª
;

538 
ušt32_t
 
block
 = 
numb”
<ušt32_t, 
L™eEndŸn
>(&
d
->
¥¬£Index
[
k
].block);

539 
off£t
 = 
numb”
<
ušt16_t
, 
L™eEndŸn
>(&
d
->
¥¬£Index
[
k
].offset);

546 
diff
 = 
idx
 % 
d
->
¥ª
 - d->span / 2;

549 
off£t
 +ğ
diff
;

553 
off£t
 < 0)

554 
off£t
 +ğ
d
->
blockL’gth
[--
block
] + 1;

556 
off£t
 > 
d
->
blockL’gth
[
block
])

557 
off£t
 -ğ
d
->
blockL’gth
[
block
++] + 1;

560 
ušt32_t
* 
±r
 = (ušt32_t*)(
d
->
d©a
 + 
block
 * d->
sizeofBlock
);

565 
ušt64_t
 
buf64
 = 
numb”
<ušt64_t, 
BigEndŸn
>(
±r
);…tr += 2;

566 
buf64Size
 = 64;

567 
Sym
 
sym
;

569 
Œue
) {

570 
Ën
 = 0;

575 
buf64
 < 
d
->
ba£64
[
Ën
])

576 ++
Ën
;

581 
sym
 = (
buf64
 - 
d
->
ba£64
[
Ën
]è>> (64 -†’ - d->
mšSymL’
);

584 
sym
 +ğ
numb”
<
Sym
, 
L™eEndŸn
>(&
d
->
lowe¡Sym
[
Ën
]);

588 ià(
off£t
 < 
d
->
symËn
[
sym
] + 1)

592 
off£t
 -ğ
d
->
symËn
[
sym
] + 1;

593 
Ën
 +ğ
d
->
mšSymL’
;

594 
buf64
 <<ğ
Ën
;

595 
buf64Size
 -ğ
Ën
;

597 ià(
buf64Size
 <= 32) {

598 
buf64Size
 += 32;

599 
buf64
 |ğ(
ušt64_t
)
numb”
<
ušt32_t
, 
BigEndŸn
>(
±r
++è<< (64 - 
buf64Size
);

607 
d
->
symËn
[
sym
]) {

609 
Sym
 
Ëá
 = 
d
->
bŒ“
[
sym
].
g‘
<
LR
::
Leá
>();

615 ià(
off£t
 < 
d
->
symËn
[
Ëá
] + 1)

616 
sym
 = 
Ëá
;

618 
off£t
 -ğ
d
->
symËn
[
Ëá
] + 1;

619 
sym
 = 
d
->
bŒ“
[sym].
g‘
<
LR
::
Right
>();

623  
d
->
bŒ“
[
sym
].
g‘
<
LR
::
V®ue
>();

624 
	}
}

626 
boŞ
 
	$check_dtz_¡m
(
WDLEÁry
*, , 
Fe
è{  
Œue
; 
	}
}

628 
boŞ
 
	$check_dtz_¡m
(
DTZEÁry
* 
’Œy
, 
¡m
, 
Fe
 
f
) {

630 
æags
 = 
’Œy
->
hasPawns
 ?ƒÁry->
·wnTabË
.
fe
[
f
].
´ecomp
->flags

631 : 
’Œy
->
p›ûTabË
.
´ecomp
->
æags
;

633  (
æags
 & 
TBFÏg
::
STM
è=ğ
¡m


634 || ((
’Œy
->
key
 =ğ’Œy->
key2
è&& !’Œy->
hasPawns
);

635 
	}
}

641 
WDLScÜe
 
	$m­_scÜe
(
WDLEÁry
*, 
Fe
, 
v®ue
, 
WDLScÜe
è{  
	`WDLScÜe
(v®u- 2); 
	}
}

643 
	$m­_scÜe
(
DTZEÁry
* 
’Œy
, 
Fe
 
f
, 
v®ue
, 
WDLScÜe
 
wdl
) {

645 cÚ¡ 
WDLM­
[] = { 1, 3, 0, 2, 0 };

647 
æags
 = 
’Œy
->
hasPawns
 ?ƒÁry->
·wnTabË
.
fe
[
f
].
´ecomp
->flags

648 : 
’Œy
->
p›ûTabË
.
´ecomp
->
æags
;

650 
ušt8_t
* 
m­
 = 
’Œy
->
hasPawns
 ?ƒÁry->
·wnTabË
.map

651 : 
’Œy
->
p›ûTabË
.
m­
;

653 
ušt16_t
* 
idx
 = 
’Œy
->
hasPawns
 ?ƒÁry->
·wnTabË
.
fe
[
f
].
m­_idx


654 : 
’Œy
->
p›ûTabË
.
m­_idx
;

655 ià(
æags
 & 
TBFÏg
::
M­³d
)

656 
v®ue
 = 
m­
[
idx
[
WDLM­
[
wdl
 + 2]] + value];

660 iàĞ(
wdl
 =ğ
WDLWš
 && !(
æags
 & 
TBFÏg
::
WšPl›s
))

661 || (
wdl
 =ğ
WDLLoss
 && !(
æags
 & 
TBFÏg
::
LossPl›s
))

662 || 
wdl
 =ğ
WDLCur£dWš


663 || 
wdl
 =ğ
WDLBËs£dLoss
)

664 
v®ue
 *= 2;

666  
v®ue
 + 1;

667 
	}
}

675 
	g‹m¶©e
<
ty³Çme
 
	gEÁry
,y³Çm
	gT
 =y³Çm
R‘
<
EÁry
>::
ty³
>

676 
T
 
	$do_´obe_bË
(cÚ¡ 
Pos™iÚ
& 
pos
, 
EÁry
* 
’Œy
, 
WDLScÜe
 
wdl
, 
ProbeS‹
* 
»suÉ
) {

678 cÚ¡ 
boŞ
 
IsWDL
 = 
¡d
::
is_§me
<
EÁry
, 
WDLEÁry
>::
v®ue
;

680 
Squ¬e
 
squ¬es
[
TBPIECES
];

681 
P›û
 
p›ûs
[
TBPIECES
];

682 
ušt64_t
 
idx
;

683 
Ãxt
 = 0, 
size
 = 0, 
ËadPawnsCÁ
 = 0;

684 
PaœsD©a
* 
d
;

685 
B™bßrd
 
b
, 
ËadPawns
 = 0;

686 
Fe
 
tbFe
 = 
FILE_A
;

692 
boŞ
 
symm‘ricBÏckToMove
 = (
’Œy
->
key
 =ğ’Œy->
key2
 && 
pos
.
	`side_to_move
());

698 
boŞ
 
bÏckSŒÚg”
 = (
pos
.
	`m©”Ÿl_key
(è!ğ
’Œy
->
key
);

700 
æCŞÜ
 = (
symm‘ricBÏckToMove
 || 
bÏckSŒÚg”
) * 8;

701 
æSqu¬es
 = (
symm‘ricBÏckToMove
 || 
bÏckSŒÚg”
) * 070;

702 
¡m
 = (
symm‘ricBÏckToMove
 || 
bÏckSŒÚg”
è^ 
pos
.
	`side_to_move
();

707 ià(
’Œy
->
hasPawns
) {

711 
P›û
 
pc
 = 
	`P›û
(
	`™em
(
’Œy
->
·wnTabË
, 0, 0).
´ecomp
->
p›ûs
[0] ^ 
æCŞÜ
);

713 
	`as£¹
(
	`ty³_of
(
pc
è=ğ
PAWN
);

715 
ËadPawns
 = 
b
 = 
pos
.
	`p›ûs
(
	`cŞÜ_of
(
pc
), 
PAWN
);

716 
b
)

717 
squ¬es
[
size
++] = 
	`pİ_lsb
(&
b
è^ 
æSqu¬es
;

719 
ËadPawnsCÁ
 = 
size
;

721 
¡d
::
	`sw­
(
squ¬es
[0], *¡d::
	`max_–em’t
(squ¬es, squ¬e + 
ËadPawnsCÁ
, 
·wns_comp
));

723 
tbFe
 = 
	`fe_of
(
squ¬es
[0]);

724 ià(
tbFe
 > 
FILE_D
)

725 
tbFe
 = 
	`fe_of
(
squ¬es
[0] ^ 7);

727 
d
 = 
	`™em
(
’Œy
->
·wnTabË
 , 
¡m
, 
tbFe
).
´ecomp
;

729 
d
 = 
	`™em
(
’Œy
->
p›ûTabË
, 
¡m
, 
tbFe
).
´ecomp
;

734 ià(!
IsWDL
 && !
	`check_dtz_¡m
(
’Œy
, 
¡m
, 
tbFe
))

735  *
»suÉ
 = 
CHANGE_STM
, 
	`T
();

739 
b
 = 
pos
.
	`p›ûs
(è^ 
ËadPawns
;

740 
b
) {

741 
Squ¬e
 
s
 = 
	`pİ_lsb
(&
b
);

742 
squ¬es
[
size
] = 
s
 ^ 
æSqu¬es
;

743 
p›ûs
[
size
++] = 
	`P›û
(
pos
.
	`p›û_Ú
(
s
è^ 
æCŞÜ
);

748 
i
 = 
ËadPawnsCÁ
; i < 
size
; ++i)

749 
j
 = 
i
; j < 
size
; ++j)

750 ià(
d
->
p›ûs
[
i
] =ğp›ûs[
j
])

752 
¡d
::
	`sw­
(
p›ûs
[
i
],…›ûs[
j
]);

753 
¡d
::
	`sw­
(
squ¬es
[
i
], squ¬es[
j
]);

759 ià(
	`fe_of
(
squ¬es
[0]è> 
FILE_D
)

760 
i
 = 0; i < 
size
; ++i)

761 
squ¬es
[
i
] ^= 7;

765 ià(
’Œy
->
hasPawns
) {

766 
idx
 = 
L—dPawnIdx
[
ËadPawnsCÁ
][
squ¬es
[0]];

768 
¡d
::
	`sÜt
(
squ¬es
 + 1, squ¬e + 
ËadPawnsCÁ
, 
·wns_comp
);

770 
i
 = 1; i < 
ËadPawnsCÁ
; ++i)

771 
idx
 +ğ
BšomŸl
[
i
][
M­Pawns
[
squ¬es
[i]]];

773 
’code_»maššg
;

778 ià(
	`¿nk_of
(
squ¬es
[0]è> 
RANK_4
)

779 
i
 = 0; i < 
size
; ++i)

780 
squ¬es
[
i
] ^= 070;

784 
i
 = 0; i < 
d
->
groupL’
[0]; ++i) {

785 ià(!
	`off_A1H8
(
squ¬es
[
i
]))

788 ià(
	`off_A1H8
(
squ¬es
[
i
]) > 0)

789 
j
 = 
i
; j < 
size
; ++j)

790 
squ¬es
[
j
] = 
	`Squ¬e
(((squares[j] >> 3) | (squares[j] << 3)) & 63);

821 ià(
’Œy
->
hasUniqueP›ûs
) {

823 
adju¡1
 = 
squ¬es
[1] > squares[0];

824 
adju¡2
 = (
squ¬es
[2] > squares[0]) + (squares[2] > squares[1]);

829 ià(
	`off_A1H8
(
squ¬es
[0]))

830 
idx
 = ( 
M­A1D1D4
[
squ¬es
[0]] * 63

831 + (
squ¬es
[1] - 
adju¡1
)) * 62

832 + 
squ¬es
[2] - 
adju¡2
;

837 ià(
	`off_A1H8
(
squ¬es
[1]))

838 
idx
 = ( 6 * 63 + 
	`¿nk_of
(
squ¬es
[0]) * 28

839 + 
M­B1H1H7
[
squ¬es
[1]]) * 62

840 + 
squ¬es
[2] - 
adju¡2
;

843 ià(
	`off_A1H8
(
squ¬es
[2]))

844 
idx
 = 6 * 63 * 62 + 4 * 28 * 62

845 + 
	`¿nk_of
(
squ¬es
[0]) * 7 * 28

846 + (
	`¿nk_of
(
squ¬es
[1]è- 
adju¡1
) * 28

847 + 
M­B1H1H7
[
squ¬es
[2]];

851 
idx
 = 6 * 63 * 62 + 4 * 28 * 62 + 4 * 7 * 28

852 + 
	`¿nk_of
(
squ¬es
[0]) * 7 * 6

853 + (
	`¿nk_of
(
squ¬es
[1]è- 
adju¡1
) * 6

854 + (
	`¿nk_of
(
squ¬es
[2]è- 
adju¡2
);

858 
idx
 = 
M­KK
[
M­A1D1D4
[
squ¬es
[0]]][squares[1]];

860 
’code_»maššg
:

861 
idx
 *ğ
d
->
groupIdx
[0];

862 
Squ¬e
* 
groupSq
 = 
squ¬es
 + 
d
->
groupL’
[0];

865 
boŞ
 
»maššgPawns
 = 
’Œy
->
hasPawns
 &&ƒÁry->
·wnTabË
.
·wnCouÁ
[1];

867 
d
->
groupL’
[++
Ãxt
])

869 
¡d
::
	`sÜt
(
groupSq
, groupSq + 
d
->
groupL’
[
Ãxt
]);

870 
ušt64_t
 
n
 = 0;

874 
i
 = 0; i < 
d
->
groupL’
[
Ãxt
]; ++i)

876 autØ
f
 = [&](
Squ¬e
 
s
è{  
groupSq
[
i
] > s; };

877 autØ
adju¡
 = 
¡d
::
	`couÁ_if
(
squ¬es
, 
groupSq
, 
f
);

878 
n
 +ğ
BšomŸl
[
i
 + 1][
groupSq
[i] - 
adju¡
 - 8 * 
»maššgPawns
];

881 
»maššgPawns
 = 
çl£
;

882 
idx
 +ğ
n
 * 
d
->
groupIdx
[
Ãxt
];

883 
groupSq
 +ğ
d
->
groupL’
[
Ãxt
];

887  
	`m­_scÜe
(
’Œy
, 
tbFe
, 
	`decom´ess_·œs
(
d
, 
idx
), 
wdl
);

888 
	}
}

900 
	g‹m¶©e
<
ty³Çme
 
	gT
>

901 
	$£t_groups
(
T
& 
e
, 
PaœsD©a
* 
d
, 
Üd”
[], 
Fe
 
f
) {

903 
n
 = 0, 
fœ¡L’
 = 
e
.
hasPawns
 ? 0 :ƒ.
hasUniqueP›ûs
 ? 3 : 2;

904 
d
->
groupL’
[
n
] = 1;

908 
i
 = 1; i < 
e
.
p›ûCouÁ
; ++i)

909 ià(--
fœ¡L’
 > 0 || 
d
->
p›ûs
[
i
] == d->pieces[i - 1])

910 
d
->
groupL’
[
n
]++;

912 
d
->
groupL’
[++
n
] = 1;

914 
d
->
groupL’
[++
n
] = 0;

927 
boŞ
 
µ
 = 
e
.
hasPawns
 &&ƒ.
·wnTabË
.
·wnCouÁ
[1];

928 
Ãxt
 = 
µ
 ? 2 : 1;

929 
ä“Squ¬es
 = 64 - 
d
->
groupL’
[0] - (
µ
 ? d->groupLen[1] : 0);

930 
ušt64_t
 
idx
 = 1;

932 
k
 = 0; 
Ãxt
 < 
n
 || k =ğ
Üd”
[0] || k == order[1]; ++k)

933 ià(
k
 =ğ
Üd”
[0])

935 
d
->
groupIdx
[0] = 
idx
;

936 
idx
 *ğ
e
.
hasPawns
 ? 
L—dPawnsSize
[
d
->
groupL’
[0]][
f
]

937 : 
e
.
hasUniqueP›ûs
 ? 31332 : 462;

939 ià(
k
 =ğ
Üd”
[1])

941 
d
->
groupIdx
[1] = 
idx
;

942 
idx
 *ğ
BšomŸl
[
d
->
groupL’
[1]][48 - d->groupLen[0]];

946 
d
->
groupIdx
[
Ãxt
] = 
idx
;

947 
idx
 *ğ
BšomŸl
[
d
->
groupL’
[
Ãxt
]][
ä“Squ¬es
];

948 
ä“Squ¬es
 -ğ
d
->
groupL’
[
Ãxt
++];

951 
d
->
groupIdx
[
n
] = 
idx
;

952 
	}
}

957 
ušt8_t
 
£t_symËn
(
PaœsD©a
* 
d
, 
Sym
 
s
, 
¡d
::
veùÜ
<
boŞ
>& 
vis™ed
) {

959 
vis™ed
[
s
] = 
Œue
;

960 
Sym
 
	g¤
 = 
d
->
bŒ“
[
s
].
g‘
<
LR
::
Right
>();

962 ià(
	g¤
 == 0xFFF)

965 
Sym
 
	g¦
 = 
d
->
bŒ“
[
s
].
g‘
<
LR
::
Leá
>();

967 ià(!
	gvis™ed
[
¦
])

968 
	gd
->
	gsymËn
[
¦
] = 
£t_symËn
(
d
, sl, 
vis™ed
);

970 ià(!
	gvis™ed
[
¤
])

971 
	gd
->
	gsymËn
[
¤
] = 
£t_symËn
(
d
, sr, 
vis™ed
);

973  
	gd
->
	gsymËn
[
¦
] + d->symËn[
¤
] + 1;

976 
ušt8_t
* 
	$£t_sizes
(
PaœsD©a
* 
d
, 
ušt8_t
* 
d©a
) {

978 
d
->
æags
 = *
d©a
++;

980 ià(
d
->
æags
 & 
TBFÏg
::
SšgËV®ue
) {

981 
d
->
blocksNum
 = d->
blockL’gthSize
 = 0;

982 
d
->
¥ª
 = d->
¥¬£IndexSize
 = 0;

983 
d
->
mšSymL’
 = *
d©a
++;

984  
d©a
;

989 
ušt64_t
 
tbSize
 = 
d
->
groupIdx
[
¡d
::
	`fšd
(d->
groupL’
, d->groupLen + 7, 0) - d->groupLen];

991 
d
->
sizeofBlock
 = 1ULL << *
d©a
++;

992 
d
->
¥ª
 = 1ULL << *
d©a
++;

993 
d
->
¥¬£IndexSize
 = (
tbSize
 + d->
¥ª
 - 1) / d->span;

994 
·ddšg
 = 
numb”
<
ušt8_t
, 
L™eEndŸn
>(
d©a
++);

995 
d
->
blocksNum
 = 
numb”
<
ušt32_t
, 
L™eEndŸn
>(
d©a
); data += (uint32_t);

996 
d
->
blockL’gthSize
 = d->
blocksNum
 + 
·ddšg
;

998 
d
->
maxSymL’
 = *
d©a
++;

999 
d
->
mšSymL’
 = *
d©a
++;

1000 
d
->
lowe¡Sym
 = (
Sym
*)
d©a
;

1001 
d
->
ba£64
.
	`»size
(d->
maxSymL’
 - d->
mšSymL’
 + 1);

1009 
i
 = 
d
->
ba£64
.
	`size
() - 2; i >= 0; --i) {

1010 
d
->
ba£64
[
i
] = (d->ba£64[˜+ 1] + 
numb”
<
Sym
, 
L™eEndŸn
>(&d->
lowe¡Sym
[i])

1011 - 
numb”
<
Sym
, 
L™eEndŸn
>(&
d
->
lowe¡Sym
[
i
 + 1])) / 2;

1013 
	`as£¹
(
d
->
ba£64
[
i
] * 2 >= d->base64[i+1]);

1020 
size_t
 
i
 = 0; i < 
d
->
ba£64
.
	`size
(); ++i)

1021 
d
->
ba£64
[
i
] <<ğ64 - i - d->
mšSymL’
;

1023 
d©a
 +ğ
d
->
ba£64
.
	`size
(è* (
Sym
);

1024 
d
->
symËn
.
	`»size
(
numb”
<
ušt16_t
, 
L™eEndŸn
>(
d©a
)); data += (uint16_t);

1025 
d
->
bŒ“
 = (
LR
*)
d©a
;

1032 
¡d
::
veùÜ
<
boŞ
> 
	`vis™ed
(
d
->
symËn
.
	`size
());

1034 
Sym
 
sym
 = 0; sym < 
d
->
symËn
.
	`size
(); ++sym)

1035 ià(!
vis™ed
[
sym
])

1036 
d
->
symËn
[
sym
] = 
	`£t_symËn
(d, sym, 
vis™ed
);

1038  
d©a
 + 
d
->
symËn
.
	`size
(è* (
LR
) + (d->symlen.size() & 1);

1039 
	}
}

1041 
	g‹m¶©e
<
ty³Çme
 
	gT
>

1042 
ušt8_t
* 
	$£t_dtz_m­
(
WDLEÁry
&, 
T
&, 
ušt8_t
*, 
Fe
è{  
nuÎ±r
; 
	}
}

1044 
	g‹m¶©e
<
ty³Çme
 
	gT
>

1045 
ušt8_t
* 
	$£t_dtz_m­
(
DTZEÁry
&, 
T
& 
p
, 
ušt8_t
* 
d©a
, 
Fe
 
maxFe
) {

1047 
p
.
m­
 = 
d©a
;

1049 
Fe
 
f
 = 
FILE_A
; f <ğ
maxFe
; ++f) {

1050 ià(
	`™em
(
p
, 0, 
f
).
´ecomp
->
æags
 & 
TBFÏg
::
M­³d
)

1051 
i
 = 0; i < 4; ++i) {

1052 
	`™em
(
p
, 0, 
f
).
m­_idx
[
i
] = (
ušt16_t
)(
d©a
 -….
m­
 + 1);

1053 
d©a
 += *data + 1;

1057  
d©a
 +ğ(
ušŒ_t
)data & 1;

1058 
	}
}

1060 
	g‹m¶©e
<
ty³Çme
 
	gEÁry
,y³Çm
	gT
>

1061 
	$do_š™
(
EÁry
& 
e
, 
T
& 
p
, 
ušt8_t
* 
d©a
) {

1063 cÚ¡ 
boŞ
 
IsWDL
 = 
¡d
::
is_§me
<
EÁry
, 
WDLEÁry
>::
v®ue
;

1065 
PaœsD©a
* 
d
;

1067 ’um { 
S¶™
 = 1, 
HasPawns
 = 2 };

1069 
	`as£¹
(
e
.
hasPawns
 =ğ!!(*
d©a
 & 
HasPawns
));

1070 
	`as£¹
((
e
.
key
 !ğe.
key2
è=ğ!!(*
d©a
 & 
S¶™
));

1072 
d©a
++;

1074 cÚ¡ 
Sides
 = 
IsWDL
 && (
e
.
key
 !ğe.
key2
) ? 2 : 1;

1075 cÚ¡ 
Fe
 
MaxFe
 = 
e
.
hasPawns
 ? 
FILE_D
 : 
FILE_A
;

1077 
boŞ
 
µ
 = 
e
.
hasPawns
 &&ƒ.
·wnTabË
.
·wnCouÁ
[1];

1079 
	`as£¹
(!
µ
 || 
e
.
·wnTabË
.
·wnCouÁ
[0]);

1081 
Fe
 
f
 = 
FILE_A
; f <ğ
MaxFe
; ++f) {

1083 
i
 = 0; i < 
Sides
; i++)

1084 
	`™em
(
p
, 
i
, 
f
).
´ecomp
 = 
Ãw
 
	`PaœsD©a
();

1086 
Üd”
[][2] = { { *
d©a
 & 0xF, 
µ
 ? *(data + 1) & 0xF : 0xF },

1087 { *
d©a
 >> 4, 
µ
 ? *(data + 1) >> 4 : 0xF } };

1088 
d©a
 +ğ1 + 
µ
;

1090 
k
 = 0; k < 
e
.
p›ûCouÁ
; ++k, ++
d©a
)

1091 
i
 = 0; i < 
Sides
; i++)

1092 
	`™em
(
p
, 
i
, 
f
).
´ecomp
->
p›ûs
[
k
] = 
	`P›û
(˜? *
d©a
 >> 4 : *data & 0xF);

1094 
i
 = 0; i < 
Sides
; ++i)

1095 
	`£t_groups
(
e
, 
	`™em
(
p
, 
i
, 
f
).
´ecomp
, 
Üd”
[i], f);

1098 
d©a
 +ğ(
ušŒ_t
)data & 1;

1100 
Fe
 
f
 = 
FILE_A
; f <ğ
MaxFe
; ++f)

1101 
i
 = 0; i < 
Sides
; i++)

1102 
d©a
 = 
	`£t_sizes
(
	`™em
(
p
, 
i
, 
f
).
´ecomp
, data);

1104 ià(!
IsWDL
)

1105 
d©a
 = 
	`£t_dtz_m­
(
e
, 
p
, d©a, 
MaxFe
);

1107 
Fe
 
f
 = 
FILE_A
; f <ğ
MaxFe
; ++f)

1108 
i
 = 0; i < 
Sides
; i++) {

1109 (
d
 = 
	`™em
(
p
, 
i
, 
f
).
´ecomp
)->
¥¬£Index
 = (
S·r£EÁry
*)
d©a
;

1110 
d©a
 +ğ
d
->
¥¬£IndexSize
 * (
S·r£EÁry
) ;

1113 
Fe
 
f
 = 
FILE_A
; f <ğ
MaxFe
; ++f)

1114 
i
 = 0; i < 
Sides
; i++) {

1115 (
d
 = 
	`™em
(
p
, 
i
, 
f
).
´ecomp
)->
blockL’gth
 = (
ušt16_t
*)
d©a
;

1116 
d©a
 +ğ
d
->
blockL’gthSize
 * (
ušt16_t
);

1119 
Fe
 
f
 = 
FILE_A
; f <ğ
MaxFe
; ++f)

1120 
i
 = 0; i < 
Sides
; i++) {

1121 
d©a
 = (
ušt8_t
*)(((
ušŒ_t
)data + 0x3F) & ~0x3F);

1122 (
d
 = 
	`™em
(
p
, 
i
, 
f
).
´ecomp
)->
d©a
 = data;

1123 
d©a
 +ğ
d
->
blocksNum
 * d->
sizeofBlock
;

1125 
	}
}

1127 
	g‹m¶©e
<
ty³Çme
 
	gEÁry
>

1128 * 
	$š™
(
EÁry
& 
e
, cÚ¡ 
Pos™iÚ
& 
pos
) {

1130 cÚ¡ 
boŞ
 
IsWDL
 = 
¡d
::
is_§me
<
EÁry
, 
WDLEÁry
>::
v®ue
;

1132 
Mu‹x
 
mu‹x
;

1136 ià(
e
.
»ady
.
	`lßd
(
¡d
::
memÜy_Üd”_acquœe
))

1137  
e
.
ba£Add»ss
;

1139 
¡d
::
unique_lock
<
Mu‹x
> 
	`lk
(
mu‹x
);

1141 ià(
e
.
»ady
.
	`lßd
(
¡d
::
memÜy_Üd”_»Ïxed
))

1142  
e
.
ba£Add»ss
;

1145 
¡d
::
¡ršg
 
âame
, 
w
, 
b
;

1146 
P›ûTy³
 
±
 = 
KING
;…ˆ>ğ
PAWN
; --pt) {

1147 
w
 +ğ
¡d
::
	`¡ršg
(
	`pİcouÁ
(
pos
.
	`p›ûs
(
WHITE
, 
±
)), 
P›ûToCh¬
[pt]);

1148 
b
 +ğ
¡d
::
	`¡ršg
(
	`pİcouÁ
(
pos
.
	`p›ûs
(
BLACK
, 
±
)), 
P›ûToCh¬
[pt]);

1151 cÚ¡ 
ušt8_t
 
TB_MAGIC
[][4] = { { 0xD7, 0x66, 0x0C, 0xA5 },

1154 
âame
 = (
e
.
key
 =ğ
pos
.
	`m©”Ÿl_key
(è? 
w
 + 'v' + 
b
 : b + 'v' + w)

1155 + (
IsWDL
 ? ".rtbw" : ".rtbz");

1157 
ušt8_t
* 
d©a
 = 
	`TBFe
(
âame
).
	`m­
(&
e
.
ba£Add»ss
, &e.
m­pšg
, 
TB_MAGIC
[
IsWDL
]);

1158 ià(
d©a
)

1159 
e
.
hasPawns
 ? 
	`do_š™
Ó,ƒ.
·wnTabË
, 
d©a
è: do_š™Ó,ƒ.
p›ûTabË
, data);

1161 
e
.
»ady
.
	`¡Üe
(
Œue
, 
¡d
::
memÜy_Üd”_»Ëa£
);

1162  
e
.
ba£Add»ss
;

1163 
	}
}

1165 
	g‹m¶©e
<
ty³Çme
 
	gE
,y³Çm
	gT
 =y³Çm
R‘
<
E
>::
ty³
>

1166 
T
 
	$´obe_bË
(cÚ¡ 
Pos™iÚ
& 
pos
, 
ProbeS‹
* 
»suÉ
, 
WDLScÜe
 
wdl
 = 
WDLD¿w
) {

1168 ià(!(
pos
.
	`p›ûs
(è^…os.p›ûs(
KING
)))

1169  
	`T
(
WDLD¿w
);

1171 
E
* 
’Œy
 = 
EÁryTabË
.
g‘
<E>(
pos
.
	`m©”Ÿl_key
());

1173 ià(!
’Œy
 || !
	`š™
(*’Œy, 
pos
))

1174  *
»suÉ
 = 
FAIL
, 
	`T
();

1176  
	`do_´obe_bË
(
pos
, 
’Œy
, 
wdl
, 
»suÉ
);

1177 
	}
}

1192 
	g‹m¶©e
<
boŞ
 
	gCheckZ”ošgMoves
 = 
çl£
>

1193 
WDLScÜe
 
	$£¬ch
(
Pos™iÚ
& 
pos
, 
ProbeS‹
* 
»suÉ
) {

1195 
WDLScÜe
 
v®ue
, 
be¡V®ue
 = 
WDLLoss
;

1196 
S‹Info
 
¡
;

1198 autØ
moveLi¡
 = 
MoveLi¡
<
LEGAL
>(
pos
);

1199 
size_t
 
tÙ®CouÁ
 = 
moveLi¡
.
	`size
(), 
moveCouÁ
 = 0;

1201 cÚ¡ 
Move
& 
move
 : 
moveLi¡
)

1203 iàĞ!
pos
.
	`ÿ±u»
(
move
)

1204 && (!
CheckZ”ošgMoves
 || 
	`ty³_of
(
pos
.
	`moved_p›û
(
move
)è!ğ
PAWN
))

1207 
moveCouÁ
++;

1209 
pos
.
	`do_move
(
move
, 
¡
);

1210 
v®ue
 = -
	`£¬ch
(
pos
, 
»suÉ
);

1211 
pos
.
	`undo_move
(
move
);

1213 ià(*
»suÉ
 =ğ
FAIL
)

1214  
WDLD¿w
;

1216 ià(
v®ue
 > 
be¡V®ue
)

1218 
be¡V®ue
 = 
v®ue
;

1220 ià(
v®ue
 >ğ
WDLWš
)

1222 *
»suÉ
 = 
ZEROING_BEST_MOVE
;

1223  
v®ue
;

1234 
boŞ
 
noMÜeMoves
 = (
moveCouÁ
 && moveCouÁ =ğ
tÙ®CouÁ
);

1236 ià(
noMÜeMoves
)

1237 
v®ue
 = 
be¡V®ue
;

1240 
v®ue
 = 
´obe_bË
<
WDLEÁry
>(
pos
, 
»suÉ
);

1242 ià(*
»suÉ
 =ğ
FAIL
)

1243  
WDLD¿w
;

1247 ià(
be¡V®ue
 >ğ
v®ue
)

1248  *
»suÉ
 = ( 
be¡V®ue
 > 
WDLD¿w


1249 || 
noMÜeMoves
 ? 
ZEROING_BEST_MOVE
 : 
OK
), 
be¡V®ue
;

1251  *
»suÉ
 = 
OK
, 
v®ue
;

1252 
	}
}

1256 
	gTabËba£s
::
	$š™
(cÚ¡ 
¡d
::
¡ršg
& 
·ths
) {

1258 
EÁryTabË
.
	`ş—r
();

1259 
MaxC¬dš®™y
 = 0;

1260 
TBFe
::
P©hs
 = 
·ths
;

1262 ià(
·ths
.
	`em±y
() ||…aths == "<empty>")

1266 
code
 = 0;

1267 
Squ¬e
 
s
 = 
SQ_A1
; s <ğ
SQ_H8
; ++s)

1268 ià(
	`off_A1H8
(
s
) < 0)

1269 
M­B1H1H7
[
s
] = 
code
++;

1272 
¡d
::
veùÜ
<
Squ¬e
> 
dŸgÚ®
;

1273 
code
 = 0;

1274 
Squ¬e
 
s
 = 
SQ_A1
; s <ğ
SQ_D4
; ++s)

1275 ià(
	`off_A1H8
(
s
è< 0 && 
	`fe_of
(sè<ğ
FILE_D
)

1276 
M­A1D1D4
[
s
] = 
code
++;

1278 ià(!
	`off_A1H8
(
s
è&& 
	`fe_of
(sè<ğ
FILE_D
)

1279 
dŸgÚ®
.
	`push_back
(
s
);

1282 autØ
s
 : 
dŸgÚ®
)

1283 
M­A1D1D4
[
s
] = 
code
++;

1288 
¡d
::
veùÜ
<¡d::
·œ
<, 
Squ¬e
>> 
bÙhOnDŸgÚ®
;

1289 
code
 = 0;

1290 
idx
 = 0; idx < 10; idx++)

1291 
Squ¬e
 
s1
 = 
SQ_A1
; s1 <ğ
SQ_D4
; ++s1)

1292 ià(
M­A1D1D4
[
s1
] =ğ
idx
 && (idx || s1 =ğ
SQ_B1
))

1294 
Squ¬e
 
s2
 = 
SQ_A1
; s2 <ğ
SQ_H8
; ++s2)

1295 ià((
P£udoA‰acks
[
KING
][
s1
] | s1è& 
s2
)

1298 ià(!
	`off_A1H8
(
s1
è&& off_A1H8(
s2
) > 0)

1301 ià(!
	`off_A1H8
(
s1
è&& !off_A1H8(
s2
))

1302 
bÙhOnDŸgÚ®
.
	`push_back
(
¡d
::
	`make_·œ
(
idx
, 
s2
));

1305 
M­KK
[
idx
][
s2
] = 
code
++;

1309 autØ
p
 : 
bÙhOnDŸgÚ®
)

1310 
M­KK
[
p
.
fœ¡
][p.
£cÚd
] = 
code
++;

1314 
BšomŸl
[0][0] = 1;

1316 
n
 = 1;‚ < 64;‚++)

1317 
k
 = 0; k < 6 && k <ğ
n
; ++k)

1318 
BšomŸl
[
k
][
n
] = (k > 0 ? Binomial[k - 1][n - 1] : 0)

1319 + (
k
 < 
n
 ? 
BšomŸl
[k ][n - 1] : 0);

1325 
avaabËSqu¬es
 = 47;

1329 
ËadPawnsCÁ
 = 1;†eadPawnsCnt <= 4; ++leadPawnsCnt)

1330 
Fe
 
f
 = 
FILE_A
; f <ğ
FILE_D
; ++f)

1334 
idx
 = 0;

1338 
Rªk
 
r
 = 
RANK_2
;„ <ğ
RANK_7
; ++r)

1340 
Squ¬e
 
sq
 = 
	`make_squ¬e
(
f
, 
r
);

1347 ià(
ËadPawnsCÁ
 == 1)

1349 
M­Pawns
[
sq
] = 
avaabËSqu¬es
--;

1350 
M­Pawns
[
sq
 ^ 7] = 
avaabËSqu¬es
--;

1352 
L—dPawnIdx
[
ËadPawnsCÁ
][
sq
] = 
idx
;

1353 
idx
 +ğ
BšomŸl
[
ËadPawnsCÁ
 - 1][
M­Pawns
[
sq
]];

1356 
L—dPawnsSize
[
ËadPawnsCÁ
][
f
] = 
idx
;

1359 
P›ûTy³
 
p1
 = 
PAWN
;…1 < 
KING
; ++p1) {

1360 
EÁryTabË
.
	`š£¹
({
KING
, 
p1
, KING});

1362 
P›ûTy³
 
p2
 = 
PAWN
;…2 <ğ
p1
; ++p2) {

1363 
EÁryTabË
.
	`š£¹
({
KING
, 
p1
, 
p2
, KING});

1364 
EÁryTabË
.
	`š£¹
({
KING
, 
p1
, KING, 
p2
});

1366 
P›ûTy³
 
p3
 = 
PAWN
;…3 < 
KING
; ++p3)

1367 
EÁryTabË
.
	`š£¹
({
KING
, 
p1
, 
p2
, KING, 
p3
});

1369 
P›ûTy³
 
p3
 = 
PAWN
;…3 <ğ
p2
; ++p3) {

1370 
EÁryTabË
.
	`š£¹
({
KING
, 
p1
, 
p2
, 
p3
, KING});

1372 
P›ûTy³
 
p4
 = 
PAWN
;…4 <ğ
p3
; ++p4)

1373 
EÁryTabË
.
	`š£¹
({
KING
, 
p1
, 
p2
, 
p3
, 
p4
, KING});

1375 
P›ûTy³
 
p4
 = 
PAWN
;…4 < 
KING
; ++p4)

1376 
EÁryTabË
.
	`š£¹
({
KING
, 
p1
, 
p2
, 
p3
, KING, 
p4
});

1379 
P›ûTy³
 
p3
 = 
PAWN
;…3 <ğ
p1
; ++p3)

1380 
P›ûTy³
 
p4
 = 
PAWN
;…4 <ğ(
p1
 =ğ
p3
 ? 
p2
 :…3); ++p4)

1381 
EÁryTabË
.
	`š£¹
({
KING
, 
p1
, 
p2
, KING, 
p3
, 
p4
});

1385 
sync_šfo_out
 << "šfØ¡ršg Found " << 
EÁryTabË
.
	`size
(è<< "abËba£s" << 
sync_šfo_’dl
;

1386 
	}
}

1396 
WDLScÜe
 
	gTabËba£s
::
	$´obe_wdl
(
Pos™iÚ
& 
pos
, 
ProbeS‹
* 
»suÉ
) {

1398 *
»suÉ
 = 
OK
;

1399  
	`£¬ch
(
pos
, 
»suÉ
);

1400 
	}
}

1427 
	gTabËba£s
::
	$´obe_dtz
(
Pos™iÚ
& 
pos
, 
ProbeS‹
* 
»suÉ
) {

1429 *
»suÉ
 = 
OK
;

1430 
WDLScÜe
 
wdl
 = 
£¬ch
<
Œue
>(
pos
, 
»suÉ
);

1432 ià(*
»suÉ
 =ğ
FAIL
 || 
wdl
 =ğ
WDLD¿w
)

1437 ià(*
»suÉ
 =ğ
ZEROING_BEST_MOVE
)

1438  
	`dtz_befÜe_z”ošg
(
wdl
);

1440 
dtz
 = 
´obe_bË
<
DTZEÁry
>(
pos
, 
»suÉ
, 
wdl
);

1442 ià(*
»suÉ
 =ğ
FAIL
)

1445 ià(*
»suÉ
 !ğ
CHANGE_STM
)

1446  (
dtz
 + 100 * (
wdl
 =ğ
WDLBËs£dLoss
 || wdÈ=ğ
WDLCur£dWš
)è* 
	`sign_of
(wdl);

1450 
S‹Info
 
¡
;

1451 
mšDTZ
 = 0xFFFF;

1453 cÚ¡ 
Move
& 
move
 : 
MoveLi¡
<
LEGAL
>(
pos
))

1455 
boŞ
 
z”ošg
 = 
pos
.
	`ÿ±u»
(
move
è|| 
	`ty³_of
Õos.
	`moved_p›û
(move)è=ğ
PAWN
;

1457 
pos
.
	`do_move
(
move
, 
¡
);

1463 
dtz
 = 
z”ošg
 ? -
	`dtz_befÜe_z”ošg
(
	`£¬ch
(
pos
, 
»suÉ
))

1464 : -
	`´obe_dtz
(
pos
, 
»suÉ
);

1466 
pos
.
	`undo_move
(
move
);

1468 ià(*
»suÉ
 =ğ
FAIL
)

1473 ià(!
z”ošg
)

1474 
dtz
 +ğ
	`sign_of
(dtz);

1477 ià(
dtz
 < 
mšDTZ
 && 
	`sign_of
(dtzè=ğsign_of(
wdl
))

1478 
mšDTZ
 = 
dtz
;

1484  
mšDTZ
 == 0xFFFF ? -1 : minDTZ;

1485 
	}
}

1489 
	$has_»³©ed
(
S‹Info
 *
¡
)

1492 
i
 = 4, 
e
 = 
¡d
::
	`mš
(
¡
->
ruË50
, st->
¶›sFromNuÎ
);

1494 ià(
e
 < 
i
)

1497 
S‹Info
 *
¡p
 = 
¡
->
´evious
->previous;

1500 
¡p
 = s->
´evious
->previous;

1502 ià(
¡p
->
key
 =ğ
¡
->key)

1505 
i
 += 2;

1506 } 
i
 <ğ
e
);

1508 
¡
 = st->
´evious
;

1510 
	}
}

1518 
boŞ
 
	gTabËba£s
::
	$roÙ_´obe
(
Pos™iÚ
& 
pos
, 
S—rch
::
RoÙMoves
& 
roÙMoves
, 
V®ue
& 
scÜe
)

1520 
ProbeS‹
 
»suÉ
;

1521 
dtz
 = 
	`´obe_dtz
(
pos
, &
»suÉ
);

1523 ià(
»suÉ
 =ğ
FAIL
)

1524  
çl£
;

1526 
S‹Info
 
¡
;

1529 
size_t
 
i
 = 0; i < 
roÙMoves
.
	`size
(); ++i) {

1530 
Move
 
move
 = 
roÙMoves
[
i
].
pv
[0];

1531 
pos
.
	`do_move
(
move
, 
¡
);

1532 
v
 = 0;

1534 ià(
pos
.
	`check”s
(è&& 
dtz
 > 0) {

1535 
ExtMove
 
s
[
MAX_MOVES
];

1537 ià(
g’”©e
<
LEGAL
>(
pos
, 
s
) == s)

1538 
v
 = 1;

1541 ià(!
v
) {

1542 ià(
¡
.
ruË50
 != 0) {

1543 
v
 = -
	`´obe_dtz
(
pos
, &
»suÉ
);

1545 ià(
v
 > 0)

1546 ++
v
;

1547 ià(
v
 < 0)

1548 --
v
;

1550 
v
 = -
	`´obe_wdl
(
pos
, &
»suÉ
);

1551 
v
 = 
	`dtz_befÜe_z”ošg
(
	`WDLScÜe
(v));

1555 
pos
.
	`undo_move
(
move
);

1557 ià(
»suÉ
 =ğ
FAIL
)

1558  
çl£
;

1560 
roÙMoves
[
i
].
scÜe
 = (
V®ue
)
v
;

1565 
út50
 = 
¡
.
´evious
->
ruË50
;

1569 
WDLScÜe
 
wdl
 = 
WDLD¿w
;

1571 ià(
dtz
 > 0)

1572 
wdl
 = (
dtz
 + 
út50
 <ğ100è? 
WDLWš
 : 
WDLCur£dWš
;

1573 ià(
dtz
 < 0)

1574 
wdl
 = (-
dtz
 + 
út50
 <ğ100è? 
WDLLoss
 : 
WDLBËs£dLoss
;

1577 
scÜe
 = 
WDL_to_v®ue
[
wdl
 + 2];

1582 ià(
wdl
 =ğ
WDLCur£dWš
 && 
dtz
 <= 100)

1583 
scÜe
 = (
V®ue
)(((200 - 
dtz
 - 
út50
è* (
PawnV®ueEg
)) / 200);

1584 ià(
wdl
 =ğ
WDLBËs£dLoss
 && 
dtz
 >= -100)

1585 
scÜe
 = -(
V®ue
)(((200 + 
dtz
 - 
út50
è* (
PawnV®ueEg
)) / 200);

1588 
size_t
 
j
 = 0;

1590 ià(
dtz
 > 0) {

1591 
be¡
 = 0xffff;

1593 
size_t
 
i
 = 0; i < 
roÙMoves
.
	`size
(); ++i) {

1594 
v
 = 
roÙMoves
[
i
].
scÜe
;

1596 ià(
v
 > 0 && v < 
be¡
)

1597 
be¡
 = 
v
;

1600 
max
 = 
be¡
;

1604 ià(!
	`has_»³©ed
(
¡
.
´evious
è&& 
be¡
 + 
út50
 <= 99)

1605 
max
 = 99 - 
út50
;

1607 
size_t
 
i
 = 0; i < 
roÙMoves
.
	`size
(); ++i) {

1608 
v
 = 
roÙMoves
[
i
].
scÜe
;

1610 ià(
v
 > 0 && v <ğ
max
)

1611 
roÙMoves
[
j
++] =„oÙMoves[
i
];

1613 } ià(
dtz
 < 0) {

1614 
be¡
 = 0;

1616 
size_t
 
i
 = 0; i < 
roÙMoves
.
	`size
(); ++i) {

1617 
v
 = 
roÙMoves
[
i
].
scÜe
;

1619 ià(
v
 < 
be¡
)

1620 
be¡
 = 
v
;

1624 ià(-
be¡
 * 2 + 
út50
 < 100)

1625  
Œue
;

1627 
size_t
 
i
 = 0; i < 
roÙMoves
.
	`size
(); ++i) {

1628 ià(
roÙMoves
[
i
].
scÜe
 =ğ
be¡
)

1629 
roÙMoves
[
j
++] =„oÙMoves[
i
];

1633 
size_t
 
i
 = 0; i < 
roÙMoves
.
	`size
(); ++i) {

1634 ià(
roÙMoves
[
i
].
scÜe
 == 0)

1635 
roÙMoves
[
j
++] =„oÙMoves[
i
];

1639 
roÙMoves
.
	`»size
(
j
, 
S—rch
::
	`RoÙMove
(
MOVE_NONE
));

1641  
Œue
;

1642 
	}
}

1649 
boŞ
 
	gTabËba£s
::
	$roÙ_´obe_wdl
(
Pos™iÚ
& 
pos
, 
S—rch
::
RoÙMoves
& 
roÙMoves
, 
V®ue
& 
scÜe
)

1651 
ProbeS‹
 
»suÉ
;

1653 
WDLScÜe
 
wdl
 = 
TabËba£s
::
	`´obe_wdl
(
pos
, &
»suÉ
);

1655 ià(
»suÉ
 =ğ
FAIL
)

1656  
çl£
;

1658 
scÜe
 = 
WDL_to_v®ue
[
wdl
 + 2];

1660 
S‹Info
 
¡
;

1662 
be¡
 = 
WDLLoss
;

1665 
size_t
 
i
 = 0; i < 
roÙMoves
.
	`size
(); ++i) {

1666 
Move
 
move
 = 
roÙMoves
[
i
].
pv
[0];

1667 
pos
.
	`do_move
(
move
, 
¡
);

1668 
WDLScÜe
 
v
 = -
TabËba£s
::
	`´obe_wdl
(
pos
, &
»suÉ
);

1669 
pos
.
	`undo_move
(
move
);

1671 ià(
»suÉ
 =ğ
FAIL
)

1672  
çl£
;

1674 
roÙMoves
[
i
].
scÜe
 = (
V®ue
)
v
;

1676 ià(
v
 > 
be¡
)

1677 
be¡
 = 
v
;

1680 
size_t
 
j
 = 0;

1682 
size_t
 
i
 = 0; i < 
roÙMoves
.
	`size
(); ++i) {

1683 ià(
roÙMoves
[
i
].
scÜe
 =ğ
be¡
)

1684 
roÙMoves
[
j
++] =„oÙMoves[
i
];

1687 
roÙMoves
.
	`»size
(
j
, 
S—rch
::
	`RoÙMove
(
MOVE_NONE
));

1689  
Œue
;

1690 
	}
}

	@syzygy/tbprobe.h

20 #iâdeà
TBPROBE_H


21 
	#TBPROBE_H


	)

23 
	~<o¡»am
>

25 
	~"../£¬ch.h
"

27 
Çme¥aû
 
	gTabËba£s
 {

29 
	eWDLScÜe
 {

30 
	gWDLLoss
 = -2,

31 
	gWDLBËs£dLoss
 = -1,

32 
	gWDLD¿w
 = 0,

33 
	gWDLCur£dWš
 = 1,

34 
	gWDLWš
 = 2,

36 
	gWDLScÜeNÚe
 = -1000

40 
	eProbeS‹
 {

41 
	gFAIL
 = 0,

42 
	gOK
 = 1,

43 
	gCHANGE_STM
 = -1,

44 
	gZEROING_BEST_MOVE
 = 2

47 
MaxC¬dš®™y
;

49 
š™
(cÚ¡ 
¡d
::
¡ršg
& 
·ths
);

50 
WDLScÜe
 
´obe_wdl
(
Pos™iÚ
& 
pos
, 
ProbeS‹
* 
»suÉ
);

51 
´obe_dtz
(
Pos™iÚ
& 
pos
, 
ProbeS‹
* 
»suÉ
);

52 
boŞ
 
roÙ_´obe
(
Pos™iÚ
& 
pos
, 
S—rch
::
RoÙMoves
& 
roÙMoves
, 
V®ue
& 
scÜe
);

53 
boŞ
 
roÙ_´obe_wdl
(
Pos™iÚ
& 
pos
, 
S—rch
::
RoÙMoves
& 
roÙMoves
, 
V®ue
& 
scÜe
);

54 
f‹r_roÙ_moves
(
Pos™iÚ
& 
pos
, 
S—rch
::
RoÙMoves
& 
roÙMoves
);

56 
šlše
 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
, cÚ¡ 
WDLScÜe
 
	gv
) {

58 
	gos
 << (
	gv
 =ğ
WDLLoss
 ? "Loss" :

59 
v
 =ğ
WDLBËs£dLoss
 ? "Blessed†oss" :

60 
v
 =ğ
WDLD¿w
 ? "Draw" :

61 
v
 =ğ
WDLCur£dWš
 ? "Cursed win" :

62 
v
 =ğ
WDLWš
 ? "Win" : "None");

64  
	gos
;

67 
šlše
 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
, cÚ¡ 
ProbeS‹
 
	gv
) {

69 
	gos
 << (
	gv
 =ğ
FAIL
 ? "Failed" :

70 
v
 =ğ
OK
 ? "Success" :

71 
v
 =ğ
CHANGE_STM
 ? "Probed opponent side" :

72 
v
 =ğ
ZEROING_BEST_MOVE
 ? "Best move zeroes DTZ" : "None");

74  
	gos
;

	@thread.cpp

21 
	~<®gÜ™hm
>

22 
	~<ÿs£¹
>

24 
	~"moveg’.h
"

25 
	~"£¬ch.h
"

26 
	~"th»ad.h
"

27 
	~"uci.h
"

28 
	~"syzygy/tb´obe.h
"

30 
Th»adPoŞ
 
	gTh»ads
;

35 
	gTh»ad
::
	$Th»ad
() {

37 
»£tC®ls
 = 
ex™
 = 
çl£
;

38 
maxPly
 = 
ÿÎsCÁ
 = 0;

39 
tbH™s
 = 0;

40 
idx
 = 
Th»ads
.
	`size
();

42 
¡d
::
unique_lock
<
Mu‹x
> 
	`lk
(
mu‹x
);

43 
£¬chšg
 = 
Œue
;

44 
ÇtiveTh»ad
 = 
¡d
::
	`th»ad
(&
Th»ad
::
idË_loİ
, 
this
);

45 
¦“pCÚd™iÚ
.
	`wa™
(
lk
, [&]{  !
£¬chšg
; });

46 
	}
}

51 
	gTh»ad
::~
	$Th»ad
() {

53 
mu‹x
.
	`lock
();

54 
ex™
 = 
Œue
;

55 
¦“pCÚd™iÚ
.
	`nÙify_Úe
();

56 
mu‹x
.
	`uÆock
();

57 
ÇtiveTh»ad
.
	`još
();

58 
	}
}

64 
	gTh»ad
::
	$wa™_fÜ_£¬ch_fšished
() {

66 
¡d
::
unique_lock
<
Mu‹x
> 
	`lk
(
mu‹x
);

67 
¦“pCÚd™iÚ
.
	`wa™
(
lk
, [&]{  !
£¬chšg
; });

68 
	}
}

73 
	gTh»ad
::
	$wa™
(
¡d
::
©omic_boŞ
& 
cÚd™iÚ
) {

75 
¡d
::
unique_lock
<
Mu‹x
> 
	`lk
(
mu‹x
);

76 
¦“pCÚd™iÚ
.
	`wa™
(
lk
, [&]{  
	`boŞ
(
cÚd™iÚ
); });

77 
	}
}

82 
	gTh»ad
::
	$¡¬t_£¬chšg
(
boŞ
 
»sume
) {

84 
¡d
::
unique_lock
<
Mu‹x
> 
	`lk
(
mu‹x
);

86 ià(!
»sume
)

87 
£¬chšg
 = 
Œue
;

89 
¦“pCÚd™iÚ
.
	`nÙify_Úe
();

90 
	}
}

95 
	gTh»ad
::
	$ev®u©e_pos™iÚ
(
Pos™iÚ
& 
pos
, 
S‹Li¡PŒ
& 
¡©es
, cÚ¡ 
S—rch
::
Lim™sTy³
& 
lim™s
) {

97 
this
->
	`wa™_fÜ_£¬ch_fšished
();

99 
S—rch
::
SigÇls
.
¡İOnPÚd”h™
 = S—rch::SigÇls.
¡İ
 = 
çl£
;

100 
this
->
wÜk”Lim™s
 = 
lim™s
;

101 
S—rch
::
RoÙMoves
 
£¬chRoÙMoves
;

103 cÚ¡‡uto& 
m
 : 
MoveLi¡
<
LEGAL
>(
pos
))

104 iàĞ
lim™s
.
£¬chmoves
.
	`em±y
()

105 || 
¡d
::
	`couÁ
(
lim™s
.
£¬chmoves
.
	`begš
(),†im™s.£¬chmoves.
	`’d
(), 
m
))

106 
£¬chRoÙMoves
.
	`push_back
(
S—rch
::
	`RoÙMove
(
m
));

108 ià(!
£¬chRoÙMoves
.
	`em±y
())

109 
TabËba£s
::
	`f‹r_roÙ_moves
(
pos
, 
£¬chRoÙMoves
);

111 
this
->
maxPly
 = 0;

112 
this
->
tbH™s
 = 0;

113 
this
->
roÙD•th
 = 
DEPTH_ZERO
;

114 
this
->
roÙMoves
 = 
£¬chRoÙMoves
;

115 
this
->
roÙPos
.
	`£t
(
pos
.
	`ãn
(),…os.
	`is_chess960
(), &
¡©es
->
	`back
(),his);

117 
this
->
	`¡¬t_£¬chšg
();

118 
	}
}

122 
	gTh»ad
::
	$idË_loİ
() {

124 
WšProcGroup
::
	`bšdThisTh»ad
(
idx
);

126 !
ex™
)

128 
¡d
::
unique_lock
<
Mu‹x
> 
	`lk
(
mu‹x
);

130 
£¬chšg
 = 
çl£
;

132 !
£¬chšg
 && !
ex™
)

134 
¦“pCÚd™iÚ
.
	`nÙify_Úe
();

135 
¦“pCÚd™iÚ
.
	`wa™
(
lk
);

138 
lk
.
	`uÆock
();

140 ià(!
ex™
)

141 
	`£¬ch
();

143 
	}
}

151 
	gTh»adPoŞ
::
	$š™
() {

153 
	`push_back
(
Ãw
 
	`MašTh»ad
());

154 
	`»ad_uci_İtiÚs
();

155 
	}
}

162 
	gTh»adPoŞ
::
	$ex™
() {

164 
	`size
())

165 
d–‘e
 
	`back
(), 
	`pİ_back
();

166 
	}
}

173 
	gTh»adPoŞ
::
	$»ad_uci_İtiÚs
() {

175 
size_t
 
»que¡ed
 = 
O±iÚs
["Threads"];

177 
	`as£¹
(
»que¡ed
 > 0);

179 
	`size
(è< 
»que¡ed
)

180 
	`push_back
(
Ãw
 
	`Th»ad
());

182 
	`size
(è> 
»que¡ed
)

183 
d–‘e
 
	`back
(), 
	`pİ_back
();

184 
	}
}

189 
ušt64_t
 
	gTh»adPoŞ
::
	$nodes_£¬ched
() const {

191 
ušt64_t
 
nodes
 = 0;

192 
Th»ad
* 
th
 : *
this
)

193 
nodes
 +ğ
th
->
roÙPos
.
	`nodes_£¬ched
();

194  
nodes
;

195 
	}
}

200 
ušt64_t
 
	gTh»adPoŞ
::
	$tb_h™s
() const {

202 
ušt64_t
 
h™s
 = 0;

203 
Th»ad
* 
th
 : *
this
)

204 
h™s
 +ğ
th
->
tbH™s
;

205  
h™s
;

206 
	}
}

212 
	gTh»adPoŞ
::
	$¡¬t_thškšg
(
Pos™iÚ
& 
pos
, 
S‹Li¡PŒ
& 
¡©es
,

213 cÚ¡ 
S—rch
::
Lim™sTy³
& 
lim™s
) {

215 
	`maš
()->
	`wa™_fÜ_£¬ch_fšished
();

217 
S—rch
::
SigÇls
.
¡İOnPÚd”h™
 = S—rch::SigÇls.
¡İ
 = 
çl£
;

218 
S—rch
::
Lim™s
 = 
lim™s
;

219 
S—rch
::
RoÙMoves
 
roÙMoves
;

221 cÚ¡‡uto& 
m
 : 
MoveLi¡
<
LEGAL
>(
pos
))

222 iàĞ
lim™s
.
£¬chmoves
.
	`em±y
()

223 || 
¡d
::
	`couÁ
(
lim™s
.
£¬chmoves
.
	`begš
(),†im™s.£¬chmoves.
	`’d
(), 
m
))

224 
roÙMoves
.
	`push_back
(
S—rch
::
	`RoÙMove
(
m
));

226 ià(!
roÙMoves
.
	`em±y
())

227 
TabËba£s
::
	`f‹r_roÙ_moves
(
pos
, 
roÙMoves
);

231 
	`as£¹
(
¡©es
.
	`g‘
(è|| 
£tupS‹s
.get());

233 ià(
¡©es
.
	`g‘
())

234 
£tupS‹s
 = 
¡d
::
	`move
(
¡©es
);

236 
S‹Info
 
tmp
 = 
£tupS‹s
->
	`back
();

238 
Th»ad
* 
th
 : 
Th»ads
)

240 
th
->
maxPly
 = 0;

241 
th
->
tbH™s
 = 0;

242 
th
->
roÙD•th
 = 
DEPTH_ZERO
;

243 
th
->
roÙMoves
 =„ootMoves;

244 
th
->
roÙPos
.
	`£t
(
pos
.
	`ãn
(),…os.
	`is_chess960
(), &
£tupS‹s
->
	`back
(),h);

247 
£tupS‹s
->
	`back
(èğ
tmp
;

249 
	`maš
()->
	`¡¬t_£¬chšg
();

250 
	}
}

	@thread.h

21 #iâdeà
THREAD_H_INCLUDED


22 
	#THREAD_H_INCLUDED


	)

24 
	~<©omic
>

25 
	~<b™£t
>

26 
	~<cÚd™iÚ_v¬ŸbË
>

27 
	~<mu‹x
>

28 
	~<th»ad
>

29 
	~<veùÜ
>

31 
	~"m©”Ÿl.h
"

32 
	~"mov•ick.h
"

33 
	~"·wns.h
"

34 
	~"pos™iÚ.h
"

35 
	~"£¬ch.h
"

36 
	~"th»ad_wš32.h
"

44 şas 
	cTh»ad
 {

46 
	m¡d
::
th»ad
 
ÇtiveTh»ad
;

47 
Mu‹x
 
	mmu‹x
;

48 
CÚd™iÚV¬ŸbË
 
	m¦“pCÚd™iÚ
;

49 
boŞ
 
	mex™
, 
	m£¬chšg
;

51 
	mpublic
:

52 
Th»ad
();

53 
	mvœtu®
 ~
Th»ad
();

54 
vœtu®
 
£¬ch
();

55 
idË_loİ
();

56 
¡¬t_£¬chšg
(
boŞ
 
»sume
 = 
çl£
);

57 
ev®u©e_pos™iÚ
(
Pos™iÚ
& 
pos
, 
S‹Li¡PŒ
& 
¡©es
, cÚ¡ 
S—rch
::
Lim™sTy³
& 
lim™s
);

58 
wa™_fÜ_£¬ch_fšished
();

59 
wa™
(
¡d
::
©omic_boŞ
& 
cÚd™iÚ
);

60 
boŞ
 
	$isS—rchšg
(è{ 
£¬chšg
;};

62 
Pawns
::
TabË
 
·wnsTabË
;

63 
M©”Ÿl
::
TabË
 
m©”ŸlTabË
;

64 
Endgames
 
’dgames
;

65 
size_t
 
idx
, 
PVIdx
;

66 
maxPly
, 
ÿÎsCÁ
;

67 
ušt64_t
 
tbH™s
;

69 
Pos™iÚ
 
roÙPos
;

70 
S—rch
::
RoÙMoves
 
roÙMoves
;

72 
S—rch
::
Lim™sTy³
 
wÜk”Lim™s
;

73 
D•th
 
roÙD•th
;

74 
D•th
 
com¶‘edD•th
;

75 
¡d
::
©omic_boŞ
 
»£tC®ls
;

76 
MoveSts
 
couÁ”Moves
;

77 
Hi¡ÜySts
 
hi¡Üy
;

78 
CouÁ”MoveHi¡ÜySts
 
couÁ”MoveHi¡Üy
;

79 
	}
};

84 
	gMašTh»ad
 : 
public
 
Th»ad
 {

85 
vœtu®
 
£¬ch
();

86 
vœtu®
 
ma¡”PrÙocŞ
();

88 
boŞ
 
	g—syMovePÏyed
, 
	gçedLow
;

89 
	gbe¡MoveChªges
;

90 
V®ue
 
	g´eviousScÜe
;

98 
	gTh»adPoŞ
 : 
public
 
¡d
::
veùÜ
<
Th»ad
*> {

100 
š™
();

101 
ex™
();

103 
MašTh»ad
* 
maš
(è{  
	g¡©ic_ÿ¡
<
	gMašTh»ad
*>(
©
(0)); }

104 
¡¬t_thškšg
(
Pos™iÚ
&, 
S‹Li¡PŒ
&, cÚ¡ 
S—rch
::
Lim™sTy³
&);

105 
»ad_uci_İtiÚs
();

106 
ušt64_t
 
nodes_£¬ched
() const;

107 
ušt64_t
 
tb_h™s
() const;

109 
	g´iv©e
:

110 
S‹Li¡PŒ
 
£tupS‹s
;

113 
Th»adPoŞ
 
Th»ads
;

	@thread_win32.h

21 #iâdeà
THREAD_WIN32_H_INCLUDED


22 
	#THREAD_WIN32_H_INCLUDED


	)

34 
	~<cÚd™iÚ_v¬ŸbË
>

35 
	~<mu‹x
>

37 #ià
defšed
(
_WIN32
è&& !defšed(
_MSC_VER
)

39 #iâdeà
NOMINMAX


40 
	#NOMINMAX


42 

	)

43 
	#WIN32_LEAN_AND_MEAN


	)

44 
	~<wšdows.h
>

45 #undeà
WIN32_LEAN_AND_MEAN


46 #undeà
NOMINMAX


51 
	sMu‹x
 {

52 
Mu‹x
(è{ 
In™ŸlizeCr™iÿlSeùiÚ
(&
cs
); }

53 ~
Mu‹x
(è{ 
D–‘eCr™iÿlSeùiÚ
(&
cs
); }

54 
lock
(è{ 
EÁ”Cr™iÿlSeùiÚ
(&
cs
); }

55 
uÆock
(è{ 
L—veCr™iÿlSeùiÚ
(&
cs
); }

57 
	m´iv©e
:

58 
CRITICAL_SECTION
 
cs
;

61 
	g¡d
::
	tcÚd™iÚ_v¬ŸbË_ªy
 
	tCÚd™iÚV¬ŸbË
;

65 
	g¡d
::
	tmu‹x
 
	tMu‹x
;

66 
	g¡d
::
	tcÚd™iÚ_v¬ŸbË
 
	tCÚd™iÚV¬ŸbË
;

	@timeman.cpp

21 
	~<®gÜ™hm
>

22 
	~<cæßt
>

23 
	~<cm©h
>

25 
	~"£¬ch.h
"

26 
	~"timemª.h
"

27 
	~"uci.h
"

29 
TimeMªagem’t
 
	gTime
;

31 
	gÇme¥aû
 {

33 
	eTimeTy³
 { 
	gO±imumTime
, 
	gMaxTime
 };

35 cÚ¡ 
	gMoveHÜizÚ
 = 50;

36 cÚ¡ 
	gMaxR©io
 = 7.09;

37 cÚ¡ 
	gS‹®R©io
 = 0.35;

45 
move_impÜnû
(
¶y
) {

47 cÚ¡ 
	gXSÿË
 = 7.64;

48 cÚ¡ 
	gXShiá
 = 58.4;

49 cÚ¡ 
	gSkew
 = 0.183;

51  
pow
((1 + 
exp
((
¶y
 - 
XShiá
è/ 
XSÿË
)), -
Skew
è+ 
	gDBL_MIN
;

54 
	g‹m¶©e
<
TimeTy³
 
	gT
>

55 
»maššg
(
myTime
, 
movesToGo
, 
¶y
, 
¦owMov”
) {

57 cÚ¡ 
	gTMaxR©io
 = (
T
 =ğ
O±imumTime
 ? 1 : 
MaxR©io
);

58 cÚ¡ 
	gTS‹®R©io
 = (
T
 =ğ
O±imumTime
 ? 0 : 
S‹®R©io
);

60 
	gmoveImpÜnû
 = (
move_impÜnû
(
¶y
è* 
¦owMov”
) / 100;

61 
	gÙh”MovesImpÜnû
 = 0;

63 
	gi
 = 1; i < 
	gmovesToGo
; ++i)

64 
	gÙh”MovesImpÜnû
 +ğ
move_impÜnû
(
¶y
 + 2 * 
i
);

66 
	g¿tio1
 = (
TMaxR©io
 * 
moveImpÜnû
è/ (TMaxR©iØ* moveImpÜnû + 
Ùh”MovesImpÜnû
);

67 
	g¿tio2
 = (
moveImpÜnû
 + 
TS‹®R©io
 * 
Ùh”MovesImpÜnû
) / (moveImportance + otherMovesImportance);

69  (
myTime
 * 
	g¡d
::
mš
(
¿tio1
, 
¿tio2
));

84 
	gTimeMªagem’t
::
	$š™
(
S—rch
::
Lim™sTy³
& 
lim™s
, 
CŞÜ
 
us
, 
¶y
) {

86 
mšThškšgTime
 = 
O±iÚs
["Minimum Thinking Time"];

87 
moveOv”h—d
 = 
O±iÚs
["Move Overhead"];

88 
¦owMov”
 = 
O±iÚs
["Slow Mover"];

89 
Åm£c
 = 
O±iÚs
["nodestime"];

95 ià(
Åm£c
)

97 ià(!
avaabËNodes
)

98 
avaabËNodes
 = 
Åm£c
 * 
lim™s
.
time
[
us
];

101 
lim™s
.
time
[
us
] = ()
avaabËNodes
;

102 
lim™s
.
šc
[
us
] *ğ
Åm£c
;

103 
lim™s
.
Åm£c
 =‚pmsec;

106 
¡¬tTime
 = 
lim™s
.startTime;

107 
İtimumTime
 = 
maximumTime
 = 
¡d
::
	`max
(
lim™s
.
time
[
us
], 
mšThškšgTime
);

109 cÚ¡ 
MaxMTG
 = 
lim™s
.
move¡ogo
 ? 
¡d
::
	`mš
Öim™s.move¡ogo, 
MoveHÜizÚ
) : MoveHorizon;

114 
hypMTG
 = 1; hypMTG <ğ
MaxMTG
; ++hypMTG)

117 
hypMyTime
 = 
lim™s
.
time
[
us
]

118 + 
lim™s
.
šc
[
us
] * (
hypMTG
 - 1)

119 - 
moveOv”h—d
 * (2 + 
¡d
::
	`mš
(
hypMTG
, 40));

121 
hypMyTime
 = 
¡d
::
	`max
(hypMyTime, 0);

123 
t1
 = 
mšThškšgTime
 + 
»maššg
<
O±imumTime
>(
hypMyTime
, 
hypMTG
, 
¶y
, 
¦owMov”
);

124 
t2
 = 
mšThškšgTime
 + 
»maššg
<
MaxTime
 >(
hypMyTime
, 
hypMTG
, 
¶y
, 
¦owMov”
);

126 
İtimumTime
 = 
¡d
::
	`mš
(
t1
, optimumTime);

127 
maximumTime
 = 
¡d
::
	`mš
(
t2
, maximumTime);

130 ià(
O±iÚs
["Ponder"])

131 
İtimumTime
 += optimumTime / 4;

132 
	}
}

	@timeman.h

21 #iâdeà
TIMEMAN_H_INCLUDED


22 
	#TIMEMAN_H_INCLUDED


	)

24 
	~"misc.h
"

25 
	~"£¬ch.h
"

26 
	~"th»ad.h
"

31 şas 
	cTimeMªagem’t
 {

32 
	mpublic
:

33 
š™
(
S—rch
::
Lim™sTy³
& 
lim™s
, 
CŞÜ
 
us
, 
¶y
);

34 
	$İtimum
(ècÚ¡ {  
İtimumTime
; }

35 
	$maximum
(ècÚ¡ {  
maximumTime
; 
	}
}

36 
	$–­£d
(ècÚ¡ {  (
S—rch
::
Lim™s
.
Åm£c
 ? 
Th»ads
.
	`nodes_£¬ched
(è: 
	`now
(è- 
¡¬tTime
); 
	}
}

38 
št64_t
 
	gavaabËNodes
;

40 
	g´iv©e
:

41 
TimePošt
 
¡¬tTime
;

42 
	gİtimumTime
;

43 
	gmaximumTime
;

46 
TimeMªagem’t
 
Time
;

	@tt.cpp

21 
	~<c¡ršg
>

22 
	~<io¡»am
>

24 
	~"b™bßrd.h
"

25 
	~"‰.h
"

27 
T¿n¥os™iÚTabË
 
	gTT
;

34 
	gT¿n¥os™iÚTabË
::
	$»size
(
size_t
 
mbSize
) {

36 
size_t
 
ÃwClu¡”CouÁ
 = 
	`size_t
(1è<< 
	`msb
((
mbSize
 * 1024 * 1024è/ (
Clu¡”
));

38 ià(
ÃwClu¡”CouÁ
 =ğ
şu¡”CouÁ
)

41 
şu¡”CouÁ
 = 
ÃwClu¡”CouÁ
;

43 
	`ä“
(
mem
);

44 
mem
 = 
	`ÿÎoc
(
şu¡”CouÁ
 * (
Clu¡”
è+ 
CacheLšeSize
 - 1, 1);

46 ià(!
mem
)

48 
¡d
::
û¼
 << "FaedØ®loÿ‹ " << 
mbSize


49 << "MB fÜ¿n¥os™iÚabË." << 
¡d
::
’dl
;

50 
	`ex™
(
EXIT_FAILURE
);

53 
bË
 = (
Clu¡”
*)((
	`ušŒ_t
(
mem
è+ 
CacheLšeSize
 - 1) & ~(CacheLineSize - 1));

54 
	}
}

61 
	gT¿n¥os™iÚTabË
::
	$ş—r
() {

63 
¡d
::
	`mem£t
(
bË
, 0, 
şu¡”CouÁ
 * (
Clu¡”
));

64 
	}
}

74 
TTEÁry
* 
	gT¿n¥os™iÚTabË
::
	$´obe
(cÚ¡ 
Key
 
key
, 
boŞ
& 
found
) const {

76 
TTEÁry
* cÚ¡ 
‰e
 = 
	`fœ¡_’Œy
(
key
);

77 cÚ¡ 
ušt16_t
 
key16
 = 
key
 >> 48;

79 
i
 = 0; i < 
Clu¡”Size
; ++i)

80 ià(!
‰e
[
i
].
key16
 ||te[i].key16 == key16)

82 ià((
‰e
[
i
].
g’Bound8
 & 0xFCè!ğ
g’”©iÚ8
 &&‹[i].
key16
)

83 
‰e
[
i
].
g’Bound8
 = 
	`ušt8_t
(
g’”©iÚ8
 |‹[i].
	`bound
());

85  
found
 = (
boŞ
)
‰e
[
i
].
key16
, &tte[i];

89 
TTEÁry
* 
»¶aû
 = 
‰e
;

90 
i
 = 1; i < 
Clu¡”Size
; ++i)

95 iàĞ
»¶aû
->
d•th8
 - ((259 + 
g’”©iÚ8
 -„•Ïû->
g’Bound8
) & 0xFC) * 2

96 > 
‰e
[
i
].
d•th8
 - ((259 + 
g’”©iÚ8
 -‹[i].
g’Bound8
) & 0xFC) * 2)

97 
»¶aû
 = &
‰e
[
i
];

99  
found
 = 
çl£
, 
»¶aû
;

100 
	}
}

106 
	gT¿n¥os™iÚTabË
::
	$hashfuÎ
() const {

108 
út
 = 0;

109 
i
 = 0; i < 1000 / 
Clu¡”Size
; i++)

111 cÚ¡ 
TTEÁry
* 
‰e
 = &
bË
[
i
].
’Œy
[0];

112 
j
 = 0; j < 
Clu¡”Size
; j++)

113 ià((
‰e
[
j
].
g’Bound8
 & 0xFCè=ğ
g’”©iÚ8
)

114 
út
++;

116  
út
;

117 
	}
}

	@tt.h

21 #iâdeà
TT_H_INCLUDED


22 
	#TT_H_INCLUDED


	)

24 
	~<ÿs£¹
>

25 
	~<c¡ddef
>

27 
	~"misc.h
"

28 
	~"ty³s.h
"

30 
	~<mpi.h
>

42 
	sTTEÁry
 {

44 
Move
 
move
(ècÚ¡ {  (
	mMove
 )
	mmove16
; }

45 
V®ue
 
v®ue
(ècÚ¡ {  (
	mV®ue
)
	mv®ue16
; }

46 
V®ue
 
ev®
(ècÚ¡ {  (
	mV®ue
)
	mev®16
; }

47 
D•th
 
d•th
(ècÚ¡ {  (
	mD•th
)(
d•th8
 * (
	mONE_PLY
)); }

48 
Bound
 
bound
(ècÚ¡ {  (
	mBound
)(
	mg’Bound8
 & 0x3); }

50 
§ve
(
Key
 
k
, 
V®ue
 
v
, 
Bound
 
b
, 
D•th
 
d
, 
Move
 
m
, V®u
ev
, 
ušt8_t
 
g
) {

52 
as£¹
(
d
 / 
ONE_PLY
 * ONE_PLY == d);

55 ià(
	mm
 || (
	mk
 >> 48è!ğ
key16
)

56 
move16
 = (
ušt16_t
)
m
;

59 iàĞ(
	mk
 >> 48è!ğ
key16


60 || 
d
 / 
ONE_PLY
 > 
d•th8
 - 4

62 || 
b
 =ğ
BOUND_EXACT
)

64 
key16
 = (
ušt16_t
)(
k
 >> 48);

65 
	mv®ue16
 = (
št16_t
)
v
;

66 
	mev®16
 = (
št16_t
)
ev
;

67 
	mg’Bound8
 = (
ušt8_t
)(
g
 | 
b
);

68 
	md•th8
 = (
št8_t
)(
d
 / 
ONE_PLY
);

72 
fl_di¥Ïûm’ts
(
MPI_Ašt
 
‰e_di¥Ïûm’ts
[]) {

73 
	m‰e_di¥Ïûm’ts
[0] = 
off£tof
(
TTEÁry
, 
key16
);

74 
	m‰e_di¥Ïûm’ts
[1] = 
off£tof
(
TTEÁry
, 
move16
);

75 
	m‰e_di¥Ïûm’ts
[2] = 
off£tof
(
TTEÁry
, 
v®ue16
);

76 
	m‰e_di¥Ïûm’ts
[3] = 
off£tof
(
TTEÁry
, 
ev®16
);

77 
	m‰e_di¥Ïûm’ts
[4] = 
off£tof
(
TTEÁry
, 
g’Bound8
);

78 
	m‰e_di¥Ïûm’ts
[5] = 
off£tof
(
TTEÁry
, 
d•th8
);

81 
	m´iv©e
:

82 
ä›nd
 
şass
 
T¿n¥os™iÚTabË
;

85 
ušt16_t
 
	mkey16
;

86 
ušt16_t
 
	mmove16
;

87 
št16_t
 
	mv®ue16
;

88 
št16_t
 
	mev®16
;

89 
ušt8_t
 
	mg’Bound8
;

90 
št8_t
 
	md•th8
;

95 
	sFuÎTTEÁry
 {

97 
ušt64_t
 
	mkey
;

98 
ušt16_t
 
	mmove16
;

99 
št16_t
 
	mv®ue16
;

100 
št16_t
 
	mev®16
;

101 
ušt8_t
 
	mg’Bound8
;

102 
št8_t
 
	md•th8
;

105 cÚ¡ 
	gCacheLšeSize
 = 64;

106 cÚ¡ 
	gClu¡”Size
 = 3;

107 cÚ¡ 
	gClu¡”Paddšg
 = 2;

109 
	sClu¡”
 {

110 
TTEÁry
 
	m’Œy
[
Clu¡”Size
];

111 
ušt16_t
 
	mkey
;

121 şas 
	cT¿n¥os™iÚTabË
 {

123 cÚ¡ 
	mCacheLšeSize
 = 64;

124 cÚ¡ 
	mClu¡”Size
 = 3;

125 cÚ¡ 
	mCacheCouÁ
 = 1024;

127 
¡©ic_as£¹
(
CacheLšeSize
 % (
Clu¡”
) == 0, "Cluster size incorrect");

129 
	$check_keys
() const {

130 
size_t
 
i
 = 0; i < 
şu¡”CouÁ
; ++i) {

131 
	`as£¹
(
bË
[
i
].
key
 == i);

135 
public
:

136 ~
	$T¿n¥os™iÚTabË
(è{ 
	`ä“
(
mem
); 
	}
}

137 
	$Ãw_£¬ch
(è{ 
g’”©iÚ8
 +ğ4; 
	}
}

138 
ušt8_t
 
	$g’”©iÚ
(ècÚ¡ {  
g’”©iÚ8
; 
	}
}

139 
TTEÁry
* 
	$´obe
(cÚ¡ 
Key
 
key
, 
boŞ
& 
found
) const;

140 
	$hashfuÎ
() const;

141 
	`»size
(
size_t
 
mbSize
);

142 
	`ş—r
();

145 
TTEÁry
* 
	$fœ¡_’Œy
(cÚ¡ 
Key
 
key
) const {

146  &
bË
[(
size_t
)
key
 & (
şu¡”CouÁ
 - 1)].
’Œy
[0];

147 
	}
}

149 
	g´iv©e
:

150 
size_t
 
şu¡”CouÁ
;

151 
Clu¡”
* 
	gbË
;

152 
Clu¡”
* 
	gÿche
;

153 * 
	gmem
;

154 * 
	gmem2
;

155 
ušt8_t
 
	gg’”©iÚ8
;

158 
T¿n¥os™iÚTabË
 
TT
;

	@types.h

21 #iâdeà
TYPES_H_INCLUDED


22 
	#TYPES_H_INCLUDED


	)

41 
	~<ÿs£¹
>

42 
	~<cùy³
>

43 
	~<şim™s
>

44 
	~<c¡dšt
>

45 
	~<c¡dlib
>

47 #ià
defšed
(
_MSC_VER
)

49 #´agm¨
w¬nšg
(
di§bË
: 4127)

50 #´agm¨
w¬nšg
(
di§bË
: 4146)

51 #´agm¨
w¬nšg
(
di§bË
: 4800)

62 #ià
defšed
(
_WIN64
è&& defšed(
_MSC_VER
)

63 
	~<šŒš.h
>

64 
	#IS_64BIT


	)

67 #ià
defšed
(
USE_POPCNT
è&& (defšed(
__INTEL_COMPILER
è|| defšed(
_MSC_VER
))

68 
	~<nmmšŒš.h
>

71 #ià!
defšed
(
NO_PREFETCH
è&& (defšed(
__INTEL_COMPILER
è|| defšed(
_MSC_VER
))

72 
	~<xmmšŒš.h
>

75 #ià
defšed
(
USE_PEXT
)

76 
	~<immšŒš.h
>

77 
	#³xt
(
b
, 
m
è
	`_³xt_u64
(b, m)

	)

79 
	#³xt
(
b
, 
m
è(0)

	)

82 #ifdeà
USE_POPCNT


83 cÚ¡ 
boŞ
 
	gHasPİCÁ
 = 
Œue
;

85 cÚ¡ 
boŞ
 
	gHasPİCÁ
 = 
çl£
;

88 #ifdeà
USE_PEXT


89 cÚ¡ 
boŞ
 
	gHasPext
 = 
Œue
;

91 cÚ¡ 
boŞ
 
	gHasPext
 = 
çl£
;

94 #ifdeà
IS_64BIT


95 cÚ¡ 
boŞ
 
	gIs64B™
 = 
Œue
;

97 cÚ¡ 
boŞ
 
	gIs64B™
 = 
çl£
;

100 
ušt64_t
 
	tKey
;

101 
ušt64_t
 
	tB™bßrd
;

103 cÚ¡ 
	gMAX_MOVES
 = 256;

104 cÚ¡ 
	gMAX_PLY
 = 128;

118 
	gMove
 : {

119 
MOVE_NONE
,

120 
	gMOVE_NULL
 = 65

123 
	eMoveTy³
 {

124 
	mNORMAL
,

125 
	mPROMOTION
 = 1 << 14,

126 
	mENPASSANT
 = 2 << 14,

127 
	mCASTLING
 = 3 << 14

130 
	eCŞÜ
 {

131 
	mWHITE
, 
	mBLACK
, 
	mNO_COLOR
, 
	mCOLOR_NB
 = 2

134 
	eCa¡lšgSide
 {

135 
	mKING_SIDE
, 
	mQUEEN_SIDE
, 
	mCASTLING_SIDE_NB
 = 2

138 
	eCa¡lšgRight
 {

139 
	mNO_CASTLING
,

140 
	mWHITE_OO
,

141 
	mWHITE_OOO
 = 
WHITE_OO
 << 1,

142 
	mBLACK_OO
 = 
WHITE_OO
 << 2,

143 
	mBLACK_OOO
 = 
WHITE_OO
 << 3,

144 
	mANY_CASTLING
 = 
WHITE_OO
 | 
WHITE_OOO
 | 
BLACK_OO
 | 
BLACK_OOO
,

145 
	mCASTLING_RIGHT_NB
 = 16

148 
	g‹m¶©e
<
CŞÜ
 
	gC
, 
Ca¡lšgSide
 
	gS
> 
	sMakeCa¡lšg
 {

149 cÚ¡ 
Ca¡lšgRight


150 
	mright
 = 
C
 =ğ
WHITE
 ? 
S
 =ğ
QUEEN_SIDE
 ? 
WHITE_OOO
 : 
WHITE_OO


151 : 
S
 =ğ
QUEEN_SIDE
 ? 
BLACK_OOO
 : 
BLACK_OO
;

154 
	ePha£
 {

155 
	mPHASE_ENDGAME
,

156 
	mPHASE_MIDGAME
 = 128,

157 
	mMG
 = 0, 
	mEG
 = 1, 
	mPHASE_NB
 = 2

160 
	eSÿËFaùÜ
 {

161 
	mSCALE_FACTOR_DRAW
 = 0,

162 
	mSCALE_FACTOR_ONEPAWN
 = 48,

163 
	mSCALE_FACTOR_NORMAL
 = 64,

164 
	mSCALE_FACTOR_MAX
 = 128,

165 
	mSCALE_FACTOR_NONE
 = 255

168 
	eBound
 {

169 
	mBOUND_NONE
,

170 
	mBOUND_UPPER
,

171 
	mBOUND_LOWER
,

172 
	mBOUND_EXACT
 = 
BOUND_UPPER
 | 
BOUND_LOWER


175 
	gV®ue
 : {

176 
VALUE_ZERO
 = 0,

177 
	gVALUE_DRAW
 = 0,

178 
	gVALUE_KNOWN_WIN
 = 10000,

179 
	gVALUE_MATE
 = 32000,

180 
	gVALUE_INFINITE
 = 32001,

181 
	gVALUE_NONE
 = 32002,

183 
	gVALUE_MATE_IN_MAX_PLY
 = 
VALUE_MATE
 - 2 * 
MAX_PLY
,

184 
	gVALUE_MATED_IN_MAX_PLY
 = -
VALUE_MATE
 + 2 * 
MAX_PLY
,

186 
	gPawnV®ueMg
 = 188, 
	gPawnV®ueEg
 = 248,

187 
	gKnightV®ueMg
 = 753, 
	gKnightV®ueEg
 = 832,

188 
	gBishİV®ueMg
 = 814, 
	gBishİV®ueEg
 = 890,

189 
	gRookV®ueMg
 = 1285, 
	gRookV®ueEg
 = 1371,

190 
	gQu“nV®ueMg
 = 2513, 
	gQu“nV®ueEg
 = 2648,

192 
	gMidgameLim™
 = 15258, 
	gEndgameLim™
 = 3915

195 
	eP›ûTy³
 {

196 
	mNO_PIECE_TYPE
, 
	mPAWN
, 
	mKNIGHT
, 
	mBISHOP
, 
	mROOK
, 
	mQUEEN
, 
	mKING
,

197 
	mALL_PIECES
 = 0,

198 
	mPIECE_TYPE_NB
 = 8

201 
	eP›û
 {

202 
	mNO_PIECE
,

203 
	mW_PAWN
 = 1, 
	mW_KNIGHT
, 
	mW_BISHOP
, 
	mW_ROOK
, 
	mW_QUEEN
, 
	mW_KING
,

204 
	mB_PAWN
 = 9, 
	mB_KNIGHT
, 
	mB_BISHOP
, 
	mB_ROOK
, 
	mB_QUEEN
, 
	mB_KING
,

205 
	mPIECE_NB
 = 16

208 cÚ¡ 
P›û
 
	gP›ûs
[] = { 
W_PAWN
, 
W_KNIGHT
, 
W_BISHOP
, 
W_ROOK
, 
W_QUEEN
, 
W_KING
,

209 
B_PAWN
, 
B_KNIGHT
, 
B_BISHOP
, 
B_ROOK
, 
B_QUEEN
, 
B_KING
 };

210 
V®ue
 
P›ûV®ue
[
PHASE_NB
][
PIECE_NB
];

212 
	gD•th
 : {

214 
ONE_PLY
 = 1,

216 
	gDEPTH_ZERO
 = 0 * 
ONE_PLY
,

217 
	gDEPTH_QS_CHECKS
 = 0 * 
ONE_PLY
,

218 
	gDEPTH_QS_NO_CHECKS
 = -1 * 
ONE_PLY
,

219 
	gDEPTH_QS_RECAPTURES
 = -5 * 
ONE_PLY
,

221 
	gDEPTH_NONE
 = -6 * 
ONE_PLY
,

222 
	gDEPTH_MAX
 = 
MAX_PLY
 * 
ONE_PLY


225 
¡©ic_as£¹
(!(
ONE_PLY
 & (ONE_PLY - 1)), "ONE_PLY is‚ot‡…ower of 2");

227 
	eSqu¬e
 {

228 
	mSQ_A1
, 
	mSQ_B1
, 
	mSQ_C1
, 
	mSQ_D1
, 
	mSQ_E1
, 
	mSQ_F1
, 
	mSQ_G1
, 
	mSQ_H1
,

229 
	mSQ_A2
, 
	mSQ_B2
, 
	mSQ_C2
, 
	mSQ_D2
, 
	mSQ_E2
, 
	mSQ_F2
, 
	mSQ_G2
, 
	mSQ_H2
,

230 
	mSQ_A3
, 
	mSQ_B3
, 
	mSQ_C3
, 
	mSQ_D3
, 
	mSQ_E3
, 
	mSQ_F3
, 
	mSQ_G3
, 
	mSQ_H3
,

231 
	mSQ_A4
, 
	mSQ_B4
, 
	mSQ_C4
, 
	mSQ_D4
, 
	mSQ_E4
, 
	mSQ_F4
, 
	mSQ_G4
, 
	mSQ_H4
,

232 
	mSQ_A5
, 
	mSQ_B5
, 
	mSQ_C5
, 
	mSQ_D5
, 
	mSQ_E5
, 
	mSQ_F5
, 
	mSQ_G5
, 
	mSQ_H5
,

233 
	mSQ_A6
, 
	mSQ_B6
, 
	mSQ_C6
, 
	mSQ_D6
, 
	mSQ_E6
, 
	mSQ_F6
, 
	mSQ_G6
, 
	mSQ_H6
,

234 
	mSQ_A7
, 
	mSQ_B7
, 
	mSQ_C7
, 
	mSQ_D7
, 
	mSQ_E7
, 
	mSQ_F7
, 
	mSQ_G7
, 
	mSQ_H7
,

235 
	mSQ_A8
, 
	mSQ_B8
, 
	mSQ_C8
, 
	mSQ_D8
, 
	mSQ_E8
, 
	mSQ_F8
, 
	mSQ_G8
, 
	mSQ_H8
,

236 
	mSQ_NONE
,

238 
	mSQUARE_NB
 = 64,

240 
	mNORTH
 = 8,

241 
	mEAST
 = 1,

242 
	mSOUTH
 = -8,

243 
	mWEST
 = -1,

245 
	mNORTH_EAST
 = 
NORTH
 + 
EAST
,

246 
	mSOUTH_EAST
 = 
SOUTH
 + 
EAST
,

247 
	mSOUTH_WEST
 = 
SOUTH
 + 
WEST
,

248 
	mNORTH_WEST
 = 
NORTH
 + 
WEST


251 
	gFe
 : {

252 
FILE_A
, 
	gFILE_B
, 
	gFILE_C
, 
	gFILE_D
, 
	gFILE_E
, 
	gFILE_F
, 
	gFILE_G
, 
	gFILE_H
, 
	gFILE_NB


255 
	gRªk
 : {

256 
RANK_1
, 
	gRANK_2
, 
	gRANK_3
, 
	gRANK_4
, 
	gRANK_5
, 
	gRANK_6
, 
	gRANK_7
, 
	gRANK_8
, 
	gRANK_NB


264 
	gScÜe
 : { 
SCORE_ZERO
 };

266 
šlše
 
ScÜe
 
	$make_scÜe
(
mg
, 
eg
) {

267  
	`ScÜe
(()(()
eg
 << 16è+ 
mg
);

268 
	}
}

273 
šlše
 
V®ue
 
	$eg_v®ue
(
ScÜe
 
s
) {

275 uniÚ { 
ušt16_t
 
u
; 
št16_t
 
s
; } 
eg
 = { 
	`ušt16_t
((s + 0x8000) >> 16) };

276  
	`V®ue
(
eg
.
s
);

277 
	}
}

279 
šlše
 
V®ue
 
	$mg_v®ue
(
ScÜe
 
s
) {

281 uniÚ { 
ušt16_t
 
u
; 
št16_t
 
s
; } 
mg
 = { 
	`ušt16_t
((s)) };

282  
	`V®ue
(
mg
.
s
);

283 
	}
}

285 
	#ENABLE_BASE_OPERATORS_ON
(
T
) \

286 
šlše
 
T
 
İ”©Ü
+(T 
d1
, T 
d2
è{  
	`T
((d1) + (d2)); } \

287 
šlše
 
T
 
İ”©Ü
-(T 
d1
, T 
d2
è{  
	`T
((d1) - (d2)); } \

288 
šlše
 
T
 
İ”©Ü
-(T 
d
è{  
	`T
(-(d)); } \

289 
šlše
 
T
& 
İ”©Ü
+=(T& 
d1
, T 
d2
) {  d1 = d1 + d2; } \

290 
šlše
 
T
& 
İ”©Ü
-=(T& 
d1
, T 
d2
) {  d1 = d1 - d2; } \

291 

	)

292 
	#ENABLE_FULL_OPERATORS_ON
(
T
) \

293 
	`ENABLE_BASE_OPERATORS_ON
(
T
) \

294 
šlše
 
T
 
İ”©Ü
*(
i
, T 
d
è{  
	`T
(i * (d)); } \

295 
šlše
 
T
 
İ”©Ü
*(T 
d
, 
i
è{  
	`T
((d) * i); } \

296 
šlše
 
T
& 
İ”©Ü
++(T& 
d
è{  d = 
	`T
((d) + 1); } \

297 
šlše
 
T
& 
İ”©Ü
--(T& 
d
è{  d = 
	`T
((d) - 1); } \

298 
šlše
 
T
 
İ”©Ü
/(T 
d
, 
i
è{  
	`T
((d) / i); } \

299 
šlše
 
İ”©Ü
/(
T
 
d1
, T 
d2
) {  (d1) / (d2); } \

300 
šlše
 
T
& 
İ”©Ü
*=(T& 
d
, 
i
è{  d = 
	`T
((d) * i); } \

301 
šlše
 
T
& 
İ”©Ü
/=(T& 
d
, 
i
è{  d = 
	`T
((dè/ i); }

	)

303 
	$ENABLE_FULL_OPERATORS_ON
(
V®ue
)

304 
	$ENABLE_FULL_OPERATORS_ON
(
P›ûTy³
)

305 
	$ENABLE_FULL_OPERATORS_ON
(
P›û
)

306 
	$ENABLE_FULL_OPERATORS_ON
(
CŞÜ
)

307 
	$ENABLE_FULL_OPERATORS_ON
(
D•th
)

308 
	$ENABLE_FULL_OPERATORS_ON
(
Squ¬e
)

309 
	$ENABLE_FULL_OPERATORS_ON
(
Fe
)

310 
	$ENABLE_FULL_OPERATORS_ON
(
Rªk
)

312 
	$ENABLE_BASE_OPERATORS_ON
(
ScÜe
)

314 #undeà
ENABLE_FULL_OPERATORS_ON


315 #undeà
ENABLE_BASE_OPERATORS_ON


318 
šlše
 
V®ue
 
İ”©Ü
+(V®u
v
, 
i
è{  
	`V®ue
((vè+ i); 
	}
}

319 
šlše
 
V®ue
 
	gİ”©Ü
-(V®u
	gv
, 
	gi
è{  V®ue((
v
è- 
i
); }

320 
šlše
 
	gV®ue
& 
	gİ”©Ü
+=(
V®ue
& 
v
, 
	gi
è{  
	gv
 = v + 
i
; }

321 
šlše
 
	gV®ue
& 
	gİ”©Ü
-=(
V®ue
& 
v
, 
	gi
è{  
	gv
 = v - 
i
; }

325 
šlše
 
ScÜe
 
	gİ”©Ü
*(ScÜ
	gs1
, ScÜ
	gs2
);

328 
šlše
 
ScÜe
 
	gİ”©Ü
/(ScÜ
	gs
, 
	gi
) {

329  
make_scÜe
(
mg_v®ue
(
s
è/ 
i
, 
eg_v®ue
(s) / i);

333 
šlše
 
ScÜe
 
	gİ”©Ü
*(ScÜ
	gs
, 
	gi
) {

334 
ScÜe
 
	g»suÉ
 = ScÜe((
s
è* 
i
);

336 
as£¹
(
eg_v®ue
(
»suÉ
è=ğ(
i
 *ƒg_v®ue(
s
)));

337 
as£¹
(
mg_v®ue
(
»suÉ
è=ğ(
i
 * mg_v®ue(
s
)));

338 
as£¹
((
i
 =ğ0è|| (
»suÉ
 / iè=ğ
s
 );

340  
	g»suÉ
;

343 
šlše
 
CŞÜ
 
	gİ”©Ü
~(CŞÜ 
	gc
) {

344  
CŞÜ
(
c
 ^ 
BLACK
);

347 
šlše
 
Squ¬e
 
	gİ”©Ü
~(Squ¬
	gs
) {

348  
Squ¬e
(
s
 ^ 
SQ_A8
);

351 
šlše
 
P›û
 
	gİ”©Ü
~(P›û 
	gpc
) {

352  
P›û
(
pc
 ^ 8);

355 
šlše
 
Ca¡lšgRight
 
	gİ”©Ü
|(
CŞÜ
 
	gc
, 
Ca¡lšgSide
 
	gs
) {

356  
Ca¡lšgRight
(
WHITE_OO
 << ((
s
 =ğ
QUEEN_SIDE
è+ 2 * 
c
));

359 
šlše
 
V®ue
 
	$m©e_š
(
¶y
) {

360  
VALUE_MATE
 - 
¶y
;

361 
	}
}

363 
šlše
 
V®ue
 
	$m©ed_š
(
¶y
) {

364  -
VALUE_MATE
 + 
¶y
;

365 
	}
}

367 
šlše
 
Squ¬e
 
	$make_squ¬e
(
Fe
 
f
, 
Rªk
 
r
) {

368  
	`Squ¬e
((
r
 << 3è+ 
f
);

369 
	}
}

371 
šlše
 
P›û
 
	$make_p›û
(
CŞÜ
 
c
, 
P›ûTy³
 
±
) {

372  
	`P›û
((
c
 << 3è+ 
±
);

373 
	}
}

375 
šlše
 
P›ûTy³
 
	$ty³_of
(
P›û
 
pc
) {

376  
	`P›ûTy³
(
pc
 & 7);

377 
	}
}

379 
šlše
 
CŞÜ
 
	$cŞÜ_of
(
P›û
 
pc
) {

380 
	`as£¹
(
pc
 !ğ
NO_PIECE
);

381  
	`CŞÜ
(
pc
 >> 3);

382 
	}
}

384 
šlše
 
boŞ
 
	$is_ok
(
Squ¬e
 
s
) {

385  
s
 >ğ
SQ_A1
 && s <ğ
SQ_H8
;

386 
	}
}

388 
šlše
 
Fe
 
	$fe_of
(
Squ¬e
 
s
) {

389  
	`Fe
(
s
 & 7);

390 
	}
}

392 
šlše
 
Rªk
 
	$¿nk_of
(
Squ¬e
 
s
) {

393  
	`Rªk
(
s
 >> 3);

394 
	}
}

396 
šlše
 
Squ¬e
 
	$»Ïtive_squ¬e
(
CŞÜ
 
c
, 
Squ¬e
 
s
) {

397  
	`Squ¬e
(
s
 ^ (
c
 * 56));

398 
	}
}

400 
šlše
 
Rªk
 
	$»Ïtive_¿nk
(
CŞÜ
 
c
, 
Rªk
 
r
) {

401  
	`Rªk
(
r
 ^ (
c
 * 7));

402 
	}
}

404 
šlše
 
Rªk
 
	$»Ïtive_¿nk
(
CŞÜ
 
c
, 
Squ¬e
 
s
) {

405  
	`»Ïtive_¿nk
(
c
, 
	`¿nk_of
(
s
));

406 
	}
}

408 
šlše
 
boŞ
 
	$İpos™e_cŞÜs
(
Squ¬e
 
s1
, Squ¬
s2
) {

409 
s
 = (
s1
è^ (
s2
);

410  ((
s
 >> 3) ^ s) & 1;

411 
	}
}

413 
šlše
 
Squ¬e
 
	$·wn_push
(
CŞÜ
 
c
) {

414  
c
 =ğ
WHITE
 ? 
NORTH
 : 
SOUTH
;

415 
	}
}

417 
šlše
 
Squ¬e
 
	$äom_sq
(
Move
 
m
) {

418  
	`Squ¬e
((
m
 >> 6) & 0x3F);

419 
	}
}

421 
šlše
 
Squ¬e
 
	$to_sq
(
Move
 
m
) {

422  
	`Squ¬e
(
m
 & 0x3F);

423 
	}
}

425 
šlše
 
MoveTy³
 
	$ty³_of
(
Move
 
m
) {

426  
	`MoveTy³
(
m
 & (3 << 14));

427 
	}
}

429 
šlše
 
P›ûTy³
 
	$´omÙiÚ_ty³
(
Move
 
m
) {

430  
	`P›ûTy³
(((
m
 >> 12è& 3è+ 
KNIGHT
);

431 
	}
}

433 
šlše
 
Move
 
	$make_move
(
Squ¬e
 
äom
, Squ¬
to
) {

434  
	`Move
((
äom
 << 6è+ 
to
);

435 
	}
}

437 
	g‹m¶©e
<
MoveTy³
 
	gT
>

438 
šlše
 
Move
 
	$make
(
Squ¬e
 
äom
, Squ¬
to
, 
P›ûTy³
 
±
 = 
KNIGHT
) {

439  
	`Move
(
T
 + ((
±
 - 
KNIGHT
è<< 12è+ (
äom
 << 6è+ 
to
);

440 
	}
}

442 
šlše
 
boŞ
 
	$is_ok
(
Move
 
m
) {

443  
	`äom_sq
(
m
è!ğ
	`to_sq
(m);

444 
	}
}

	@uci.cpp

21 
	~<io¡»am
>

22 
	~<s¡»am
>

23 
	~<¡ršg
>

24 
	~<veùÜ
>

26 
	~"ev®u©e.h
"

27 
	~"moveg’.h
"

28 
	~"pos™iÚ.h
"

29 
	~"£¬ch.h
"

30 
	~"th»ad.h
"

31 
	~"timemª.h
"

32 
	~"uci.h
"

33 
	~"syzygy/tb´obe.h
"

35 
usšg
 
Çme¥aû
 
	g¡d
;

37 
b’chm¬k
(cÚ¡ 
Pos™iÚ
& 
pos
, 
i¡»am
& 
is
);

39 
	gÇme¥aû
 {

42 cÚ¡ * 
	gS¹FEN
 = "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";

47 
S‹Li¡PŒ
 
S‹s
(
Ãw
 
¡d
::
deque
<
S‹Info
>(1));

55 
pos™iÚ
(
Pos™iÚ
& 
pos
, 
i¡ršg¡»am
& 
is
) {

57 
Move
 
	gm
;

58 
¡ršg
 
	gtok’
, 
	gãn
;

60 
	gis
 >> 
	gtok’
;

62 ià(
	gtok’
 == "startpos")

64 
ãn
 = 
S¹FEN
;

65 
	gis
 >> 
	gtok’
;

67 ià(
	gtok’
 == "fen")

68 
is
 >> 
tok’
 &&oken != "moves")

69 
ãn
 +ğ
tok’
 + " ";

73 
	gS‹s
 = 
S‹Li¡PŒ
(
Ãw
 
¡d
::
deque
<
S‹Info
>(1));

74 
	gpos
.
£t
(
ãn
, 
O±iÚs
["UCI_Chess960"], &
S‹s
->
back
(), 
Th»ads
.
maš
());

77 
	gis
 >> 
	gtok’
 && (
	gm
 = 
UCI
::
to_move
(
pos
, 
tok’
)è!ğ
MOVE_NONE
)

79 
S‹s
->
push_back
(
S‹Info
());

80 
	gpos
.
do_move
(
m
, 
S‹s
->
back
());

88 
£tİtiÚ
(
i¡ršg¡»am
& 
is
) {

90 
¡ršg
 
	gtok’
, 
	gÇme
, 
	gv®ue
;

92 
	gis
 >> 
	gtok’
;

95 
	gis
 >> 
	gtok’
 &&oken != "value")

96 
Çme
 +ğ
¡ršg
(" ",‚ame.
em±y
(è? 0 : 1è+ 
tok’
;

99 
	gis
 >> 
	gtok’
)

100 
	gv®ue
 +ğ
¡ršg
(" ", 
v®ue
.
em±y
(è? 0 : 1è+ 
tok’
;

102 ià(
	gO±iÚs
.
couÁ
(
Çme
))

103 
	gO±iÚs
[
Çme
] = 
v®ue
;

105 
	gsync_šfo_out
 << "NØsuch o±iÚ: " << 
	gÇme
 << 
	gsync_šfo_’dl
;

113 
go
(
Pos™iÚ
& 
pos
, 
i¡ršg¡»am
& 
is
) {

115 
	gS—rch
::
Lim™sTy³
 
lim™s
;

116 
¡ršg
 
	gtok’
;

118 
	glim™s
.
	g¡¬tTime
 = 
now
();

120 
	gis
 >> 
	gtok’
)

121 ià(
	gtok’
 == "searchmoves")

122 
is
 >> 
tok’
)

123 
lim™s
.
£¬chmoves
.
push_back
(
UCI
::
to_move
(
pos
, 
tok’
));

125 ià(
	gtok’
 =ğ"wtime"è
is
 >> 
lim™s
.
time
[
WHITE
];

126 ià(
	gtok’
 =ğ"btime"è
is
 >> 
lim™s
.
time
[
BLACK
];

127 ià(
	gtok’
 =ğ"wšc"è
is
 >> 
lim™s
.
šc
[
WHITE
];

128 ià(
	gtok’
 =ğ"bšc"è
is
 >> 
lim™s
.
šc
[
BLACK
];

129 ià(
	gtok’
 =ğ"move¡ogo"è
is
 >> 
lim™s
.
move¡ogo
;

130 ià(
	gtok’
 =ğ"d•th"è
is
 >> 
lim™s
.
d•th
;

131 ià(
	gtok’
 =ğ"nodes"è
is
 >> 
lim™s
.
nodes
;

132 ià(
	gtok’
 =ğ"mov‘ime"è
is
 >> 
lim™s
.
mov‘ime
;

133 ià(
	gtok’
 =ğ"m©e"è
is
 >> 
lim™s
.
m©e
;

134 ià(
	gtok’
 =ğ"šfš™e"è
lim™s
.
šfš™e
 = 1;

135 ià(
	gtok’
 =ğ"pÚd”"è
lim™s
.
pÚd”
 = 1;

137 
	gTh»ads
.
¡¬t_thškšg
(
pos
, 
S‹s
, 
lim™s
);

149 
	gUCI
::
	$loİ
(
¬gc
, * 
¬gv
[]) {

151 
Pos™iÚ
 
pos
;

152 
¡ršg
 
tok’
, 
cmd
;

154 
pos
.
	`£t
(
S¹FEN
, 
çl£
, &
S‹s
->
	`back
(), 
Th»ads
.
	`maš
());

156 
i
 = 1; i < 
¬gc
; ++i)

157 
cmd
 +ğ
¡d
::
	`¡ršg
(
¬gv
[
i
]) + " ";

160 ià(
¬gc
 == 1) {

162 ià(
mpi_¿nk
 == 0) {

163 ià(!
	`g‘lše
(
cš
, 
cmd
)) {

164 
cmd
 = "quit";

166 
i
 = 1; i < 
mpi_size
; ++i) {

167 
	`MPI_S’d
(
cmd
.
	`c_¡r
(), cmd.
	`size
(), 
MPI_CHAR
, 
i
, 0, 
MPI_COMM_WORLD
);

170 
MPI_Stus
 
¡©us
;

171 
couÁ
;

172 
	`MPI_Probe
(0, 0, 
MPI_COMM_WORLD
, &
¡©us
);

173 
	`MPI_G‘_couÁ
(&
¡©us
, 
MPI_CHAR
, &
couÁ
);

174 
veùÜ
<> 
	`v
 (
couÁ
);

175 
	`MPI_Recv
(
v
.
	`d©a
(), 
couÁ
, 
MPI_CHAR
, 0, 0, 
MPI_COMM_WORLD
, 
MPI_STATUS_IGNORE
);

176 
cmd
 = 
	`¡ršg
(
v
.
	`begš
(), v.
	`’d
());

180 
i¡ršg¡»am
 
	`is
(
cmd
);

182 
tok’
.
	`ş—r
();

183 
is
 >> 
skws
 >> 
tok’
;

190 iàĞ
tok’
 == "quit"

191 || 
tok’
 == "stop"

192 || (
tok’
 =ğ"pÚd”h™" && 
S—rch
::
SigÇls
.
¡İOnPÚd”h™
))

194 
S—rch
::
SigÇls
.
¡İ
 = 
Œue
;

195 
Th»ads
.
	`maš
()->
	`¡¬t_£¬chšg
(
Œue
);

197 ià(
tok’
 == "ponderhit")

198 
S—rch
::
Lim™s
.
pÚd”
 = 0;

200 ià(
tok’
 == "uci")

201 
sync_šfo_out
 << "id‚am" << 
	`’gše_šfo
(
Œue
)

202 << "\n" << 
O±iÚs


203 << "\nuciok" << 
sync_šfo_’dl
;

205 ià(
tok’
 == "ucinewgame")

207 
S—rch
::
	`ş—r
();

208 
TabËba£s
::
	`š™
(
O±iÚs
["SyzygyPath"]);

209 
Time
.
avaabËNodes
 = 0;

211 ià(
tok’
 =ğ"i¤—dy"è
sync_šfo_out
 << "»adyok" << 
sync_šfo_’dl
;

212 ià(
tok’
 =ğ"go"è
	`go
(
pos
, 
is
);

213 ià(
tok’
 =ğ"pos™iÚ"è
	`pos™iÚ
(
pos
, 
is
);

214 ià(
tok’
 =ğ"£tİtiÚ"è
	`£tİtiÚ
(
is
);

217 ià(
tok’
 =ğ"æ"è
pos
.
	`æ
();

218 ià(
tok’
 =ğ"b’ch"è
	`b’chm¬k
(
pos
, 
is
);

219 ià(
tok’
 =ğ"d"è
sync_šfo_out
 << 
pos
 << 
sync_šfo_’dl
;

220 ià(
tok’
 =ğ"ev®"è
sync_šfo_out
 << 
Ev®
::
	`Œaû
(
pos
è<< 
sync_šfo_’dl
;

221 ià(
tok’
 == "perft")

223 
d•th
;

224 
¡ršg¡»am
 
ss
;

226 
is
 >> 
d•th
;

227 
ss
 << 
O±iÚs
["Hash"] << " "

228 << 
O±iÚs
["Th»ads"] << " " << 
d•th
 << " current…erft";

230 
	`b’chm¬k
(
pos
, 
ss
);

233 
sync_šfo_out
 << "UnknowÀcommªd: " << 
cmd
 << 
sync_šfo_’dl
;

235 } 
tok’
 !ğ"qu™" && 
¬gc
 == 1);

237 
Th»ads
.
	`maš
()->
	`wa™_fÜ_£¬ch_fšished
();

238 
	}
}

248 
¡ršg
 
	gUCI
::
	$v®ue
(
V®ue
 
v
) {

250 
¡ršg¡»am
 
ss
;

252 ià(
	`abs
(
v
è< 
VALUE_MATE
 - 
MAX_PLY
)

253 
ss
 << "ı " << 
v
 * 100 / 
PawnV®ueEg
;

255 
ss
 << "m©" << (
v
 > 0 ? 
VALUE_MATE
 - v + 1 : -VALUE_MATE - v) / 2;

257  
ss
.
	`¡r
();

258 
	}
}

263 
	g¡d
::
¡ršg
 
UCI
::
	$squ¬e
(
Squ¬e
 
s
) {

264  
¡d
::
¡ršg
{ ('a' + 
	`fe_of
(
s
)), ('1' + 
	`¿nk_of
(s)) };

265 
	}
}

273 
¡ršg
 
	gUCI
::
	$move
(
Move
 
m
, 
boŞ
 
chess960
) {

275 
Squ¬e
 
äom
 = 
	`äom_sq
(
m
);

276 
Squ¬e
 
to
 = 
	`to_sq
(
m
);

278 ià(
m
 =ğ
MOVE_NONE
)

281 ià(
m
 =ğ
MOVE_NULL
)

284 ià(
	`ty³_of
(
m
è=ğ
CASTLING
 && !
chess960
)

285 
to
 = 
	`make_squ¬e
ÑØ> 
äom
 ? 
FILE_G
 : 
FILE_C
, 
	`¿nk_of
(from));

287 
¡ršg
 
move
 = 
UCI
::
	`squ¬e
(
äom
è+ UCI::squ¬e(
to
);

289 ià(
	`ty³_of
(
m
è=ğ
PROMOTION
)

290 
move
 +ğ"…nbrqk"[
	`´omÙiÚ_ty³
(
m
)];

292  
move
;

293 
	}
}

299 
Move
 
	gUCI
::
	$to_move
(cÚ¡ 
Pos™iÚ
& 
pos
, 
¡ršg
& 
¡r
) {

301 ià(
¡r
.
	`Ëngth
() == 5)

302 
¡r
[4] = (
	`tŞow”
(str[4]));

304 cÚ¡‡uto& 
m
 : 
MoveLi¡
<
LEGAL
>(
pos
))

305 ià(
¡r
 =ğ
UCI
::
	`move
(
m
, 
pos
.
	`is_chess960
()))

306  
m
;

308  
MOVE_NONE
;

309 
	}
}

	@uci.h

21 #iâdeà
UCI_H_INCLUDED


22 
	#UCI_H_INCLUDED


	)

24 
	~<m­
>

25 
	~<¡ršg
>

27 
	~"ty³s.h
"

29 
şass
 
	gPos™iÚ
;

31 
Çme¥aû
 
	gUCI
 {

33 
şass
 
	gO±iÚ
;

36 
	sCa£In£ns™iveLess
 {

37 
boŞ
 
İ”©Ü
(è(cÚ¡ 
	g¡d
::
¡ršg
&, const std::string&) const;

41 
	g¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, 
	tO±iÚ
, 
	tCa£In£ns™iveLess
> 
	tO±iÚsM­
;

44 şas 
	cO±iÚ
 {

46 (*
	gOnChªge
)(cÚ¡ 
	tO±iÚ
&);

48 
	gpublic
:

49 
O±iÚ
(
OnChªge
 = 
nuÎ±r
);

50 
O±iÚ
(
boŞ
 
v
, 
OnChªge
 = 
nuÎ±r
);

51 
O±iÚ
(cÚ¡ * 
v
, 
OnChªge
 = 
nuÎ±r
);

52 
O±iÚ
(
v
, 
mšv
, 
maxv
, 
OnChªge
 = 
nuÎ±r
);

54 
	gO±iÚ
& 
	gİ”©Ü
=(cÚ¡ 
¡d
::
¡ršg
&);

55 
	gİ”©Ü
<<(cÚ¡ 
	gO±iÚ
&);

56 
İ”©Ü
 () const;

57 
İ”©Ü
 
	g¡d
::
¡ršg
() const;

59 
	g´iv©e
:

60 
ä›nd
 
¡d
::
o¡»am
& 
İ”©Ü
<<(¡d::o¡»am&, cÚ¡ 
	gO±iÚsM­
&);

62 
	g¡d
::
¡ršg
 
deçuÉV®ue
, 
	gcu¼’tV®ue
, 
	gty³
;

63 
	gmš
, 
	gmax
;

64 
size_t
 
	gidx
;

65 
OnChªge
 
	gÚ_chªge
;

68 
š™
(
O±iÚsM­
&);

69 
loİ
(
¬gc
, * 
¬gv
[]);

70 
	g¡d
::
¡ršg
 
v®ue
(
V®ue
 
v
);

71 
	g¡d
::
¡ršg
 
squ¬e
(
Squ¬e
 
s
);

72 
	g¡d
::
¡ršg
 
move
(
Move
 
m
, 
boŞ
 
chess960
);

73 
	g¡d
::
¡ršg
 
pv
(cÚ¡ 
Pos™iÚ
& 
pos
, 
D•th
 
d•th
, 
V®ue
 
®pha
, V®u
b‘a
);

74 
Move
 
to_move
(cÚ¡ 
Pos™iÚ
& 
pos
, 
¡d
::
¡ršg
& 
¡r
);

78 
UCI
::
O±iÚsM­
 
O±iÚs
;

	@ucioption.cpp

21 
	~<®gÜ™hm
>

22 
	~<ÿs£¹
>

23 
	~<o¡»am
>

25 
	~"misc.h
"

26 
	~"£¬ch.h
"

27 
	~"th»ad.h
"

28 
	~"‰.h
"

29 
	~"uci.h
"

30 
	~"syzygy/tb´obe.h
"

32 
usšg
 
	g¡d
::
¡ršg
;

34 
	gUCI
::
O±iÚsM­
 
O±iÚs
;

36 
Çme¥aû
 
	gUCI
 {

39 
Ú_ş—r_hash
(cÚ¡ 
O±iÚ
&è{ 
	gS—rch
::
ş—r
(); }

40 
Ú_hash_size
(cÚ¡ 
O±iÚ
& 
o
è{ 
	gTT
.
»size
(o); }

41 
Ú_logg”
(cÚ¡ 
O±iÚ
& 
o
è{ 
¡¬t_logg”
(o); }

42 
Ú_th»ads
(cÚ¡ 
O±iÚ
&è{ 
	gTh»ads
.
»ad_uci_İtiÚs
(); }

43 
Ú_tb_·th
(cÚ¡ 
O±iÚ
& 
o
è{ 
	gTabËba£s
::
š™
(o); }

47 
boŞ
 
	gCa£In£ns™iveLess
::
İ”©Ü
(è(cÚ¡ 
¡ršg
& 
s1
, cÚ¡ 
	g¡ršg
& 
	gs2
) const {

49  
	g¡d
::
Ëxicog¿phiÿl_com·»
(
s1
.
begš
(), s1.
’d
(), 
s2
.begin(), s2.end(),

50 [](
c1
, 
c2
è{  
tŞow”
(c1) <olower(c2); });

56 
š™
(
O±iÚsM­
& 
o
) {

58 cÚ¡ 
	gMaxHashMB
 = 
Is64B™
 ? 1024 * 1024 : 2048;

60 
	go
["Debug Log Fe"] << 
O±iÚ
("", 
Ú_logg”
);

61 
	go
["CÚ‹m±"] << 
O±iÚ
(0, -100, 100);

62 
	go
["Th»ads"] << 
O±iÚ
(1, 1, 512, 
Ú_th»ads
);

63 
	go
["Hash"] << 
O±iÚ
(16, 1, 
MaxHashMB
, 
Ú_hash_size
);

64 
	go
["CË¬ Hash"] << 
O±iÚ
(
Ú_ş—r_hash
);

65 
	go
["PÚd”"] << 
O±iÚ
(
çl£
);

66 
	go
["MuÉiPV"] << 
O±iÚ
(1, 1, 500);

67 
	go
["SkÈLev–"] << 
O±iÚ
(20, 0, 20);

68 
	go
["MovOv”h—d"] << 
O±iÚ
(30, 0, 5000);

69 
	go
["Mšimum Thškšg Time"] << 
O±iÚ
(20, 0, 5000);

70 
	go
["Slow Mov”"] << 
O±iÚ
(89, 10, 1000);

71 
	go
["node¡ime"] << 
O±iÚ
(0, 0, 10000);

72 
	go
["UCI_Chess960"] << 
O±iÚ
(
çl£
);

73 
	go
["SyzygyP©h"] << 
O±iÚ
("/loÿldisk/jkÙs/syzygy", 
Ú_tb_·th
);

74 
	go
["SyzygyProbeD•th"] << 
O±iÚ
(1, 1, 100);

75 
	go
["Syzygy50MoveRuË"] << 
O±iÚ
(
Œue
);

76 
	go
["SyzygyProbeLim™"] << 
O±iÚ
(6, 0, 6);

83 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
, cÚ¡ 
	gO±iÚsM­
& 
	gom
) {

85 
size_t
 
	gidx
 = 0; idx < 
	gom
.
size
(); ++idx)

86 cÚ¡‡uto& 
	g™
 : 
om
)

87 ià(
™
.
£cÚd
.
idx
 == idx)

89 cÚ¡ 
O±iÚ
& 
o
 = 
™
.
£cÚd
;

90 
	gos
 << "\nİtiÚ‚am" << 
	g™
.
	gfœ¡
 << "y³ " << 
	go
.
	gty³
;

92 ià(
	go
.
	gty³
 != "button")

93 
os
 << " deçuÉ " << 
o
.
deçuÉV®ue
;

95 ià(
	go
.
	gty³
 == "spin")

96 
os
 << " mš " << 
o
.
mš
 << " max " << o.
max
;

101  
	gos
;

107 
	gO±iÚ
::
O±iÚ
(cÚ¡ * 
v
, 
OnChªge
 
f
è: 
ty³
("¡ršg"), 
mš
(0), 
max
(0), 
Ú_chªge
(f)

108 { 
	gdeçuÉV®ue
 = 
cu¼’tV®ue
 = 
v
; }

110 
	gO±iÚ
::
O±iÚ
(
boŞ
 
v
, 
OnChªge
 
f
è: 
ty³
("check"), 
mš
(0), 
max
(0), 
Ú_chªge
(f)

111 { 
	gdeçuÉV®ue
 = 
cu¼’tV®ue
 = (
v
 ? "true" : "false"); }

113 
	gO±iÚ
::
O±iÚ
(
OnChªge
 
f
è: 
ty³
("bu‰Ú"), 
mš
(0), 
max
(0), 
Ú_chªge
(f)

116 
	gO±iÚ
::
O±iÚ
(
v
, 
mšv
, 
maxv
, 
OnChªge
 
f
è: 
ty³
("¥š"), 
mš
(mšv), 
max
(maxv), 
Ú_chªge
(f)

117 { 
	gdeçuÉV®ue
 = 
cu¼’tV®ue
 = 
¡d
::
to_¡ršg
(
v
); }

119 
	gO±iÚ
::
İ”©Ü
 () const {

120 
as£¹
(
ty³
 == "check" ||ype == "spin");

121  (
	gty³
 =ğ"¥š" ? 
¡oi
(
cu¼’tV®ue
) : currentValue == "true");

124 
	gO±iÚ
::
İ”©Ü
 
¡d
::
¡ršg
() const {

125 
as£¹
(
ty³
 == "string");

126  
	gcu¼’tV®ue
;

132 
	gO±iÚ
::
İ”©Ü
<<(cÚ¡ 
O±iÚ
& 
o
) {

134 
size_t
 
š£¹_Üd”
 = 0;

136 *
	gthis
 = 
o
;

137 
	gidx
 = 
š£¹_Üd”
++;

145 
	gO±iÚ
& O±iÚ::
İ”©Ü
=(cÚ¡ 
¡ršg
& 
v
) {

147 
as£¹
(!
ty³
.
em±y
());

149 iàĞ(
	gty³
 !ğ"bu‰Ú" && 
v
.
em±y
())

150 || (
ty³
 =ğ"check" && 
v
 != "true" && v != "false")

151 || (
ty³
 =ğ"¥š" && (
¡oi
(
v
è< 
mš
 || stoi(vè> 
max
)))

152  *
this
;

154 ià(
	gty³
 != "button")

155 
cu¼’tV®ue
 = 
v
;

157 ià(
	gÚ_chªge
)

158 
Ú_chªge
(*
this
);

160  *
	gthis
;

	@/usr/include/fcntl.h

22 #iâdef 
_FCNTL_H


23 
	#_FCNTL_H
 1

	)

25 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


31 
	~<b™s/ty³s.h
>

35 
	~<b™s/fú.h
>

39 #ifdeà
__O_TMPFILE


40 
	#__OPEN_NEEDS_MODE
(
oæag
) \

41 (((
oæag
è& 
O_CREAT
è!ğ0 || ((oæagè& 
__O_TMPFILE
è=ğ__O_TMPFILE)

	)

43 
	#__OPEN_NEEDS_MODE
(
oæag
è(((oæagè& 
O_CREAT
è!ğ0)

	)

49 #iâdeà
__mode_t_defšed


50 
__mode_t
 
	tmode_t
;

51 
	#__mode_t_defšed


	)

54 #iâdeà
__off_t_defšed


55 #iâdeà
__USE_FILE_OFFSET64


56 
__off_t
 
	toff_t
;

58 
__off64_t
 
	toff_t
;

60 
	#__off_t_defšed


	)

63 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


64 
__off64_t
 
	toff64_t
;

65 
	#__off64_t_defšed


	)

68 #iâdeà
__pid_t_defšed


69 
__pid_t
 
	tpid_t
;

70 
	#__pid_t_defšed


	)

74 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


75 
	#__Ãed_time¥ec


	)

76 
	~<time.h
>

77 
	~<b™s/¡©.h
>

79 
	#S_IFMT
 
__S_IFMT


	)

80 
	#S_IFDIR
 
__S_IFDIR


	)

81 
	#S_IFCHR
 
__S_IFCHR


	)

82 
	#S_IFBLK
 
__S_IFBLK


	)

83 
	#S_IFREG
 
__S_IFREG


	)

84 #ifdeà
__S_IFIFO


85 
	#S_IFIFO
 
__S_IFIFO


	)

87 #ifdeà
__S_IFLNK


88 
	#S_IFLNK
 
__S_IFLNK


	)

90 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8
è&& defšed 
__S_IFSOCK


91 
	#S_IFSOCK
 
__S_IFSOCK


	)

96 
	#S_ISUID
 
__S_ISUID


	)

97 
	#S_ISGID
 
__S_ISGID


	)

99 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


101 
	#S_ISVTX
 
__S_ISVTX


	)

104 
	#S_IRUSR
 
__S_IREAD


	)

105 
	#S_IWUSR
 
__S_IWRITE


	)

106 
	#S_IXUSR
 
__S_IEXEC


	)

108 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

110 
	#S_IRGRP
 (
S_IRUSR
 >> 3è

	)

111 
	#S_IWGRP
 (
S_IWUSR
 >> 3è

	)

112 
	#S_IXGRP
 (
S_IXUSR
 >> 3è

	)

114 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

116 
	#S_IROTH
 (
S_IRGRP
 >> 3è

	)

117 
	#S_IWOTH
 (
S_IWGRP
 >> 3è

	)

118 
	#S_IXOTH
 (
S_IXGRP
 >> 3è

	)

120 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

123 #ifdef 
__USE_MISC


124 #iâdeà
R_OK


127 
	#R_OK
 4

	)

128 
	#W_OK
 2

	)

129 
	#X_OK
 1

	)

130 
	#F_OK
 0

	)

135 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


136 
	#SEEK_SET
 0

	)

137 
	#SEEK_CUR
 1

	)

138 
	#SEEK_END
 2

	)

147 #ifdeà
__USE_ATFILE


148 
	#AT_FDCWD
 -100

	)

151 
	#AT_SYMLINK_NOFOLLOW
 0x100

	)

152 
	#AT_REMOVEDIR
 0x200

	)

154 
	#AT_SYMLINK_FOLLOW
 0x400

	)

155 #ifdeà
__USE_GNU


156 
	#AT_NO_AUTOMOUNT
 0x800

	)

158 
	#AT_EMPTY_PATH
 0x1000

	)

160 
	#AT_EACCESS
 0x200

	)

169 
fú
 (
__fd
, 
__cmd
, ...);

178 #iâdeà
__USE_FILE_OFFSET64


179 
	$İ’
 (cÚ¡ *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

181 #ifdeà
__REDIRECT


182 
	`__REDIRECT
 (
İ’
, (cÚ¡ *
__fe
, 
__oæag
, ...), 
İ’64
)

183 
	`__nÚnuÎ
 ((1));

185 
	#İ’
 
İ’64


	)

188 #ifdeà
__USE_LARGEFILE64


189 
	$İ’64
 (cÚ¡ *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

192 #ifdeà
__USE_ATFILE


202 #iâdeà
__USE_FILE_OFFSET64


203 
	$İ’©
 (
__fd
, cÚ¡ *
__fe
, 
__oæag
, ...)

204 
	`__nÚnuÎ
 ((2));

206 #ifdeà
__REDIRECT


207 
	`__REDIRECT
 (
İ’©
, (
__fd
, cÚ¡ *
__fe
, 
__oæag
,

208 ...), 
İ’©64
è
	`__nÚnuÎ
 ((2));

210 
	#İ’©
 
İ’©64


	)

213 #ifdeà
__USE_LARGEFILE64


214 
	$İ’©64
 (
__fd
, cÚ¡ *
__fe
, 
__oæag
, ...)

215 
	`__nÚnuÎ
 ((2));

224 #iâdeà
__USE_FILE_OFFSET64


225 
	$ü—t
 (cÚ¡ *
__fe
, 
mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

227 #ifdeà
__REDIRECT


228 
	`__REDIRECT
 (
ü—t
, (cÚ¡ *
__fe
, 
mode_t
 
__mode
),

229 
ü—t64
è
	`__nÚnuÎ
 ((1));

231 
	#ü—t
 
ü—t64


	)

234 #ifdeà
__USE_LARGEFILE64


235 
	$ü—t64
 (cÚ¡ *
__fe
, 
mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

238 #ià!
defšed
 
F_LOCK
 && (defšed 
__USE_MISC
 || (defšed 
__USE_XOPEN_EXTENDED
 \

239 && !
defšed
 
__USE_POSIX
))

248 
	#F_ULOCK
 0

	)

249 
	#F_LOCK
 1

	)

250 
	#F_TLOCK
 2

	)

251 
	#F_TEST
 3

	)

253 #iâdeà
__USE_FILE_OFFSET64


254 
	`lockf
 (
__fd
, 
__cmd
, 
off_t
 
__Ën
);

256 #ifdeà
__REDIRECT


257 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
), 
lockf64
);

259 
	#lockf
 
lockf64


	)

262 #ifdeà
__USE_LARGEFILE64


263 
	`lockf64
 (
__fd
, 
__cmd
, 
off64_t
 
__Ën
);

267 #ifdeà
__USE_XOPEN2K


270 #iâdeà
__USE_FILE_OFFSET64


271 
	$posix_çdvi£
 (
__fd
, 
off_t
 
__off£t
, off_ˆ
__Ën
,

272 
__advi£
è
__THROW
;

274 #ifdeà
__REDIRECT_NTH


275 
	`__REDIRECT_NTH
 (
posix_çdvi£
, (
__fd
, 
__off64_t
 
__off£t
,

276 
__off64_t
 
__Ën
, 
__advi£
),

277 
posix_çdvi£64
);

279 
	#posix_çdvi£
 
posix_çdvi£64


	)

282 #ifdeà
__USE_LARGEFILE64


283 
	$posix_çdvi£64
 (
__fd
, 
off64_t
 
__off£t
, off64_ˆ
__Ën
,

284 
__advi£
è
__THROW
;

292 #iâdeà
__USE_FILE_OFFSET64


293 
	`posix_çÎoÿ‹
 (
__fd
, 
off_t
 
__off£t
, off_ˆ
__Ën
);

295 #ifdeà
__REDIRECT


296 
	`__REDIRECT
 (
posix_çÎoÿ‹
, (
__fd
, 
__off64_t
 
__off£t
,

297 
__off64_t
 
__Ën
),

298 
posix_çÎoÿ‹64
);

300 
	#posix_çÎoÿ‹
 
posix_çÎoÿ‹64


	)

303 #ifdeà
__USE_LARGEFILE64


304 
	`posix_çÎoÿ‹64
 (
__fd
, 
off64_t
 
__off£t
, off64_ˆ
__Ën
);

310 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ
 \

311 && 
defšed
 
__va_¬g_·ck_Ën


312 
	~<b™s/fú2.h
>

315 
__END_DECLS


	@/usr/include/sys/mman.h

19 #iâdef 
_SYS_MMAN_H


20 
	#_SYS_MMAN_H
 1

	)

22 
	~<ã©u»s.h
>

23 
	~<b™s/ty³s.h
>

24 
	#__Ãed_size_t


	)

25 
	~<¡ddef.h
>

27 #iâdeà
__off_t_defšed


28 #iâdeà
__USE_FILE_OFFSET64


29 
__off_t
 
	toff_t
;

31 
__off64_t
 
	toff_t
;

33 
	#__off_t_defšed


	)

36 #iâdeà
__mode_t_defšed


37 
__mode_t
 
	tmode_t
;

38 
	#__mode_t_defšed


	)

41 
	~<b™s/mmª.h
>

44 
	#MAP_FAILED
 ((*è-1)

	)

46 
	g__BEGIN_DECLS


56 #iâdeà
__USE_FILE_OFFSET64


57 *
	$mm­
 (*
__addr
, 
size_t
 
__Ën
, 
__´Ù
,

58 
__æags
, 
__fd
, 
__off_t
 
__off£t
è
__THROW
;

60 #ifdeà
__REDIRECT_NTH


61 * 
	`__REDIRECT_NTH
 (
mm­
,

62 (*
__addr
, 
size_t
 
__Ën
, 
__´Ù
,

63 
__æags
, 
__fd
, 
__off64_t
 
__off£t
),

64 
mm­64
);

66 
	#mm­
 
mm­64


	)

69 #ifdeà
__USE_LARGEFILE64


70 *
	$mm­64
 (*
__addr
, 
size_t
 
__Ën
, 
__´Ù
,

71 
__æags
, 
__fd
, 
__off64_t
 
__off£t
è
__THROW
;

76 
	$munm­
 (*
__addr
, 
size_t
 
__Ën
è
__THROW
;

81 
	$m´Ùeù
 (*
__addr
, 
size_t
 
__Ën
, 
__´Ù
è
__THROW
;

89 
	`msync
 (*
__addr
, 
size_t
 
__Ën
, 
__æags
);

91 #ifdeà
__USE_MISC


94 
	$madvi£
 (*
__addr
, 
size_t
 
__Ën
, 
__adviû
è
__THROW
;

96 #ifdeà
__USE_XOPEN2K


98 
	$posix_madvi£
 (*
__addr
, 
size_t
 
__Ën
, 
__adviû
è
__THROW
;

103 
	$mlock
 (cÚ¡ *
__addr
, 
size_t
 
__Ën
è
__THROW
;

106 
	$muÆock
 (cÚ¡ *
__addr
, 
size_t
 
__Ën
è
__THROW
;

111 
	$mlock®l
 (
__æags
è
__THROW
;

115 
	$muÆock®l
 (è
__THROW
;

117 #ifdeà
__USE_MISC


123 
	$mšcÜe
 (*
__¡¬t
, 
size_t
 
__Ën
, *
__vec
)

124 
__THROW
;

127 #ifdeà
__USE_GNU


133 *
	$m»m­
 (*
__addr
, 
size_t
 
__Şd_Ën
, size_ˆ
__Ãw_Ën
,

134 
__æags
, ...è
__THROW
;

138 
	$»m­_fe_·ges
 (*
__¡¬t
, 
size_t
 
__size
, 
__´Ù
,

139 
size_t
 
__pgoff
, 
__æags
è
__THROW
;

144 
	`shm_İ’
 (cÚ¡ *
__Çme
, 
__oæag
, 
mode_t
 
__mode
);

147 
	`shm_uÆšk
 (cÚ¡ *
__Çme
);

149 
__END_DECLS


	@/usr/include/sys/stat.h

22 #iâdef 
_SYS_STAT_H


23 
	#_SYS_STAT_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

29 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K
 || defšed 
__USE_ATFILE


30 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


31 
	#__Ãed_time_t


	)

33 #ifdeà
__USE_ATFILE


34 
	#__Ãed_time¥ec


	)

36 
	~<time.h
>

39 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


42 #iâdeà
__dev_t_defšed


43 
__dev_t
 
	tdev_t
;

44 
	#__dev_t_defšed


	)

47 #iâdeà
__gid_t_defšed


48 
__gid_t
 
	tgid_t
;

49 
	#__gid_t_defšed


	)

52 #iâdeà
__šo_t_defšed


53 #iâdeà
__USE_FILE_OFFSET64


54 
__šo_t
 
	tšo_t
;

56 
__šo64_t
 
	tšo_t
;

58 
	#__šo_t_defšed


	)

61 #iâdeà
__mode_t_defšed


62 
__mode_t
 
	tmode_t
;

63 
	#__mode_t_defšed


	)

66 #iâdeà
__Æšk_t_defšed


67 
__Æšk_t
 
	tÆšk_t
;

68 
	#__Æšk_t_defšed


	)

71 #iâdeà
__off_t_defšed


72 #iâdeà
__USE_FILE_OFFSET64


73 
__off_t
 
	toff_t
;

75 
__off64_t
 
	toff_t
;

77 
	#__off_t_defšed


	)

80 #iâdeà
__uid_t_defšed


81 
__uid_t
 
	tuid_t
;

82 
	#__uid_t_defšed


	)

86 #ifdeà
__USE_UNIX98


87 #iâdeà
__blkút_t_defšed


88 #iâdeà
__USE_FILE_OFFSET64


89 
__blkút_t
 
	tblkút_t
;

91 
__blkút64_t
 
	tblkút_t
;

93 
	#__blkút_t_defšed


	)

96 #iâdeà
__blksize_t_defšed


97 
__blksize_t
 
	tblksize_t
;

98 
	#__blksize_t_defšed


	)

102 
	g__BEGIN_DECLS


104 
	~<b™s/¡©.h
>

106 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


107 
	#S_IFMT
 
__S_IFMT


	)

108 
	#S_IFDIR
 
__S_IFDIR


	)

109 
	#S_IFCHR
 
__S_IFCHR


	)

110 
	#S_IFBLK
 
__S_IFBLK


	)

111 
	#S_IFREG
 
__S_IFREG


	)

112 #ifdeà
__S_IFIFO


113 
	#S_IFIFO
 
__S_IFIFO


	)

115 #ifdeà
__S_IFLNK


116 
	#S_IFLNK
 
__S_IFLNK


	)

118 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_UNIX98
) \

119 && 
defšed
 
	g__S_IFSOCK


120 
	#S_IFSOCK
 
__S_IFSOCK


	)

126 
	#__S_ISTYPE
(
mode
, 
mask
è(((modeè& 
__S_IFMT
è=ğ(mask))

	)

128 
	#S_ISDIR
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFDIR
)

	)

129 
	#S_ISCHR
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFCHR
)

	)

130 
	#S_ISBLK
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFBLK
)

	)

131 
	#S_ISREG
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFREG
)

	)

132 #ifdeà
__S_IFIFO


133 
	#S_ISFIFO
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFIFO
)

	)

135 #ifdeà
__S_IFLNK


136 
	#S_ISLNK
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFLNK
)

	)

139 #ià
defšed
 
__USE_MISC
 && !defšed 
__S_IFLNK


140 
	#S_ISLNK
(
mode
è0

	)

143 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K
) \

144 && 
defšed
 
	g__S_IFSOCK


145 
	#S_ISSOCK
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFSOCK
)

	)

146 #–ià
defšed
 
__USE_XOPEN2K


147 
	#S_ISSOCK
(
mode
è0

	)

154 #ifdef 
__USE_POSIX199309


155 
	#S_TYPEISMQ
(
buf
è
	`__S_TYPEISMQ
(buf)

	)

156 
	#S_TYPEISSEM
(
buf
è
	`__S_TYPEISSEM
(buf)

	)

157 
	#S_TYPEISSHM
(
buf
è
	`__S_TYPEISSHM
(buf)

	)

163 
	#S_ISUID
 
__S_ISUID


	)

164 
	#S_ISGID
 
__S_ISGID


	)

166 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


168 
	#S_ISVTX
 
__S_ISVTX


	)

171 
	#S_IRUSR
 
__S_IREAD


	)

172 
	#S_IWUSR
 
__S_IWRITE


	)

173 
	#S_IXUSR
 
__S_IEXEC


	)

175 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

177 #ifdeà
__USE_MISC


178 
	#S_IREAD
 
S_IRUSR


	)

179 
	#S_IWRITE
 
S_IWUSR


	)

180 
	#S_IEXEC
 
S_IXUSR


	)

183 
	#S_IRGRP
 (
S_IRUSR
 >> 3è

	)

184 
	#S_IWGRP
 (
S_IWUSR
 >> 3è

	)

185 
	#S_IXGRP
 (
S_IXUSR
 >> 3è

	)

187 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

189 
	#S_IROTH
 (
S_IRGRP
 >> 3è

	)

190 
	#S_IWOTH
 (
S_IWGRP
 >> 3è

	)

191 
	#S_IXOTH
 (
S_IXGRP
 >> 3è

	)

193 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

196 #ifdef 
__USE_MISC


198 
	#ACCESSPERMS
 (
S_IRWXU
|
S_IRWXG
|
S_IRWXO
è

	)

199 
	#ALLPERMS
 (
S_ISUID
|
S_ISGID
|
S_ISVTX
|
S_IRWXU
|
S_IRWXG
|
S_IRWXO
)

	)

200 
	#DEFFILEMODE
 (
S_IRUSR
|
S_IWUSR
|
S_IRGRP
|
S_IWGRP
|
S_IROTH
|
S_IWOTH
)

	)

202 
	#S_BLKSIZE
 512

	)

206 #iâdeà
__USE_FILE_OFFSET64


208 
	$¡©
 (cÚ¡ *
__»¡riù
 
__fe
,

209 
¡©
 *
__»¡riù
 
__buf
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

213 
	$f¡©
 (
__fd
, 
¡©
 *
__buf
è
__THROW
 
	`__nÚnuÎ
 ((2));

215 #ifdeà
__REDIRECT_NTH


216 
	`__REDIRECT_NTH
 (
¡©
, (cÚ¡ *
__»¡riù
 
__fe
,

217 
¡©
 *
__»¡riù
 
__buf
), 
¡©64
)

218 
	`__nÚnuÎ
 ((1, 2));

219 
	`__REDIRECT_NTH
 (
f¡©
, (
__fd
, 
¡©
 *
__buf
), 
f¡©64
)

220 
	`__nÚnuÎ
 ((2));

222 
	#¡©
 
¡©64


	)

223 
	#f¡©
 
f¡©64


	)

226 #ifdeà
__USE_LARGEFILE64


227 
	$¡©64
 (cÚ¡ *
__»¡riù
 
__fe
,

228 
¡©64
 *
__»¡riù
 
__buf
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

229 
	$f¡©64
 (
__fd
, 
¡©64
 *
__buf
è
__THROW
 
	`__nÚnuÎ
 ((2));

232 #ifdeà
__USE_ATFILE


236 #iâdeà
__USE_FILE_OFFSET64


237 
	$f¡©©
 (
__fd
, cÚ¡ *
__»¡riù
 
__fe
,

238 
¡©
 *
__»¡riù
 
__buf
, 
__æag
)

239 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

241 #ifdeà
__REDIRECT_NTH


242 
	`__REDIRECT_NTH
 (
f¡©©
, (
__fd
, cÚ¡ *
__»¡riù
 
__fe
,

243 
¡©
 *
__»¡riù
 
__buf
,

244 
__æag
),

245 
f¡©©64
è
	`__nÚnuÎ
 ((2, 3));

247 
	#f¡©©
 
f¡©©64


	)

251 #ifdeà
__USE_LARGEFILE64


252 
	$f¡©©64
 (
__fd
, cÚ¡ *
__»¡riù
 
__fe
,

253 
¡©64
 *
__»¡riù
 
__buf
, 
__æag
)

254 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

258 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


259 #iâdeà
__USE_FILE_OFFSET64


262 
	$l¡©
 (cÚ¡ *
__»¡riù
 
__fe
,

263 
¡©
 *
__»¡riù
 
__buf
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

265 #ifdeà
__REDIRECT_NTH


266 
	`__REDIRECT_NTH
 (
l¡©
,

267 (cÚ¡ *
__»¡riù
 
__fe
,

268 
¡©
 *
__»¡riù
 
__buf
), 
l¡©64
)

269 
	`__nÚnuÎ
 ((1, 2));

271 
	#l¡©
 
l¡©64


	)

274 #ifdeà
__USE_LARGEFILE64


275 
	$l¡©64
 (cÚ¡ *
__»¡riù
 
__fe
,

276 
¡©64
 *
__»¡riù
 
__buf
)

277 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

283 
	$chmod
 (cÚ¡ *
__fe
, 
__mode_t
 
__mode
)

284 
__THROW
 
	`__nÚnuÎ
 ((1));

286 #ifdeà
__USE_MISC


290 
	$lchmod
 (cÚ¡ *
__fe
, 
__mode_t
 
__mode
)

291 
__THROW
 
	`__nÚnuÎ
 ((1));

295 #ifdeà
__USE_POSIX


296 
	$fchmod
 (
__fd
, 
__mode_t
 
__mode
è
__THROW
;

299 #ifdeà
__USE_ATFILE


302 
	$fchmod©
 (
__fd
, cÚ¡ *
__fe
, 
__mode_t
 
__mode
,

303 
__æag
)

304 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

311 
__mode_t
 
	$umask
 (
__mode_t
 
__mask
è
__THROW
;

313 #ifdef 
__USE_GNU


316 
__mode_t
 
	$g‘umask
 (è
__THROW
;

320 
	$mkdœ
 (cÚ¡ *
__·th
, 
__mode_t
 
__mode
)

321 
__THROW
 
	`__nÚnuÎ
 ((1));

323 #ifdeà
__USE_ATFILE


327 
	$mkdœ©
 (
__fd
, cÚ¡ *
__·th
, 
__mode_t
 
__mode
)

328 
__THROW
 
	`__nÚnuÎ
 ((2));

334 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


335 
	$mknod
 (cÚ¡ *
__·th
, 
__mode_t
 
__mode
, 
__dev_t
 
__dev
)

336 
__THROW
 
	`__nÚnuÎ
 ((1));

338 #ifdeà
__USE_ATFILE


342 
	$mknod©
 (
__fd
, cÚ¡ *
__·th
, 
__mode_t
 
__mode
,

343 
__dev_t
 
__dev
è
__THROW
 
	`__nÚnuÎ
 ((2));

349 
	$mkfifo
 (cÚ¡ *
__·th
, 
__mode_t
 
__mode
)

350 
__THROW
 
	`__nÚnuÎ
 ((1));

352 #ifdeà
__USE_ATFILE


356 
	$mkfifßt
 (
__fd
, cÚ¡ *
__·th
, 
__mode_t
 
__mode
)

357 
__THROW
 
	`__nÚnuÎ
 ((2));

360 #ifdeà
__USE_ATFILE


363 
	$utim’§t
 (
__fd
, cÚ¡ *
__·th
,

364 cÚ¡ 
time¥ec
 
__times
[2],

365 
__æags
)

366 
__THROW
 
	`__nÚnuÎ
 ((2));

369 #ifdeà
__USE_XOPEN2K8


371 
	$futim’s
 (
__fd
, cÚ¡ 
time¥ec
 
__times
[2]è
__THROW
;

389 #iâdeà
_STAT_VER


390 
	#_STAT_VER
 0

	)

392 #iâdeà
_MKNOD_VER


393 
	#_MKNOD_VER
 0

	)

397 #iâdeà
__USE_FILE_OFFSET64


398 
	$__fx¡©
 (
__v”
, 
__fdes
, 
¡©
 *
__¡©_buf
)

399 
__THROW
 
	`__nÚnuÎ
 ((3));

400 
	$__x¡©
 (
__v”
, cÚ¡ *
__f’ame
,

401 
¡©
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

402 
	$__lx¡©
 (
__v”
, cÚ¡ *
__f’ame
,

403 
¡©
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

404 
	$__fx¡©©
 (
__v”
, 
__fdes
, cÚ¡ *
__f’ame
,

405 
¡©
 *
__¡©_buf
, 
__æag
)

406 
__THROW
 
	`__nÚnuÎ
 ((3, 4));

408 #ifdeà
__REDIRECT_NTH


409 
	`__REDIRECT_NTH
 (
__fx¡©
, (
__v”
, 
__fdes
,

410 
¡©
 *
__¡©_buf
), 
__fx¡©64
)

411 
	`__nÚnuÎ
 ((3));

412 
	`__REDIRECT_NTH
 (
__x¡©
, (
__v”
, cÚ¡ *
__f’ame
,

413 
¡©
 *
__¡©_buf
), 
__x¡©64
)

414 
	`__nÚnuÎ
 ((2, 3));

415 
	`__REDIRECT_NTH
 (
__lx¡©
, (
__v”
, cÚ¡ *
__f’ame
,

416 
¡©
 *
__¡©_buf
), 
__lx¡©64
)

417 
	`__nÚnuÎ
 ((2, 3));

418 
	`__REDIRECT_NTH
 (
__fx¡©©
, (
__v”
, 
__fdes
,

419 cÚ¡ *
__f’ame
,

420 
¡©
 *
__¡©_buf
, 
__æag
),

421 
__fx¡©©64
è
	`__nÚnuÎ
 ((3, 4));

424 
	#__fx¡©
 
__fx¡©64


	)

425 
	#__x¡©
 
__x¡©64


	)

426 
	#__lx¡©
 
__lx¡©64


	)

430 #ifdeà
__USE_LARGEFILE64


431 
	$__fx¡©64
 (
__v”
, 
__fdes
, 
¡©64
 *
__¡©_buf
)

432 
__THROW
 
	`__nÚnuÎ
 ((3));

433 
	$__x¡©64
 (
__v”
, cÚ¡ *
__f’ame
,

434 
¡©64
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

435 
	$__lx¡©64
 (
__v”
, cÚ¡ *
__f’ame
,

436 
¡©64
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

437 
	$__fx¡©©64
 (
__v”
, 
__fdes
, cÚ¡ *
__f’ame
,

438 
¡©64
 *
__¡©_buf
, 
__æag
)

439 
__THROW
 
	`__nÚnuÎ
 ((3, 4));

441 
	$__xmknod
 (
__v”
, cÚ¡ *
__·th
, 
__mode_t
 
__mode
,

442 
__dev_t
 *
__dev
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

444 
	$__xmknod©
 (
__v”
, 
__fd
, cÚ¡ *
__·th
,

445 
__mode_t
 
__mode
, 
__dev_t
 *
__dev
)

446 
__THROW
 
	`__nÚnuÎ
 ((3, 5));

448 #ifdeà
__USE_EXTERN_INLINES


451 
__ex‹º_šlše
 

452 
	`__NTH
 (
	$¡©
 (cÚ¡ *
__·th
, 
¡©
 *
__¡©buf
))

454  
	`__x¡©
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

455 
	}
}

457 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


458 
__ex‹º_šlše
 

459 
__NTH
 (
	$l¡©
 (cÚ¡ *
__·th
, 
¡©
 *
__¡©buf
))

461  
	`__lx¡©
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

462 
	}
}

465 
__ex‹º_šlše
 

466 
__NTH
 (
	$f¡©
 (
__fd
, 
¡©
 *
__¡©buf
))

468  
	`__fx¡©
 (
_STAT_VER
, 
__fd
, 
__¡©buf
);

469 
	}
}

471 #ifdeà
__USE_ATFILE


472 
__ex‹º_šlše
 

473 
__NTH
 (
	$f¡©©
 (
__fd
, cÚ¡ *
__f’ame
, 
¡©
 *
__¡©buf
,

474 
__æag
))

476  
	`__fx¡©©
 (
_STAT_VER
, 
__fd
, 
__f’ame
, 
__¡©buf
, 
__æag
);

477 
	}
}

480 #ifdeà
__USE_MISC


481 
__ex‹º_šlše
 

482 
__NTH
 (
	$mknod
 (cÚ¡ *
__·th
, 
__mode_t
 
__mode
, 
__dev_t
 
__dev
))

484  
	`__xmknod
 (
_MKNOD_VER
, 
__·th
, 
__mode
, &
__dev
);

485 
	}
}

488 #ifdeà
__USE_ATFILE


489 
__ex‹º_šlše
 

490 
__NTH
 (
	$mknod©
 (
__fd
, cÚ¡ *
__·th
, 
__mode_t
 
__mode
,

491 
__dev_t
 
__dev
))

493  
	`__xmknod©
 (
_MKNOD_VER
, 
__fd
, 
__·th
, 
__mode
, &
__dev
);

494 
	}
}

497 #ià
defšed
 
__USE_LARGEFILE64
 \

498 && (! 
defšed
 
	g__USE_FILE_OFFSET64
 \

499 || (
defšed
 
	g__REDIRECT_NTH
 && defšed 
	g__OPTIMIZE__
))

500 
__ex‹º_šlše
 

501 
__NTH
 (
	$¡©64
 (cÚ¡ *
__·th
, 
¡©64
 *
__¡©buf
))

503  
	`__x¡©64
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

504 
	}
}

506 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


507 
__ex‹º_šlše
 

508 
__NTH
 (
	$l¡©64
 (cÚ¡ *
__·th
, 
¡©64
 *
__¡©buf
))

510  
	`__lx¡©64
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

511 
	}
}

514 
__ex‹º_šlše
 

515 
__NTH
 (
	$f¡©64
 (
__fd
, 
¡©64
 *
__¡©buf
))

517  
	`__fx¡©64
 (
_STAT_VER
, 
__fd
, 
__¡©buf
);

518 
	}
}

520 #ifdeà
__USE_ATFILE


521 
__ex‹º_šlše
 

522 
__NTH
 (
	$f¡©©64
 (
__fd
, cÚ¡ *
__f’ame
, 
¡©64
 *
__¡©buf
,

523 
__æag
))

525  
	`__fx¡©©64
 (
_STAT_VER
, 
__fd
, 
__f’ame
, 
__¡©buf
, 
__æag
);

526 
	}
}

533 
	g__END_DECLS


	@/usr/include/unistd.h

22 #iâdef 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


32 #ifdeà
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #–ià
defšed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #–ià
defšed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #–ià
defšed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifdeà
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #–ià
defšed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #–ià
defšed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

70 
	#_POSIX2_C_VERSION
 
__POSIX2_THIS_VERSION


	)

74 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

78 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

82 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

86 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

89 #ifdeà
__USE_XOPEN2K8


90 
	#_XOPEN_VERSION
 700

	)

91 #–ià
defšed
 
__USE_XOPEN2K


92 
	#_XOPEN_VERSION
 600

	)

93 #–ià
defšed
 
__USE_UNIX98


94 
	#_XOPEN_VERSION
 500

	)

96 
	#_XOPEN_VERSION
 4

	)

100 
	#_XOPEN_XCU_VERSION
 4

	)

103 
	#_XOPEN_XPG2
 1

	)

104 
	#_XOPEN_XPG3
 1

	)

105 
	#_XOPEN_XPG4
 1

	)

108 
	#_XOPEN_UNIX
 1

	)

111 
	#_XOPEN_CRYPT
 1

	)

115 
	#_XOPEN_ENH_I18N
 1

	)

118 
	#_XOPEN_LEGACY
 1

	)

205 
	~<b™s/posix_İt.h
>

208 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


209 
	~<b™s/’vœÚm’ts.h
>

213 
	#STDIN_FILENO
 0

	)

214 
	#STDOUT_FILENO
 1

	)

215 
	#STDERR_FILENO
 2

	)

220 
	~<b™s/ty³s.h
>

222 #iâdef 
__ssize_t_defšed


223 
__ssize_t
 
	tssize_t
;

224 
	#__ssize_t_defšed


	)

227 
	#__Ãed_size_t


	)

228 
	#__Ãed_NULL


	)

229 
	~<¡ddef.h
>

231 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


234 #iâdeà
__gid_t_defšed


235 
__gid_t
 
	tgid_t
;

236 
	#__gid_t_defšed


	)

239 #iâdeà
__uid_t_defšed


240 
__uid_t
 
	tuid_t
;

241 
	#__uid_t_defšed


	)

244 #iâdeà
__off_t_defšed


245 #iâdeà
__USE_FILE_OFFSET64


246 
__off_t
 
	toff_t
;

248 
__off64_t
 
	toff_t
;

250 
	#__off_t_defšed


	)

252 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


253 
__off64_t
 
	toff64_t
;

254 
	#__off64_t_defšed


	)

257 #iâdeà
__u£cÚds_t_defšed


258 
__u£cÚds_t
 
	tu£cÚds_t
;

259 
	#__u£cÚds_t_defšed


	)

262 #iâdeà
__pid_t_defšed


263 
__pid_t
 
	tpid_t
;

264 
	#__pid_t_defšed


	)

268 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


269 #iâdeà
__šŒ_t_defšed


270 
__šŒ_t
 
	tšŒ_t
;

271 
	#__šŒ_t_defšed


	)

275 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


276 #iâdeà
__sockËn_t_defšed


277 
__sockËn_t
 
	tsockËn_t
;

278 
	#__sockËn_t_defšed


	)

284 
	#R_OK
 4

	)

285 
	#W_OK
 2

	)

286 
	#X_OK
 1

	)

287 
	#F_OK
 0

	)

290 
	$acûss
 (cÚ¡ *
__Çme
, 
__ty³
è
__THROW
 
	`__nÚnuÎ
 ((1));

292 #ifdeà
__USE_GNU


295 
	$euidacûss
 (cÚ¡ *
__Çme
, 
__ty³
)

296 
__THROW
 
	`__nÚnuÎ
 ((1));

299 
	$—cûss
 (cÚ¡ *
__Çme
, 
__ty³
)

300 
__THROW
 
	`__nÚnuÎ
 ((1));

303 #ifdeà
__USE_ATFILE


307 
	$çcûs§t
 (
__fd
, cÚ¡ *
__fe
, 
__ty³
, 
__æag
)

308 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

313 #iâdef 
_STDIO_H


314 
	#SEEK_SET
 0

	)

315 
	#SEEK_CUR
 1

	)

316 
	#SEEK_END
 2

	)

317 #ifdeà
__USE_GNU


318 
	#SEEK_DATA
 3

	)

319 
	#SEEK_HOLE
 4

	)

323 #ià
defšed
 
__USE_MISC
 && !defšed 
L_SET


325 
	#L_SET
 
SEEK_SET


	)

326 
	#L_INCR
 
SEEK_CUR


	)

327 
	#L_XTND
 
SEEK_END


	)

336 #iâdeà
__USE_FILE_OFFSET64


337 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__wh’û
è
__THROW
;

339 #ifdeà
__REDIRECT_NTH


340 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

341 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
),

342 
l£ek64
);

344 
	#l£ek
 
l£ek64


	)

347 #ifdeà
__USE_LARGEFILE64


348 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
)

349 
__THROW
;

356 
	`şo£
 (
__fd
);

363 
ssize_t
 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
è
__wur
;

369 
ssize_t
 
	$wr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
è
__wur
;

371 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


372 #iâdeà
__USE_FILE_OFFSET64


379 
ssize_t
 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

380 
__off_t
 
__off£t
è
__wur
;

387 
ssize_t
 
	$pwr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

388 
__off_t
 
__off£t
è
__wur
;

390 #ifdeà
__REDIRECT


391 
ssize_t
 
	`__REDIRECT
 (
´—d
, (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

392 
__off64_t
 
__off£t
),

393 
´—d64
è
__wur
;

394 
ssize_t
 
	`__REDIRECT
 (
pwr™e
, (
__fd
, cÚ¡ *
__buf
,

395 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
),

396 
pwr™e64
è
__wur
;

398 
	#´—d
 
´—d64


	)

399 
	#pwr™e
 
pwr™e64


	)

403 #ifdeà
__USE_LARGEFILE64


407 
ssize_t
 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

408 
__off64_t
 
__off£t
è
__wur
;

411 
ssize_t
 
	$pwr™e64
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

412 
__off64_t
 
__off£t
è
__wur
;

420 
	$pe
 (
__pedes
[2]è
__THROW
 
__wur
;

422 #ifdeà
__USE_GNU


425 
	$pe2
 (
__pedes
[2], 
__æags
è
__THROW
 
__wur
;

435 
	$®¬m
 (
__£cÚds
è
__THROW
;

447 
	`¦“p
 (
__£cÚds
);

449 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

450 || 
defšed
 
__USE_MISC


455 
__u£cÚds_t
 
	$u®¬m
 (
__u£cÚds_t
 
__v®ue
, __u£cÚds_ˆ
__š‹rv®
)

456 
__THROW
;

463 
	`u¦“p
 (
__u£cÚds_t
 
__u£cÚds
);

472 
	`·u£
 ();

476 
	$chown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

477 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

479 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


481 
	$fchown
 (
__fd
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
è
__THROW
 
__wur
;

486 
	$lchown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

487 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

491 #ifdeà
__USE_ATFILE


494 
	$fchowÇt
 (
__fd
, cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
,

495 
__gid_t
 
__group
, 
__æag
)

496 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

500 
	$chdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

502 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


504 
	$fchdœ
 (
__fd
è
__THROW
 
__wur
;

514 *
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
è
__THROW
 
__wur
;

516 #ifdef 
__USE_GNU


520 *
	$g‘_cu¼’t_dœ_Çme
 (è
__THROW
;

523 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

524 || 
defšed
 
__USE_MISC


528 *
	$g‘wd
 (*
__buf
)

529 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
;

534 
	$dup
 (
__fd
è
__THROW
 
__wur
;

537 
	$dup2
 (
__fd
, 
__fd2
è
__THROW
;

539 #ifdeà
__USE_GNU


542 
	$dup3
 (
__fd
, 
__fd2
, 
__æags
è
__THROW
;

546 **
__’vœÚ
;

547 #ifdeà
__USE_GNU


548 **
’vœÚ
;

554 
	$execve
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[],

555 *cÚ¡ 
__’vp
[]è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

557 #ifdeà
__USE_XOPEN2K8


560 
	$ãxecve
 (
__fd
, *cÚ¡ 
__¬gv
[], *cÚ¡ 
__’vp
[])

561 
__THROW
 
	`__nÚnuÎ
 ((2));

566 
	$execv
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[])

567 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

571 
	$exeşe
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

572 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

576 
	$exeş
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

577 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

581 
	$execvp
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[])

582 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

587 
	$exeşp
 (cÚ¡ *
__fe
, cÚ¡ *
__¬g
, ...)

588 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

590 #ifdeà
__USE_GNU


593 
	$execv³
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[],

594 *cÚ¡ 
__’vp
[])

595 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

599 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


601 
	$niû
 (
__šc
è
__THROW
 
__wur
;

606 
	$_ex™
 (
__¡©us
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

612 
	~<b™s/cÚâame.h
>

615 
	$·thcÚf
 (cÚ¡ *
__·th
, 
__Çme
)

616 
__THROW
 
	`__nÚnuÎ
 ((1));

619 
	$å©hcÚf
 (
__fd
, 
__Çme
è
__THROW
;

622 
	$syscÚf
 (
__Çme
è
__THROW
;

624 #ifdef 
__USE_POSIX2


626 
size_t
 
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

631 
__pid_t
 
	$g‘pid
 (è
__THROW
;

634 
__pid_t
 
	$g‘µid
 (è
__THROW
;

637 
__pid_t
 
	$g‘pg½
 (è
__THROW
;

640 
__pid_t
 
	$__g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

641 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


642 
__pid_t
 
	$g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

649 
	$£gid
 (
__pid_t
 
__pid
, __pid_ˆ
__pgid
è
__THROW
;

651 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


663 
	$£g½
 (è
__THROW
;

670 
__pid_t
 
	$£tsid
 (è
__THROW
;

672 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


674 
__pid_t
 
	$g‘sid
 (
__pid_t
 
__pid
è
__THROW
;

678 
__uid_t
 
	$g‘uid
 (è
__THROW
;

681 
__uid_t
 
	$g‘euid
 (è
__THROW
;

684 
__gid_t
 
	$g‘gid
 (è
__THROW
;

687 
__gid_t
 
	$g‘egid
 (è
__THROW
;

692 
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]è
__THROW
 
__wur
;

694 #ifdef 
__USE_GNU


696 
	$group_memb”
 (
__gid_t
 
__gid
è
__THROW
;

703 
	$£tuid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

705 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


708 
	$£Œeuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
è
__THROW
 
__wur
;

711 #ifdeà
__USE_XOPEN2K


713 
	$£‹uid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

720 
	$£tgid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

722 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


725 
	$£Œegid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
è
__THROW
 
__wur
;

728 #ifdeà
__USE_XOPEN2K


730 
	$£‹gid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

733 #ifdeà
__USE_GNU


736 
	$g‘»suid
 (
__uid_t
 *
__ruid
, __uid_ˆ*
__euid
, __uid_ˆ*
__suid
)

737 
__THROW
;

741 
	$g‘»sgid
 (
__gid_t
 *
__rgid
, __gid_ˆ*
__egid
, __gid_ˆ*
__sgid
)

742 
__THROW
;

746 
	$£Œesuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
, __uid_ˆ
__suid
)

747 
__THROW
 
__wur
;

751 
	$£Œesgid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
, __gid_ˆ
__sgid
)

752 
__THROW
 
__wur
;

759 
__pid_t
 
	$fÜk
 (è
__THROWNL
;

761 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

762 || 
defšed
 
__USE_MISC


767 
__pid_t
 
	$vfÜk
 (è
__THROW
;

773 *
	$‰yÇme
 (
__fd
è
__THROW
;

777 
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

778 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

782 
	$i§‰y
 (
__fd
è
__THROW
;

784 #ià
defšed
 
__USE_MISC
 \

785 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_UNIX98
)

788 
	$‰y¦Ù
 (è
__THROW
;

793 
	$lšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

794 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

796 #ifdeà
__USE_ATFILE


799 
	$lšk©
 (
__äomfd
, cÚ¡ *
__äom
, 
__tofd
,

800 cÚ¡ *
__to
, 
__æags
)

801 
__THROW
 
	`__nÚnuÎ
 ((2, 4)è
__wur
;

804 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


806 
	$symlšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

807 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

812 
ssize_t
 
	$»adlšk
 (cÚ¡ *
__»¡riù
 
__·th
,

813 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

814 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

817 #ifdeà
__USE_ATFILE


819 
	$symlšk©
 (cÚ¡ *
__äom
, 
__tofd
,

820 cÚ¡ *
__to
è
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

823 
ssize_t
 
	$»adlšk©
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

824 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

825 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

829 
	$uÆšk
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

831 #ifdeà
__USE_ATFILE


833 
	$uÆšk©
 (
__fd
, cÚ¡ *
__Çme
, 
__æag
)

834 
__THROW
 
	`__nÚnuÎ
 ((2));

838 
	$rmdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1));

842 
__pid_t
 
	$tcg‘pg½
 (
__fd
è
__THROW
;

845 
	$tc£g½
 (
__fd
, 
__pid_t
 
__pg½_id
è
__THROW
;

852 *
	`g‘logš
 ();

853 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


860 
	$g‘logš_r
 (*
__Çme
, 
size_t
 
__Çme_Ën
è
	`__nÚnuÎ
 ((1));

863 #ifdef 
__USE_MISC


865 
	$£ogš
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

869 #ifdef 
__USE_POSIX2


873 
	#__Ãed_g‘İt


	)

874 
	~<g‘İt.h
>

878 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


882 
	$g‘ho¡Çme
 (*
__Çme
, 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((1));

886 #ià
defšed
 
__USE_MISC


889 
	$£tho¡Çme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

890 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

894 
	$£tho¡id
 (
__id
è
__THROW
 
__wur
;

900 
	$g‘domašÇme
 (*
__Çme
, 
size_t
 
__Ën
)

901 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

902 
	$£tdomašÇme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

903 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

909 
	$vhªgup
 (è
__THROW
;

912 
	$»voke
 (cÚ¡ *
__fe
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

920 
	$´of
 (*
__§m¶e_bufãr
, 
size_t
 
__size
,

921 
size_t
 
__off£t
, 
__sÿË
)

922 
__THROW
 
	`__nÚnuÎ
 ((1));

928 
	$acù
 (cÚ¡ *
__Çme
è
__THROW
;

932 *
	$g‘u£rsh–l
 (è
__THROW
;

933 
	$’du£rsh–l
 (è
__THROW
;

934 
	$£tu£rsh–l
 (è
__THROW
;

940 
	$d«mÚ
 (
__nochdœ
, 
__noşo£
è
__THROW
 
__wur
;

944 #ià
defšed
 
__USE_MISC
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

947 
	$chroÙ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

951 *
	$g‘·ss
 (cÚ¡ *
__´om±
è
	`__nÚnuÎ
 ((1));

959 
	`fsync
 (
__fd
);

962 #ifdeà
__USE_GNU


965 
	$syncfs
 (
__fd
è
__THROW
;

969 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


972 
	`g‘ho¡id
 ();

975 
	$sync
 (è
__THROW
;

978 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K


981 
	$g‘·gesize
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

986 
	$g‘dbËsize
 (è
__THROW
;

992 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


995 #iâdeà
__USE_FILE_OFFSET64


996 
	$Œunÿ‹
 (cÚ¡ *
__fe
, 
__off_t
 
__Ëngth
)

997 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

999 #ifdeà
__REDIRECT_NTH


1000 
	`__REDIRECT_NTH
 (
Œunÿ‹
,

1001 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
),

1002 
Œunÿ‹64
è
	`__nÚnuÎ
 ((1)è
__wur
;

1004 
	#Œunÿ‹
 
Œunÿ‹64


	)

1007 #ifdeà
__USE_LARGEFILE64


1008 
	$Œunÿ‹64
 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
)

1009 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1014 #ià
defšed
 
__USE_POSIX199309
 \

1015 || 
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


1018 #iâdeà
__USE_FILE_OFFSET64


1019 
	$árunÿ‹
 (
__fd
, 
__off_t
 
__Ëngth
è
__THROW
 
__wur
;

1021 #ifdeà
__REDIRECT_NTH


1022 
	`__REDIRECT_NTH
 (
árunÿ‹
, (
__fd
, 
__off64_t
 
__Ëngth
),

1023 
árunÿ‹64
è
__wur
;

1025 
	#árunÿ‹
 
árunÿ‹64


	)

1028 #ifdeà
__USE_LARGEFILE64


1029 
	$árunÿ‹64
 (
__fd
, 
__off64_t
 
__Ëngth
è
__THROW
 
__wur
;

1035 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

1036 || 
defšed
 
__USE_MISC


1040 
	$brk
 (*
__addr
è
__THROW
 
__wur
;

1046 *
	$sbrk
 (
šŒ_t
 
__d–
è
__THROW
;

1050 #ifdeà
__USE_MISC


1061 
	$sysÿÎ
 (
__sy¢o
, ...è
__THROW
;

1066 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
è&& !defšed 
F_LOCK


1078 
	#F_ULOCK
 0

	)

1079 
	#F_LOCK
 1

	)

1080 
	#F_TLOCK
 2

	)

1081 
	#F_TEST
 3

	)

1083 #iâdeà
__USE_FILE_OFFSET64


1084 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Ën
è
__wur
;

1086 #ifdeà
__REDIRECT


1087 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
),

1088 
lockf64
è
__wur
;

1090 
	#lockf
 
lockf64


	)

1093 #ifdeà
__USE_LARGEFILE64


1094 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
è
__wur
;

1099 #ifdeà
__USE_GNU


1104 
	#TEMP_FAILURE_RETRY
(
ex´essiÚ
) \

1105 (
__ex‹nsiÚ__
 \

1106 ({ 
__»suÉ
; \

1107 dØ
__»suÉ
 = (è(
ex´essiÚ
); \

1108 
__»suÉ
 =ğ-1L && 
”ºo
 =ğ
EINTR
); \

1109 
__»suÉ
; 
	}
}))

	)

1112 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


1115 
fd©async
 (
__fdes
);

1121 #ifdef 
__USE_XOPEN


1123 *
	$üy±
 (cÚ¡ *
__key
, cÚ¡ *
__§É
)

1124 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1128 
	$’üy±
 (*
__glibc_block
, 
__edæag
)

1129 
__THROW
 
	`__nÚnuÎ
 ((1));

1136 
	$swab
 (cÚ¡ *
__»¡riù
 
__äom
, *__»¡riù 
__to
,

1137 
ssize_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1143 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K


1145 *
	$ù”mid
 (*
__s
è
__THROW
;

1150 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


1151 
	~<b™s/uni¡d.h
>

1154 
__END_DECLS


	@/usr/include/bits/confname.h

19 #iâdeà
_UNISTD_H


26 
	m_PC_LINK_MAX
,

27 
	#_PC_LINK_MAX
 
_PC_LINK_MAX


	)

28 
	m_PC_MAX_CANON
,

29 
	#_PC_MAX_CANON
 
_PC_MAX_CANON


	)

30 
	m_PC_MAX_INPUT
,

31 
	#_PC_MAX_INPUT
 
_PC_MAX_INPUT


	)

32 
	m_PC_NAME_MAX
,

33 
	#_PC_NAME_MAX
 
_PC_NAME_MAX


	)

34 
	m_PC_PATH_MAX
,

35 
	#_PC_PATH_MAX
 
_PC_PATH_MAX


	)

36 
	m_PC_PIPE_BUF
,

37 
	#_PC_PIPE_BUF
 
_PC_PIPE_BUF


	)

38 
	m_PC_CHOWN_RESTRICTED
,

39 
	#_PC_CHOWN_RESTRICTED
 
_PC_CHOWN_RESTRICTED


	)

40 
	m_PC_NO_TRUNC
,

41 
	#_PC_NO_TRUNC
 
_PC_NO_TRUNC


	)

42 
	m_PC_VDISABLE
,

43 
	#_PC_VDISABLE
 
_PC_VDISABLE


	)

44 
	m_PC_SYNC_IO
,

45 
	#_PC_SYNC_IO
 
_PC_SYNC_IO


	)

46 
	m_PC_ASYNC_IO
,

47 
	#_PC_ASYNC_IO
 
_PC_ASYNC_IO


	)

48 
	m_PC_PRIO_IO
,

49 
	#_PC_PRIO_IO
 
_PC_PRIO_IO


	)

50 
	m_PC_SOCK_MAXBUF
,

51 
	#_PC_SOCK_MAXBUF
 
_PC_SOCK_MAXBUF


	)

52 
	m_PC_FILESIZEBITS
,

53 
	#_PC_FILESIZEBITS
 
_PC_FILESIZEBITS


	)

54 
	m_PC_REC_INCR_XFER_SIZE
,

55 
	#_PC_REC_INCR_XFER_SIZE
 
_PC_REC_INCR_XFER_SIZE


	)

56 
	m_PC_REC_MAX_XFER_SIZE
,

57 
	#_PC_REC_MAX_XFER_SIZE
 
_PC_REC_MAX_XFER_SIZE


	)

58 
	m_PC_REC_MIN_XFER_SIZE
,

59 
	#_PC_REC_MIN_XFER_SIZE
 
_PC_REC_MIN_XFER_SIZE


	)

60 
	m_PC_REC_XFER_ALIGN
,

61 
	#_PC_REC_XFER_ALIGN
 
_PC_REC_XFER_ALIGN


	)

62 
	m_PC_ALLOC_SIZE_MIN
,

63 
	#_PC_ALLOC_SIZE_MIN
 
_PC_ALLOC_SIZE_MIN


	)

64 
	m_PC_SYMLINK_MAX
,

65 
	#_PC_SYMLINK_MAX
 
_PC_SYMLINK_MAX


	)

66 
	m_PC_2_SYMLINKS


67 
	#_PC_2_SYMLINKS
 
_PC_2_SYMLINKS


	)

73 
	m_SC_ARG_MAX
,

74 
	#_SC_ARG_MAX
 
_SC_ARG_MAX


	)

75 
	m_SC_CHILD_MAX
,

76 
	#_SC_CHILD_MAX
 
_SC_CHILD_MAX


	)

77 
	m_SC_CLK_TCK
,

78 
	#_SC_CLK_TCK
 
_SC_CLK_TCK


	)

79 
	m_SC_NGROUPS_MAX
,

80 
	#_SC_NGROUPS_MAX
 
_SC_NGROUPS_MAX


	)

81 
	m_SC_OPEN_MAX
,

82 
	#_SC_OPEN_MAX
 
_SC_OPEN_MAX


	)

83 
	m_SC_STREAM_MAX
,

84 
	#_SC_STREAM_MAX
 
_SC_STREAM_MAX


	)

85 
	m_SC_TZNAME_MAX
,

86 
	#_SC_TZNAME_MAX
 
_SC_TZNAME_MAX


	)

87 
	m_SC_JOB_CONTROL
,

88 
	#_SC_JOB_CONTROL
 
_SC_JOB_CONTROL


	)

89 
	m_SC_SAVED_IDS
,

90 
	#_SC_SAVED_IDS
 
_SC_SAVED_IDS


	)

91 
	m_SC_REALTIME_SIGNALS
,

92 
	#_SC_REALTIME_SIGNALS
 
_SC_REALTIME_SIGNALS


	)

93 
	m_SC_PRIORITY_SCHEDULING
,

94 
	#_SC_PRIORITY_SCHEDULING
 
_SC_PRIORITY_SCHEDULING


	)

95 
	m_SC_TIMERS
,

96 
	#_SC_TIMERS
 
_SC_TIMERS


	)

97 
	m_SC_ASYNCHRONOUS_IO
,

98 
	#_SC_ASYNCHRONOUS_IO
 
_SC_ASYNCHRONOUS_IO


	)

99 
	m_SC_PRIORITIZED_IO
,

100 
	#_SC_PRIORITIZED_IO
 
_SC_PRIORITIZED_IO


	)

101 
	m_SC_SYNCHRONIZED_IO
,

102 
	#_SC_SYNCHRONIZED_IO
 
_SC_SYNCHRONIZED_IO


	)

103 
	m_SC_FSYNC
,

104 
	#_SC_FSYNC
 
_SC_FSYNC


	)

105 
	m_SC_MAPPED_FILES
,

106 
	#_SC_MAPPED_FILES
 
_SC_MAPPED_FILES


	)

107 
	m_SC_MEMLOCK
,

108 
	#_SC_MEMLOCK
 
_SC_MEMLOCK


	)

109 
	m_SC_MEMLOCK_RANGE
,

110 
	#_SC_MEMLOCK_RANGE
 
_SC_MEMLOCK_RANGE


	)

111 
	m_SC_MEMORY_PROTECTION
,

112 
	#_SC_MEMORY_PROTECTION
 
_SC_MEMORY_PROTECTION


	)

113 
	m_SC_MESSAGE_PASSING
,

114 
	#_SC_MESSAGE_PASSING
 
_SC_MESSAGE_PASSING


	)

115 
	m_SC_SEMAPHORES
,

116 
	#_SC_SEMAPHORES
 
_SC_SEMAPHORES


	)

117 
	m_SC_SHARED_MEMORY_OBJECTS
,

118 
	#_SC_SHARED_MEMORY_OBJECTS
 
_SC_SHARED_MEMORY_OBJECTS


	)

119 
	m_SC_AIO_LISTIO_MAX
,

120 
	#_SC_AIO_LISTIO_MAX
 
_SC_AIO_LISTIO_MAX


	)

121 
	m_SC_AIO_MAX
,

122 
	#_SC_AIO_MAX
 
_SC_AIO_MAX


	)

123 
	m_SC_AIO_PRIO_DELTA_MAX
,

124 
	#_SC_AIO_PRIO_DELTA_MAX
 
_SC_AIO_PRIO_DELTA_MAX


	)

125 
	m_SC_DELAYTIMER_MAX
,

126 
	#_SC_DELAYTIMER_MAX
 
_SC_DELAYTIMER_MAX


	)

127 
	m_SC_MQ_OPEN_MAX
,

128 
	#_SC_MQ_OPEN_MAX
 
_SC_MQ_OPEN_MAX


	)

129 
	m_SC_MQ_PRIO_MAX
,

130 
	#_SC_MQ_PRIO_MAX
 
_SC_MQ_PRIO_MAX


	)

131 
	m_SC_VERSION
,

132 
	#_SC_VERSION
 
_SC_VERSION


	)

133 
	m_SC_PAGESIZE
,

134 
	#_SC_PAGESIZE
 
_SC_PAGESIZE


	)

135 
	#_SC_PAGE_SIZE
 
_SC_PAGESIZE


	)

136 
	m_SC_RTSIG_MAX
,

137 
	#_SC_RTSIG_MAX
 
_SC_RTSIG_MAX


	)

138 
	m_SC_SEM_NSEMS_MAX
,

139 
	#_SC_SEM_NSEMS_MAX
 
_SC_SEM_NSEMS_MAX


	)

140 
	m_SC_SEM_VALUE_MAX
,

141 
	#_SC_SEM_VALUE_MAX
 
_SC_SEM_VALUE_MAX


	)

142 
	m_SC_SIGQUEUE_MAX
,

143 
	#_SC_SIGQUEUE_MAX
 
_SC_SIGQUEUE_MAX


	)

144 
	m_SC_TIMER_MAX
,

145 
	#_SC_TIMER_MAX
 
_SC_TIMER_MAX


	)

149 
	m_SC_BC_BASE_MAX
,

150 
	#_SC_BC_BASE_MAX
 
_SC_BC_BASE_MAX


	)

151 
	m_SC_BC_DIM_MAX
,

152 
	#_SC_BC_DIM_MAX
 
_SC_BC_DIM_MAX


	)

153 
	m_SC_BC_SCALE_MAX
,

154 
	#_SC_BC_SCALE_MAX
 
_SC_BC_SCALE_MAX


	)

155 
	m_SC_BC_STRING_MAX
,

156 
	#_SC_BC_STRING_MAX
 
_SC_BC_STRING_MAX


	)

157 
	m_SC_COLL_WEIGHTS_MAX
,

158 
	#_SC_COLL_WEIGHTS_MAX
 
_SC_COLL_WEIGHTS_MAX


	)

159 
	m_SC_EQUIV_CLASS_MAX
,

160 
	#_SC_EQUIV_CLASS_MAX
 
_SC_EQUIV_CLASS_MAX


	)

161 
	m_SC_EXPR_NEST_MAX
,

162 
	#_SC_EXPR_NEST_MAX
 
_SC_EXPR_NEST_MAX


	)

163 
	m_SC_LINE_MAX
,

164 
	#_SC_LINE_MAX
 
_SC_LINE_MAX


	)

165 
	m_SC_RE_DUP_MAX
,

166 
	#_SC_RE_DUP_MAX
 
_SC_RE_DUP_MAX


	)

167 
	m_SC_CHARCLASS_NAME_MAX
,

168 
	#_SC_CHARCLASS_NAME_MAX
 
_SC_CHARCLASS_NAME_MAX


	)

170 
	m_SC_2_VERSION
,

171 
	#_SC_2_VERSION
 
_SC_2_VERSION


	)

172 
	m_SC_2_C_BIND
,

173 
	#_SC_2_C_BIND
 
_SC_2_C_BIND


	)

174 
	m_SC_2_C_DEV
,

175 
	#_SC_2_C_DEV
 
_SC_2_C_DEV


	)

176 
	m_SC_2_FORT_DEV
,

177 
	#_SC_2_FORT_DEV
 
_SC_2_FORT_DEV


	)

178 
	m_SC_2_FORT_RUN
,

179 
	#_SC_2_FORT_RUN
 
_SC_2_FORT_RUN


	)

180 
	m_SC_2_SW_DEV
,

181 
	#_SC_2_SW_DEV
 
_SC_2_SW_DEV


	)

182 
	m_SC_2_LOCALEDEF
,

183 
	#_SC_2_LOCALEDEF
 
_SC_2_LOCALEDEF


	)

185 
	m_SC_PII
,

186 
	#_SC_PII
 
_SC_PII


	)

187 
	m_SC_PII_XTI
,

188 
	#_SC_PII_XTI
 
_SC_PII_XTI


	)

189 
	m_SC_PII_SOCKET
,

190 
	#_SC_PII_SOCKET
 
_SC_PII_SOCKET


	)

191 
	m_SC_PII_INTERNET
,

192 
	#_SC_PII_INTERNET
 
_SC_PII_INTERNET


	)

193 
	m_SC_PII_OSI
,

194 
	#_SC_PII_OSI
 
_SC_PII_OSI


	)

195 
	m_SC_POLL
,

196 
	#_SC_POLL
 
_SC_POLL


	)

197 
	m_SC_SELECT
,

198 
	#_SC_SELECT
 
_SC_SELECT


	)

199 
	m_SC_UIO_MAXIOV
,

200 
	#_SC_UIO_MAXIOV
 
_SC_UIO_MAXIOV


	)

201 
	m_SC_IOV_MAX
 = 
_SC_UIO_MAXIOV
,

202 
	#_SC_IOV_MAX
 
_SC_IOV_MAX


	)

203 
	m_SC_PII_INTERNET_STREAM
,

204 
	#_SC_PII_INTERNET_STREAM
 
_SC_PII_INTERNET_STREAM


	)

205 
	m_SC_PII_INTERNET_DGRAM
,

206 
	#_SC_PII_INTERNET_DGRAM
 
_SC_PII_INTERNET_DGRAM


	)

207 
	m_SC_PII_OSI_COTS
,

208 
	#_SC_PII_OSI_COTS
 
_SC_PII_OSI_COTS


	)

209 
	m_SC_PII_OSI_CLTS
,

210 
	#_SC_PII_OSI_CLTS
 
_SC_PII_OSI_CLTS


	)

211 
	m_SC_PII_OSI_M
,

212 
	#_SC_PII_OSI_M
 
_SC_PII_OSI_M


	)

213 
	m_SC_T_IOV_MAX
,

214 
	#_SC_T_IOV_MAX
 
_SC_T_IOV_MAX


	)

217 
	m_SC_THREADS
,

218 
	#_SC_THREADS
 
_SC_THREADS


	)

219 
	m_SC_THREAD_SAFE_FUNCTIONS
,

220 
	#_SC_THREAD_SAFE_FUNCTIONS
 
_SC_THREAD_SAFE_FUNCTIONS


	)

221 
	m_SC_GETGR_R_SIZE_MAX
,

222 
	#_SC_GETGR_R_SIZE_MAX
 
_SC_GETGR_R_SIZE_MAX


	)

223 
	m_SC_GETPW_R_SIZE_MAX
,

224 
	#_SC_GETPW_R_SIZE_MAX
 
_SC_GETPW_R_SIZE_MAX


	)

225 
	m_SC_LOGIN_NAME_MAX
,

226 
	#_SC_LOGIN_NAME_MAX
 
_SC_LOGIN_NAME_MAX


	)

227 
	m_SC_TTY_NAME_MAX
,

228 
	#_SC_TTY_NAME_MAX
 
_SC_TTY_NAME_MAX


	)

229 
	m_SC_THREAD_DESTRUCTOR_ITERATIONS
,

230 
	#_SC_THREAD_DESTRUCTOR_ITERATIONS
 
_SC_THREAD_DESTRUCTOR_ITERATIONS


	)

231 
	m_SC_THREAD_KEYS_MAX
,

232 
	#_SC_THREAD_KEYS_MAX
 
_SC_THREAD_KEYS_MAX


	)

233 
	m_SC_THREAD_STACK_MIN
,

234 
	#_SC_THREAD_STACK_MIN
 
_SC_THREAD_STACK_MIN


	)

235 
	m_SC_THREAD_THREADS_MAX
,

236 
	#_SC_THREAD_THREADS_MAX
 
_SC_THREAD_THREADS_MAX


	)

237 
	m_SC_THREAD_ATTR_STACKADDR
,

238 
	#_SC_THREAD_ATTR_STACKADDR
 
_SC_THREAD_ATTR_STACKADDR


	)

239 
	m_SC_THREAD_ATTR_STACKSIZE
,

240 
	#_SC_THREAD_ATTR_STACKSIZE
 
_SC_THREAD_ATTR_STACKSIZE


	)

241 
	m_SC_THREAD_PRIORITY_SCHEDULING
,

242 
	#_SC_THREAD_PRIORITY_SCHEDULING
 
_SC_THREAD_PRIORITY_SCHEDULING


	)

243 
	m_SC_THREAD_PRIO_INHERIT
,

244 
	#_SC_THREAD_PRIO_INHERIT
 
_SC_THREAD_PRIO_INHERIT


	)

245 
	m_SC_THREAD_PRIO_PROTECT
,

246 
	#_SC_THREAD_PRIO_PROTECT
 
_SC_THREAD_PRIO_PROTECT


	)

247 
	m_SC_THREAD_PROCESS_SHARED
,

248 
	#_SC_THREAD_PROCESS_SHARED
 
_SC_THREAD_PROCESS_SHARED


	)

250 
	m_SC_NPROCESSORS_CONF
,

251 
	#_SC_NPROCESSORS_CONF
 
_SC_NPROCESSORS_CONF


	)

252 
	m_SC_NPROCESSORS_ONLN
,

253 
	#_SC_NPROCESSORS_ONLN
 
_SC_NPROCESSORS_ONLN


	)

254 
	m_SC_PHYS_PAGES
,

255 
	#_SC_PHYS_PAGES
 
_SC_PHYS_PAGES


	)

256 
	m_SC_AVPHYS_PAGES
,

257 
	#_SC_AVPHYS_PAGES
 
_SC_AVPHYS_PAGES


	)

258 
	m_SC_ATEXIT_MAX
,

259 
	#_SC_ATEXIT_MAX
 
_SC_ATEXIT_MAX


	)

260 
	m_SC_PASS_MAX
,

261 
	#_SC_PASS_MAX
 
_SC_PASS_MAX


	)

263 
	m_SC_XOPEN_VERSION
,

264 
	#_SC_XOPEN_VERSION
 
_SC_XOPEN_VERSION


	)

265 
	m_SC_XOPEN_XCU_VERSION
,

266 
	#_SC_XOPEN_XCU_VERSION
 
_SC_XOPEN_XCU_VERSION


	)

267 
	m_SC_XOPEN_UNIX
,

268 
	#_SC_XOPEN_UNIX
 
_SC_XOPEN_UNIX


	)

269 
	m_SC_XOPEN_CRYPT
,

270 
	#_SC_XOPEN_CRYPT
 
_SC_XOPEN_CRYPT


	)

271 
	m_SC_XOPEN_ENH_I18N
,

272 
	#_SC_XOPEN_ENH_I18N
 
_SC_XOPEN_ENH_I18N


	)

273 
	m_SC_XOPEN_SHM
,

274 
	#_SC_XOPEN_SHM
 
_SC_XOPEN_SHM


	)

276 
	m_SC_2_CHAR_TERM
,

277 
	#_SC_2_CHAR_TERM
 
_SC_2_CHAR_TERM


	)

278 
	m_SC_2_C_VERSION
,

279 
	#_SC_2_C_VERSION
 
_SC_2_C_VERSION


	)

280 
	m_SC_2_UPE
,

281 
	#_SC_2_UPE
 
_SC_2_UPE


	)

283 
	m_SC_XOPEN_XPG2
,

284 
	#_SC_XOPEN_XPG2
 
_SC_XOPEN_XPG2


	)

285 
	m_SC_XOPEN_XPG3
,

286 
	#_SC_XOPEN_XPG3
 
_SC_XOPEN_XPG3


	)

287 
	m_SC_XOPEN_XPG4
,

288 
	#_SC_XOPEN_XPG4
 
_SC_XOPEN_XPG4


	)

290 
	m_SC_CHAR_BIT
,

291 
	#_SC_CHAR_BIT
 
_SC_CHAR_BIT


	)

292 
	m_SC_CHAR_MAX
,

293 
	#_SC_CHAR_MAX
 
_SC_CHAR_MAX


	)

294 
	m_SC_CHAR_MIN
,

295 
	#_SC_CHAR_MIN
 
_SC_CHAR_MIN


	)

296 
	m_SC_INT_MAX
,

297 
	#_SC_INT_MAX
 
_SC_INT_MAX


	)

298 
	m_SC_INT_MIN
,

299 
	#_SC_INT_MIN
 
_SC_INT_MIN


	)

300 
	m_SC_LONG_BIT
,

301 
	#_SC_LONG_BIT
 
_SC_LONG_BIT


	)

302 
	m_SC_WORD_BIT
,

303 
	#_SC_WORD_BIT
 
_SC_WORD_BIT


	)

304 
	m_SC_MB_LEN_MAX
,

305 
	#_SC_MB_LEN_MAX
 
_SC_MB_LEN_MAX


	)

306 
	m_SC_NZERO
,

307 
	#_SC_NZERO
 
_SC_NZERO


	)

308 
	m_SC_SSIZE_MAX
,

309 
	#_SC_SSIZE_MAX
 
_SC_SSIZE_MAX


	)

310 
	m_SC_SCHAR_MAX
,

311 
	#_SC_SCHAR_MAX
 
_SC_SCHAR_MAX


	)

312 
	m_SC_SCHAR_MIN
,

313 
	#_SC_SCHAR_MIN
 
_SC_SCHAR_MIN


	)

314 
	m_SC_SHRT_MAX
,

315 
	#_SC_SHRT_MAX
 
_SC_SHRT_MAX


	)

316 
	m_SC_SHRT_MIN
,

317 
	#_SC_SHRT_MIN
 
_SC_SHRT_MIN


	)

318 
	m_SC_UCHAR_MAX
,

319 
	#_SC_UCHAR_MAX
 
_SC_UCHAR_MAX


	)

320 
	m_SC_UINT_MAX
,

321 
	#_SC_UINT_MAX
 
_SC_UINT_MAX


	)

322 
	m_SC_ULONG_MAX
,

323 
	#_SC_ULONG_MAX
 
_SC_ULONG_MAX


	)

324 
	m_SC_USHRT_MAX
,

325 
	#_SC_USHRT_MAX
 
_SC_USHRT_MAX


	)

327 
	m_SC_NL_ARGMAX
,

328 
	#_SC_NL_ARGMAX
 
_SC_NL_ARGMAX


	)

329 
	m_SC_NL_LANGMAX
,

330 
	#_SC_NL_LANGMAX
 
_SC_NL_LANGMAX


	)

331 
	m_SC_NL_MSGMAX
,

332 
	#_SC_NL_MSGMAX
 
_SC_NL_MSGMAX


	)

333 
	m_SC_NL_NMAX
,

334 
	#_SC_NL_NMAX
 
_SC_NL_NMAX


	)

335 
	m_SC_NL_SETMAX
,

336 
	#_SC_NL_SETMAX
 
_SC_NL_SETMAX


	)

337 
	m_SC_NL_TEXTMAX
,

338 
	#_SC_NL_TEXTMAX
 
_SC_NL_TEXTMAX


	)

340 
	m_SC_XBS5_ILP32_OFF32
,

341 
	#_SC_XBS5_ILP32_OFF32
 
_SC_XBS5_ILP32_OFF32


	)

342 
	m_SC_XBS5_ILP32_OFFBIG
,

343 
	#_SC_XBS5_ILP32_OFFBIG
 
_SC_XBS5_ILP32_OFFBIG


	)

344 
	m_SC_XBS5_LP64_OFF64
,

345 
	#_SC_XBS5_LP64_OFF64
 
_SC_XBS5_LP64_OFF64


	)

346 
	m_SC_XBS5_LPBIG_OFFBIG
,

347 
	#_SC_XBS5_LPBIG_OFFBIG
 
_SC_XBS5_LPBIG_OFFBIG


	)

349 
	m_SC_XOPEN_LEGACY
,

350 
	#_SC_XOPEN_LEGACY
 
_SC_XOPEN_LEGACY


	)

351 
	m_SC_XOPEN_REALTIME
,

352 
	#_SC_XOPEN_REALTIME
 
_SC_XOPEN_REALTIME


	)

353 
	m_SC_XOPEN_REALTIME_THREADS
,

354 
	#_SC_XOPEN_REALTIME_THREADS
 
_SC_XOPEN_REALTIME_THREADS


	)

356 
	m_SC_ADVISORY_INFO
,

357 
	#_SC_ADVISORY_INFO
 
_SC_ADVISORY_INFO


	)

358 
	m_SC_BARRIERS
,

359 
	#_SC_BARRIERS
 
_SC_BARRIERS


	)

360 
	m_SC_BASE
,

361 
	#_SC_BASE
 
_SC_BASE


	)

362 
	m_SC_C_LANG_SUPPORT
,

363 
	#_SC_C_LANG_SUPPORT
 
_SC_C_LANG_SUPPORT


	)

364 
	m_SC_C_LANG_SUPPORT_R
,

365 
	#_SC_C_LANG_SUPPORT_R
 
_SC_C_LANG_SUPPORT_R


	)

366 
	m_SC_CLOCK_SELECTION
,

367 
	#_SC_CLOCK_SELECTION
 
_SC_CLOCK_SELECTION


	)

368 
	m_SC_CPUTIME
,

369 
	#_SC_CPUTIME
 
_SC_CPUTIME


	)

370 
	m_SC_THREAD_CPUTIME
,

371 
	#_SC_THREAD_CPUTIME
 
_SC_THREAD_CPUTIME


	)

372 
	m_SC_DEVICE_IO
,

373 
	#_SC_DEVICE_IO
 
_SC_DEVICE_IO


	)

374 
	m_SC_DEVICE_SPECIFIC
,

375 
	#_SC_DEVICE_SPECIFIC
 
_SC_DEVICE_SPECIFIC


	)

376 
	m_SC_DEVICE_SPECIFIC_R
,

377 
	#_SC_DEVICE_SPECIFIC_R
 
_SC_DEVICE_SPECIFIC_R


	)

378 
	m_SC_FD_MGMT
,

379 
	#_SC_FD_MGMT
 
_SC_FD_MGMT


	)

380 
	m_SC_FIFO
,

381 
	#_SC_FIFO
 
_SC_FIFO


	)

382 
	m_SC_PIPE
,

383 
	#_SC_PIPE
 
_SC_PIPE


	)

384 
	m_SC_FILE_ATTRIBUTES
,

385 
	#_SC_FILE_ATTRIBUTES
 
_SC_FILE_ATTRIBUTES


	)

386 
	m_SC_FILE_LOCKING
,

387 
	#_SC_FILE_LOCKING
 
_SC_FILE_LOCKING


	)

388 
	m_SC_FILE_SYSTEM
,

389 
	#_SC_FILE_SYSTEM
 
_SC_FILE_SYSTEM


	)

390 
	m_SC_MONOTONIC_CLOCK
,

391 
	#_SC_MONOTONIC_CLOCK
 
_SC_MONOTONIC_CLOCK


	)

392 
	m_SC_MULTI_PROCESS
,

393 
	#_SC_MULTI_PROCESS
 
_SC_MULTI_PROCESS


	)

394 
	m_SC_SINGLE_PROCESS
,

395 
	#_SC_SINGLE_PROCESS
 
_SC_SINGLE_PROCESS


	)

396 
	m_SC_NETWORKING
,

397 
	#_SC_NETWORKING
 
_SC_NETWORKING


	)

398 
	m_SC_READER_WRITER_LOCKS
,

399 
	#_SC_READER_WRITER_LOCKS
 
_SC_READER_WRITER_LOCKS


	)

400 
	m_SC_SPIN_LOCKS
,

401 
	#_SC_SPIN_LOCKS
 
_SC_SPIN_LOCKS


	)

402 
	m_SC_REGEXP
,

403 
	#_SC_REGEXP
 
_SC_REGEXP


	)

404 
	m_SC_REGEX_VERSION
,

405 
	#_SC_REGEX_VERSION
 
_SC_REGEX_VERSION


	)

406 
	m_SC_SHELL
,

407 
	#_SC_SHELL
 
_SC_SHELL


	)

408 
	m_SC_SIGNALS
,

409 
	#_SC_SIGNALS
 
_SC_SIGNALS


	)

410 
	m_SC_SPAWN
,

411 
	#_SC_SPAWN
 
_SC_SPAWN


	)

412 
	m_SC_SPORADIC_SERVER
,

413 
	#_SC_SPORADIC_SERVER
 
_SC_SPORADIC_SERVER


	)

414 
	m_SC_THREAD_SPORADIC_SERVER
,

415 
	#_SC_THREAD_SPORADIC_SERVER
 
_SC_THREAD_SPORADIC_SERVER


	)

416 
	m_SC_SYSTEM_DATABASE
,

417 
	#_SC_SYSTEM_DATABASE
 
_SC_SYSTEM_DATABASE


	)

418 
	m_SC_SYSTEM_DATABASE_R
,

419 
	#_SC_SYSTEM_DATABASE_R
 
_SC_SYSTEM_DATABASE_R


	)

420 
	m_SC_TIMEOUTS
,

421 
	#_SC_TIMEOUTS
 
_SC_TIMEOUTS


	)

422 
	m_SC_TYPED_MEMORY_OBJECTS
,

423 
	#_SC_TYPED_MEMORY_OBJECTS
 
_SC_TYPED_MEMORY_OBJECTS


	)

424 
	m_SC_USER_GROUPS
,

425 
	#_SC_USER_GROUPS
 
_SC_USER_GROUPS


	)

426 
	m_SC_USER_GROUPS_R
,

427 
	#_SC_USER_GROUPS_R
 
_SC_USER_GROUPS_R


	)

428 
	m_SC_2_PBS
,

429 
	#_SC_2_PBS
 
_SC_2_PBS


	)

430 
	m_SC_2_PBS_ACCOUNTING
,

431 
	#_SC_2_PBS_ACCOUNTING
 
_SC_2_PBS_ACCOUNTING


	)

432 
	m_SC_2_PBS_LOCATE
,

433 
	#_SC_2_PBS_LOCATE
 
_SC_2_PBS_LOCATE


	)

434 
	m_SC_2_PBS_MESSAGE
,

435 
	#_SC_2_PBS_MESSAGE
 
_SC_2_PBS_MESSAGE


	)

436 
	m_SC_2_PBS_TRACK
,

437 
	#_SC_2_PBS_TRACK
 
_SC_2_PBS_TRACK


	)

438 
	m_SC_SYMLOOP_MAX
,

439 
	#_SC_SYMLOOP_MAX
 
_SC_SYMLOOP_MAX


	)

440 
	m_SC_STREAMS
,

441 
	#_SC_STREAMS
 
_SC_STREAMS


	)

442 
	m_SC_2_PBS_CHECKPOINT
,

443 
	#_SC_2_PBS_CHECKPOINT
 
_SC_2_PBS_CHECKPOINT


	)

445 
	m_SC_V6_ILP32_OFF32
,

446 
	#_SC_V6_ILP32_OFF32
 
_SC_V6_ILP32_OFF32


	)

447 
	m_SC_V6_ILP32_OFFBIG
,

448 
	#_SC_V6_ILP32_OFFBIG
 
_SC_V6_ILP32_OFFBIG


	)

449 
	m_SC_V6_LP64_OFF64
,

450 
	#_SC_V6_LP64_OFF64
 
_SC_V6_LP64_OFF64


	)

451 
	m_SC_V6_LPBIG_OFFBIG
,

452 
	#_SC_V6_LPBIG_OFFBIG
 
_SC_V6_LPBIG_OFFBIG


	)

454 
	m_SC_HOST_NAME_MAX
,

455 
	#_SC_HOST_NAME_MAX
 
_SC_HOST_NAME_MAX


	)

456 
	m_SC_TRACE
,

457 
	#_SC_TRACE
 
_SC_TRACE


	)

458 
	m_SC_TRACE_EVENT_FILTER
,

459 
	#_SC_TRACE_EVENT_FILTER
 
_SC_TRACE_EVENT_FILTER


	)

460 
	m_SC_TRACE_INHERIT
,

461 
	#_SC_TRACE_INHERIT
 
_SC_TRACE_INHERIT


	)

462 
	m_SC_TRACE_LOG
,

463 
	#_SC_TRACE_LOG
 
_SC_TRACE_LOG


	)

465 
	m_SC_LEVEL1_ICACHE_SIZE
,

466 
	#_SC_LEVEL1_ICACHE_SIZE
 
_SC_LEVEL1_ICACHE_SIZE


	)

467 
	m_SC_LEVEL1_ICACHE_ASSOC
,

468 
	#_SC_LEVEL1_ICACHE_ASSOC
 
_SC_LEVEL1_ICACHE_ASSOC


	)

469 
	m_SC_LEVEL1_ICACHE_LINESIZE
,

470 
	#_SC_LEVEL1_ICACHE_LINESIZE
 
_SC_LEVEL1_ICACHE_LINESIZE


	)

471 
	m_SC_LEVEL1_DCACHE_SIZE
,

472 
	#_SC_LEVEL1_DCACHE_SIZE
 
_SC_LEVEL1_DCACHE_SIZE


	)

473 
	m_SC_LEVEL1_DCACHE_ASSOC
,

474 
	#_SC_LEVEL1_DCACHE_ASSOC
 
_SC_LEVEL1_DCACHE_ASSOC


	)

475 
	m_SC_LEVEL1_DCACHE_LINESIZE
,

476 
	#_SC_LEVEL1_DCACHE_LINESIZE
 
_SC_LEVEL1_DCACHE_LINESIZE


	)

477 
	m_SC_LEVEL2_CACHE_SIZE
,

478 
	#_SC_LEVEL2_CACHE_SIZE
 
_SC_LEVEL2_CACHE_SIZE


	)

479 
	m_SC_LEVEL2_CACHE_ASSOC
,

480 
	#_SC_LEVEL2_CACHE_ASSOC
 
_SC_LEVEL2_CACHE_ASSOC


	)

481 
	m_SC_LEVEL2_CACHE_LINESIZE
,

482 
	#_SC_LEVEL2_CACHE_LINESIZE
 
_SC_LEVEL2_CACHE_LINESIZE


	)

483 
	m_SC_LEVEL3_CACHE_SIZE
,

484 
	#_SC_LEVEL3_CACHE_SIZE
 
_SC_LEVEL3_CACHE_SIZE


	)

485 
	m_SC_LEVEL3_CACHE_ASSOC
,

486 
	#_SC_LEVEL3_CACHE_ASSOC
 
_SC_LEVEL3_CACHE_ASSOC


	)

487 
	m_SC_LEVEL3_CACHE_LINESIZE
,

488 
	#_SC_LEVEL3_CACHE_LINESIZE
 
_SC_LEVEL3_CACHE_LINESIZE


	)

489 
	m_SC_LEVEL4_CACHE_SIZE
,

490 
	#_SC_LEVEL4_CACHE_SIZE
 
_SC_LEVEL4_CACHE_SIZE


	)

491 
	m_SC_LEVEL4_CACHE_ASSOC
,

492 
	#_SC_LEVEL4_CACHE_ASSOC
 
_SC_LEVEL4_CACHE_ASSOC


	)

493 
	m_SC_LEVEL4_CACHE_LINESIZE
,

494 
	#_SC_LEVEL4_CACHE_LINESIZE
 
_SC_LEVEL4_CACHE_LINESIZE


	)

497 
	m_SC_IPV6
 = 
_SC_LEVEL1_ICACHE_SIZE
 + 50,

498 
	#_SC_IPV6
 
_SC_IPV6


	)

499 
	m_SC_RAW_SOCKETS
,

500 
	#_SC_RAW_SOCKETS
 
_SC_RAW_SOCKETS


	)

502 
	m_SC_V7_ILP32_OFF32
,

503 
	#_SC_V7_ILP32_OFF32
 
_SC_V7_ILP32_OFF32


	)

504 
	m_SC_V7_ILP32_OFFBIG
,

505 
	#_SC_V7_ILP32_OFFBIG
 
_SC_V7_ILP32_OFFBIG


	)

506 
	m_SC_V7_LP64_OFF64
,

507 
	#_SC_V7_LP64_OFF64
 
_SC_V7_LP64_OFF64


	)

508 
	m_SC_V7_LPBIG_OFFBIG
,

509 
	#_SC_V7_LPBIG_OFFBIG
 
_SC_V7_LPBIG_OFFBIG


	)

511 
	m_SC_SS_REPL_MAX
,

512 
	#_SC_SS_REPL_MAX
 
_SC_SS_REPL_MAX


	)

514 
	m_SC_TRACE_EVENT_NAME_MAX
,

515 
	#_SC_TRACE_EVENT_NAME_MAX
 
_SC_TRACE_EVENT_NAME_MAX


	)

516 
	m_SC_TRACE_NAME_MAX
,

517 
	#_SC_TRACE_NAME_MAX
 
_SC_TRACE_NAME_MAX


	)

518 
	m_SC_TRACE_SYS_MAX
,

519 
	#_SC_TRACE_SYS_MAX
 
_SC_TRACE_SYS_MAX


	)

520 
	m_SC_TRACE_USER_EVENT_MAX
,

521 
	#_SC_TRACE_USER_EVENT_MAX
 
_SC_TRACE_USER_EVENT_MAX


	)

523 
	m_SC_XOPEN_STREAMS
,

524 
	#_SC_XOPEN_STREAMS
 
_SC_XOPEN_STREAMS


	)

526 
	m_SC_THREAD_ROBUST_PRIO_INHERIT
,

527 
	#_SC_THREAD_ROBUST_PRIO_INHERIT
 
_SC_THREAD_ROBUST_PRIO_INHERIT


	)

528 
	m_SC_THREAD_ROBUST_PRIO_PROTECT


529 
	#_SC_THREAD_ROBUST_PRIO_PROTECT
 
_SC_THREAD_ROBUST_PRIO_PROTECT


	)

535 
	m_CS_PATH
,

536 
	#_CS_PATH
 
_CS_PATH


	)

538 
	m_CS_V6_WIDTH_RESTRICTED_ENVS
,

539 
	#_CS_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

540 
	#_CS_POSIX_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

542 
	m_CS_GNU_LIBC_VERSION
,

543 
	#_CS_GNU_LIBC_VERSION
 
_CS_GNU_LIBC_VERSION


	)

544 
	m_CS_GNU_LIBPTHREAD_VERSION
,

545 
	#_CS_GNU_LIBPTHREAD_VERSION
 
_CS_GNU_LIBPTHREAD_VERSION


	)

547 
	m_CS_V5_WIDTH_RESTRICTED_ENVS
,

548 
	#_CS_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

549 
	#_CS_POSIX_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

551 
	m_CS_V7_WIDTH_RESTRICTED_ENVS
,

552 
	#_CS_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

553 
	#_CS_POSIX_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

555 
	m_CS_LFS_CFLAGS
 = 1000,

556 
	#_CS_LFS_CFLAGS
 
_CS_LFS_CFLAGS


	)

557 
	m_CS_LFS_LDFLAGS
,

558 
	#_CS_LFS_LDFLAGS
 
_CS_LFS_LDFLAGS


	)

559 
	m_CS_LFS_LIBS
,

560 
	#_CS_LFS_LIBS
 
_CS_LFS_LIBS


	)

561 
	m_CS_LFS_LINTFLAGS
,

562 
	#_CS_LFS_LINTFLAGS
 
_CS_LFS_LINTFLAGS


	)

563 
	m_CS_LFS64_CFLAGS
,

564 
	#_CS_LFS64_CFLAGS
 
_CS_LFS64_CFLAGS


	)

565 
	m_CS_LFS64_LDFLAGS
,

566 
	#_CS_LFS64_LDFLAGS
 
_CS_LFS64_LDFLAGS


	)

567 
	m_CS_LFS64_LIBS
,

568 
	#_CS_LFS64_LIBS
 
_CS_LFS64_LIBS


	)

569 
	m_CS_LFS64_LINTFLAGS
,

570 
	#_CS_LFS64_LINTFLAGS
 
_CS_LFS64_LINTFLAGS


	)

572 
	m_CS_XBS5_ILP32_OFF32_CFLAGS
 = 1100,

573 
	#_CS_XBS5_ILP32_OFF32_CFLAGS
 
_CS_XBS5_ILP32_OFF32_CFLAGS


	)

574 
	m_CS_XBS5_ILP32_OFF32_LDFLAGS
,

575 
	#_CS_XBS5_ILP32_OFF32_LDFLAGS
 
_CS_XBS5_ILP32_OFF32_LDFLAGS


	)

576 
	m_CS_XBS5_ILP32_OFF32_LIBS
,

577 
	#_CS_XBS5_ILP32_OFF32_LIBS
 
_CS_XBS5_ILP32_OFF32_LIBS


	)

578 
	m_CS_XBS5_ILP32_OFF32_LINTFLAGS
,

579 
	#_CS_XBS5_ILP32_OFF32_LINTFLAGS
 
_CS_XBS5_ILP32_OFF32_LINTFLAGS


	)

580 
	m_CS_XBS5_ILP32_OFFBIG_CFLAGS
,

581 
	#_CS_XBS5_ILP32_OFFBIG_CFLAGS
 
_CS_XBS5_ILP32_OFFBIG_CFLAGS


	)

582 
	m_CS_XBS5_ILP32_OFFBIG_LDFLAGS
,

583 
	#_CS_XBS5_ILP32_OFFBIG_LDFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LDFLAGS


	)

584 
	m_CS_XBS5_ILP32_OFFBIG_LIBS
,

585 
	#_CS_XBS5_ILP32_OFFBIG_LIBS
 
_CS_XBS5_ILP32_OFFBIG_LIBS


	)

586 
	m_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
,

587 
	#_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LINTFLAGS


	)

588 
	m_CS_XBS5_LP64_OFF64_CFLAGS
,

589 
	#_CS_XBS5_LP64_OFF64_CFLAGS
 
_CS_XBS5_LP64_OFF64_CFLAGS


	)

590 
	m_CS_XBS5_LP64_OFF64_LDFLAGS
,

591 
	#_CS_XBS5_LP64_OFF64_LDFLAGS
 
_CS_XBS5_LP64_OFF64_LDFLAGS


	)

592 
	m_CS_XBS5_LP64_OFF64_LIBS
,

593 
	#_CS_XBS5_LP64_OFF64_LIBS
 
_CS_XBS5_LP64_OFF64_LIBS


	)

594 
	m_CS_XBS5_LP64_OFF64_LINTFLAGS
,

595 
	#_CS_XBS5_LP64_OFF64_LINTFLAGS
 
_CS_XBS5_LP64_OFF64_LINTFLAGS


	)

596 
	m_CS_XBS5_LPBIG_OFFBIG_CFLAGS
,

597 
	#_CS_XBS5_LPBIG_OFFBIG_CFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_CFLAGS


	)

598 
	m_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
,

599 
	#_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LDFLAGS


	)

600 
	m_CS_XBS5_LPBIG_OFFBIG_LIBS
,

601 
	#_CS_XBS5_LPBIG_OFFBIG_LIBS
 
_CS_XBS5_LPBIG_OFFBIG_LIBS


	)

602 
	m_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
,

603 
	#_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS


	)

605 
	m_CS_POSIX_V6_ILP32_OFF32_CFLAGS
,

606 
	#_CS_POSIX_V6_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_CFLAGS


	)

607 
	m_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
,

608 
	#_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LDFLAGS


	)

609 
	m_CS_POSIX_V6_ILP32_OFF32_LIBS
,

610 
	#_CS_POSIX_V6_ILP32_OFF32_LIBS
 
_CS_POSIX_V6_ILP32_OFF32_LIBS


	)

611 
	m_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
,

612 
	#_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS


	)

613 
	m_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
,

614 
	#_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS


	)

615 
	m_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
,

616 
	#_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS


	)

617 
	m_CS_POSIX_V6_ILP32_OFFBIG_LIBS
,

618 
	#_CS_POSIX_V6_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V6_ILP32_OFFBIG_LIBS


	)

619 
	m_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
,

620 
	#_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS


	)

621 
	m_CS_POSIX_V6_LP64_OFF64_CFLAGS
,

622 
	#_CS_POSIX_V6_LP64_OFF64_CFLAGS
 
_CS_POSIX_V6_LP64_OFF64_CFLAGS


	)

623 
	m_CS_POSIX_V6_LP64_OFF64_LDFLAGS
,

624 
	#_CS_POSIX_V6_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LDFLAGS


	)

625 
	m_CS_POSIX_V6_LP64_OFF64_LIBS
,

626 
	#_CS_POSIX_V6_LP64_OFF64_LIBS
 
_CS_POSIX_V6_LP64_OFF64_LIBS


	)

627 
	m_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
,

628 
	#_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LINTFLAGS


	)

629 
	m_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
,

630 
	#_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS


	)

631 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
,

632 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS


	)

633 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
,

634 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LIBS


	)

635 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
,

636 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS


	)

638 
	m_CS_POSIX_V7_ILP32_OFF32_CFLAGS
,

639 
	#_CS_POSIX_V7_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_CFLAGS


	)

640 
	m_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
,

641 
	#_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LDFLAGS


	)

642 
	m_CS_POSIX_V7_ILP32_OFF32_LIBS
,

643 
	#_CS_POSIX_V7_ILP32_OFF32_LIBS
 
_CS_POSIX_V7_ILP32_OFF32_LIBS


	)

644 
	m_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
,

645 
	#_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS


	)

646 
	m_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
,

647 
	#_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS


	)

648 
	m_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
,

649 
	#_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS


	)

650 
	m_CS_POSIX_V7_ILP32_OFFBIG_LIBS
,

651 
	#_CS_POSIX_V7_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V7_ILP32_OFFBIG_LIBS


	)

652 
	m_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
,

653 
	#_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS


	)

654 
	m_CS_POSIX_V7_LP64_OFF64_CFLAGS
,

655 
	#_CS_POSIX_V7_LP64_OFF64_CFLAGS
 
_CS_POSIX_V7_LP64_OFF64_CFLAGS


	)

656 
	m_CS_POSIX_V7_LP64_OFF64_LDFLAGS
,

657 
	#_CS_POSIX_V7_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LDFLAGS


	)

658 
	m_CS_POSIX_V7_LP64_OFF64_LIBS
,

659 
	#_CS_POSIX_V7_LP64_OFF64_LIBS
 
_CS_POSIX_V7_LP64_OFF64_LIBS


	)

660 
	m_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
,

661 
	#_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LINTFLAGS


	)

662 
	m_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
,

663 
	#_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS


	)

664 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
,

665 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS


	)

666 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
,

667 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LIBS


	)

668 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS
,

669 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS


	)

671 
	m_CS_V6_ENV
,

672 
	#_CS_V6_ENV
 
_CS_V6_ENV


	)

673 
	m_CS_V7_ENV


674 
	#_CS_V7_ENV
 
_CS_V7_ENV


	)

	@/usr/include/bits/environments.h

18 #iâdeà
_UNISTD_H


22 
	~<b™s/wÜdsize.h
>

42 #ià
__WORDSIZE
 == 64

56 
	#_POSIX_V7_LPBIG_OFFBIG
 -1

	)

57 
	#_POSIX_V6_LPBIG_OFFBIG
 -1

	)

58 
	#_XBS5_LPBIG_OFFBIG
 -1

	)

61 
	#_POSIX_V7_LP64_OFF64
 1

	)

62 
	#_POSIX_V6_LP64_OFF64
 1

	)

63 
	#_XBS5_LP64_OFF64
 1

	)

69 
	#_POSIX_V7_ILP32_OFFBIG
 1

	)

70 
	#_POSIX_V6_ILP32_OFFBIG
 1

	)

71 
	#_XBS5_ILP32_OFFBIG
 1

	)

73 #iâdeà
__x86_64__


75 
	#_POSIX_V7_ILP32_OFF32
 1

	)

76 
	#_POSIX_V6_ILP32_OFF32
 1

	)

77 
	#_XBS5_ILP32_OFF32
 1

	)

95 
	#__ILP32_OFF32_CFLAGS
 "-m32"

	)

96 
	#__ILP32_OFF32_LDFLAGS
 "-m32"

	)

97 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


98 
	#__ILP32_OFFBIG_CFLAGS
 "-mx32"

	)

99 
	#__ILP32_OFFBIG_LDFLAGS
 "-mx32"

	)

101 
	#__ILP32_OFFBIG_CFLAGS
 "-m32 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"

	)

102 
	#__ILP32_OFFBIG_LDFLAGS
 "-m32"

	)

104 
	#__LP64_OFF64_CFLAGS
 "-m64"

	)

105 
	#__LP64_OFF64_LDFLAGS
 "-m64"

	)

	@/usr/include/bits/fcntl.h

19 #iâdeà
_FCNTL_H


23 #ifdeà
__x86_64__


24 
	#__O_LARGEFILE
 0

	)

27 #ifdeà
__x86_64__


29 
	#F_GETLK64
 5

	)

30 
	#F_SETLK64
 6

	)

31 
	#F_SETLKW64
 7

	)

35 
	sæock


37 
	ml_ty³
;

38 
	ml_wh’û
;

39 #iâdeà
__USE_FILE_OFFSET64


40 
__off_t
 
	ml_¡¬t
;

41 
__off_t
 
	ml_Ën
;

43 
__off64_t
 
	ml_¡¬t
;

44 
__off64_t
 
	ml_Ën
;

46 
__pid_t
 
	ml_pid
;

49 #ifdeà
__USE_LARGEFILE64


50 
	sæock64


52 
	ml_ty³
;

53 
	ml_wh’û
;

54 
__off64_t
 
	ml_¡¬t
;

55 
__off64_t
 
	ml_Ën
;

56 
__pid_t
 
	ml_pid
;

61 
	~<b™s/fú-lšux.h
>

	@/usr/include/bits/fcntl2.h

19 #iâdef 
_FCNTL_H


25 #iâdeà
__USE_FILE_OFFSET64


26 
	$__İ’_2
 (cÚ¡ *
__·th
, 
__oæag
è
	`__nÚnuÎ
 ((1));

27 
	`__REDIRECT
 (
__İ’_®Ÿs
, (cÚ¡ *
__·th
, 
__oæag
, ...),

28 
İ’
è
	`__nÚnuÎ
 ((1));

30 
	`__REDIRECT
 (
__İ’_2
, (cÚ¡ *
__·th
, 
__oæag
),

31 
__İ’64_2
è
	`__nÚnuÎ
 ((1));

32 
	`__REDIRECT
 (
__İ’_®Ÿs
, (cÚ¡ *
__·th
, 
__oæag
, ...),

33 
İ’64
è
	`__nÚnuÎ
 ((1));

35 
	`__”rÜdeş
 (
__İ’_too_mªy_¬gs
,

37 
	`__”rÜdeş
 (
__İ’_missšg_mode
,

40 
__fÜtify_funùiÚ
 

41 
	$İ’
 (cÚ¡ *
__·th
, 
__oæag
, ...)

43 ià(
	`__va_¬g_·ck_Ën
 () > 1)

44 
	`__İ’_too_mªy_¬gs
 ();

46 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

48 ià(
	`__OPEN_NEEDS_MODE
 (
__oæag
è&& 
	`__va_¬g_·ck_Ën
 () < 1)

50 
	`__İ’_missšg_mode
 ();

51  
	`__İ’_2
 (
__·th
, 
__oæag
);

53  
	`__İ’_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

56 ià(
	`__va_¬g_·ck_Ën
 () < 1)

57  
	`__İ’_2
 (
__·th
, 
__oæag
);

59  
	`__İ’_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

60 
	}
}

63 #ifdeà
__USE_LARGEFILE64


64 
	$__İ’64_2
 (cÚ¡ *
__·th
, 
__oæag
è
	`__nÚnuÎ
 ((1));

65 
	`__REDIRECT
 (
__İ’64_®Ÿs
, (cÚ¡ *
__·th
, 
__oæag
,

66 ...), 
İ’64
è
	`__nÚnuÎ
 ((1));

67 
	`__”rÜdeş
 (
__İ’64_too_mªy_¬gs
,

69 
	`__”rÜdeş
 (
__İ’64_missšg_mode
,

72 
__fÜtify_funùiÚ
 

73 
	$İ’64
 (cÚ¡ *
__·th
, 
__oæag
, ...)

75 ià(
	`__va_¬g_·ck_Ën
 () > 1)

76 
	`__İ’64_too_mªy_¬gs
 ();

78 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

80 ià(
	`__OPEN_NEEDS_MODE
 (
__oæag
è&& 
	`__va_¬g_·ck_Ën
 () < 1)

82 
	`__İ’64_missšg_mode
 ();

83  
	`__İ’64_2
 (
__·th
, 
__oæag
);

85  
	`__İ’64_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

88 ià(
	`__va_¬g_·ck_Ën
 () < 1)

89  
	`__İ’64_2
 (
__·th
, 
__oæag
);

91  
	`__İ’64_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

92 
	}
}

96 #ifdeà
__USE_ATFILE


97 #iâdeà
__USE_FILE_OFFSET64


98 
	$__İ’©_2
 (
__fd
, cÚ¡ *
__·th
, 
__oæag
)

99 
	`__nÚnuÎ
 ((2));

100 
	`__REDIRECT
 (
__İ’©_®Ÿs
, (
__fd
, cÚ¡ *
__·th
,

101 
__oæag
, ...), 
İ’©
)

102 
	`__nÚnuÎ
 ((2));

104 
	`__REDIRECT
 (
__İ’©_2
, (
__fd
, cÚ¡ *
__·th
,

105 
__oæag
), 
__İ’©64_2
)

106 
	`__nÚnuÎ
 ((2));

107 
	`__REDIRECT
 (
__İ’©_®Ÿs
, (
__fd
, cÚ¡ *
__·th
,

108 
__oæag
, ...), 
İ’©64
)

109 
	`__nÚnuÎ
 ((2));

111 
	`__”rÜdeş
 (
__İ’©_too_mªy_¬gs
,

113 
	`__”rÜdeş
 (
__İ’©_missšg_mode
,

116 
__fÜtify_funùiÚ
 

117 
	$İ’©
 (
__fd
, cÚ¡ *
__·th
, 
__oæag
, ...)

119 ià(
	`__va_¬g_·ck_Ën
 () > 1)

120 
	`__İ’©_too_mªy_¬gs
 ();

122 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

124 ià(
	`__OPEN_NEEDS_MODE
 (
__oæag
è&& 
	`__va_¬g_·ck_Ën
 () < 1)

126 
	`__İ’©_missšg_mode
 ();

127  
	`__İ’©_2
 (
__fd
, 
__·th
, 
__oæag
);

129  
	`__İ’©_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

132 ià(
	`__va_¬g_·ck_Ën
 () < 1)

133  
	`__İ’©_2
 (
__fd
, 
__·th
, 
__oæag
);

135  
	`__İ’©_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

136 
	}
}

139 #ifdeà
__USE_LARGEFILE64


140 
	$__İ’©64_2
 (
__fd
, cÚ¡ *
__·th
, 
__oæag
)

141 
	`__nÚnuÎ
 ((2));

142 
	`__REDIRECT
 (
__İ’©64_®Ÿs
, (
__fd
, cÚ¡ *
__·th
,

143 
__oæag
, ...), 
İ’©64
)

144 
	`__nÚnuÎ
 ((2));

145 
	`__”rÜdeş
 (
__İ’©64_too_mªy_¬gs
,

147 
	`__”rÜdeş
 (
__İ’©64_missšg_mode
,

150 
__fÜtify_funùiÚ
 

151 
	$İ’©64
 (
__fd
, cÚ¡ *
__·th
, 
__oæag
, ...)

153 ià(
	`__va_¬g_·ck_Ën
 () > 1)

154 
	`__İ’©64_too_mªy_¬gs
 ();

156 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

158 ià(
	`__OPEN_NEEDS_MODE
 (
__oæag
è&& 
	`__va_¬g_·ck_Ën
 () < 1)

160 
	`__İ’©64_missšg_mode
 ();

161  
	`__İ’©64_2
 (
__fd
, 
__·th
, 
__oæag
);

163  
	`__İ’©64_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

166 ià(
	`__va_¬g_·ck_Ën
 () < 1)

167  
	`__İ’©64_2
 (
__fd
, 
__·th
, 
__oæag
);

169  
	`__İ’©64_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

170 
	}
}

	@/usr/include/bits/mman.h

19 #iâdeà
_SYS_MMAN_H


27 #ifdeà
__USE_MISC


28 
	#MAP_32BIT
 0x40

	)

32 #ifdeà
__USE_MISC


33 
	#MAP_GROWSDOWN
 0x00100

	)

34 
	#MAP_DENYWRITE
 0x00800

	)

35 
	#MAP_EXECUTABLE
 0x01000

	)

36 
	#MAP_LOCKED
 0x02000

	)

37 
	#MAP_NORESERVE
 0x04000

	)

38 
	#MAP_POPULATE
 0x08000

	)

39 
	#MAP_NONBLOCK
 0x10000

	)

40 
	#MAP_STACK
 0x20000

	)

41 
	#MAP_HUGETLB
 0x40000

	)

45 
	~<b™s/mmª-lšux.h
>

	@/usr/include/bits/posix_opt.h

19 #iâdef 
_BITS_POSIX_OPT_H


20 
	#_BITS_POSIX_OPT_H
 1

	)

23 
	#_POSIX_JOB_CONTROL
 1

	)

26 
	#_POSIX_SAVED_IDS
 1

	)

29 
	#_POSIX_PRIORITY_SCHEDULING
 200809L

	)

32 
	#_POSIX_SYNCHRONIZED_IO
 200809L

	)

35 
	#_POSIX_FSYNC
 200809L

	)

38 
	#_POSIX_MAPPED_FILES
 200809L

	)

41 
	#_POSIX_MEMLOCK
 200809L

	)

44 
	#_POSIX_MEMLOCK_RANGE
 200809L

	)

47 
	#_POSIX_MEMORY_PROTECTION
 200809L

	)

50 
	#_POSIX_CHOWN_RESTRICTED
 0

	)

54 
	#_POSIX_VDISABLE
 '\0'

	)

57 
	#_POSIX_NO_TRUNC
 1

	)

60 
	#_XOPEN_REALTIME
 1

	)

63 
	#_XOPEN_REALTIME_THREADS
 1

	)

66 
	#_XOPEN_SHM
 1

	)

69 
	#_POSIX_THREADS
 200809L

	)

72 
	#_POSIX_REENTRANT_FUNCTIONS
 1

	)

73 
	#_POSIX_THREAD_SAFE_FUNCTIONS
 200809L

	)

76 
	#_POSIX_THREAD_PRIORITY_SCHEDULING
 200809L

	)

79 
	#_POSIX_THREAD_ATTR_STACKSIZE
 200809L

	)

82 
	#_POSIX_THREAD_ATTR_STACKADDR
 200809L

	)

85 
	#_POSIX_THREAD_PRIO_INHERIT
 200809L

	)

89 
	#_POSIX_THREAD_PRIO_PROTECT
 200809L

	)

91 #ifdeà
__USE_XOPEN2K8


93 
	#_POSIX_THREAD_ROBUST_PRIO_INHERIT
 200809L

	)

96 
	#_POSIX_THREAD_ROBUST_PRIO_PROTECT
 -1

	)

100 
	#_POSIX_SEMAPHORES
 200809L

	)

103 
	#_POSIX_REALTIME_SIGNALS
 200809L

	)

106 
	#_POSIX_ASYNCHRONOUS_IO
 200809L

	)

107 
	#_POSIX_ASYNC_IO
 1

	)

109 
	#_LFS_ASYNCHRONOUS_IO
 1

	)

111 
	#_POSIX_PRIORITIZED_IO
 200809L

	)

114 
	#_LFS64_ASYNCHRONOUS_IO
 1

	)

117 
	#_LFS_LARGEFILE
 1

	)

118 
	#_LFS64_LARGEFILE
 1

	)

119 
	#_LFS64_STDIO
 1

	)

122 
	#_POSIX_SHARED_MEMORY_OBJECTS
 200809L

	)

125 
	#_POSIX_CPUTIME
 0

	)

128 
	#_POSIX_THREAD_CPUTIME
 0

	)

131 
	#_POSIX_REGEXP
 1

	)

134 
	#_POSIX_READER_WRITER_LOCKS
 200809L

	)

137 
	#_POSIX_SHELL
 1

	)

140 
	#_POSIX_TIMEOUTS
 200809L

	)

143 
	#_POSIX_SPIN_LOCKS
 200809L

	)

146 
	#_POSIX_SPAWN
 200809L

	)

149 
	#_POSIX_TIMERS
 200809L

	)

152 
	#_POSIX_BARRIERS
 200809L

	)

155 
	#_POSIX_MESSAGE_PASSING
 200809L

	)

158 
	#_POSIX_THREAD_PROCESS_SHARED
 200809L

	)

161 
	#_POSIX_MONOTONIC_CLOCK
 0

	)

164 
	#_POSIX_CLOCK_SELECTION
 200809L

	)

167 
	#_POSIX_ADVISORY_INFO
 200809L

	)

170 
	#_POSIX_IPV6
 200809L

	)

173 
	#_POSIX_RAW_SOCKETS
 200809L

	)

176 
	#_POSIX2_CHAR_TERM
 200809L

	)

179 
	#_POSIX_SPORADIC_SERVER
 -1

	)

180 
	#_POSIX_THREAD_SPORADIC_SERVER
 -1

	)

183 
	#_POSIX_TRACE
 -1

	)

184 
	#_POSIX_TRACE_EVENT_FILTER
 -1

	)

185 
	#_POSIX_TRACE_INHERIT
 -1

	)

186 
	#_POSIX_TRACE_LOG
 -1

	)

189 
	#_POSIX_TYPED_MEMORY_OBJECTS
 -1

	)

192 
	#_XOPEN_STREAMS
 -1

	)

	@/usr/include/bits/stat.h

18 #ià!
defšed
 
_SYS_STAT_H
 && !defšed 
_FCNTL_H


22 #iâdeà
_BITS_STAT_H


23 
	#_BITS_STAT_H
 1

	)

26 #iâdeà
__x86_64__


27 
	#_STAT_VER_LINUX_OLD
 1

	)

28 
	#_STAT_VER_KERNEL
 1

	)

29 
	#_STAT_VER_SVR4
 2

	)

30 
	#_STAT_VER_LINUX
 3

	)

33 
	#_MKNOD_VER_LINUX
 1

	)

34 
	#_MKNOD_VER_SVR4
 2

	)

35 
	#_MKNOD_VER
 
_MKNOD_VER_LINUX


	)

37 
	#_STAT_VER_KERNEL
 0

	)

38 
	#_STAT_VER_LINUX
 1

	)

41 
	#_MKNOD_VER_LINUX
 0

	)

44 
	#_STAT_VER
 
_STAT_VER_LINUX


	)

46 
	s¡©


48 
__dev_t
 
	m¡_dev
;

49 #iâdeà
__x86_64__


50 
	m__·d1
;

52 #ià
defšed
 
__x86_64__
 || !defšed 
__USE_FILE_OFFSET64


53 
__šo_t
 
	m¡_šo
;

55 
__šo_t
 
	m__¡_šo
;

57 #iâdeà
__x86_64__


58 
__mode_t
 
	m¡_mode
;

59 
__Æšk_t
 
	m¡_Æšk
;

61 
__Æšk_t
 
	m¡_Æšk
;

62 
__mode_t
 
	m¡_mode
;

64 
__uid_t
 
	m¡_uid
;

65 
__gid_t
 
	m¡_gid
;

66 #ifdeà
__x86_64__


67 
	m__·d0
;

69 
__dev_t
 
	m¡_rdev
;

70 #iâdeà
__x86_64__


71 
	m__·d2
;

73 #ià
defšed
 
__x86_64__
 || !defšed 
__USE_FILE_OFFSET64


74 
__off_t
 
	m¡_size
;

76 
__off64_t
 
	m¡_size
;

78 
__blksize_t
 
	m¡_blksize
;

79 #ià
defšed
 
__x86_64__
 || !defšed 
__USE_FILE_OFFSET64


80 
__blkút_t
 
	m¡_blocks
;

82 
__blkút64_t
 
	m¡_blocks
;

84 #ifdeà
__USE_XOPEN2K8


91 
time¥ec
 
	m¡_©im
;

92 
time¥ec
 
	m¡_mtim
;

93 
time¥ec
 
	m¡_ùim
;

94 
	#¡_©ime
 
¡_©im
.
tv_£c


	)

95 
	#¡_mtime
 
¡_mtim
.
tv_£c


	)

96 
	#¡_ùime
 
¡_ùim
.
tv_£c


	)

98 
__time_t
 
	m¡_©ime
;

99 
__sysÿÎ_ulÚg_t
 
	m¡_©im’£c
;

100 
__time_t
 
	m¡_mtime
;

101 
__sysÿÎ_ulÚg_t
 
	m¡_mtim’£c
;

102 
__time_t
 
	m¡_ùime
;

103 
__sysÿÎ_ulÚg_t
 
	m¡_ùim’£c
;

105 #ifdeà
__x86_64__


106 
__sysÿÎ_¦Úg_t
 
	m__glibc_»£rved
[3];

108 #iâdeà
__USE_FILE_OFFSET64


109 
	m__glibc_»£rved4
;

110 
	m__glibc_»£rved5
;

112 
__šo64_t
 
	m¡_šo
;

117 #ifdeà
__USE_LARGEFILE64


119 
	s¡©64


121 
__dev_t
 
	m¡_dev
;

122 #ifdeà
__x86_64__


123 
__šo64_t
 
	m¡_šo
;

124 
__Æšk_t
 
	m¡_Æšk
;

125 
__mode_t
 
	m¡_mode
;

127 
	m__·d1
;

128 
__šo_t
 
	m__¡_šo
;

129 
__mode_t
 
	m¡_mode
;

130 
__Æšk_t
 
	m¡_Æšk
;

132 
__uid_t
 
	m¡_uid
;

133 
__gid_t
 
	m¡_gid
;

134 #ifdeà
__x86_64__


135 
	m__·d0
;

136 
__dev_t
 
	m¡_rdev
;

137 
__off_t
 
	m¡_size
;

139 
__dev_t
 
	m¡_rdev
;

140 
	m__·d2
;

141 
__off64_t
 
	m¡_size
;

143 
__blksize_t
 
	m¡_blksize
;

144 
__blkút64_t
 
	m¡_blocks
;

145 #ifdeà
__USE_XOPEN2K8


152 
time¥ec
 
	m¡_©im
;

153 
time¥ec
 
	m¡_mtim
;

154 
time¥ec
 
	m¡_ùim
;

156 
__time_t
 
	m¡_©ime
;

157 
__sysÿÎ_ulÚg_t
 
	m¡_©im’£c
;

158 
__time_t
 
	m¡_mtime
;

159 
__sysÿÎ_ulÚg_t
 
	m¡_mtim’£c
;

160 
__time_t
 
	m¡_ùime
;

161 
__sysÿÎ_ulÚg_t
 
	m¡_ùim’£c
;

163 #ifdeà
__x86_64__


164 
__sysÿÎ_¦Úg_t
 
	m__glibc_»£rved
[3];

166 
__šo64_t
 
	m¡_šo
;

172 
	#_STATBUF_ST_BLKSIZE


	)

173 
	#_STATBUF_ST_RDEV


	)

175 
	#_STATBUF_ST_NSEC


	)

179 
	#__S_IFMT
 0170000

	)

182 
	#__S_IFDIR
 0040000

	)

183 
	#__S_IFCHR
 0020000

	)

184 
	#__S_IFBLK
 0060000

	)

185 
	#__S_IFREG
 0100000

	)

186 
	#__S_IFIFO
 0010000

	)

187 
	#__S_IFLNK
 0120000

	)

188 
	#__S_IFSOCK
 0140000

	)

192 
	#__S_TYPEISMQ
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

193 
	#__S_TYPEISSEM
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

194 
	#__S_TYPEISSHM
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

198 
	#__S_ISUID
 04000

	)

199 
	#__S_ISGID
 02000

	)

200 
	#__S_ISVTX
 01000

	)

201 
	#__S_IREAD
 0400

	)

202 
	#__S_IWRITE
 0200

	)

203 
	#__S_IEXEC
 0100

	)

205 #ifdeà
__USE_ATFILE


206 
	#UTIME_NOW
 ((1È<< 30è- 1l)

	)

207 
	#UTIME_OMIT
 ((1È<< 30è- 2l)

	)

	@/usr/include/bits/types.h

23 #iâdef 
_BITS_TYPES_H


24 
	#_BITS_TYPES_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/wÜdsize.h
>

30 
	t__u_ch¬
;

31 
	t__u_shÜt
;

32 
	t__u_št
;

33 
	t__u_lÚg
;

36 sigÃd 
	t__št8_t
;

37 
	t__ušt8_t
;

38 sigÃd 
	t__št16_t
;

39 
	t__ušt16_t
;

40 sigÃd 
	t__št32_t
;

41 
	t__ušt32_t
;

42 #ià
__WORDSIZE
 == 64

43 sigÃd 
	t__št64_t
;

44 
	t__ušt64_t
;

46 
__ex‹nsiÚ__
 sigÃd 
	t__št64_t
;

47 
__ex‹nsiÚ__
 
	t__ušt64_t
;

51 #ià
__WORDSIZE
 == 64

52 
	t__quad_t
;

53 
	t__u_quad_t
;

55 
__ex‹nsiÚ__
 
	t__quad_t
;

56 
__ex‹nsiÚ__
 
	t__u_quad_t
;

89 
	#__S16_TYPE
 

	)

90 
	#__U16_TYPE
 

	)

91 
	#__S32_TYPE
 

	)

92 
	#__U32_TYPE
 

	)

93 
	#__SLONGWORD_TYPE
 

	)

94 
	#__ULONGWORD_TYPE
 

	)

95 #ià
__WORDSIZE
 == 32

96 
	#__SQUAD_TYPE
 
__quad_t


	)

97 
	#__UQUAD_TYPE
 
__u_quad_t


	)

98 
	#__SWORD_TYPE
 

	)

99 
	#__UWORD_TYPE
 

	)

100 
	#__SLONG32_TYPE
 

	)

101 
	#__ULONG32_TYPE
 

	)

102 
	#__S64_TYPE
 
__quad_t


	)

103 
	#__U64_TYPE
 
__u_quad_t


	)

106 
	#__STD_TYPE
 
__ex‹nsiÚ__
 

	)

107 #–ià
__WORDSIZE
 == 64

108 
	t__SQUAD_TYPE
 

	)

109 
	t__UQUAD_TYPE
 

	)

110 
	t__SWORD_TYPE
 

	)

111 
	t__UWORD_TYPE
 

	)

112 
	t__SLONG32_TYPE
 

	)

113 
	t__ULONG32_TYPE
 

	)

114 
	t__S64_TYPE
 

	)

115 
	t__U64_TYPE
 

	)

117 
	t__STD_TYPE
 

	)

121 
	~<b™s/ty³sizes.h
>

124 
__STD_TYPE
 
	t__DEV_T_TYPE
 
	t__dev_t
;

125 
__STD_TYPE
 
__UID_T_TYPE
 
	g__uid_t
;

126 
__STD_TYPE
 
__GID_T_TYPE
 
	g__gid_t
;

127 
__STD_TYPE
 
__INO_T_TYPE
 
	g__šo_t
;

128 
__STD_TYPE
 
__INO64_T_TYPE
 
	g__šo64_t
;

129 
__STD_TYPE
 
__MODE_T_TYPE
 
	g__mode_t
;

130 
__STD_TYPE
 
__NLINK_T_TYPE
 
	g__Æšk_t
;

131 
__STD_TYPE
 
__OFF_T_TYPE
 
	g__off_t
;

132 
__STD_TYPE
 
__OFF64_T_TYPE
 
	g__off64_t
;

133 
__STD_TYPE
 
__PID_T_TYPE
 
	g__pid_t
;

134 
__STD_TYPE
 
__FSID_T_TYPE
 
	g__fsid_t
;

135 
__STD_TYPE
 
__CLOCK_T_TYPE
 
	g__şock_t
;

136 
__STD_TYPE
 
__RLIM_T_TYPE
 
	g__¾im_t
;

137 
__STD_TYPE
 
__RLIM64_T_TYPE
 
	g__¾im64_t
;

138 
__STD_TYPE
 
__ID_T_TYPE
 
	g__id_t
;

139 
__STD_TYPE
 
__TIME_T_TYPE
 
	g__time_t
;

140 
__STD_TYPE
 
__USECONDS_T_TYPE
 
	g__u£cÚds_t
;

141 
__STD_TYPE
 
__SUSECONDS_T_TYPE
 
	g__su£cÚds_t
;

143 
__STD_TYPE
 
__DADDR_T_TYPE
 
	g__daddr_t
;

144 
__STD_TYPE
 
__KEY_T_TYPE
 
	g__key_t
;

147 
__STD_TYPE
 
__CLOCKID_T_TYPE
 
	g__şockid_t
;

150 
__STD_TYPE
 
__TIMER_T_TYPE
 
	g__tim”_t
;

153 
__STD_TYPE
 
__BLKSIZE_T_TYPE
 
	g__blksize_t
;

158 
__STD_TYPE
 
__BLKCNT_T_TYPE
 
	g__blkút_t
;

159 
__STD_TYPE
 
__BLKCNT64_T_TYPE
 
	g__blkút64_t
;

162 
__STD_TYPE
 
__FSBLKCNT_T_TYPE
 
	g__fsblkút_t
;

163 
__STD_TYPE
 
__FSBLKCNT64_T_TYPE
 
	g__fsblkút64_t
;

166 
__STD_TYPE
 
__FSFILCNT_T_TYPE
 
	g__fsfút_t
;

167 
__STD_TYPE
 
__FSFILCNT64_T_TYPE
 
	g__fsfút64_t
;

170 
__STD_TYPE
 
__FSWORD_T_TYPE
 
	g__fswÜd_t
;

172 
__STD_TYPE
 
__SSIZE_T_TYPE
 
	g__ssize_t
;

175 
__STD_TYPE
 
__SYSCALL_SLONG_TYPE
 
	g__sysÿÎ_¦Úg_t
;

177 
__STD_TYPE
 
__SYSCALL_ULONG_TYPE
 
	g__sysÿÎ_ulÚg_t
;

181 
__off64_t
 
	t__loff_t
;

182 
__quad_t
 *
	t__qaddr_t
;

183 *
	t__ÿddr_t
;

186 
__STD_TYPE
 
__SWORD_TYPE
 
	g__šŒ_t
;

189 
__STD_TYPE
 
__U32_TYPE
 
	g__sockËn_t
;

192 #undeà
__STD_TYPE


	@/usr/include/bits/unistd.h

19 #iâdeà
_UNISTD_H


23 
ssize_t
 
	$__»ad_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

24 
size_t
 
__buæ’
è
__wur
;

25 
ssize_t
 
	`__REDIRECT
 (
__»ad_®Ÿs
, (
__fd
, *
__buf
,

26 
size_t
 
__nby‹s
), 
»ad
è
__wur
;

27 
ssize_t
 
	`__REDIRECT
 (
__»ad_chk_w¬n
,

28 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

29 
size_t
 
__buæ’
), 
__»ad_chk
)

30 
__wur
 
	`__w¬Ç‰r
 ("read called with bigger†engthhan size of "

33 
__fÜtify_funùiÚ
 
__wur
 
ssize_t


34 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
)

36 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

38 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

39  
	`__»ad_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
	`__bos0
 (__buf));

41 ià(
__nby‹s
 > 
	`__bos0
 (
__buf
))

42  
	`__»ad_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
	`__bos0
 (__buf));

44  
	`__»ad_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
);

45 
	}
}

47 #ifdeà
__USE_UNIX98


48 
ssize_t
 
	$__´—d_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

49 
__off_t
 
__off£t
, 
size_t
 
__bufsize
è
__wur
;

50 
ssize_t
 
	$__´—d64_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

51 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
è
__wur
;

52 
ssize_t
 
	`__REDIRECT
 (
__´—d_®Ÿs
,

53 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

54 
__off_t
 
__off£t
), 
´—d
è
__wur
;

55 
ssize_t
 
	`__REDIRECT
 (
__´—d64_®Ÿs
,

56 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

57 
__off64_t
 
__off£t
), 
´—d64
è
__wur
;

58 
ssize_t
 
	`__REDIRECT
 (
__´—d_chk_w¬n
,

59 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

60 
__off_t
 
__off£t
, 
size_t
 
__bufsize
), 
__´—d_chk
)

61 
__wur
 
	`__w¬Ç‰r
 ("pread called with bigger†engthhan size of "

63 
ssize_t
 
	`__REDIRECT
 (
__´—d64_chk_w¬n
,

64 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

65 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
),

66 
__´—d64_chk
)

67 
__wur
 
	`__w¬Ç‰r
 ("pread64 called with bigger†engthhan size of "

70 #iâdeà
__USE_FILE_OFFSET64


71 
__fÜtify_funùiÚ
 
__wur
 
ssize_t


72 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off_t
 
__off£t
)

74 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

76 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

77  
	`__´—d_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

79 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

80  
	`__´—d_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

81 
	`__bos0
 (
__buf
));

83  
	`__´—d_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

84 
	}
}

86 
__fÜtify_funùiÚ
 
__wur
 
ssize_t


87 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
)

89 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

91 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

92  
	`__´—d64_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

94 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

95  
	`__´—d64_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

96 
	`__bos0
 (
__buf
));

99  
	`__´—d64_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

100 
	}
}

103 #ifdeà
__USE_LARGEFILE64


104 
__fÜtify_funùiÚ
 
__wur
 
ssize_t


105 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
)

107 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

109 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

110  
	`__´—d64_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

112 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

113  
	`__´—d64_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

114 
	`__bos0
 (
__buf
));

117  
	`__´—d64_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

118 
	}
}

122 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


123 
ssize_t
 
	$__»adlšk_chk
 (cÚ¡ *
__»¡riù
 
__·th
,

124 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

125 
size_t
 
__buæ’
)

126 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

127 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk_®Ÿs
,

128 (cÚ¡ *
__»¡riù
 
__·th
,

129 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
), 
»adlšk
)

130 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

131 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk_chk_w¬n
,

132 (cÚ¡ *
__»¡riù
 
__·th
,

133 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

134 
size_t
 
__buæ’
), 
__»adlšk_chk
)

135 
	`__nÚnuÎ
 ((1, 2)è
__wur
 
	`__w¬Ç‰r
 ("readlink called with bigger†ength "

138 
__fÜtify_funùiÚ
 
	`__nÚnuÎ
 ((1, 2)è
__wur
 
ssize_t


139 
	`__NTH
 (
	$»adlšk
 (cÚ¡ *
__»¡riù
 
__·th
, *__»¡riù 
__buf
,

140 
size_t
 
__Ën
))

142 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

144 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

145  
	`__»adlšk_chk
 (
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

147 iàĞ
__Ën
 > 
	`__bos
 (
__buf
))

148  
	`__»adlšk_chk_w¬n
 (
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

150  
	`__»adlšk_®Ÿs
 (
__·th
, 
__buf
, 
__Ën
);

151 
	}
}

154 #ifdeà
__USE_ATFILE


155 
ssize_t
 
	$__»adlšk©_chk
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

156 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

157 
size_t
 
__buæ’
)

158 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

159 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk©_®Ÿs
,

160 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

161 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
),

162 
»adlšk©
)

163 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

164 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk©_chk_w¬n
,

165 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

166 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

167 
size_t
 
__buæ’
), 
__»adlšk©_chk
)

168 
	`__nÚnuÎ
 ((2, 3)è
__wur
 
	`__w¬Ç‰r
 ("readlinkat called with bigger "

172 
__fÜtify_funùiÚ
 
	`__nÚnuÎ
 ((2, 3)è
__wur
 
ssize_t


173 
	`__NTH
 (
	$»adlšk©
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

174 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
))

176 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

178 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

179  
	`__»adlšk©_chk
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

181 ià(
__Ën
 > 
	`__bos
 (
__buf
))

182  
	`__»adlšk©_chk_w¬n
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
,

183 
	`__bos
 (
__buf
));

185  
	`__»adlšk©_®Ÿs
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
);

186 
	}
}

189 *
	$__g‘cwd_chk
 (*
__buf
, 
size_t
 
__size
, size_ˆ
__buæ’
)

190 
__THROW
 
__wur
;

191 *
	`__REDIRECT_NTH
 (
__g‘cwd_®Ÿs
,

192 (*
__buf
, 
size_t
 
__size
), 
g‘cwd
è
__wur
;

193 *
	`__REDIRECT_NTH
 (
__g‘cwd_chk_w¬n
,

194 (*
__buf
, 
size_t
 
__size
, size_ˆ
__buæ’
),

195 
__g‘cwd_chk
)

196 
__wur
 
	`__w¬Ç‰r
 ("getcwd caller with bigger†engthhan size of "

199 
__fÜtify_funùiÚ
 
__wur
 *

200 
	`__NTH
 (
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
))

202 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

204 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
))

205  
	`__g‘cwd_chk
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

207 ià(
__size
 > 
	`__bos
 (
__buf
))

208  
	`__g‘cwd_chk_w¬n
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

210  
	`__g‘cwd_®Ÿs
 (
__buf
, 
__size
);

211 
	}
}

213 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


214 *
	$__g‘wd_chk
 (*
__buf
, 
size_t
 
buæ’
)

215 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

216 *
	`__REDIRECT_NTH
 (
__g‘wd_w¬n
, (*
__buf
), 
g‘wd
)

217 
	`__nÚnuÎ
 ((1)è
__wur
 
	`__w¬Ç‰r
 ("please use getcwd instead,‡s getwd "

220 
__fÜtify_funùiÚ
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
 *

221 
	`__NTH
 (
	$g‘wd
 (*
__buf
))

223 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

224  
	`__g‘wd_chk
 (
__buf
, 
	`__bos
 (__buf));

225  
	`__g‘wd_w¬n
 (
__buf
);

226 
	}
}

229 
size_t
 
	$__cÚf¡r_chk
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
,

230 
size_t
 
__buæ’
è
__THROW
;

231 
size_t
 
	`__REDIRECT_NTH
 (
__cÚf¡r_®Ÿs
, (
__Çme
, *
__buf
,

232 
size_t
 
__Ën
), 
cÚf¡r
);

233 
size_t
 
	`__REDIRECT_NTH
 (
__cÚf¡r_chk_w¬n
,

234 (
__Çme
, *
__buf
, 
size_t
 
__Ën
,

235 
size_t
 
__buæ’
), 
__cÚf¡r_chk
)

236 
	`__w¬Ç‰r
 ("confstr called with bigger†engthhan size of destination "

239 
__fÜtify_funùiÚ
 
size_t


240 
	`__NTH
 (
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
))

242 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

244 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

245  
	`__cÚf¡r_chk
 (
__Çme
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

247 ià(
	`__bos
 (
__buf
è< 
__Ën
)

248  
	`__cÚf¡r_chk_w¬n
 (
__Çme
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

250  
	`__cÚf¡r_®Ÿs
 (
__Çme
, 
__buf
, 
__Ën
);

251 
	}
}

254 
	$__g‘groups_chk
 (
__size
, 
__gid_t
 
__li¡
[], 
size_t
 
__li¡Ën
)

255 
__THROW
 
__wur
;

256 
	`__REDIRECT_NTH
 (
__g‘groups_®Ÿs
, (
__size
, 
__gid_t
 
__li¡
[]),

257 
g‘groups
è
__wur
;

258 
	`__REDIRECT_NTH
 (
__g‘groups_chk_w¬n
,

259 (
__size
, 
__gid_t
 
__li¡
[], 
size_t
 
__li¡Ën
),

260 
__g‘groups_chk
)

261 
__wur
 
	`__w¬Ç‰r
 ("getgroups called with bigger group counthan what "

264 
__fÜtify_funùiÚ
 

265 
	`__NTH
 (
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]))

267 ià(
	`__bos
 (
__li¡
è!ğ(
size_t
) -1)

269 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
) || __size < 0)

270  
	`__g‘groups_chk
 (
__size
, 
__li¡
, 
	`__bos
 (__list));

272 ià(
__size
 *  (
__gid_t
è> 
	`__bos
 (
__li¡
))

273  
	`__g‘groups_chk_w¬n
 (
__size
, 
__li¡
, 
	`__bos
 (__list));

275  
	`__g‘groups_®Ÿs
 (
__size
, 
__li¡
);

276 
	}
}

279 
	$__‰yÇme_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

280 
size_t
 
__Ä—l
è
__THROW
 
	`__nÚnuÎ
 ((2));

281 
	`__REDIRECT_NTH
 (
__‰yÇme_r_®Ÿs
, (
__fd
, *
__buf
,

282 
size_t
 
__buæ’
), 
‰yÇme_r
)

283 
	`__nÚnuÎ
 ((2));

284 
	`__REDIRECT_NTH
 (
__‰yÇme_r_chk_w¬n
,

285 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

286 
size_t
 
__Ä—l
), 
__‰yÇme_r_chk
)

287 
	`__nÚnuÎ
 ((2)è
	`__w¬Ç‰r
 ("ttyname_r called with bigger buflenhan "

290 
__fÜtify_funùiÚ
 

291 
	`__NTH
 (
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
))

293 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

295 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

296  
	`__‰yÇme_r_chk
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

298 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

299  
	`__‰yÇme_r_chk_w¬n
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

301  
	`__‰yÇme_r_®Ÿs
 (
__fd
, 
__buf
, 
__buæ’
);

302 
	}
}

305 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


306 
	$__g‘logš_r_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

307 
	`__nÚnuÎ
 ((1));

308 
	`__REDIRECT
 (
__g‘logš_r_®Ÿs
, (*
__buf
, 
size_t
 
__buæ’
),

309 
g‘logš_r
è
	`__nÚnuÎ
 ((1));

310 
	`__REDIRECT
 (
__g‘logš_r_chk_w¬n
,

311 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

312 
__g‘logš_r_chk
)

313 
	`__nÚnuÎ
 ((1)è
	`__w¬Ç‰r
 ("getlogin_r called with bigger buflenhan "

316 
__fÜtify_funùiÚ
 

317 
	$g‘logš_r
 (*
__buf
, 
size_t
 
__buæ’
)

319 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

321 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

322  
	`__g‘logš_r_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

324 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

325  
	`__g‘logš_r_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

327  
	`__g‘logš_r_®Ÿs
 (
__buf
, 
__buæ’
);

328 
	}
}

332 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_UNIX98


333 
	$__g‘ho¡Çme_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

334 
__THROW
 
	`__nÚnuÎ
 ((1));

335 
	`__REDIRECT_NTH
 (
__g‘ho¡Çme_®Ÿs
, (*
__buf
, 
size_t
 
__buæ’
),

336 
g‘ho¡Çme
è
	`__nÚnuÎ
 ((1));

337 
	`__REDIRECT_NTH
 (
__g‘ho¡Çme_chk_w¬n
,

338 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

339 
__g‘ho¡Çme_chk
)

340 
	`__nÚnuÎ
 ((1)è
	`__w¬Ç‰r
 ("gethostname called with bigger buflenhan "

343 
__fÜtify_funùiÚ
 

344 
	`__NTH
 (
	$g‘ho¡Çme
 (*
__buf
, 
size_t
 
__buæ’
))

346 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

348 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

349  
	`__g‘ho¡Çme_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

351 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

352  
	`__g‘ho¡Çme_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

354  
	`__g‘ho¡Çme_®Ÿs
 (
__buf
, 
__buæ’
);

355 
	}
}

359 #ià
defšed
 
__USE_MISC
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_UNIX98
)

360 
	$__g‘domašÇme_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

361 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

362 
	`__REDIRECT_NTH
 (
__g‘domašÇme_®Ÿs
, (*
__buf
,

363 
size_t
 
__buæ’
),

364 
g‘domašÇme
è
	`__nÚnuÎ
 ((1)è
__wur
;

365 
	`__REDIRECT_NTH
 (
__g‘domašÇme_chk_w¬n
,

366 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

367 
__g‘domašÇme_chk
)

368 
	`__nÚnuÎ
 ((1)è
__wur
 
	`__w¬Ç‰r
 ("getdomainname called with bigger "

372 
__fÜtify_funùiÚ
 

373 
	`__NTH
 (
	$g‘domašÇme
 (*
__buf
, 
size_t
 
__buæ’
))

375 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

377 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

378  
	`__g‘domašÇme_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

380 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

381  
	`__g‘domašÇme_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

383  
	`__g‘domašÇme_®Ÿs
 (
__buf
, 
__buæ’
);

384 
	}
}

	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

97 #undeà
__USE_ISOC11


98 #undeà
__USE_ISOC99


99 #undeà
__USE_ISOC95


100 #undeà
__USE_ISOCXX11


101 #undeà
__USE_POSIX


102 #undeà
__USE_POSIX2


103 #undeà
__USE_POSIX199309


104 #undeà
__USE_POSIX199506


105 #undeà
__USE_XOPEN


106 #undeà
__USE_XOPEN_EXTENDED


107 #undeà
__USE_UNIX98


108 #undeà
__USE_XOPEN2K


109 #undeà
__USE_XOPEN2KXSI


110 #undeà
__USE_XOPEN2K8


111 #undeà
__USE_XOPEN2K8XSI


112 #undeà
__USE_LARGEFILE


113 #undeà
__USE_LARGEFILE64


114 #undeà
__USE_FILE_OFFSET64


115 #undeà
__USE_MISC


116 #undeà
__USE_ATFILE


117 #undeà
__USE_GNU


118 #undeà
__USE_REENTRANT


119 #undeà
__USE_FORTIFY_LEVEL


120 #undeà
__KERNEL_STRICT_NAMES


124 #iâdeà
_LOOSE_KERNEL_NAMES


125 
	#__KERNEL_STRICT_NAMES


	)

135 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


136 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

137 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

139 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

146 #ià(
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE
) \

147 && !
defšed
 
	g_DEFAULT_SOURCE


149 #undeà
_DEFAULT_SOURCE


150 
	#_DEFAULT_SOURCE
 1

	)

154 #ifdeà
_GNU_SOURCE


155 #undeà
_ISOC95_SOURCE


156 
	#_ISOC95_SOURCE
 1

	)

157 #undeà
_ISOC99_SOURCE


158 
	#_ISOC99_SOURCE
 1

	)

159 #undeà
_ISOC11_SOURCE


160 
	#_ISOC11_SOURCE
 1

	)

161 #undeà
_POSIX_SOURCE


162 
	#_POSIX_SOURCE
 1

	)

163 #undeà
_POSIX_C_SOURCE


164 
	#_POSIX_C_SOURCE
 200809L

	)

165 #undeà
_XOPEN_SOURCE


166 
	#_XOPEN_SOURCE
 700

	)

167 #undeà
_XOPEN_SOURCE_EXTENDED


168 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

169 #undeà
_LARGEFILE64_SOURCE


170 
	#_LARGEFILE64_SOURCE
 1

	)

171 #undeà
_DEFAULT_SOURCE


172 
	#_DEFAULT_SOURCE
 1

	)

173 #undeà
_ATFILE_SOURCE


174 
	#_ATFILE_SOURCE
 1

	)

179 #ià(
defšed
 
_DEFAULT_SOURCE
 \

180 || (!
defšed
 
	g__STRICT_ANSI__
 \

181 && !
defšed
 
	g_ISOC99_SOURCE
 \

182 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

183 && !
defšed
 
	g_XOPEN_SOURCE
))

184 #undeà
_DEFAULT_SOURCE


185 
	#_DEFAULT_SOURCE
 1

	)

189 #ià(
defšed
 
_ISOC11_SOURCE
 \

190 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

191 
	#__USE_ISOC11
 1

	)

195 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

196 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

197 
	#__USE_ISOC99
 1

	)

201 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

202 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

203 
	#__USE_ISOC95
 1

	)

210 #ià((
defšed
 
__ılu¥lus
 && __cplusplus >= 201103L) \

211 || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__
)

212 
	#__USE_ISOCXX11
 1

	)

218 #ifdeà
_DEFAULT_SOURCE


219 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


220 
	#__USE_POSIX_IMPLICITLY
 1

	)

222 #undeà
_POSIX_SOURCE


223 
	#_POSIX_SOURCE
 1

	)

224 #undeà
_POSIX_C_SOURCE


225 
	#_POSIX_C_SOURCE
 200809L

	)

227 #ià((!
defšed
 
__STRICT_ANSI__
 \

228 || (
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) >= 500)) \

229 && !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

230 
	#_POSIX_SOURCE
 1

	)

231 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

232 
	#_POSIX_C_SOURCE
 2

	)

233 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

234 
	#_POSIX_C_SOURCE
 199506L

	)

235 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

236 
	#_POSIX_C_SOURCE
 200112L

	)

238 
	#_POSIX_C_SOURCE
 200809L

	)

240 
	#__USE_POSIX_IMPLICITLY
 1

	)

243 #ià(
defšed
 
_POSIX_SOURCE
 \

244 || (
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >= 1) \

245 || 
defšed
 
_XOPEN_SOURCE
)

246 
	#__USE_POSIX
 1

	)

249 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


250 
	#__USE_POSIX2
 1

	)

253 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199309L

254 
	#__USE_POSIX199309
 1

	)

257 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199506L

258 
	#__USE_POSIX199506
 1

	)

261 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200112L

262 
	#__USE_XOPEN2K
 1

	)

263 #undeà
__USE_ISOC95


264 
	#__USE_ISOC95
 1

	)

265 #undeà
__USE_ISOC99


266 
	#__USE_ISOC99
 1

	)

269 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200809L

270 
	#__USE_XOPEN2K8
 1

	)

271 #undeà
_ATFILE_SOURCE


272 
	#_ATFILE_SOURCE
 1

	)

275 #ifdef 
_XOPEN_SOURCE


276 
	#__USE_XOPEN
 1

	)

277 #ià(
_XOPEN_SOURCE
 - 0) >= 500

278 
	#__USE_XOPEN_EXTENDED
 1

	)

279 
	#__USE_UNIX98
 1

	)

280 #undeà
_LARGEFILE_SOURCE


281 
	#_LARGEFILE_SOURCE
 1

	)

282 #ià(
_XOPEN_SOURCE
 - 0) >= 600

283 #ià(
_XOPEN_SOURCE
 - 0) >= 700

284 
	#__USE_XOPEN2K8
 1

	)

285 
	#__USE_XOPEN2K8XSI
 1

	)

287 
	#__USE_XOPEN2K
 1

	)

288 
	#__USE_XOPEN2KXSI
 1

	)

289 #undeà
__USE_ISOC95


290 
	#__USE_ISOC95
 1

	)

291 #undeà
__USE_ISOC99


292 
	#__USE_ISOC99
 1

	)

295 #ifdeà
_XOPEN_SOURCE_EXTENDED


296 
	#__USE_XOPEN_EXTENDED
 1

	)

301 #ifdeà
_LARGEFILE_SOURCE


302 
	#__USE_LARGEFILE
 1

	)

305 #ifdeà
_LARGEFILE64_SOURCE


306 
	#__USE_LARGEFILE64
 1

	)

309 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

310 
	#__USE_FILE_OFFSET64
 1

	)

313 #ià
defšed
 
_DEFAULT_SOURCE


314 
	#__USE_MISC
 1

	)

317 #ifdef 
_ATFILE_SOURCE


318 
	#__USE_ATFILE
 1

	)

321 #ifdef 
_GNU_SOURCE


322 
	#__USE_GNU
 1

	)

325 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


326 
	#__USE_REENTRANT
 1

	)

329 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0

330 #ià!
defšed
 
__OPTIMIZE__
 || __OPTIMIZE__ <= 0

331 #w¬nšg 
_FORTIFY_SOURCE
 
»quœes
 
compšg
 
w™h
 
İtimiz©iÚ
 (-
O
)

332 #–ià!
__GNUC_PREREQ
 (4, 1)

333 #w¬nšg 
_FORTIFY_SOURCE
 
»quœes
 
GCC
 4.1 
Ü
 
Ï‹r


334 #–ià
_FORTIFY_SOURCE
 > 1

335 
	#__USE_FORTIFY_LEVEL
 2

	)

337 
	#__USE_FORTIFY_LEVEL
 1

	)

340 #iâdeà
__USE_FORTIFY_LEVEL


341 
	#__USE_FORTIFY_LEVEL
 0

	)

346 
	~<¡dc-´edef.h
>

354 #undeà
__GNU_LIBRARY__


355 
	#__GNU_LIBRARY__
 6

	)

359 
	#__GLIBC__
 2

	)

360 
	#__GLIBC_MINOR__
 23

	)

362 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

363 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

366 #iâdeà
__ASSEMBLER__


367 #iâdeà
_SYS_CDEFS_H


368 
	~<sys/cdefs.h
>

373 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


374 
	#__USE_LARGEFILE
 1

	)

375 
	#__USE_LARGEFILE64
 1

	)

381 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

382 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

383 && 
defšed
 
	g__ex‹º_šlše


384 
	#__USE_EXTERN_INLINES
 1

	)

392 
	~<gnu/¡ubs.h
>

	@/usr/include/getopt.h

19 #iâdeà
_GETOPT_H


21 #iâdeà
__Ãed_g‘İt


22 
	#_GETOPT_H
 1

	)

32 #ià!
defšed
 
__GNU_LIBRARY__


33 
	~<ùy³.h
>

36 #iâdeà
__THROW


37 #iâdeà
__GNUC_PREREQ


38 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

40 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

41 
	#__THROW
 
	`throw
 ()

	)

43 
	#__THROW


	)

47 #ifdef 
__ılu¥lus


57 *
İrg
;

71 
İtšd
;

76 
İ‹¼
;

80 
İtİt
;

82 #iâdeà
__Ãed_g‘İt


104 
	sİtiÚ


106 cÚ¡ *
	gÇme
;

109 
	ghas_¬g
;

110 *
	gæag
;

111 
	gv®
;

116 
	#no_¬gum’t
 0

	)

117 
	#»quœed_¬gum’t
 1

	)

118 
	#İtiÚ®_¬gum’t
 2

	)

146 #ifdeà
__GNU_LIBRARY__


150 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

151 
__THROW
;

153 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

154 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


158 #ifdeà
__REDIRECT


159 
__REDIRECT_NTH
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

160 cÚ¡ *
__shÜtİts
),

161 
__posix_g‘İt
);

163 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

164 cÚ¡ *
__shÜtİts
è
__THROW
;

165 
	#g‘İt
 
__posix_g‘İt


	)

169 
g‘İt
 ();

172 #iâdeà
__Ãed_g‘İt


173 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

174 cÚ¡ *
__shÜtİts
,

175 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

176 
__THROW
;

177 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

178 cÚ¡ *
__shÜtİts
,

179 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

180 
__THROW
;

184 #ifdef 
__ılu¥lus


189 #undeà
__Ãed_g‘İt


	@/usr/include/time.h

22 #iâdef 
_TIME_H


24 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

25 ! 
defšed
 
	g__Ãed_time¥ec
)

26 
	#_TIME_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__Ãed_size_t


	)

36 
	#__Ãed_NULL


	)

37 
	~<¡ddef.h
>

41 
	~<b™s/time.h
>

44 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


45 #iâdeà
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

53 
	#__şock_t_defšed
 1

	)

55 
	~<b™s/ty³s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__şock_t
 
	tşock_t
;

60 
	g__END_NAMESPACE_STD


61 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX


62 
	$__USING_NAMESPACE_STD
(
şock_t
)

66 #undeà
__Ãed_şock_t


68 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

69 
	#__time_t_defšed
 1

	)

71 
	~<b™s/ty³s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ifdeà
__USE_POSIX


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #undeà
__Ãed_time_t


84 #ià!
defšed
 
__şockid_t_defšed
 && \

85 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

86 
	#__şockid_t_defšed
 1

	)

88 
	~<b™s/ty³s.h
>

91 
__şockid_t
 
	tşockid_t
;

94 #undeà
__şockid_time_t


96 #ià!
defšed
 
__tim”_t_defšed
 && \

97 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

98 
	#__tim”_t_defšed
 1

	)

100 
	~<b™s/ty³s.h
>

103 
__tim”_t
 
	ttim”_t
;

106 #undeà
__Ãed_tim”_t


109 #ià(!
defšed
 
__time¥ec_defšed
 \

110 && ((
defšed
 
_TIME_H
 \

111 && (
defšed
 
__USE_POSIX199309
 \

112 || 
defšed
 
__USE_ISOC11
)) \

113 || 
defšed
 
__Ãed_time¥ec
))

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
__sysÿÎ_¦Úg_t
 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_MISC


146 
tm_gmtoff
;

147 cÚ¡ *
tm_zÚe
;

149 
__tm_gmtoff
;

150 cÚ¡ *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 #ifdeà
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
şock_t
 
	$şock
 (è
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

195 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

196 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

199 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

205 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

206 cÚ¡ *
__»¡riù
 
__fÜm©
,

207 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifdeà
__USE_XOPEN


213 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

214 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

215 
__THROW
;

218 #ifdeà
__USE_XOPEN2K8


221 
	~<xloÿË.h
>

223 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

224 cÚ¡ *
__»¡riù
 
__fÜm©
,

225 cÚ¡ 
tm
 *
__»¡riù
 
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

229 #ifdeà
__USE_GNU


230 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

231 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

232 
__loÿË_t
 
__loc
è
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

243 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

244 
__END_NAMESPACE_STD


246 #ifdeà
__USE_POSIX


249 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

250 
tm
 *
__»¡riù
 
__
è
__THROW
;

254 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

255 
tm
 *
__»¡riù
 
__
è
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

264 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

265 
__END_NAMESPACE_STD


267 #ifdeà
__USE_POSIX


272 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

273 *
__»¡riù
 
__buf
è
__THROW
;

276 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

277 *
__»¡riù
 
__buf
è
__THROW
;

282 *
__tzÇme
[2];

283 
__daylight
;

284 
__timezÚe
;

287 #ifdef 
__USE_POSIX


289 *
tzÇme
[2];

293 
	$tz£t
 (è
__THROW
;

296 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


297 
daylight
;

298 
timezÚe
;

301 #ifdeà
__USE_MISC


304 
	$¡ime
 (cÚ¡ 
time_t
 *
__wh’
è
__THROW
;

310 
	#__i¦—p
(
y—r
) \

311 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

314 #ifdeà
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

322 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

325 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

329 #ifdeà
__USE_POSIX199309


334 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

335 
time¥ec
 *
__»maššg
);

339 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

342 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

345 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, cÚ¡ 
time¥ec
 *
__
)

346 
__THROW
;

348 #ifdeà
__USE_XOPEN2K


353 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

354 cÚ¡ 
time¥ec
 *
__»q
,

355 
time¥ec
 *
__»m
);

358 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

363 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

364 
sigev’t
 *
__»¡riù
 
__evp
,

365 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

368 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

371 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

372 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

373 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

376 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

377 
__THROW
;

380 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

384 #ifdeà
__USE_ISOC11


386 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__nÚnuÎ
 ((1));

391 #ifdeà
__USE_XOPEN_EXTENDED


403 
g‘d©e_”r
;

412 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

415 #ifdeà
__USE_GNU


426 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

427 
tm
 *
__»¡riù
 
__»sbuå
);

430 
__END_DECLS


	@/usr/include/bits/fcntl-linux.h

19 #iâdef 
_FCNTL_H


37 #ifdeà
__USE_GNU


38 
	~<b™s/uio.h
>

42 
	#O_ACCMODE
 0003

	)

43 
	#O_RDONLY
 00

	)

44 
	#O_WRONLY
 01

	)

45 
	#O_RDWR
 02

	)

46 #iâdeà
O_CREAT


47 
	#O_CREAT
 0100

	)

49 #iâdeà
O_EXCL


50 
	#O_EXCL
 0200

	)

52 #iâdeà
O_NOCTTY


53 
	#O_NOCTTY
 0400

	)

55 #iâdeà
O_TRUNC


56 
	#O_TRUNC
 01000

	)

58 #iâdeà
O_APPEND


59 
	#O_APPEND
 02000

	)

61 #iâdeà
O_NONBLOCK


62 
	#O_NONBLOCK
 04000

	)

64 #iâdeà
O_NDELAY


65 
	#O_NDELAY
 
O_NONBLOCK


	)

67 #iâdeà
O_SYNC


68 
	#O_SYNC
 04010000

	)

70 
	#O_FSYNC
 
O_SYNC


	)

71 #iâdeà
O_ASYNC


72 
	#O_ASYNC
 020000

	)

74 #iâdeà
__O_LARGEFILE


75 
	#__O_LARGEFILE
 0100000

	)

78 #iâdeà
__O_DIRECTORY


79 
	#__O_DIRECTORY
 0200000

	)

81 #iâdeà
__O_NOFOLLOW


82 
	#__O_NOFOLLOW
 0400000

	)

84 #iâdeà
__O_CLOEXEC


85 
	#__O_CLOEXEC
 02000000

	)

87 #iâdeà
__O_DIRECT


88 
	#__O_DIRECT
 040000

	)

90 #iâdeà
__O_NOATIME


91 
	#__O_NOATIME
 01000000

	)

93 #iâdeà
__O_PATH


94 
	#__O_PATH
 010000000

	)

96 #iâdeà
__O_DSYNC


97 
	#__O_DSYNC
 010000

	)

99 #iâdeà
__O_TMPFILE


100 
	#__O_TMPFILE
 (020000000 | 
__O_DIRECTORY
)

	)

103 #iâdeà
F_GETLK


104 #iâdeà
__USE_FILE_OFFSET64


105 
	#F_GETLK
 5

	)

106 
	#F_SETLK
 6

	)

107 
	#F_SETLKW
 7

	)

109 
	#F_GETLK
 
F_GETLK64


	)

110 
	#F_SETLK
 
F_SETLK64


	)

111 
	#F_SETLKW
 
F_SETLKW64


	)

114 #iâdeà
F_GETLK64


115 
	#F_GETLK64
 12

	)

116 
	#F_SETLK64
 13

	)

117 
	#F_SETLKW64
 14

	)

131 #ifdeà
__USE_GNU


132 
	#F_OFD_GETLK
 36

	)

133 
	#F_OFD_SETLK
 37

	)

134 
	#F_OFD_SETLKW
 38

	)

137 #ifdeà
__USE_LARGEFILE64


138 
	#O_LARGEFILE
 
__O_LARGEFILE


	)

141 #ifdeà
__USE_XOPEN2K8


142 
	#O_DIRECTORY
 
__O_DIRECTORY


	)

143 
	#O_NOFOLLOW
 
__O_NOFOLLOW


	)

144 
	#O_CLOEXEC
 
__O_CLOEXEC


	)

147 #ifdeà
__USE_GNU


148 
	#O_DIRECT
 
__O_DIRECT


	)

149 
	#O_NOATIME
 
__O_NOATIME


	)

150 
	#O_PATH
 
__O_PATH


	)

151 
	#O_TMPFILE
 
__O_TMPFILE


	)

157 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


158 
	#O_DSYNC
 
__O_DSYNC


	)

159 #ià
defšed
 
__O_RSYNC


160 
	#O_RSYNC
 
__O_RSYNC


	)

162 
	#O_RSYNC
 
O_SYNC


	)

167 
	#F_DUPFD
 0

	)

168 
	#F_GETFD
 1

	)

169 
	#F_SETFD
 2

	)

170 
	#F_GETFL
 3

	)

171 
	#F_SETFL
 4

	)

173 #iâdeà
__F_SETOWN


174 
	#__F_SETOWN
 8

	)

175 
	#__F_GETOWN
 9

	)

178 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


179 
	#F_SETOWN
 
__F_SETOWN


	)

180 
	#F_GETOWN
 
__F_GETOWN


	)

183 #iâdeà
__F_SETSIG


184 
	#__F_SETSIG
 10

	)

185 
	#__F_GETSIG
 11

	)

187 #iâdeà
__F_SETOWN_EX


188 
	#__F_SETOWN_EX
 15

	)

189 
	#__F_GETOWN_EX
 16

	)

192 #ifdeà
__USE_GNU


193 
	#F_SETSIG
 
__F_SETSIG


	)

194 
	#F_GETSIG
 
__F_GETSIG


	)

195 
	#F_SETOWN_EX
 
__F_SETOWN_EX


	)

196 
	#F_GETOWN_EX
 
__F_GETOWN_EX


	)

199 #ifdeà
__USE_GNU


200 
	#F_SETLEASE
 1024

	)

201 
	#F_GETLEASE
 1025

	)

202 
	#F_NOTIFY
 1026

	)

203 
	#F_SETPIPE_SZ
 1031

	)

204 
	#F_GETPIPE_SZ
 1032

	)

206 #ifdeà
__USE_XOPEN2K8


207 
	#F_DUPFD_CLOEXEC
 1030

	)

212 
	#FD_CLOEXEC
 1

	)

214 #iâdeà
F_RDLCK


216 
	#F_RDLCK
 0

	)

217 
	#F_WRLCK
 1

	)

218 
	#F_UNLCK
 2

	)

223 #iâdeà
F_EXLCK


224 
	#F_EXLCK
 4

	)

225 
	#F_SHLCK
 8

	)

228 #ifdeà
__USE_MISC


230 
	#LOCK_SH
 1

	)

231 
	#LOCK_EX
 2

	)

232 
	#LOCK_NB
 4

	)

234 
	#LOCK_UN
 8

	)

237 #ifdeà
__USE_GNU


238 
	#LOCK_MAND
 32

	)

239 
	#LOCK_READ
 64

	)

240 
	#LOCK_WRITE
 128

	)

241 
	#LOCK_RW
 192

	)

244 #ifdeà
__USE_GNU


246 
	#DN_ACCESS
 0x00000001

	)

247 
	#DN_MODIFY
 0x00000002

	)

248 
	#DN_CREATE
 0x00000004

	)

249 
	#DN_DELETE
 0x00000008

	)

250 
	#DN_RENAME
 0x00000010

	)

251 
	#DN_ATTRIB
 0x00000020

	)

252 
	#DN_MULTISHOT
 0x80000000

	)

256 #ifdeà
__USE_GNU


258 
	e__pid_ty³


260 
	mF_OWNER_TID
 = 0,

261 
	mF_OWNER_PID
,

262 
	mF_OWNER_PGRP
,

263 
	mF_OWNER_GID
 = 
F_OWNER_PGRP


267 
	sf_owÃr_ex


269 
__pid_ty³
 
	mty³
;

270 
__pid_t
 
	mpid
;

276 #ifdef 
__USE_MISC


277 
	#FAPPEND
 
O_APPEND


	)

278 
	#FFSYNC
 
O_FSYNC


	)

279 
	#FASYNC
 
O_ASYNC


	)

280 
	#FNONBLOCK
 
O_NONBLOCK


	)

281 
	#FNDELAY
 
O_NDELAY


	)

284 #iâdeà
__POSIX_FADV_DONTNEED


285 
	#__POSIX_FADV_DONTNEED
 4

	)

286 
	#__POSIX_FADV_NOREUSE
 5

	)

289 #ifdeà
__USE_XOPEN2K


290 
	#POSIX_FADV_NORMAL
 0

	)

291 
	#POSIX_FADV_RANDOM
 1

	)

292 
	#POSIX_FADV_SEQUENTIAL
 2

	)

293 
	#POSIX_FADV_WILLNEED
 3

	)

294 
	#POSIX_FADV_DONTNEED
 
__POSIX_FADV_DONTNEED


	)

295 
	#POSIX_FADV_NOREUSE
 
__POSIX_FADV_NOREUSE


	)

299 #ifdeà
__USE_GNU


301 
	#SYNC_FILE_RANGE_WAIT_BEFORE
 1

	)

304 
	#SYNC_FILE_RANGE_WRITE
 2

	)

307 
	#SYNC_FILE_RANGE_WAIT_AFTER
 4

	)

312 
	#SPLICE_F_MOVE
 1

	)

313 
	#SPLICE_F_NONBLOCK
 2

	)

316 
	#SPLICE_F_MORE
 4

	)

317 
	#SPLICE_F_GIFT
 8

	)

321 
	#FALLOC_FL_KEEP_SIZE
 1

	)

324 
	#FALLOC_FL_PUNCH_HOLE
 2

	)

325 
	#FALLOC_FL_COLLAPSE_RANGE
 8

	)

328 
	#FALLOC_FL_ZERO_RANGE
 16

	)

333 
	sfe_hªdË


335 
	mhªdË_by‹s
;

336 
	mhªdË_ty³
;

338 
	mf_hªdË
[0];

342 
	#MAX_HANDLE_SZ
 128

	)

345 
	g__BEGIN_DECLS


347 #ifdeà
__USE_GNU


350 
ssize_t
 
	$»adah—d
 (
__fd
, 
__off64_t
 
__off£t
, 
size_t
 
__couÁ
)

351 
__THROW
;

358 
	`sync_fe_¿nge
 (
__fd
, 
__off64_t
 
__off£t
, __off64_ˆ
__couÁ
,

359 
__æags
);

366 
ssize_t
 
	`vm¥liû
 (
__fdout
, cÚ¡ 
iovec
 *
__iov
,

367 
size_t
 
__couÁ
, 
__æags
);

373 
ssize_t
 
	`¥liû
 (
__fdš
, 
__off64_t
 *
__offš
, 
__fdout
,

374 
__off64_t
 *
__offout
, 
size_t
 
__Ën
,

375 
__æags
);

381 
ssize_t
 
	`‹e
 (
__fdš
, 
__fdout
, 
size_t
 
__Ën
,

382 
__æags
);

388 #iâdeà
__USE_FILE_OFFSET64


389 
	`çÎoÿ‹
 (
__fd
, 
__mode
, 
__off_t
 
__off£t
, __off_ˆ
__Ën
);

391 #ifdeà
__REDIRECT


392 
	`__REDIRECT
 (
çÎoÿ‹
, (
__fd
, 
__mode
, 
__off64_t
 
__off£t
,

393 
__off64_t
 
__Ën
),

394 
çÎoÿ‹64
);

396 
	#çÎoÿ‹
 
çÎoÿ‹64


	)

399 #ifdeà
__USE_LARGEFILE64


400 
	`çÎoÿ‹64
 (
__fd
, 
__mode
, 
__off64_t
 
__off£t
,

401 
__off64_t
 
__Ën
);

406 
	$Çme_to_hªdË_©
 (
__dfd
, cÚ¡ *
__Çme
,

407 
fe_hªdË
 *
__hªdË
, *
__mÁ_id
,

408 
__æags
è
__THROW
;

414 
	`İ’_by_hªdË_©
 (
__mouÁdœfd
, 
fe_hªdË
 *
__hªdË
,

415 
__æags
);

419 
__END_DECLS


	@/usr/include/bits/mman-linux.h

19 #iâdeà
_SYS_MMAN_H


35 
	#PROT_READ
 0x1

	)

36 
	#PROT_WRITE
 0x2

	)

37 
	#PROT_EXEC
 0x4

	)

38 
	#PROT_NONE
 0x0

	)

39 
	#PROT_GROWSDOWN
 0x01000000

	)

41 
	#PROT_GROWSUP
 0x02000000

	)

45 
	#MAP_SHARED
 0x01

	)

46 
	#MAP_PRIVATE
 0x02

	)

47 #ifdeà
__USE_MISC


48 
	#MAP_TYPE
 0x0à

	)

52 
	#MAP_FIXED
 0x10

	)

53 #ifdeà
__USE_MISC


54 
	#MAP_FILE
 0

	)

55 #ifdeà
__MAP_ANONYMOUS


56 
	#MAP_ANONYMOUS
 
__MAP_ANONYMOUS


	)

58 
	#MAP_ANONYMOUS
 0x20

	)

60 
	#MAP_ANON
 
MAP_ANONYMOUS


	)

62 
	#MAP_HUGE_SHIFT
 26

	)

63 
	#MAP_HUGE_MASK
 0x3f

	)

67 
	#MS_ASYNC
 1

	)

68 
	#MS_SYNC
 4

	)

69 
	#MS_INVALIDATE
 2

	)

72 #ifdeà
__USE_GNU


73 
	#MREMAP_MAYMOVE
 1

	)

74 
	#MREMAP_FIXED
 2

	)

78 #ifdeà
__USE_MISC


79 
	#MADV_NORMAL
 0

	)

80 
	#MADV_RANDOM
 1

	)

81 
	#MADV_SEQUENTIAL
 2

	)

82 
	#MADV_WILLNEED
 3

	)

83 
	#MADV_DONTNEED
 4

	)

84 
	#MADV_REMOVE
 9

	)

85 
	#MADV_DONTFORK
 10

	)

86 
	#MADV_DOFORK
 11

	)

87 
	#MADV_MERGEABLE
 12

	)

88 
	#MADV_UNMERGEABLE
 13

	)

89 
	#MADV_HUGEPAGE
 14

	)

90 
	#MADV_NOHUGEPAGE
 15

	)

91 
	#MADV_DONTDUMP
 16

	)

93 
	#MADV_DODUMP
 17

	)

94 
	#MADV_HWPOISON
 100

	)

98 #ifdeà
__USE_XOPEN2K


99 
	#POSIX_MADV_NORMAL
 0

	)

100 
	#POSIX_MADV_RANDOM
 1

	)

101 
	#POSIX_MADV_SEQUENTIAL
 2

	)

102 
	#POSIX_MADV_WILLNEED
 3

	)

103 
	#POSIX_MADV_DONTNEED
 4

	)

107 #iâdeà
MCL_CURRENT


108 
	#MCL_CURRENT
 1

	)

109 
	#MCL_FUTURE
 2

	)

111 
	#MCL_ONFAULT
 4

	)

	@/usr/include/bits/time.h

23 #ià
defšed
 
__Ãed_timev®
 || defšed 
__USE_GNU


24 #iâdeà
_STRUCT_TIMEVAL


25 
	#_STRUCT_TIMEVAL
 1

	)

26 
	~<b™s/ty³s.h
>

30 
	stimev®


32 
__time_t
 
	mtv_£c
;

33 
__su£cÚds_t
 
	mtv_u£c
;

38 #iâdeà
__Ãed_timev®


39 #iâdeà
_BITS_TIME_H


40 
	#_BITS_TIME_H
 1

	)

48 
	#CLOCKS_PER_SEC
 ((
şock_t
è1000000)

	)

50 #ià(!
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_POSIX
) \

51 && !
defšed
 
	g__USE_XOPEN2K


54 
	~<b™s/ty³s.h
>

55 
__syscÚf
 ();

56 
	#CLK_TCK
 ((
__şock_t
è
	`__syscÚf
 (2)è

	)

59 #ifdeà
__USE_POSIX199309


61 
	#CLOCK_REALTIME
 0

	)

63 
	#CLOCK_MONOTONIC
 1

	)

65 
	#CLOCK_PROCESS_CPUTIME_ID
 2

	)

67 
	#CLOCK_THREAD_CPUTIME_ID
 3

	)

69 
	#CLOCK_MONOTONIC_RAW
 4

	)

71 
	#CLOCK_REALTIME_COARSE
 5

	)

73 
	#CLOCK_MONOTONIC_COARSE
 6

	)

75 
	#CLOCK_BOOTTIME
 7

	)

77 
	#CLOCK_REALTIME_ALARM
 8

	)

79 
	#CLOCK_BOOTTIME_ALARM
 9

	)

81 
	#CLOCK_TAI
 11

	)

84 
	#TIMER_ABSTIME
 1

	)

87 #ifdeà
__USE_GNU


88 
	~<b™s/timex.h
>

90 
__BEGIN_DECLS


93 
	$şock_adjtime
 (
__şockid_t
 
__şock_id
, 
timex
 *
__utx
è
__THROW
;

95 
__END_DECLS


101 #undeà
__Ãed_timev®


	@/usr/include/bits/typesizes.h

19 #iâdeà
_BITS_TYPES_H


23 #iâdef 
_BITS_TYPESIZES_H


24 
	#_BITS_TYPESIZES_H
 1

	)

30 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


31 
	#__SYSCALL_SLONG_TYPE
 
__SQUAD_TYPE


	)

32 
	#__SYSCALL_ULONG_TYPE
 
__UQUAD_TYPE


	)

34 
	#__SYSCALL_SLONG_TYPE
 
__SLONGWORD_TYPE


	)

35 
	#__SYSCALL_ULONG_TYPE
 
__ULONGWORD_TYPE


	)

38 
	#__DEV_T_TYPE
 
__UQUAD_TYPE


	)

39 
	#__UID_T_TYPE
 
__U32_TYPE


	)

40 
	#__GID_T_TYPE
 
__U32_TYPE


	)

41 
	#__INO_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

42 
	#__INO64_T_TYPE
 
__UQUAD_TYPE


	)

43 
	#__MODE_T_TYPE
 
__U32_TYPE


	)

44 #ifdeà
__x86_64__


45 
	#__NLINK_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

46 
	#__FSWORD_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

48 
	#__NLINK_T_TYPE
 
__UWORD_TYPE


	)

49 
	#__FSWORD_T_TYPE
 
__SWORD_TYPE


	)

51 
	#__OFF_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

52 
	#__OFF64_T_TYPE
 
__SQUAD_TYPE


	)

53 
	#__PID_T_TYPE
 
__S32_TYPE


	)

54 
	#__RLIM_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

55 
	#__RLIM64_T_TYPE
 
__UQUAD_TYPE


	)

56 
	#__BLKCNT_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

57 
	#__BLKCNT64_T_TYPE
 
__SQUAD_TYPE


	)

58 
	#__FSBLKCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

59 
	#__FSBLKCNT64_T_TYPE
 
__UQUAD_TYPE


	)

60 
	#__FSFILCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

61 
	#__FSFILCNT64_T_TYPE
 
__UQUAD_TYPE


	)

62 
	#__ID_T_TYPE
 
__U32_TYPE


	)

63 
	#__CLOCK_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

64 
	#__TIME_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

65 
	#__USECONDS_T_TYPE
 
__U32_TYPE


	)

66 
	#__SUSECONDS_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

67 
	#__DADDR_T_TYPE
 
__S32_TYPE


	)

68 
	#__KEY_T_TYPE
 
__S32_TYPE


	)

69 
	#__CLOCKID_T_TYPE
 
__S32_TYPE


	)

70 
	#__TIMER_T_TYPE
 *

	)

71 
	#__BLKSIZE_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

72 
	#__FSID_T_TYPE
 sŒuù { 
__v®
[2]; }

	)

73 
	#__SSIZE_T_TYPE
 
__SWORD_TYPE


	)

74 
	#__CPU_MASK_TYPE
 
__SYSCALL_ULONG_TYPE


	)

76 #ifdeà
__x86_64__


80 
	#__OFF_T_MATCHES_OFF64_T
 1

	)

83 
	#__INO_T_MATCHES_INO64_T
 1

	)

87 
	#__FD_SETSIZE
 1024

	)

	@/usr/include/bits/wordsize.h

3 #ià
defšed
 
__x86_64__
 && !defšed 
__ILP32__


4 
	#__WORDSIZE
 64

	)

6 
	#__WORDSIZE
 32

	)

9 #ifdeà
__x86_64__


10 
	#__WORDSIZE_TIME64_COMPAT32
 1

	)

12 
	#__SYSCALL_WORDSIZE
 64

	)

	@/usr/include/ctype.h

22 #iâdef 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	g__BEGIN_DECLS


30 #iâdeà
_ISb™


39 
	~<’dŸn.h
>

40 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


41 
	#_ISb™
(
b™
è(1 << (b™))

	)

43 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

48 
	m_ISuµ”
 = 
_ISb™
 (0),

49 
	m_ISlow”
 = 
_ISb™
 (1),

50 
	m_IS®pha
 = 
_ISb™
 (2),

51 
	m_ISdig™
 = 
_ISb™
 (3),

52 
	m_ISxdig™
 = 
_ISb™
 (4),

53 
	m_IS¥aû
 = 
_ISb™
 (5),

54 
	m_IS´št
 = 
_ISb™
 (6),

55 
	m_ISg¿ph
 = 
_ISb™
 (7),

56 
	m_ISbÏnk
 = 
_ISb™
 (8),

57 
	m_ISúŒl
 = 
_ISb™
 (9),

58 
	m_ISpunù
 = 
_ISb™
 (10),

59 
	m_IS®num
 = 
_ISb™
 (11)

79 cÚ¡ **
	$__ùy³_b_loc
 ()

80 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

81 cÚ¡ 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

83 cÚ¡ 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

87 #iâdeà
__ılu¥lus


88 
	#__isùy³
(
c
, 
ty³
) \

89 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

90 #–ià
defšed
 
__USE_EXTERN_INLINES


91 
	#__isùy³_f
(
ty³
) \

92 
__ex‹º_šlše
 \

93 
is
##
	`ty³
 (
__c
è
__THROW
 \

95  (*
	`__ùy³_b_loc
 ())[(è(
__c
)] & (è
_IS
##
ty³
; \

96 
	}

	)
}

99 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

100 
	#__tßscii
(
c
è((cè& 0x7fè

	)

102 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__exùy³
 (
i§Êum
);

111 
__exùy³
 (
i§Íha
);

112 
__exùy³
 (
isúŒl
);

113 
__exùy³
 (
isdig™
);

114 
__exùy³
 (
i¦ow”
);

115 
__exùy³
 (
isg¿ph
);

116 
__exùy³
 (
i¥ršt
);

117 
__exùy³
 (
i¥unù
);

118 
__exùy³
 (
is¥aû
);

119 
__exùy³
 (
isuµ”
);

120 
__exùy³
 (
isxdig™
);

124 
	$tŞow”
 (
__c
è
__THROW
;

127 
	$touµ”
 (
__c
è
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__exùy³
 (
isbÏnk
);

138 
__END_NAMESPACE_C99


141 #ifdeà
__USE_GNU


143 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

146 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


150 
	$i§scii
 (
__c
è
__THROW
;

154 
	$tßscii
 (
__c
è
__THROW
;

158 
	`__exùy³
 (
_touµ”
);

159 
	`__exùy³
 (
_tŞow”
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

164 (
__ex‹nsiÚ__
 \

165 ({ 
__»s
; \

166 ià( (
c
) > 1) \

168 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

174 
__»s
 = 
f
 
¬gs
; \

177 
__»s
 = (
a
)[(è(
c
)]; \

178 
__»s
; 
	}
}))

	)

180 #ià!
defšed
 
__NO_CTYPE


181 #ifdeà
__isùy³_f


182 
	$__isùy³_f
 (
®num
)

183 
	$__isùy³_f
 (
®pha
)

184 
	$__isùy³_f
 (
úŒl
)

185 
	$__isùy³_f
 (
dig™
)

186 
	$__isùy³_f
 (
low”
)

187 
	$__isùy³_f
 (
g¿ph
)

188 
	$__isùy³_f
 (
´št
)

189 
	$__isùy³_f
 (
punù
)

190 
	$__isùy³_f
 (
¥aû
)

191 
	$__isùy³_f
 (
uµ”
)

192 
	$__isùy³_f
 (
xdig™
)

193 #ifdeà
__USE_ISOC99


194 
	$__isùy³_f
 (
bÏnk
)

196 #–ià
defšed
 
__isùy³


197 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

198 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

199 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

200 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

201 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

202 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

203 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

204 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

205 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

206 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

207 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

208 #ifdeà
__USE_ISOC99


209 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

213 #ifdeà
__USE_EXTERN_INLINES


214 
__ex‹º_šlše
 

215 
	`__NTH
 (
	$tŞow”
 (
__c
))

217  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

218 
	}
}

220 
__ex‹º_šlše
 

221 
__NTH
 (
	$touµ”
 (
__c
))

223  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

224 
	}
}

227 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


228 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

229 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

232 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


233 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

234 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

236 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

237 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

243 #ifdeà
__USE_XOPEN2K8


257 
	~<xloÿË.h
>

261 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

262 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

264 
	#__exùy³_l
(
Çme
) \

265 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

271 
__exùy³_l
 (
i§Êum_l
);

272 
__exùy³_l
 (
i§Íha_l
);

273 
__exùy³_l
 (
isúŒl_l
);

274 
__exùy³_l
 (
isdig™_l
);

275 
__exùy³_l
 (
i¦ow”_l
);

276 
__exùy³_l
 (
isg¿ph_l
);

277 
__exùy³_l
 (
i¥ršt_l
);

278 
__exùy³_l
 (
i¥unù_l
);

279 
__exùy³_l
 (
is¥aû_l
);

280 
__exùy³_l
 (
isuµ”_l
);

281 
__exùy³_l
 (
isxdig™_l
);

283 
__exùy³_l
 (
isbÏnk_l
);

287 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

288 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

291 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

292 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

294 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


295 
	#__tŞow”_l
(
c
, 
loÿË
) \

296 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

297 
	#__touµ”_l
(
c
, 
loÿË
) \

298 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

299 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

300 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

304 #iâdeà
__NO_CTYPE


305 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

306 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

307 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

308 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

309 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

310 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

311 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

312 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

313 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

314 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

315 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

317 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

319 #ifdeà
__USE_MISC


320 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

321 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

324 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

325 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

326 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

327 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

328 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

329 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

330 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

331 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

332 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

333 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

334 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

336 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

338 #ifdeà
__USE_MISC


339 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

340 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/gnu/stubs.h

6 #ià!
defšed
 
__x86_64__


7 
	~<gnu/¡ubs-32.h
>

9 #ià
defšed
 
__x86_64__
 && defšed 
__LP64__


10 
	~<gnu/¡ubs-64.h
>

12 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


13 
	~<gnu/¡ubs-x32.h
>

	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

55 
	#__STDC_ISO_10646__
 201505L

	)

58 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/sys/cdefs.h

18 #iâdef 
_SYS_CDEFS_H


19 
	#_SYS_CDEFS_H
 1

	)

22 #iâdeà
_FEATURES_H


23 
	~<ã©u»s.h
>

29 #ià
defšed
 
__GNUC__
 && !defšed 
__STDC__


34 #undeà
__P


35 #undeà
__PMT


37 #ifdeà
__GNUC__


41 #ià
__GNUC_PREREQ
 (4, 6è&& !
defšed
 
_LIBC


42 
	#__LEAF
 , 
__Ëaf__


	)

43 
	#__LEAF_ATTR
 
	`__©Œibu‹__
 ((
__Ëaf__
))

	)

45 
	#__LEAF


	)

46 
	#__LEAF_ATTR


	)

54 #ià!
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (3, 3)

55 
	#__THROW
 
	`__©Œibu‹__
 ((
__nÙhrow__
 
__LEAF
))

	)

56 
	#__THROWNL
 
	`__©Œibu‹__
 ((
__nÙhrow__
))

	)

57 
	#__NTH
(
fù
è
	`__©Œibu‹__
 ((
__nÙhrow__
 
__LEAF
)è
	)
fct

59 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

60 
	#__THROW
 
	`throw
 ()

	)

61 
	#__THROWNL
 
	`throw
 ()

	)

62 
	#__NTH
(
fù
è
__LEAF_ATTR
 fù 
	`throw
 ()

	)

64 
	#__THROW


	)

65 
	#__THROWNL


	)

66 
	#__NTH
(
fù
è
	)
fct

72 
	#__šlše


	)

74 
	#__THROW


	)

75 
	#__THROWNL


	)

76 
	#__NTH
(
fù
è
	)
fct

82 
	#__P
(
¬gs
è
	)
args

83 
	#__PMT
(
¬gs
è
	)
args

88 
	#__CONCAT
(
x
,
y
èx ## 
	)
y

89 
	#__STRING
(
x
è#x

	)

92 
	#__±r_t
 *

	)

93 
	#__lÚg_doubË_t
 

	)

97 #ifdef 
__ılu¥lus


98 
	#__BEGIN_DECLS
 "C" {

	)

99 
	#__END_DECLS
 }

	)

101 
	#__BEGIN_DECLS


	)

102 
	#__END_DECLS


	)

111 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES


112 
	#__BEGIN_NAMESPACE_STD
 
Çme¥aû
 
¡d
 {

	)

113 
	#__END_NAMESPACE_STD
 }

	)

114 
	#__USING_NAMESPACE_STD
(
Çme
è
usšg
 
¡d
::Çme;

	)

115 
	#__BEGIN_NAMESPACE_C99
 
Çme¥aû
 
__c99
 {

	)

116 
	#__END_NAMESPACE_C99
 }

	)

117 
	#__USING_NAMESPACE_C99
(
Çme
è
usšg
 
__c99
::Çme;

	)

122 
	#__BEGIN_NAMESPACE_STD


	)

123 
	#__END_NAMESPACE_STD


	)

124 
	#__USING_NAMESPACE_STD
(
Çme
)

	)

125 
	#__BEGIN_NAMESPACE_C99


	)

126 
	#__END_NAMESPACE_C99


	)

127 
	#__USING_NAMESPACE_C99
(
Çme
)

	)

132 
	#__bos
(
±r
è
	`__butš_objeù_size
 (±r, 
__USE_FORTIFY_LEVEL
 > 1)

	)

133 
	#__bos0
(
±r
è
	`__butš_objeù_size
 (±r, 0)

	)

135 #ià
__GNUC_PREREQ
 (4,3)

136 
	#__w¬ndeş
(
Çme
, 
msg
) \

137 
	`Çme
 (è
	`__©Œibu‹__
((
	`__w¬nšg__
 (
msg
)))

	)

138 
	#__w¬Ç‰r
(
msg
è
	`__©Œibu‹__
((
	`__w¬nšg__
 (msg)))

	)

139 
	#__”rÜdeş
(
Çme
, 
msg
) \

140 
	`Çme
 (è
	`__©Œibu‹__
((
	`__”rÜ__
 (
msg
)))

	)

142 
	#__w¬ndeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

143 
	#__w¬Ç‰r
(
msg
)

	)

144 
	#__”rÜdeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

148 #ià
__GNUC_PREREQ
 (2,97)

150 
	#__æex¬r
 []

	)

152 #ifdeà
__GNUC__


153 
	#__æex¬r
 [0]

	)

155 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

156 
	#__æex¬r
 []

	)

159 
	#__æex¬r
 [1]

	)

175 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

177 
	#__REDIRECT
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

178 #ifdeà
__ılu¥lus


179 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

180 
Çme
 
´Ùo
 
__THROW
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

181 
	#__REDIRECT_NTHNL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

182 
Çme
 
´Ùo
 
__THROWNL
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

184 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

185 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROW


	)

186 
	#__REDIRECT_NTHNL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

187 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROWNL


	)

189 
	#__ASMNAME
(
úame
è
	`__ASMNAME2
 (
__USER_LABEL_PREFIX__
, cÇme)

	)

190 
	#__ASMNAME2
(
´efix
, 
úame
è
	`__STRING
 (´efixè
	)
cname

203 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

204 
	#__©Œibu‹__
(
xyz
è

	)

210 #ià
__GNUC_PREREQ
 (2,96)

211 
	#__©Œibu‹_m®loc__
 
	`__©Œibu‹__
 ((
__m®loc__
))

	)

213 
	#__©Œibu‹_m®loc__


	)

218 #ià
__GNUC_PREREQ
 (4, 3)

219 
	#__©Œibu‹_®loc_size__
(
·¿ms
) \

220 
	`__©Œibu‹__
 ((
__®loc_size__
 
·¿ms
))

	)

222 
	#__©Œibu‹_®loc_size__
(
·¿ms
è

	)

228 #ià
__GNUC_PREREQ
 (2,96)

229 
	#__©Œibu‹_pu»__
 
	`__©Œibu‹__
 ((
__pu»__
))

	)

231 
	#__©Œibu‹_pu»__


	)

235 #ià
__GNUC_PREREQ
 (2,5)

236 
	#__©Œibu‹_cÚ¡__
 
	`__©Œibu‹__
 ((
__cÚ¡__
))

	)

238 
	#__©Œibu‹_cÚ¡__


	)

244 #ià
__GNUC_PREREQ
 (3,1)

245 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__u£d__
))

	)

246 
	#__©Œibu‹_nošlše__
 
	`__©Œibu‹__
 ((
__nošlše__
))

	)

248 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__unu£d__
))

	)

249 
	#__©Œibu‹_nošlše__


	)

253 #ià
__GNUC_PREREQ
 (3,2)

254 
	#__©Œibu‹_d•»ÿ‹d__
 
	`__©Œibu‹__
 ((
__d•»ÿ‹d__
))

	)

256 
	#__©Œibu‹_d•»ÿ‹d__


	)

265 #ià
__GNUC_PREREQ
 (2,8)

266 
	#__©Œibu‹_fÜm©_¬g__
(
x
è
	`__©Œibu‹__
 ((
	`__fÜm©_¬g__
 (x)))

	)

268 
	#__©Œibu‹_fÜm©_¬g__
(
x
è

	)

275 #ià
__GNUC_PREREQ
 (2,97)

276 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
) \

277 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__¡rfmÚ__
, 
a
, 
b
)))

	)

279 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
è

	)

284 #ià
__GNUC_PREREQ
 (3,3)

285 
	#__nÚnuÎ
(
·¿ms
è
	`__©Œibu‹__
 ((
__nÚnuÎ__
…¬ams))

	)

287 
	#__nÚnuÎ
(
·¿ms
)

	)

292 #ià
__GNUC_PREREQ
 (3,4)

293 
	#__©Œibu‹_w¬n_unu£d_»suÉ__
 \

294 
	`__©Œibu‹__
 ((
__w¬n_unu£d_»suÉ__
))

	)

295 #ià
__USE_FORTIFY_LEVEL
 > 0

296 
	#__wur
 
__©Œibu‹_w¬n_unu£d_»suÉ__


	)

299 
	#__©Œibu‹_w¬n_unu£d_»suÉ__


	)

301 #iâdeà
__wur


302 
	#__wur


	)

306 #ià
__GNUC_PREREQ
 (3,2)

307 
	#__®ways_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__®ways_šlše__
))

	)

309 
	#__®ways_šlše
 
__šlše


	)

314 #ià
__GNUC_PREREQ
 (4,3)

315 
	#__©Œibu‹_¬tificŸl__
 
	`__©Œibu‹__
 ((
__¬tificŸl__
))

	)

317 
	#__©Œibu‹_¬tificŸl__


	)

329 #ià(!
defšed
 
__ılu¥lus
 || 
__GNUC_PREREQ
 (4,3) \

330 || (
defšed
 
__şªg__
 && (defšed 
__GNUC_STDC_INLINE__
 \

331 || 
defšed
 
__GNUC_GNU_INLINE__
)))

332 #ià
defšed
 
__GNUC_STDC_INLINE__
 || defšed 
__ılu¥lus


333 
	#__ex‹º_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

334 
	#__ex‹º_®ways_šlše
 \

335 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

337 
	#__ex‹º_šlše
 
__šlše


	)

338 
	#__ex‹º_®ways_šlše
 
__®ways_šlše


	)

342 #ifdeà
__ex‹º_®ways_šlše


343 
	#__fÜtify_funùiÚ
 
__ex‹º_®ways_šlše
 
__©Œibu‹_¬tificŸl__


	)

348 #ià
__GNUC_PREREQ
 (4,3)

349 
	#__va_¬g_·ck
(è
	`__butš_va_¬g_·ck
 ()

	)

350 
	#__va_¬g_·ck_Ën
(è
	`__butš_va_¬g_·ck_Ën
 ()

	)

357 #ià!
__GNUC_PREREQ
 (2,8)

358 
	#__ex‹nsiÚ__


	)

362 #ià!
__GNUC_PREREQ
 (2,92)

363 
	#__»¡riù


	)

369 #ià
__GNUC_PREREQ
 (3,1è&& !
defšed
 
__GNUG__


370 
	#__»¡riù_¬r
 
__»¡riù


	)

372 #ifdeà
__GNUC__


373 
	#__»¡riù_¬r


	)

375 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

376 
	#__»¡riù_¬r
 
»¡riù


	)

379 
	#__»¡riù_¬r


	)

384 #ià
__GNUC__
 >= 3

385 
	#__glibc_uÆik–y
(
cÚd
è
	`__butš_ex³ù
 ((cÚd), 0)

	)

386 
	#__glibc_lik–y
(
cÚd
è
	`__butš_ex³ù
 ((cÚd), 1)

	)

388 
	#__glibc_uÆik–y
(
cÚd
è(cÚd)

	)

389 
	#__glibc_lik–y
(
cÚd
è(cÚd)

	)

392 #ià(!
defšed
 
_NÜ‘uº
 \

393 && (
defšed
 
__STDC_VERSION__
 ? __STDC_VERSION__ : 0) < 201112 \

394 && !
	$__GNUC_PREREQ
 (4,7))

395 #ià
	`__GNUC_PREREQ
 (2,8)

396 
	#_NÜ‘uº
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
))

	)

398 
	#_NÜ‘uº


	)

402 #ià(!
defšed
 
_Stic_as£¹
 && !defšed 
__ılu¥lus
 \

403 && (
defšed
 
__STDC_VERSION__
 ? __STDC_VERSION__ : 0) < 201112 \

404 && (!
	`__GNUC_PREREQ
 (4, 6è|| 
defšed
 
__STRICT_ANSI__
))

405 
	#_Stic_as£¹
(
ex´
, 
dŸgno¡ic
) \

406 (*
	`__Stic_as£¹_funùiÚ
 ()) \

407 [!! (¡ruù { 
__”rÜ_if_Ãg©ive
: (
ex´
è? 2 : -1; })]

	)

410 
	~<b™s/wÜdsize.h
>

412 #ià
defšed
 
__LONG_DOUBLE_MATH_OPTIONAL
 && defšed 
__NO_LONG_DOUBLE_MATH


413 
	#__LDBL_COMPAT
 1

	)

414 #ifdeà
__REDIRECT


415 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

416 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
) \

417 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

418 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT_NTH
 (Çme,…rÙo,‡lŸs)

	)

419 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
) \

420 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

421 
	#__LDBL_REDIR1_DECL
(
Çme
, 
®Ÿs
) \

422 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 (#®Ÿs));

	)

423 
	#__LDBL_REDIR_DECL
(
Çme
) \

424 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 ("__Ædbl_" #Çme));

	)

425 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

426 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

427 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

428 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

431 #ià!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT


432 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm
	)
proto

433 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
èÇm
	)
proto

434 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
__THROW


	)

435 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
èÇm´ÙØ
__THROW


	)

436 
	#__LDBL_REDIR_DECL
(
Çme
)

	)

437 #ifdeà
__REDIRECT


438 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

439 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

440 
	`__REDIRECT_NTH
 (
Çme
, 
´Ùo
, 
®Ÿs
)

	)

	@/usr/include/xlocale.h

20 #iâdeà
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loÿË_¡ruù


30 
__loÿË_d©a
 *
	m__loÿËs
[13];

33 cÚ¡ *
	m__ùy³_b
;

34 cÚ¡ *
	m__ùy³_tŞow”
;

35 cÚ¡ *
	m__ùy³_touµ”
;

38 cÚ¡ *
	m__Çmes
[13];

39 } *
	t__loÿË_t
;

42 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/bits/timex.h

18 #iâdef 
_BITS_TIMEX_H


19 
	#_BITS_TIMEX_H
 1

	)

21 
	~<b™s/ty³s.h
>

25 
	stimex


27 
	mmodes
;

28 
__sysÿÎ_¦Úg_t
 
	moff£t
;

29 
__sysÿÎ_¦Úg_t
 
	mäeq
;

30 
__sysÿÎ_¦Úg_t
 
	mmax”rÜ
;

31 
__sysÿÎ_¦Úg_t
 
	me¡”rÜ
;

32 
	m¡©us
;

33 
__sysÿÎ_¦Úg_t
 
	mcÚ¡ªt
;

34 
__sysÿÎ_¦Úg_t
 
	m´ecisiÚ
;

35 
__sysÿÎ_¦Úg_t
 
	mtŞ”ªû
;

36 
timev®
 
	mtime
;

37 
__sysÿÎ_¦Úg_t
 
	mtick
;

38 
__sysÿÎ_¦Úg_t
 
	mµsäeq
;

39 
__sysÿÎ_¦Úg_t
 
	mj™‹r
;

40 
	mshiá
;

41 
__sysÿÎ_¦Úg_t
 
	m¡ab
;

42 
__sysÿÎ_¦Úg_t
 
	mj™út
;

43 
__sysÿÎ_¦Úg_t
 
	mÿlút
;

44 
__sysÿÎ_¦Úg_t
 
	m”rút
;

45 
__sysÿÎ_¦Úg_t
 
	m¡bút
;

47 
	mi
;

56 
	#ADJ_OFFSET
 0x0001

	)

57 
	#ADJ_FREQUENCY
 0x0002

	)

58 
	#ADJ_MAXERROR
 0x0004

	)

59 
	#ADJ_ESTERROR
 0x0008

	)

60 
	#ADJ_STATUS
 0x0010

	)

61 
	#ADJ_TIMECONST
 0x0020

	)

62 
	#ADJ_TAI
 0x0080

	)

63 
	#ADJ_SETOFFSET
 0x0100

	)

64 
	#ADJ_MICRO
 0x1000

	)

65 
	#ADJ_NANO
 0x2000

	)

66 
	#ADJ_TICK
 0x4000

	)

67 
	#ADJ_OFFSET_SINGLESHOT
 0x8001

	)

68 
	#ADJ_OFFSET_SS_READ
 0xa001

	)

71 
	#MOD_OFFSET
 
ADJ_OFFSET


	)

72 
	#MOD_FREQUENCY
 
ADJ_FREQUENCY


	)

73 
	#MOD_MAXERROR
 
ADJ_MAXERROR


	)

74 
	#MOD_ESTERROR
 
ADJ_ESTERROR


	)

75 
	#MOD_STATUS
 
ADJ_STATUS


	)

76 
	#MOD_TIMECONST
 
ADJ_TIMECONST


	)

77 
	#MOD_CLKB
 
ADJ_TICK


	)

78 
	#MOD_CLKA
 
ADJ_OFFSET_SINGLESHOT


	)

79 
	#MOD_TAI
 
ADJ_TAI


	)

80 
	#MOD_MICRO
 
ADJ_MICRO


	)

81 
	#MOD_NANO
 
ADJ_NANO


	)

85 
	#STA_PLL
 0x0001

	)

86 
	#STA_PPSFREQ
 0x0002

	)

87 
	#STA_PPSTIME
 0x0004

	)

88 
	#STA_FLL
 0x0008

	)

90 
	#STA_INS
 0x0010

	)

91 
	#STA_DEL
 0x0020

	)

92 
	#STA_UNSYNC
 0x0040

	)

93 
	#STA_FREQHOLD
 0x0080

	)

95 
	#STA_PPSSIGNAL
 0x0100

	)

96 
	#STA_PPSJITTER
 0x0200

	)

97 
	#STA_PPSWANDER
 0x0400

	)

98 
	#STA_PPSERROR
 0x0800

	)

100 
	#STA_CLOCKERR
 0x1000

	)

101 
	#STA_NANO
 0x2000

	)

102 
	#STA_MODE
 0x4000

	)

103 
	#STA_CLK
 0x8000

	)

106 
	#STA_RONLY
 (
STA_PPSSIGNAL
 | 
STA_PPSJITTER
 | 
STA_PPSWANDER
 | \

107 
STA_PPSERROR
 | 
STA_CLOCKERR
 | 
STA_NANO
 | 
STA_MODE
 | 
STA_CLK
)

	)

	@/usr/include/bits/uio.h

18 #ià!
defšed
 
_SYS_UIO_H
 && !defšed 
_FCNTL_H


22 #iâdeà
_BITS_UIO_H


23 
	#_BITS_UIO_H
 1

	)

25 
	~<sys/ty³s.h
>

39 
	#UIO_MAXIOV
 1024

	)

43 
	siovec


45 *
	miov_ba£
;

46 
size_t
 
	miov_Ën
;

52 #ifdeà
__USE_GNU


53 #ià
defšed
 
_SYS_UIO_H
 && !defšed 
_BITS_UIO_H_FOR_SYS_UIO_H


54 
	#_BITS_UIO_H_FOR_SYS_UIO_H
 1

	)

56 
__BEGIN_DECLS


59 
ssize_t
 
	$´oûss_vm_»adv
 (
pid_t
 
__pid
, cÚ¡ 
iovec
 *
__lvec
,

60 
__liovút
,

61 cÚ¡ 
iovec
 *
__rvec
,

62 
__riovút
,

63 
__æags
)

64 
__THROW
;

67 
ssize_t
 
	$´oûss_vm_wr™ev
 (
pid_t
 
__pid
, cÚ¡ 
iovec
 *
__lvec
,

68 
__liovút
,

69 cÚ¡ 
iovec
 *
__rvec
,

70 
__riovút
,

71 
__æags
)

72 
__THROW
;

74 
__END_DECLS


	@/usr/include/endian.h

18 #iâdef 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<ã©u»s.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<b™s/’dŸn.h
>

40 #iâdeà
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_MISC


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

53 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

58 #ià
defšed
 
__USE_MISC
 && !defšed 
__ASSEMBLER__


60 
	~<b™s/by‹sw­.h
>

62 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


63 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

64 
	#htŞe16
(
x
è(x)

	)

65 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

66 
	#Ë16toh
(
x
è(x)

	)

68 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

69 
	#htŞe32
(
x
è(x)

	)

70 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

71 
	#Ë32toh
(
x
è(x)

	)

73 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

74 
	#htŞe64
(
x
è(x)

	)

75 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

76 
	#Ë64toh
(
x
è(x)

	)

79 
	#htobe16
(
x
è(x)

	)

80 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

81 
	#be16toh
(
x
è(x)

	)

82 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

84 
	#htobe32
(
x
è(x)

	)

85 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

86 
	#be32toh
(
x
è(x)

	)

87 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

89 
	#htobe64
(
x
è(x)

	)

90 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

91 
	#be64toh
(
x
è(x)

	)

92 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/gnu/stubs-32.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub_chæags


	)

11 
	#__¡ub_ç‰ach


	)

12 
	#__¡ub_fchæags


	)

13 
	#__¡ub_fd‘ach


	)

14 
	#__¡ub_g‰y


	)

15 
	#__¡ub_lchmod


	)

16 
	#__¡ub_»voke


	)

17 
	#__¡ub_£ogš


	)

18 
	#__¡ub_sig»tuº


	)

19 
	#__¡ub_s¡k


	)

20 
	#__¡ub_¡ty


	)

	@/usr/include/gnu/stubs-64.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub___com·t_bdæush


	)

11 
	#__¡ub_chæags


	)

12 
	#__¡ub_ç‰ach


	)

13 
	#__¡ub_fchæags


	)

14 
	#__¡ub_fd‘ach


	)

15 
	#__¡ub_g‘msg


	)

16 
	#__¡ub_g‰y


	)

17 
	#__¡ub_lchmod


	)

18 
	#__¡ub_putmsg


	)

19 
	#__¡ub_»voke


	)

20 
	#__¡ub_£ogš


	)

21 
	#__¡ub_sig»tuº


	)

22 
	#__¡ub_s¡k


	)

23 
	#__¡ub_¡ty


	)

	@/usr/include/bits/byteswap.h

19 #ià!
defšed
 
_BYTESWAP_H
 && !defšed 
_NETINET_IN_H
 && !defšed 
_ENDIAN_H


23 #iâdeà
_BITS_BYTESWAP_H


24 
	#_BITS_BYTESWAP_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

28 
	~<b™s/wÜdsize.h
>

31 
	#__bsw­_cÚ¡ªt_16
(
x
) \

32 ((è((((
x
è>> 8è& 0xffè| (((xè& 0xffè<< 8)))

	)

35 
	~<b™s/by‹sw­-16.h
>

38 
	#__bsw­_cÚ¡ªt_32
(
x
) \

39 ((((
x
) & 0xff000000) >> 24) | (((x) & 0x00ff0000) >> 8) | \

40 (((
x
è& 0x0000ff00è<< 8è| (((xè& 0x000000ffè<< 24))

	)

42 #ifdeà
__GNUC__


43 #ià
__GNUC_PREREQ
 (4, 3)

44 
__šlše
 

45 
	$__bsw­_32
 (
__bsx
)

47  
	`__butš_bsw­32
 (
__bsx
);

48 
	}
}

49 #–ià
__GNUC__
 >= 2

50 #ià
__WORDSIZE
 =ğ64 || (
defšed
 
__i486__
 || defšed 
__³Áium__
 \

51 || 
defšed
 
	g__³Áium´o__
 || defšed 
	g__³Áium4__
 \

52 || 
defšed
 
	g__k8__
 || defšed 
	g__©hlÚ__
 \

53 || 
defšed
 
	g__k6__
 || defšed 
	g__nocÚa__
 \

54 || 
defšed
 
	g__cÜe2__
 || defšed 
	g__geode__
 \

55 || 
defšed
 
	g__amdçm10__
)

58 
	#__bsw­_32
(
x
) \

59 (
__ex‹nsiÚ__
 \

60 ({ 
__v
, 
__x
 = (
x
); \

61 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

62 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

64 
	`__asm__
 ("bsw­ %0" : "ô" (
__v
è: "0" (
__x
)); \

65 
__v
; }))

	)

67 
	#__bsw­_32
(
x
) \

68 (
__ex‹nsiÚ__
 \

69 ({ 
__v
, 
__x
 = (
x
); \

70 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

71 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

73 
	`__asm__
 ("rorw $8, %w0;" \

76 : "ô" (
__v
) \

77 : "0" (
__x
) \

79 
__v
; }))

	)

82 
	#__bsw­_32
(
x
) \

83 (
__ex‹nsiÚ__
 \

84 ({ 
__x
 = (
x
); 
	`__bsw­_cÚ¡ªt_32
 (__x); }))

	)

87 
__šlše
 

88 
	$__bsw­_32
 (
__bsx
)

90  
	`__bsw­_cÚ¡ªt_32
 (
__bsx
);

91 
	}
}

95 #ià
__GNUC_PREREQ
 (2, 0)

97 
	#__bsw­_cÚ¡ªt_64
(
x
) \

98 (
	`__ex‹nsiÚ__
 ((((
x
) & 0xff00000000000000ull) >> 56) \

99 | (((
x
) & 0x00ff000000000000ull) >> 40) \

100 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

101 | (((
x
) & 0x000000ff00000000ull) >> 8) \

102 | (((
x
) & 0x00000000ff000000ull) << 8) \

103 | (((
x
) & 0x0000000000ff0000ull) << 24) \

104 | (((
x
) & 0x000000000000ff00ull) << 40) \

105 | (((
x
è& 0x00000000000000ffuÎè<< 56)))

	)

107 #ià
__GNUC_PREREQ
 (4, 3)

108 
__šlše
 
__ušt64_t


109 
	$__bsw­_64
 (
__ušt64_t
 
__bsx
)

111  
	`__butš_bsw­64
 (
__bsx
);

112 
	}
}

113 #–ià
__WORDSIZE
 == 64

114 
	#__bsw­_64
(
x
) \

115 (
__ex‹nsiÚ__
 \

116 ({ 
__ušt64_t
 
__v
, 
__x
 = (
x
); \

117 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

118 
__v
 = 
	`__bsw­_cÚ¡ªt_64
 (
__x
); \

120 
	`__asm__
 ("bsw­ %q0" : "ô" (
__v
è: "0" (
__x
)); \

121 
__v
; }))

	)

123 
	#__bsw­_64
(
x
) \

124 (
__ex‹nsiÚ__
 \

125 ({ uniÚ { 
__ex‹nsiÚ__
 
__ušt64_t
 
__Î
; \

126 
__l
[2]; } 
__w
, 
__r
; \

127 ià(
	`__butš_cÚ¡ªt_p
 (
x
)) \

128 
__r
.
__Î
 = 
	`__bsw­_cÚ¡ªt_64
 (
x
); \

131 
__w
.
__Î
 = (
x
); \

132 
__r
.
__l
[0] = 
	`__bsw­_32
 (
__w
.__l[1]); \

133 
__r
.
__l
[1] = 
	`__bsw­_32
 (
__w
.__l[0]); \

135 
__r
.
__Î
; }))

	)

138 
	#__bsw­_cÚ¡ªt_64
(
x
) \

139 ((((
x
) & 0xff00000000000000ull) >> 56) \

140 | (((
x
) & 0x00ff000000000000ull) >> 40) \

141 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

142 | (((
x
) & 0x000000ff00000000ull) >> 8) \

143 | (((
x
) & 0x00000000ff000000ull) << 8) \

144 | (((
x
) & 0x0000000000ff0000ull) << 24) \

145 | (((
x
) & 0x000000000000ff00ull) << 40) \

146 | (((
x
è& 0x00000000000000ffuÎè<< 56))

	)

148 
__šlše
 
__ušt64_t


149 
	$__bsw­_64
 (
__ušt64_t
 
__bsx
)

151  
	`__bsw­_cÚ¡ªt_64
 (
__bsx
);

152 
	}
}

	@/usr/include/bits/endian.h

3 #iâdeà
_ENDIAN_H


7 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

	@/usr/include/sys/types.h

22 #iâdef 
_SYS_TYPES_H


23 
	#_SYS_TYPES_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


29 
	~<b™s/ty³s.h
>

31 #ifdef 
__USE_MISC


32 #iâdeà
__u_ch¬_defšed


33 
__u_ch¬
 
	tu_ch¬
;

34 
__u_shÜt
 
	tu_shÜt
;

35 
__u_št
 
	tu_št
;

36 
__u_lÚg
 
	tu_lÚg
;

37 
__quad_t
 
	tquad_t
;

38 
__u_quad_t
 
	tu_quad_t
;

39 
__fsid_t
 
	tfsid_t
;

40 
	#__u_ch¬_defšed


	)

44 
__loff_t
 
	tloff_t
;

46 #iâdeà
__šo_t_defšed


47 #iâdeà
__USE_FILE_OFFSET64


48 
__šo_t
 
	tšo_t
;

50 
__šo64_t
 
	tšo_t
;

52 
	#__šo_t_defšed


	)

54 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__šo64_t_defšed


55 
__šo64_t
 
	tšo64_t
;

56 
	#__šo64_t_defšed


	)

59 #iâdeà
__dev_t_defšed


60 
__dev_t
 
	tdev_t
;

61 
	#__dev_t_defšed


	)

64 #iâdeà
__gid_t_defšed


65 
__gid_t
 
	tgid_t
;

66 
	#__gid_t_defšed


	)

69 #iâdeà
__mode_t_defšed


70 
__mode_t
 
	tmode_t
;

71 
	#__mode_t_defšed


	)

74 #iâdeà
__Æšk_t_defšed


75 
__Æšk_t
 
	tÆšk_t
;

76 
	#__Æšk_t_defšed


	)

79 #iâdeà
__uid_t_defšed


80 
__uid_t
 
	tuid_t
;

81 
	#__uid_t_defšed


	)

84 #iâdeà
__off_t_defšed


85 #iâdeà
__USE_FILE_OFFSET64


86 
__off_t
 
	toff_t
;

88 
__off64_t
 
	toff_t
;

90 
	#__off_t_defšed


	)

92 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


93 
__off64_t
 
	toff64_t
;

94 
	#__off64_t_defšed


	)

97 #iâdeà
__pid_t_defšed


98 
__pid_t
 
	tpid_t
;

99 
	#__pid_t_defšed


	)

102 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
) \

103 && !
defšed
 
__id_t_defšed


104 
__id_t
 
	tid_t
;

105 
	#__id_t_defšed


	)

108 #iâdeà
__ssize_t_defšed


109 
__ssize_t
 
	tssize_t
;

110 
	#__ssize_t_defšed


	)

113 #ifdef 
__USE_MISC


114 #iâdeà
__daddr_t_defšed


115 
__daddr_t
 
	tdaddr_t
;

116 
__ÿddr_t
 
	tÿddr_t
;

117 
	#__daddr_t_defšed


	)

121 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
è&& !defšed 
__key_t_defšed


122 
__key_t
 
	tkey_t
;

123 
	#__key_t_defšed


	)

126 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


127 
	#__Ãed_şock_t


	)

129 
	#__Ãed_time_t


	)

130 
	#__Ãed_tim”_t


	)

131 
	#__Ãed_şockid_t


	)

132 
	~<time.h
>

134 #ifdeà
__USE_XOPEN


135 #iâdeà
__u£cÚds_t_defšed


136 
__u£cÚds_t
 
	tu£cÚds_t
;

137 
	#__u£cÚds_t_defšed


	)

139 #iâdeà
__su£cÚds_t_defšed


140 
__su£cÚds_t
 
	tsu£cÚds_t
;

141 
	#__su£cÚds_t_defšed


	)

145 
	#__Ãed_size_t


	)

146 
	~<¡ddef.h
>

148 #ifdeà
__USE_MISC


150 
	tulÚg
;

151 
	tushÜt
;

152 
	tušt
;

157 #ià!
__GNUC_PREREQ
 (2, 7)

160 #iâdeà
__št8_t_defšed


161 
	#__št8_t_defšed


	)

162 
	tšt8_t
;

163 
	tšt16_t
;

164 
	tšt32_t
;

165 #ià
__WORDSIZE
 == 64

166 
	tšt64_t
;

168 
__ex‹nsiÚ__
 
	tšt64_t
;

173 
	tu_št8_t
;

174 
	tu_št16_t
;

175 
	tu_št32_t
;

176 #ià
__WORDSIZE
 == 64

177 
	tu_št64_t
;

179 
__ex‹nsiÚ__
 
	tu_št64_t
;

182 
	t»gi¡”_t
;

187 
	#__štN_t
(
N
, 
MODE
) \

188 ##
	tN
##
	t_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	tMODE
)))

	)

189 
	t__u_štN_t
(
	tN
, 
	tMODE
) \

190 
	tu_št
##
	tN
##
	t_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	tMODE
)))

	)

192 #iâdeà
	t__št8_t_defšed


193 
	t__št8_t_defšed


	)

194 
	t__štN_t
 (8, 
	t__QI__
);

195 
__štN_t
 (16, 
__HI__
);

196 
__štN_t
 (32, 
__SI__
);

197 
__štN_t
 (64, 
__DI__
);

200 
__u_štN_t
 (8, 
__QI__
);

201 
__u_štN_t
 (16, 
__HI__
);

202 
__u_štN_t
 (32, 
__SI__
);

203 
__u_štN_t
 (64, 
__DI__
);

205 
	t»gi¡”_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__wÜd__
)));

211 
	#__BIT_TYPES_DEFINED__
 1

	)

214 #ifdef 
__USE_MISC


216 
	~<’dŸn.h
>

219 
	~<sys/£Ëù.h
>

222 
	~<sys/sysmaüos.h
>

226 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8
) \

227 && !
defšed
 
__blksize_t_defšed


228 
__blksize_t
 
	tblksize_t
;

229 
	#__blksize_t_defšed


	)

233 #iâdeà
__USE_FILE_OFFSET64


234 #iâdeà
__blkút_t_defšed


235 
__blkút_t
 
	tblkút_t
;

236 
	#__blkút_t_defšed


	)

238 #iâdeà
__fsblkút_t_defšed


239 
__fsblkút_t
 
	tfsblkút_t
;

240 
	#__fsblkút_t_defšed


	)

242 #iâdeà
__fsfút_t_defšed


243 
__fsfút_t
 
	tfsfút_t
;

244 
	#__fsfút_t_defšed


	)

247 #iâdeà
__blkút_t_defšed


248 
__blkút64_t
 
	tblkút_t
;

249 
	#__blkút_t_defšed


	)

251 #iâdeà
__fsblkút_t_defšed


252 
__fsblkút64_t
 
	tfsblkút_t
;

253 
	#__fsblkút_t_defšed


	)

255 #iâdeà
__fsfút_t_defšed


256 
__fsfút64_t
 
	tfsfút_t
;

257 
	#__fsfút_t_defšed


	)

261 #ifdeà
__USE_LARGEFILE64


262 
__blkút64_t
 
	tblkút64_t
;

263 
__fsblkút64_t
 
	tfsblkút64_t
;

264 
__fsfút64_t
 
	tfsfút64_t
;

269 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


270 
	~<b™s/±h»adty³s.h
>

273 
	g__END_DECLS


	@/usr/include/bits/byteswap-16.h

19 #iâdeà
_BITS_BYTESWAP_H


23 #ifdeà
__GNUC__


24 #ià
__GNUC__
 >= 2

25 
	#__bsw­_16
(
x
) \

26 (
__ex‹nsiÚ__
 \

27 ({ 
__v
, 
__x
 = (è(
x
); \

28 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

29 
__v
 = 
	`__bsw­_cÚ¡ªt_16
 (
__x
); \

31 
	`__asm__
 ("rorw $8, %w0" \

32 : "ô" (
__v
) \

33 : "0" (
__x
) \

35 
__v
; }))

	)

38 
	#__bsw­_16
(
x
) \

39 (
__ex‹nsiÚ__
 \

40 ({ 
__x
 = (è(
x
); \

41 
	`__bsw­_cÚ¡ªt_16
 (
__x
); }))

	)

44 
__šlše
 

45 
	$__bsw­_16
 (
__bsx
)

47  
	`__bsw­_cÚ¡ªt_16
 (
__bsx
);

48 
	}
}

	@/usr/include/bits/pthreadtypes.h

18 #iâdeà
_BITS_PTHREADTYPES_H


19 
	#_BITS_PTHREADTYPES_H
 1

	)

21 
	~<b™s/wÜdsize.h
>

23 #ifdeà
__x86_64__


24 #ià
__WORDSIZE
 == 64

25 
	#__SIZEOF_PTHREAD_ATTR_T
 56

	)

26 
	#__SIZEOF_PTHREAD_MUTEX_T
 40

	)

27 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

28 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

29 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

30 
	#__SIZEOF_PTHREAD_RWLOCK_T
 56

	)

31 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

32 
	#__SIZEOF_PTHREAD_BARRIER_T
 32

	)

33 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

35 
	#__SIZEOF_PTHREAD_ATTR_T
 32

	)

36 
	#__SIZEOF_PTHREAD_MUTEX_T
 32

	)

37 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

38 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

39 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

40 
	#__SIZEOF_PTHREAD_RWLOCK_T
 44

	)

41 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

42 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

43 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

46 
	#__SIZEOF_PTHREAD_ATTR_T
 36

	)

47 
	#__SIZEOF_PTHREAD_MUTEX_T
 24

	)

48 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

49 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

50 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

51 
	#__SIZEOF_PTHREAD_RWLOCK_T
 32

	)

52 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

53 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

54 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

60 
	t±h»ad_t
;

63 
	u±h»ad_©Œ_t


65 
	m__size
[
__SIZEOF_PTHREAD_ATTR_T
];

66 
	m__®ign
;

68 #iâdeà
__have_±h»ad_©Œ_t


69 
±h»ad_©Œ_t
 
	t±h»ad_©Œ_t
;

70 
	#__have_±h»ad_©Œ_t
 1

	)

74 #ifdeà
__x86_64__


75 
	s__±h»ad_š‹º®_li¡


77 
__±h»ad_š‹º®_li¡
 *
	m__´ev
;

78 
__±h»ad_š‹º®_li¡
 *
	m__Ãxt
;

79 } 
	t__±h»ad_li¡_t
;

81 
	s__±h»ad_š‹º®_¦i¡


83 
__±h»ad_š‹º®_¦i¡
 *
	m__Ãxt
;

84 } 
	t__±h»ad_¦i¡_t
;

92 
	s__±h»ad_mu‹x_s


94 
	m__lock
;

95 
	m__couÁ
;

96 
	m__owÃr
;

97 #ifdeà
__x86_64__


98 
	m__nu£rs
;

102 
	m__kšd
;

103 #ifdeà
__x86_64__


104 
	m__¥šs
;

105 
	m__–isiÚ
;

106 
__±h»ad_li¡_t
 
	m__li¡
;

107 
	#__PTHREAD_MUTEX_HAVE_PREV
 1

	)

109 
	#__PTHREAD_SPINS
 0, 0

	)

111 
	m__nu£rs
;

112 
__ex‹nsiÚ__
 union

116 
	m__e¥šs
;

117 
	m__–isiÚ
;

118 
	#__¥šs
 
__–isiÚ_d©a
.
__e¥šs


	)

119 
	#__–isiÚ
 
__–isiÚ_d©a
.
__–isiÚ


	)

120 
	#__PTHREAD_SPINS
 { 0, 0 }

	)

121 } 
	m__–isiÚ_d©a
;

122 
__±h»ad_¦i¡_t
 
	m__li¡
;

125 } 
	m__d©a
;

126 
	m__size
[
__SIZEOF_PTHREAD_MUTEX_T
];

127 
	m__®ign
;

128 } 
	t±h»ad_mu‹x_t
;

132 
	m__size
[
__SIZEOF_PTHREAD_MUTEXATTR_T
];

133 
	m__®ign
;

134 } 
	t±h»ad_mu‹x©Œ_t
;

143 
	m__lock
;

144 
	m__fu‹x
;

145 
__ex‹nsiÚ__
 
	m__tÙ®_£q
;

146 
__ex‹nsiÚ__
 
	m__wakeup_£q
;

147 
__ex‹nsiÚ__
 
	m__wok’_£q
;

148 *
	m__mu‹x
;

149 
	m__nwa™”s
;

150 
	m__brßdÿ¡_£q
;

151 } 
	m__d©a
;

152 
	m__size
[
__SIZEOF_PTHREAD_COND_T
];

153 
__ex‹nsiÚ__
 
	m__®ign
;

154 } 
	t±h»ad_cÚd_t
;

158 
	m__size
[
__SIZEOF_PTHREAD_CONDATTR_T
];

159 
	m__®ign
;

160 } 
	t±h»ad_cÚd©Œ_t
;

164 
	t±h»ad_key_t
;

168 
	t±h»ad_Úû_t
;

171 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


176 #ifdeà
__x86_64__


179 
	m__lock
;

180 
	m__Ä_»ad”s
;

181 
	m__»ad”s_wakeup
;

182 
	m__wr™”_wakeup
;

183 
	m__Ä_»ad”s_queued
;

184 
	m__Ä_wr™”s_queued
;

185 
	m__wr™”
;

186 
	m__sh¬ed
;

187 sigÃd 
	m__rw–isiÚ
;

188 #ifdeà 
__ILP32__


189 
	m__·d1
[3];

190 
	#__PTHREAD_RWLOCK_ELISION_EXTRA
 0, { 0, 0, 0 }

	)

192 
	m__·d1
[7];

193 
	#__PTHREAD_RWLOCK_ELISION_EXTRA
 0, { 0, 0, 0, 0, 0, 0, 0 }

	)

195 
	m__·d2
;

198 
	m__æags
;

199 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

200 } 
	m__d©a
;

204 
	m__lock
;

205 
	m__Ä_»ad”s
;

206 
	m__»ad”s_wakeup
;

207 
	m__wr™”_wakeup
;

208 
	m__Ä_»ad”s_queued
;

209 
	m__Ä_wr™”s_queued
;

212 
	m__æags
;

213 
	m__sh¬ed
;

214 sigÃd 
	m__rw–isiÚ
;

215 
	#__PTHREAD_RWLOCK_ELISION_EXTRA
 0

	)

216 
	m__·d2
;

217 
	m__wr™”
;

218 } 
	m__d©a
;

220 
	m__size
[
__SIZEOF_PTHREAD_RWLOCK_T
];

221 
	m__®ign
;

222 } 
	t±h»ad_rwlock_t
;

226 
	m__size
[
__SIZEOF_PTHREAD_RWLOCKATTR_T
];

227 
	m__®ign
;

228 } 
	t±h»ad_rwlock©Œ_t
;

232 #ifdeà
__USE_XOPEN2K


234 vŞ©
	t±h»ad_¥šlock_t
;

241 
	m__size
[
__SIZEOF_PTHREAD_BARRIER_T
];

242 
	m__®ign
;

243 } 
	t±h»ad_b¬r›r_t
;

247 
	m__size
[
__SIZEOF_PTHREAD_BARRIERATTR_T
];

248 
	m__®ign
;

249 } 
	t±h»ad_b¬r›¿‰r_t
;

253 #iâdeà
__x86_64__


255 
	#__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
	`__»g·rm__
 (1)))

	)

	@/usr/include/sys/select.h

21 #iâdeà
_SYS_SELECT_H


22 
	#_SYS_SELECT_H
 1

	)

24 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

30 
	~<b™s/£Ëù.h
>

33 
	~<b™s/sig£t.h
>

35 #iâdeà
__sig£t_t_defšed


36 
	#__sig£t_t_defšed


	)

37 
__sig£t_t
 
	tsig£t_t
;

41 
	#__Ãed_time_t


	)

42 
	#__Ãed_time¥ec


	)

43 
	~<time.h
>

44 
	#__Ãed_timev®


	)

45 
	~<b™s/time.h
>

47 #iâdeà
__su£cÚds_t_defšed


48 
__su£cÚds_t
 
	tsu£cÚds_t
;

49 
	#__su£cÚds_t_defšed


	)

54 
	t__fd_mask
;

57 #undeà
__NFDBITS


59 
	#__NFDBITS
 (8 * (è (
__fd_mask
))

	)

60 
	#__FD_ELT
(
d
è((dè/ 
__NFDBITS
)

	)

61 
	#__FD_MASK
(
d
è((
__fd_mask
è(1UL << ((dè% 
__NFDBITS
)))

	)

68 #ifdeà
__USE_XOPEN


69 
__fd_mask
 
	mfds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

70 
	#__FDS_BITS
(
£t
è((£t)->
fds_b™s
)

	)

72 
__fd_mask
 
	m__fds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

73 
	#__FDS_BITS
(
£t
è((£t)->
__fds_b™s
)

	)

75 } 
	tfd_£t
;

78 
	#FD_SETSIZE
 
__FD_SETSIZE


	)

80 #ifdeà
__USE_MISC


82 
__fd_mask
 
	tfd_mask
;

85 
	#NFDBITS
 
__NFDBITS


	)

90 
	#FD_SET
(
fd
, 
fd£
è
	`__FD_SET
 (fd, fd£)

	)

91 
	#FD_CLR
(
fd
, 
fd£
è
	`__FD_CLR
 (fd, fd£)

	)

92 
	#FD_ISSET
(
fd
, 
fd£
è
	`__FD_ISSET
 (fd, fd£)

	)

93 
	#FD_ZERO
(
fd£
è
	`__FD_ZERO
 (fd£)

	)

96 
__BEGIN_DECLS


106 
£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

107 
fd_£t
 *
__»¡riù
 
__wr™efds
,

108 
fd_£t
 *
__»¡riù
 
__exû±fds
,

109 
timev®
 *
__»¡riù
 
__timeout
);

111 #ifdeà
__USE_XOPEN2K


118 
p£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

119 
fd_£t
 *
__»¡riù
 
__wr™efds
,

120 
fd_£t
 *
__»¡riù
 
__exû±fds
,

121 cÚ¡ 
time¥ec
 *
__»¡riù
 
__timeout
,

122 cÚ¡ 
__sig£t_t
 *
__»¡riù
 
__sigmask
);

127 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__GNUC__


128 
	~<b™s/£Ëù2.h
>

131 
	g__END_DECLS


	@/usr/include/sys/sysmacros.h

19 #iâdeà
_SYS_SYSMACROS_H


20 
	#_SYS_SYSMACROS_H
 1

	)

22 
	~<ã©u»s.h
>

24 
__BEGIN_DECLS


26 
__ex‹nsiÚ__


27 
	$gnu_dev_majÜ
 (
__dev
)

28 
__THROW
 
__©Œibu‹_cÚ¡__
;

29 
__ex‹nsiÚ__


30 
	$gnu_dev_mšÜ
 (
__dev
)

31 
__THROW
 
__©Œibu‹_cÚ¡__
;

32 
__ex‹nsiÚ__


33 
	$gnu_dev_makedev
 (
__majÜ
,

34 
__mšÜ
)

35 
__THROW
 
__©Œibu‹_cÚ¡__
;

37 #ifdeà
__USE_EXTERN_INLINES


38 
__ex‹nsiÚ__
 
__ex‹º_šlše
 
__©Œibu‹_cÚ¡__
 

39 
	`__NTH
 (
	$gnu_dev_majÜ
 (
__dev
))

41  ((
__dev
 >> 8) & 0xfff) | (() (__dev >> 32) & ~0xfff);

42 
	}
}

44 
__ex‹nsiÚ__
 
__ex‹º_šlše
 
__©Œibu‹_cÚ¡__
 

45 
__NTH
 (
	$gnu_dev_mšÜ
 (
__dev
))

47  (
__dev
 & 0xff) | (() (__dev >> 12) & ~0xff);

48 
	}
}

50 
__ex‹nsiÚ__
 
__ex‹º_šlše
 
__©Œibu‹_cÚ¡__
 

51 
__NTH
 (
	$gnu_dev_makedev
 (
__majÜ
, 
__mšÜ
))

53  ((
__mšÜ
 & 0xffè| ((
__majÜ
 & 0xfff) << 8)

54 | (((è(
__mšÜ
 & ~0xff)) << 12)

55 | (((è(
__majÜ
 & ~0xfff)) << 32));

56 
	}
}

58 
	g__END_DECLS


61 
	#majÜ
(
dev
è
	`gnu_dev_majÜ
 (dev)

	)

62 
	#mšÜ
(
dev
è
	`gnu_dev_mšÜ
 (dev)

	)

63 
	#makedev
(
maj
, 
mš
è
	`gnu_dev_makedev
 (maj, mš)

	)

	@/usr/include/bits/select.h

18 #iâdeà
_SYS_SELECT_H


22 
	~<b™s/wÜdsize.h
>

25 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

27 #ià
__WORDSIZE
 == 64

28 
	#__FD_ZERO_STOS
 "¡osq"

	)

30 
	#__FD_ZERO_STOS
 "¡o¦"

	)

33 
	#__FD_ZERO
(
fd¥
) \

35 
__d0
, 
__d1
; \

36 
__asm__
 
	`__vŞ©e__
 ("şd;„•; " 
__FD_ZERO_STOS
 \

37 : "=c" (
__d0
), "=D" (
__d1
) \

38 : "a" (0), "0" ( (
fd_£t
) \

39 /  (
__fd_mask
)), \

40 "1" (&
	`__FDS_BITS
 (
fd¥
)[0]) \

42 } 0)

	)

48 
	#__FD_ZERO
(
£t
) \

50 
__i
; \

51 
fd_£t
 *
__¬r
 = (
£t
); \

52 
__i
 = 0; __˜<  (
fd_£t
è/  (
__fd_mask
); ++__i) \

53 
	`__FDS_BITS
 (
__¬r
)[
__i
] = 0; \

54 } 0)

	)

58 
	#__FD_SET
(
d
, 
£t
) \

59 ((è(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] |ğ
	`__FD_MASK
 (d)))

	)

60 
	#__FD_CLR
(
d
, 
£t
) \

61 ((è(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] &ğ~
	`__FD_MASK
 (d)))

	)

62 
	#__FD_ISSET
(
d
, 
£t
) \

63 ((
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] & 
	`__FD_MASK
 (d)è!ğ0)

	)

	@/usr/include/bits/select2.h

19 #iâdeà
_SYS_SELECT_H


24 
__fd–t_chk
 (
__d
);

25 
	$__fd–t_w¬n
 (
__d
)

26 
	`__w¬Ç‰r
 ("bit outside of fd_set selected");

27 #undeà
__FD_ELT


28 
	#__FD_ELT
(
d
) \

29 
__ex‹nsiÚ__
 \

30 ({ 
__d
 = (
d
); \

31 (
	`__butš_cÚ¡ªt_p
 (
__d
) \

32 ? (0 <ğ
__d
 && __d < 
__FD_SETSIZE
 \

33 ? (
__d
 / 
__NFDBITS
) \

34 : 
	`__fd–t_w¬n
 (
__d
)) \

35 : 
	`__fd–t_chk
 (
__d
)); 
	}
})

	)

	@/usr/include/bits/sigset.h

19 #iâdef 
_SIGSET_H_ty³s


20 
	#_SIGSET_H_ty³s
 1

	)

22 
	t__sig_©omic_t
;

26 
	#_SIGSET_NWORDS
 (1024 / (8 *  ()))

	)

29 
	m__v®
[
_SIGSET_NWORDS
];

30 } 
	t__sig£t_t
;

41 #ià!
defšed
 
_SIGSET_H_âs
 && defšed 
_SIGNAL_H


42 
	#_SIGSET_H_âs
 1

	)

44 #iâdeà
_EXTERN_INLINE


45 
	#_EXTERN_INLINE
 
__ex‹º_šlše


	)

49 
	#__sigmask
(
sig
) \

50 (((è1è<< (((
sig
è- 1è% (8 *  ())))

	)

53 
	#__sigwÜd
(
sig
è(((sigè- 1è/ (8 *  ()))

	)

55 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

56 
	#__sigem±y£t
(
£t
) \

57 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

58 
sig£t_t
 *
__£t
 = (
£t
); \

59 --
__út
 >ğ0è
__£t
->
__v®
[__cnt] = 0; \

60 0; }))

	)

61 
	#__sigfl£t
(
£t
) \

62 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

63 
sig£t_t
 *
__£t
 = (
£t
); \

64 --
__út
 >ğ0è
__£t
->
__v®
[__cnt] = ~0UL; \

65 0; }))

	)

67 #ifdeà
__USE_GNU


71 
	#__sigi£m±y£t
(
£t
) \

72 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

73 cÚ¡ 
sig£t_t
 *
__£t
 = (
£t
); \

74 
__»t
 = 
__£t
->
__v®
[--
__út
]; \

75 !
__»t
 && --
__út
 >= 0) \

76 
__»t
 = 
__£t
->
__v®
[
__út
]; \

77 
__»t
 =ğ0; }))

	)

78 
	#__sigªd£t
(
de¡
, 
Ëá
, 
right
) \

79 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

80 
sig£t_t
 *
__de¡
 = (
de¡
); \

81 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

82 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

83 --
__út
 >= 0) \

84 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

85 & 
__right
->
__v®
[
__út
]); \

86 0; }))

	)

87 
	#__sigÜ£t
(
de¡
, 
Ëá
, 
right
) \

88 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

89 
sig£t_t
 *
__de¡
 = (
de¡
); \

90 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

91 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

92 --
__út
 >= 0) \

93 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

94 | 
__right
->
__v®
[
__út
]); \

95 0; }))

	)

102 
__sigismemb”
 (cÚ¡ 
__sig£t_t
 *, );

103 
__sigadd£t
 (
__sig£t_t
 *, );

104 
__sigd–£t
 (
__sig£t_t
 *, );

106 #ifdeà
__USE_EXTERN_INLINES


107 
	#__SIGSETFN
(
NAME
, 
BODY
, 
CONST
) \

108 
_EXTERN_INLINE
 \

109 
	`NAME
 (
CONST
 
__sig£t_t
 *
__£t
, 
__sig
) \

111 
__mask
 = 
	`__sigmask
 (
__sig
); \

112 
__wÜd
 = 
	`__sigwÜd
 (
__sig
); \

113  
BODY
; \

114 }

	)

116 
__SIGSETFN
 (
__sigismemb”
, (
__£t
->
__v®
[
__wÜd
] & 
__mask
) ? 1 : 0, const)

117 
__SIGSETFN
 (
__sigadd£t
, ((
__£t
->
__v®
[
__wÜd
] |ğ
__mask
), 0), )

118 
__SIGSETFN
 (
__sigd–£t
, ((
__£t
->
__v®
[
__wÜd
] &ğ~
__mask
), 0), )

120 #undeà
__SIGSETFN


	@
1
.
1
/usr/include
78
1487
benchmark.cpp
bitbase.cpp
bitboard.cpp
bitboard.h
endgame.cpp
endgame.h
evaluate.cpp
evaluate.h
main.cpp
material.cpp
material.h
misc.cpp
misc.h
movegen.cpp
movegen.h
movepick.cpp
movepick.h
pawns.cpp
pawns.h
position.cpp
position.h
psqt.cpp
search.cpp
search.h
syzygy/tbprobe.cpp
syzygy/tbprobe.h
thread.cpp
thread.h
thread_win32.h
timeman.cpp
timeman.h
tt.cpp
tt.h
types.h
uci.cpp
uci.h
ucioption.cpp
/usr/include/fcntl.h
/usr/include/sys/mman.h
/usr/include/sys/stat.h
/usr/include/unistd.h
/usr/include/bits/confname.h
/usr/include/bits/environments.h
/usr/include/bits/fcntl.h
/usr/include/bits/fcntl2.h
/usr/include/bits/mman.h
/usr/include/bits/posix_opt.h
/usr/include/bits/stat.h
/usr/include/bits/types.h
/usr/include/bits/unistd.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/time.h
/usr/include/bits/fcntl-linux.h
/usr/include/bits/mman-linux.h
/usr/include/bits/time.h
/usr/include/bits/typesizes.h
/usr/include/bits/wordsize.h
/usr/include/ctype.h
/usr/include/gnu/stubs.h
/usr/include/stdc-predef.h
/usr/include/sys/cdefs.h
/usr/include/xlocale.h
/usr/include/bits/timex.h
/usr/include/bits/uio.h
/usr/include/endian.h
/usr/include/gnu/stubs-32.h
/usr/include/gnu/stubs-64.h
/usr/include/bits/byteswap.h
/usr/include/bits/endian.h
/usr/include/sys/types.h
/usr/include/bits/byteswap-16.h
/usr/include/bits/pthreadtypes.h
/usr/include/sys/select.h
/usr/include/sys/sysmacros.h
/usr/include/bits/select.h
/usr/include/bits/select2.h
/usr/include/bits/sigset.h
